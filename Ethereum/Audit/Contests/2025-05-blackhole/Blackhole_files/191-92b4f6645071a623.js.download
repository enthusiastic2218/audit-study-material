(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[191],{35883:function(){},35385:function(e,s,t){"use strict";t.d(s,{dr:function(){return j},SE:function(){return G}});var a=t(57437),r=t(15994),n=t(49553),i=t(4212),c=t(54821);let u=async(e,s,t,a)=>{let r=s.map(e=>e.uid);if((await fetch("api/functions/update-user-notifications",{method:"PUT",headers:{"Content-Type":"application/json","C4-User":a},body:JSON.stringify({notificationUids:r,notificationStatus:t})})).ok){let a={...e};return s.forEach(e=>{switch(e.status){case c.d.UNREAD:let s=a.unread.filter(s=>s.uid!==e.uid);a.unread=s;break;case c.d.ARCHIVED:let r=a.archived.filter(s=>s.uid!==e.uid);a.archived=r}switch(t){case c.d.UNREAD:a.unread.push({...e,status:t}),a.unread.sort((e,s)=>e.createdAt>s.createdAt?-1:1);break;case c.d.ARCHIVED:a.archived.push({...e,status:t}),a.archived.sort((e,s)=>e.createdAt>s.createdAt?-1:1)}for(let s=0;s<a.all.length;s++){let r=a.all[s];if(a.all[s].uid===e.uid){a.all[s]={...r,status:t};break}}}),a}};var o=t(70919);let l={PRE_MISSING_HANDLE:"Missing username in request.",SUCCESS:"V0 User data retrieved.",UNEXPECTED:"Unexpected error. Please try again.",EXC_SERVER_ERROR:"An error occurred while processing your request. Please try again later or contact support if the problem persists."};var d=t(9717),m=t(10677),g=t(56696);let y=async(e,s)=>{let t="".concat(o.Z.functionsBaseUrl,"/get-user?id=").concat(e);if(!e)return{success:!1,message:l.PRE_MISSING_HANDLE,userV0:m.vE};try{let e=await fetch(t,{method:"GET",signal:null==s?void 0:s.signal});if(200===e.status){let{data:s}=await (0,d.cX)(e),t={image:s.imageUrl||void 0,link:s.link||void 0,teams:m.Vd,notifications:m.WP,linkedAudits:[]};return{success:!0,message:l.SUCCESS,userV0:t}}if(401===e.status){let{data:s}=await (0,d.cX)(e);return{success:!1,message:s.error,userV0:m.vE}}if(405===e.status){let{data:s}=await (0,d.rw)(e);return{success:!1,message:s,userV0:m.vE}}let a="".concat(l.UNEXPECTED," - Status: ").concat(e.status);return{success:!1,message:a,userV0:m.vE}}catch(e){return(0,d.FO)(e),{success:!1,message:l.EXC_SERVER_ERROR,userV0:m.vE}}},f=async e=>{try{let s=await fetch("/api/functions/get-user-notifications",{cache:"no-cache",method:"GET",signal:null==e?void 0:e.signal});if(s.ok){let e=await s.json();return{success:!0,message:"Fetch notifications success",notifications:e}}let t="Status: ".concat(s.status);return{success:!1,message:t,notifications:[]}}catch(e){return(0,d.FO)(e),{success:!1,message:g.t7,notifications:[]}}};var h=t(94536),p=t(99221),E=t(85624),A=t(30675);let R=async(e,s)=>{let t=g.$r;return s.payment&&(s.payment.ethereum||s.payment.polygon||s.payment.arbitrum||s.payment.optimism)?s.payment.ethereum&&(0,E.YN)(s.payment.ethereum).length>0?(0,p.j)(!1,t.PRE_INVALID_ETH_ADDR):s.payment.polygon&&(0,E.YN)(s.payment.polygon).length>0?(0,p.j)(!1,t.PRE_INVALID_POLY_ADDR):s.payment.arbitrum&&(0,E.YN)(s.payment.arbitrum).length>0?(0,p.j)(!1,t.PRE_INVALID_ARB_ADDR):s.payment.optimism&&(0,E.YN)(s.payment.optimism).length>0?(0,p.j)(!1,t.PRE_INVALID_OP_ADDR):await (0,p.l)({messages:t,url:"/api/v1/teams/".concat(e),method:"PUT",payload:s}):(0,p.j)(!1,t.PRE_MISSING_DETAILS)},w=async e=>{let s=g.cL;try{let t=await fetch("/api/v1/users/@me/teams",{method:"GET",signal:null==e?void 0:e.signal}),{ok:a,data:n}=await (0,d.Ro)(t);if(a&&(0,d.TC)(n)){let e=n.map(e=>{let s=e.paymentAddresses&&e.paymentAddresses.find(e=>e.chainId===A.ZZ.ethereum),t=e.paymentAddresses&&e.paymentAddresses.find(e=>e.chainId===A.ZZ.polygon),a=e.paymentAddresses&&e.paymentAddresses.find(e=>e.chainId===A.ZZ.arbitrum),r=e.paymentAddresses&&e.paymentAddresses.find(e=>e.chainId===A.ZZ.optimism);return{uid:e.uid,username:e.handle,image:e.image||void 0,link:e.link||void 0,ethereumAddress:(null==s?void 0:s.address)||"",polygonAddress:(null==t?void 0:t.address)||"",arbitrumAddress:(null==a?void 0:a.address)||"",optimismAddress:(null==r?void 0:r.address)||"",members:e.members.map(e=>e.handle),signal:e.signal}}).sort((e,s)=>e.username.localeCompare(s.username));return{success:!0,message:(0,d.e6)(s,r.yY.SUCCESS),teamData:e}}if((0,d.XD)(n))return{success:!1,message:(0,d.e6)(s,n.code),teamData:m.Vd};return{success:!1,message:g.NS,teamData:m.Vd}}catch(e){return(0,d.FO)(e),{success:!1,message:g.t7,teamData:m.Vd}}};var S=t(27485),v=t(3641),_=t(34958);let I=(e,s,t,a)=>new _.SiweMessage({domain:window.location.host,address:e,statement:s,uri:window.location.origin,version:"1",chainId:t,nonce:a});var C=t(99376),D=t(2265),P=t(7261),T=t(64314),N=t(93662),U=t(60542),L=t(99778),b=t(19975),k=t(59233);let O=!1,V=(0,D.createContext)({currentUser:{...m.bQ,...m.vE},register:async()=>({success:!1,message:""}),loginPassword:async()=>({success:!1,message:""}),loginWallet:async()=>({success:!1,message:""}),logout:async()=>({success:!1,message:""}),connectWallet:async()=>({success:!1,message:""}),disconnectWallet:async()=>({success:!1,message:""}),passwordResetReq:async()=>({success:!1,message:""}),passwordResetVerify:async()=>({success:!1,message:""}),getUserData:async()=>({success:!1,message:""}),changePaymentAddresses:async()=>({success:!1,message:""}),changeTeamPaymentAddresses:async()=>({success:!1,message:""}),emailChangeReq:async()=>({success:!1,message:"",needsTokenUpgrade:!1}),emailChangeAgain:async()=>({success:!1,message:""}),emailChangeFinal:async()=>({success:!1,message:""}),tryRedirect:async()=>{},verifyDiscord:async()=>({success:!1,message:""}),verifyGithub:async()=>({success:!1,message:""}),updateHandle:async()=>({success:!1,message:""}),addAuthWallet:async()=>({success:!1,message:"",needsTokenUpgrade:!1}),deleteAuthWallet:async()=>({success:!1,message:"",needsTokenUpgrade:!1}),getNonce:async()=>({success:!1,message:""}),checkSensitiveAction:async()=>!1,updateNotifications:async()=>void 0,acceptPolicy:async()=>({success:!1,message:""}),appLayout:!1,hasTriedLogin:!1,hasLoginHistory:!1});function G(){let e=(0,D.useContext)(V);if(void 0===e)throw Error("useUserContext must be used within a UserProvider");return e}let j=e=>{let{children:s,hasLoginHistory:t}=e,[o,l]=(0,D.useState)({...m.bQ,...m.vE}),[d,p]=(0,D.useState)(!1),[E,A]=(0,D.useState)(!1),_=(0,N.m)(),{connectAsync:G}=(0,U.$)(),{disconnectAsync:j}=(0,L.q)(),{signMessageAsync:F}=(0,b.Q)(),{switchChainAsync:M}=(0,k.o)(),H=(0,C.useRouter)();(0,D.useEffect)(()=>{O||(O=!0,K())},[]),(0,D.useEffect)(()=>{o.discordVerified&&o.emailVerified&&(!o.registrationSubmitted||o.token.scope===r.ge.restricted)&&eu()},[o.discordVerified,o.emailVerified,o.registrationSubmitted,o.token.scope]);let Y=()=>{l({...m.bQ,...m.vE}),p(!1),A(!0)},X=async(e,s)=>{if(_.address){_.chainId!==T.R.id&&await (0,v.Hi)(()=>M({chainId:T.R.id}));let s=I(_.address,"Register with Code4rena using your EVM wallet.",T.R.id),{result:t}=await (0,v.Hi)(()=>F({message:s.prepareMessage()}));if(!t)return P.Am.error(g.rG.PRE_SIGN_FAILED),{success:!1,message:g.rG.PRE_SIGN_FAILED};e.auth={message:s,signature:t}}let t=await (0,h.nu)(e,s);return t.success?(Q(),P.Am.success(t.message),{success:!0,message:t.message}):(P.Am.error(t.message),{success:!1,message:t.message})},Z=async()=>{let e=g.IR;if(_.chainId!==T.R.id&&await (0,v.Hi)(()=>M({chainId:T.R.id})),!_.address)return P.Am.error(e.PRE_WALLET_CONNECT),{success:!1,message:e.PRE_WALLET_CONNECT};let{success:s,message:t,nonce:a}=await (0,h.ky)({address:_.address});if(!s||!a)return P.Am.error(t),{success:s,message:t};let r=I(_.address,"Sign into Code4rena with your EVM wallet.",T.R.id,a),{result:n}=await (0,v.Hi)(()=>F({message:r.prepareMessage()}));if(!n)return P.Am.error(e.PRE_SIGN_FAILED),{success:!1,message:e.PRE_SIGN_FAILED};let i=await (0,h.GK)({message:r,signature:n});return i.success?(Q(),P.Am.success(i.message),i):(P.Am.error(i.message),{success:!1,message:i.message})},q=async(e,s)=>{let t=g.IR;if(!e||!s)return P.Am.error(t.PRE_MISSING_DETAILS),{success:!1,message:t.PRE_MISSING_DETAILS};let{success:a,message:r,nonce:n}=await (0,h.ky)({handle:e});if(!a||!n)return P.Am.error(r),{success:a,message:r};let i=await (0,h.XE)({handle:e,password:s,nonce:n});return i.success?(Q(),P.Am.success(i.message),i):(P.Am.error(i.message),{success:!1,message:i.message})},x=async()=>{_.isConnected&&await (0,v.Hi)(()=>j());let{success:e,message:s}=await (0,h.g_)();return e?(Q(),P.Am.success(s)):P.Am.error(s),{success:e,message:s}},B=async e=>{await (0,v.Hi)(()=>j());let{result:s}=await (0,v.Hi)(()=>G({chainId:T.R.id,connector:e}));return s&&s.accounts&&0!==s.accounts.length?(P.Am.success("".concat(e.name," wallet connected! (").concat((0,S.Xn)(s.accounts[0]),")")),{success:!0,message:""}):(P.Am.error(m.yI.walletConnectFail),{success:!1,message:m.yI.walletConnectFail})},W=async e=>{if(!_.isConnected)return{success:!1,message:m.yI.noWallet};await (0,v.Hi)(()=>j());let s=m.yI.walletDisconnect;return e||P.Am.success(s),{success:!0,message:s}},z=async e=>{let{success:s,message:t}=await (0,h.vy)({email:e});return s?P.Am.success(t):P.Am.error(t),{success:s,message:t}},J=async(e,s)=>{let{success:t,message:a}=await (0,h.TC)({token:e,password:s});return t?P.Am.success(a):P.Am.error(a),{success:t,message:a}},K=async()=>{let{success:e,message:s,userV1:t}=await (0,h.Pq)();if(!e||!t)return Y(),{success:e,message:s};l({...m.vE,...t}),p(!0),(!t.token.iat||Date.now()/1e3-t.token.iat>600)&&(0,h.mX)();let{success:a,message:r}=await $(t);return{success:a,message:r}},Q=async()=>{let{success:e,message:s,userV1:t}=await (0,h.Pq)();if(!e||!t||!t.username)return Y(),{success:e,message:s};l({...m.vE,...t}),p(!0);let{success:a,message:r}=await $(t);return{success:a,message:r}},$=async e=>{var s,t;let a=new AbortController,r=[y(e.username,{signal:a.signal}),(0,h.fc)({signal:a.signal}),w({signal:a.signal}),f({signal:a.signal}),(0,h.l$)({perPage:50,page:1,sortBy:"startTime",sortOrder:i.A.desc,statuses:[n.D2.Booking,n.D2.PreAudit,n.D2.Active,n.D2.LiveJudging,n.D2.Triage,n.D2.Review,n.D2.Restricted,n.D2.Judging,n.D2.PJQA,n.D2.JudgingComplete,n.D2.Awarding,n.D2.Reporting,n.D2.Completed]},{signal:a.signal})],u=setTimeout(()=>a.abort("request time limit exceeded"),5e3),o=await Promise.allSettled(r);clearTimeout(u);let{userV0:d,message:g}="fulfilled"===o[0].status?o[0].value:{userV0:m.vE,message:""},p="fulfilled"===o[1].status?o[1].value.userLinks:{discord:null,github:null},E="fulfilled"===o[2].status?o[2].value.teamData:[],R="fulfilled"===o[3].status?o[3].value.notifications:[],S="fulfilled"===o[4].status&&null!==(t=null===(s=o[4].value.res)||void 0===s?void 0:s.data.audits)&&void 0!==t?t:[];return l({...e,...d,teams:E,links:p,notifications:R.sort((e,s)=>c.d.UNREAD.localeCompare(e.status)-c.d.UNREAD.localeCompare(s.status)||new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()),linkedAudits:S}),A(!0),{success:!0,message:g}},ee=async e=>{let{success:s,message:t}=await (0,h.wI)(e);return s?(Q(),P.Am.success(t),{success:s,message:t}):(P.Am.error(t),{success:!1,message:t})},es=async(e,s)=>{let{success:t,message:a}=await R(e,s);return t?(Q(),P.Am.success(a),{success:t,message:a}):(P.Am.error(a),{success:!1,message:a})},et=async e=>{let{success:s,message:t,needsTokenUpgrade:a}=await (0,h.Jr)(e);return s?(Q(),P.Am.success(t)):P.Am.error(t),{success:s,message:t,needsTokenUpgrade:a}},ea=async()=>{let{success:e,message:s}=await (0,h.PR)();return e?P.Am.success(s):P.Am.error(s),{success:e,message:s}},er=async e=>{let{success:s,message:t}=await (0,h.tl)(e);return s?(Q(),P.Am.success(t)):P.Am.error(t),{success:s,message:t}},en=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",s=e=>!!(e&&e.startsWith("/"))&&Array.from(m.zP).some(s=>new RegExp("^".concat(s,"$")).test(e)),t=new URLSearchParams(window.location.search),a=t.get("redirect");t.delete("redirect"),(a=s(a)?a:null)||(a=s(e)?e:"/"),H.push("".concat(a,"?").concat(t.toString()))},ei=async e=>{let{success:s,message:t}=await (0,h.L4)(e);return s?(Q(),P.Am.success(t)):P.Am.error(t),{success:s,message:t}},ec=async e=>{let{success:s,message:t}=await (0,h.Jy)({code:e});return s?(Q(),P.Am.success(t)):P.Am.error(t),{success:s,message:t}},eu=async()=>{let{success:e,message:s}=await (0,h.TT)();return e?(Q(),P.Am.success(s)):P.Am.error(s),{success:e,message:s}},eo=async e=>{let{success:s,message:t}=await (0,h.qt)({handle:e});return s?(Q(),P.Am.success(t)):P.Am.error(t),{success:s,message:t}},el=async()=>{let e=g.mv;if(_.chainId!==T.R.id&&await (0,v.Hi)(()=>M({chainId:T.R.id})),!_.address)return P.Am.error(e.PRE_WALLET_CONNECT),{success:!1,message:e.PRE_WALLET_CONNECT,needsTokenUpgrade:!1};let{success:s,message:t,nonce:a}=await (0,h.ky)({handle:o.username});if(!s||!a)return P.Am.error(t),{success:s,message:t,needsTokenUpgrade:!1};let r=I(_.address,"Sign into Code4rena with your EVM wallet.",T.R.id,a),{result:n}=await (0,v.Hi)(()=>F({message:r.prepareMessage()}));if(!n)return P.Am.error(e.PRE_SIGN_FAILED),{success:!1,message:e.PRE_SIGN_FAILED,needsTokenUpgrade:!1};let i=await (0,h.FG)({auth:{message:r,signature:n}});return i.success?(Q(),P.Am.success(i.message)):P.Am.error(i.message),i},ed=async e=>{let s=await (0,h.bf)({address:e});return s.success?(Q(),P.Am.success(s.message)):P.Am.error(s.message),s},em=async()=>_.address?await (0,h.ky)({address:_.address}):{success:!1,message:"No wallet connected."},eg=async(e,s)=>{if(e>600)return console.error("checkSensitiveAction: input > max seconds"),!1;let t=[r.ge.login,r.ge.restricted],a=!1;if(o.token.iat&&o.token.scope){let s=Date.now()/1e3-o.token.iat<600-e,r=t.includes(o.token.scope);a=s&&r}return!!a||(s&&(P.Am.error(m.yI.loginAgain),H.push("/login?redirect=".concat(s))),!1)},ey=async(e,s,t)=>{o.username&&o.isLoggedIn&&(await u(e,s,t,o.username)?Q():P.Am.error("An error occurred while marking your notification as ".concat(t,".")))},ef=async e=>{let{success:s,message:t}=await (0,h.Pb)();return s?(Q(),e||P.Am.success(t)):e||P.Am.error(t),{success:s,message:t}};return(0,a.jsx)(V.Provider,{value:{currentUser:o,register:X,loginWallet:Z,loginPassword:q,logout:x,connectWallet:B,disconnectWallet:W,passwordResetReq:z,passwordResetVerify:J,getUserData:Q,changePaymentAddresses:ee,changeTeamPaymentAddresses:es,emailChangeReq:et,emailChangeAgain:ea,emailChangeFinal:er,tryRedirect:en,verifyDiscord:ei,verifyGithub:ec,updateHandle:eo,addAuthWallet:el,deleteAuthWallet:ed,getNonce:em,checkSensitiveAction:eg,updateNotifications:ey,acceptPolicy:ef,appLayout:d,hasTriedLogin:E,hasLoginHistory:t},children:s})}},54821:function(e,s,t){"use strict";var a,r;t.d(s,{d:function(){return a}}),(r=a||(a={})).UNREAD="unread",r.READ="read",r.ARCHIVED="archived",r.DELETED="deleted"},99221:function(e,s,t){"use strict";t.d(s,{j:function(){return n},l:function(){return u}});var a=t(9717),r=t(15994);let n=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{success:e,message:s,needsTokenUpgrade:t}},i=e=>e&&"object"==typeof e&&"code"in e&&"string"==typeof e.code,c=e=>e&&"object"==typeof e&&"info"in e&&Array.isArray(e.info.params),u=async e=>{let{messages:s,url:t,method:u,payload:o,handleErr:l,headers:d}=e;try{let e=o?await (0,a.rd)(t,u,o,d):await (0,a.qL)(t,u,d),{ok:g,data:y}=await (0,a.Ro)(e);if(g)return n(!0,(0,a.e6)(s,r.yY.SUCCESS));if(i(y)){var m;if(l){let e;if(e=c(y)?l(y.code,y.info.params[0]):l(y.code))return e}return n(!1,null!==(m=s[y.code])&&void 0!==m?m:s.UNEXPECTED)}return n(!1,s.UNEXPECTED)}catch(e){return(0,a.FO)(e),n(!1,s.EXC_SERVER_ERROR)}}},94536:function(e,s,t){"use strict";t.d(s,{FG:function(){return k},GK:function(){return f},Jr:function(){return P},Jy:function(){return L},L4:function(){return U},Oq:function(){return F},PR:function(){return T},Pb:function(){return V},Pq:function(){return _},Ps:function(){return M},QG:function(){return j},TC:function(){return R},TT:function(){return E},XE:function(){return h},bf:function(){return O},dE:function(){return H},fc:function(){return D},g_:function(){return p},ky:function(){return g},l$:function(){return G},mX:function(){return S},nu:function(){return v},qt:function(){return b},tl:function(){return N},uB:function(){return X},uD:function(){return Y},vy:function(){return A},wI:function(){return I}});var a=t(70919),r=t(56696),n=t(10677),i=t(9717),c=t(85624),u=t(99221),o=t(15994),l=t(49553),d=t(86382);let m=(e,s)=>[o.yY.ERR_UNAUTHORIZED,o.yY.PRE_NOT_AUTHORIZED].includes(e)?(0,u.j)(!1,s,!0):(0,u.j)(!1,s,!1),g=async e=>{let{address:s,handle:t}=e,a=r.QJ;if(!s&&!t)return{success:!1,message:a.PRE_MISSING_CHECK,nonce:null};try{let e=await fetch("/api/v1/users/nonce?".concat(s?"address=".concat(s):"handle=".concat(t)),{method:"GET"}),{ok:r,data:n}=await (0,i.Ro)(e);if(r&&(0,i.TC)(n))return{success:!0,message:a.SUCCESS,nonce:n.nonce};if((0,i.XD)(n)){if(n.code===o.yY.ERR_NOT_FOUND){let e=(0,i.$e)(a[n.code],s?"address":"username");return{success:!1,message:e,nonce:null}}return{success:!1,message:(0,i.e6)(a,n.code),nonce:null}}return{success:!1,message:a.UNEXPECTED,nonce:null}}catch(e){return(0,i.FO)(e),{success:!1,message:a.EXC_SERVER_ERROR,nonce:null}}},y=async(e,s)=>{let t=r.IR;return e&&!1!==["wallet","password"].includes(e)?await (0,u.l)({messages:t,url:"/api/v1/users/session?type=".concat(e),method:"POST",payload:s}):(0,u.j)(!1,t.PRE_MISSING_DETAILS)},f=async e=>{let s=r.IR;return e.message&&e.signature?y("wallet",e):(0,u.j)(!1,s.PRE_MISSING_DETAILS)},h=async e=>{let s=r.IR;return e.handle&&e.password&&e.nonce?y("password",e):(0,u.j)(!1,s.PRE_MISSING_DETAILS)},p=async()=>{let e=r.TL,s=[o.yY.PRE_NOT_AUTHORIZED,o.yY.ERR_UNAUTHORIZED,o.yY.ERR_NOT_FOUND];try{let t=await fetch("/api/v1/users/@me/session",{method:"DELETE"}),{ok:a,data:r}=await (0,i.Ro)(t);if(a)return{success:!0,message:e.SUCCESS};if((0,i.XD)(r)){if(s.includes(r.code))return{success:!0,message:(0,i.e6)(e,r.code)};if(r.code===o.yY.EXC_SERVER_ERROR)return{success:!1,message:e.EXC_SERVER_ERROR}}return{success:!0,message:e.ERR_GENERAL}}catch(s){return(0,i.FO)(s),{success:!1,message:e.EXC_SERVER_ERROR}}},E=async()=>{let e=r.bc;return await (0,u.l)({messages:e,url:"/api/v1/users/@me/session",method:"PUT"})},A=async e=>{let s=r.JQ;if(!e.email)return(0,u.j)(!1,s.PRE_MISSING_CHECK);let t="".concat(a.Z.v1ApiBaseUrl,"/users/password/reset");return await (0,u.l)({messages:s,url:t,method:"POST",payload:e})},R=async e=>{let s=r.LU;if(!e.token||!e.password)return(0,u.j)(!1,s.PRE_MISSING_CHECK);let t="".concat(a.Z.v1ApiBaseUrl,"/users/password/verify");return await (0,u.l)({messages:s,url:t,method:"POST",payload:e})},w=e=>{var s,t,a,r;return{uid:e.uid,username:e.handle,emailAddress:e.email,registrationSubmitted:e.registrationSubmitted,identityVerificationStatus:e.identityVerificationStatus,emailVerified:e.emailVerified,discordVerified:e.discordVerified,paymentAddresses:e.paymentAddresses,authAddresses:e.authAddresses,isLoggedIn:!0,isCertified:e.isCertified,taxReportingStatus:e.taxReportingStatus||null,handlesPendingConfirmation:e.handlesPendingConfirmation,token:{scope:null!==(a=null===(s=e.token)||void 0===s?void 0:s.scope)&&void 0!==a?a:null,iat:null!==(r=null===(t=e.token)||void 0===t?void 0:t.iat)&&void 0!==r?r:null},links:{discord:null,github:null},roles:e.roles,signal:e.signal}},S=async()=>{let e=r.mP;return await (0,u.l)({messages:e,url:"/api/v1/users/@me/token/refresh",method:"GET"})},v=async(e,s)=>{let t=r.rG;return e.handle&&e.password&&e.email?await (0,u.l)({messages:t,url:"/api/v1/users/register",method:"POST",payload:e,handleErr:(s,a)=>{if(s===o.yY.ERR_CONFLICT&&a){var r,n;let c=null!==(n=({auth:null===(r=e.auth)||void 0===r?void 0:r.message.address,handle:e.handle,email:e.email})[a])&&void 0!==n?n:"";if(!c)return(0,u.j)(!1,(0,i.e6)(t,s));let o=(0,i.$e)(t[s][a],c);return(0,u.j)(!1,o)}return(0,u.j)(!1,(0,i.e6)(t,s))},headers:{Authorization:s}}):{success:!1,message:t.PRE_MISSING_CHECK}},_=async()=>{let e=r.X5,s=n.bQ;try{let t=await fetch("/api/v1/users/@me",{method:"GET"}),{ok:a,data:n}=await (0,i.Ro)(t);if(a&&(0,i.TC)(n)){let s=w(n);return{success:!0,message:(0,i.e6)(e,o.yY.SUCCESS),userV1:s}}if((0,i.XD)(n))return{success:!1,message:(0,i.e6)(e,n.code),userV1:s};return{success:!1,message:r.NS,userV1:s}}catch(e){return(0,i.FO)(e),{success:!1,message:r.t7,userV1:s}}},I=async e=>{let s=r.uw;return e.payment&&(e.payment.ethereum||e.payment.polygon||e.payment.arbitrum||e.payment.optimism)?e.payment.ethereum&&(0,c.YN)(e.payment.ethereum).length>0?(0,u.j)(!1,s.PRE_INVALID_ETH_ADDR):e.payment.polygon&&(0,c.YN)(e.payment.polygon).length>0?(0,u.j)(!1,s.PRE_INVALID_POLY_ADDR):e.payment.arbitrum&&(0,c.YN)(e.payment.arbitrum).length>0?(0,u.j)(!1,s.PRE_INVALID_ARB_ADDR):e.payment.optimism&&(0,c.YN)(e.payment.optimism).length>0?(0,u.j)(!1,s.PRE_INVALID_OP_ADDR):await (0,u.l)({messages:s,url:"/api/v1/users/@me",method:"PUT",payload:e}):(0,u.j)(!1,s.PRE_MISSING_DETAILS)},C=e=>{var s,t;return{discord:null!==(s=e.find(e=>"Discord"===e.type))&&void 0!==s?s:null,github:null!==(t=e.find(e=>"Github"===e.type))&&void 0!==t?t:null}},D=async e=>{let s=r.vm;try{let t=await fetch("/api/v1/users/@me/links",{method:"GET",signal:null==e?void 0:e.signal}),{ok:a,data:n}=await (0,i.Ro)(t);if(a&&(0,i.TC)(n)){let e=C(n);return{success:!0,message:(0,i.e6)(s,o.yY.SUCCESS),userLinks:e}}if((0,i.XD)(n))return{success:!1,message:(0,i.e6)(s,n.code),userLinks:{discord:null,github:null}};return{success:!1,message:r.NS,userLinks:{discord:null,github:null}}}catch(e){return(0,i.FO)(e),{success:!1,message:r.t7,userLinks:{discord:null,github:null}}}},P=async e=>{let s=r.Fz;return e.email?await (0,u.l)({messages:s,url:"/api/v1/users/@me/email",method:"PUT",payload:e,handleErr:(e,t)=>m(e,(0,i.e6)(s,e))}):(0,u.j)(!1,s.PRE_MISSING_CHECK,!1)},T=async()=>{let e=r.kp;return await (0,u.l)({messages:e,url:"/api/v1/users/@me/email/verify",method:"POST"})},N=async e=>{let s=r.ab;return e.token?await (0,u.l)({messages:s,url:"/api/v1/users/email/verify",method:"PUT",payload:e}):(0,u.j)(!1,s.PRE_MISSING_CHECK)},U=async e=>{let s=r.BE;return e?await (0,u.l)({messages:s,url:"/api/v1/users/@me/discord/verify",method:"PUT",payload:{code:e}}):(0,u.j)(!1,s.PRE_MISSING_CHECK)},L=async e=>{let s=r.r8;return e.code?await (0,u.l)({messages:s,url:"/api/v1/users/@me/github/verify",method:"PUT",payload:e}):(0,u.j)(!1,s.PRE_MISSING_CHECK)},b=async e=>{let s=r.u4;return e.handle?await (0,u.l)({messages:s,url:"/api/v1/users/@me/handle",method:"PUT",payload:e,handleErr:(t,a)=>{if(t===o.yY.ERR_CONFLICT){let a=(0,i.$e)(s[t],e.handle);return(0,u.j)(!1,a)}return(0,u.j)(!1,(0,i.e6)(s,t))}}):(0,u.j)(!1,s.PRE_MISSING_CHECK)},k=async e=>{let s=r.mv;return e.auth&&e.auth.signature&&e.auth.message?await (0,u.l)({messages:s,url:"/api/v1/users/@me/auth-wallet",method:"PUT",payload:e,handleErr:(e,t)=>m(e,(0,i.e6)(s,e))}):(0,u.j)(!1,s.PRE_MISSING_DETAILS,!1)},O=async e=>{let s=r.yg;return e.address?await (0,u.l)({messages:s,url:"/api/v1/users/@me/auth-wallet",method:"DELETE",payload:e,handleErr:(e,t)=>m(e,(0,i.e6)(s,e))}):(0,u.j)(!1,s.PRE_MISSING_DETAILS)},V=async()=>{let e=r.rc;return await (0,u.l)({messages:e,url:"/api/v1/users/@me/policy",method:"POST"})},G=async(e,s)=>{let t=r.CL,a="/api/v1/users/@me/audits?perPage=".concat(e.perPage,"&page=").concat(e.page);a+=(e.sortBy?"&sortBy=".concat(encodeURIComponent(e.sortBy)):"")+(e.sortOrder?"&sortOrder=".concat(e.sortOrder):"")+(e.searchBy?"&searchBy=".concat(encodeURIComponent(e.searchBy)):"")+(e.searchValue?"&searchValue=".concat(encodeURIComponent(e.searchValue)):""),e.statuses&&(Array.isArray(e.statuses)?e.statuses.map(e=>a+="&statuses=".concat(encodeURIComponent(e))):a+="&statuses=".concat(encodeURIComponent(e.statuses)));try{let e=await fetch(a,{method:"GET",signal:null==s?void 0:s.signal}),{ok:n,data:c}=await (0,i.Ro)(e);if(n&&(0,i.TC)(c)){let e={...c,audits:(0,d.YL)(c.data.audits)};return{success:!0,message:(0,i.e6)(t,o.yY.SUCCESS),res:e}}if((0,i.XD)(c))return{success:!1,message:(0,i.e6)(t,c.code),res:null};return{success:!1,message:r.NS,res:null}}catch(e){return(0,i.FO)(e),{success:!1,message:r.t7,res:null}}},j=async(e,s)=>{let t=[l.D2.Triage,l.D2.Review,l.D2.Restricted,l.D2.Judging,l.D2.PJQA,l.D2.JudgingComplete,l.D2.Awarding,l.D2.Reporting,l.D2.Completed],a="perPage=".concat(s.perPage,"&page=").concat(s.page);t.forEach(e=>a+="&statuses=".concat(encodeURIComponent(e)));let n="/api/v1/users/".concat(e,"/audits?").concat(a),c=r._C;try{let e=await fetch(n,{method:"GET"}),{ok:s,data:t}=await (0,i.Ro)(e);if(s&&(0,i.TC)(t))return{success:!0,message:(0,i.e6)(c,o.yY.SUCCESS),data:t};if((0,i.XD)(t))return{success:!1,message:(0,i.e6)(c,t.code),data:null};return{success:!1,message:r.NS,data:null}}catch(e){return(0,i.FO)(e),{success:!1,message:r.t7,data:null}}},F=async e=>{let s=r.XC;try{let t=await fetch("/api/v1/users/@me/audits/".concat(e),{method:"GET"}),{ok:a,data:n}=await (0,i.Ro)(t);if(a&&(0,i.TC)(n)){let e=(0,d.YL)(n);return{success:!0,message:(0,i.e6)(s,o.yY.SUCCESS),data:e}}if((0,i.XD)(n))return{success:!1,message:(0,i.e6)(s,n.code),data:null};return{success:!1,message:r.NS,data:null}}catch(e){return(0,i.FO)(e),{success:!1,message:r.t7,data:null}}},M=async e=>{let s=r.cq;try{let t=await fetch("/api/v1/users/@me/audits/".concat(e,"/concierges"),{method:"GET"}),{ok:a,data:n}=await (0,i.Ro)(t);if(a&&(0,i.TC)(n))return{success:!0,message:(0,i.e6)(s,o.yY.SUCCESS),concierges:n};if((0,i.XD)(n))return{success:!1,message:(0,i.e6)(s,n.code),concierges:null};return{success:!1,message:r.NS,concierges:null}}catch(e){return(0,i.FO)(e),{success:!1,message:r.t7,concierges:null}}},H=async(e,s)=>{let t=r.rS;return await (0,u.l)({messages:t,url:"/api/v1/users/@me/audits/".concat(e,"/marketing"),method:"PUT",payload:s})},Y=async e=>{let s=r.Uv;return await (0,u.l)({messages:s,url:"/api/v1/audits/".concat(e,"/rsvp"),method:"PUT"})},X=async()=>{let e=r.hm;return await (0,u.l)({messages:e,url:"/api/v1/users/@me/verify-identity",method:"PUT",payload:{acceptedTermsAndConditions:!0,status:"SUBMITTED"}})}},10677:function(e,s,t){"use strict";t.d(s,{Vd:function(){return r},WP:function(){return n},bQ:function(){return a},vE:function(){return i},yI:function(){return c},zP:function(){return u}});let a={uid:"",username:"",emailAddress:"",registrationSubmitted:!1,emailVerified:!1,discordVerified:!1,paymentAddresses:[],authAddresses:[],taxReportingStatus:null,identityVerificationStatus:null,isCertified:!1,handlesPendingConfirmation:[],isLoggedIn:!1,token:{scope:null,iat:null},links:{discord:null,github:null},roles:[],signal:null},r=[],n=[],i={image:void 0,link:void 0,teams:r,notifications:n,linkedAudits:[]},c={loginAgain:"You will need to log in again to perform sensitive actions.",tokenRefreshed:"Successfully logged in. You can change sensitive account setting for the next 10 mins.",walletConnectFail:"Failed to connect to wallet, please try again.",noWallet:"No wallet connected.",walletDisconnect:"Wallet disconnected.",notVerified:"Your Code4rena account is not yet complete, please make sure you have verified your email and discord handle."},u=new Set(["/","/account","/account/edit-profile","/account/edit-profile/[a-zA-Z0-9_-]+","/account/teams","/audits/[a-zA-Z0-9_-]+","/audits/[a-zA-Z0-9_-]+/submit","/audits/[a-zA-Z0-9_-]+/dashboard","/audits/[a-zA-Z0-9_-]+/comments","/audits/[a-zA-Z0-9_-]+/submissions","/audits/[a-zA-Z0-9_-]+/submissions/[a-zA-Z0-9_-]+","/bounties/[a-zA-Z0-9_-]+/submit","/certified-contributor-application","/your-submissions","/judge-application","/manage-team","/secure","/secure/[a-zA-Z0-9_-]+","/register/team","/tax-info","/team-captains-application","/validator-application"])},27485:function(e,s,t){"use strict";t.d(s,{I2:function(){return i},TT:function(){return n},Xn:function(){return a},lk:function(){return r},qM:function(){return c}});let a=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.substring(0,s+2),"...").concat(e.substring(e.length-s,e.length))};function r(e,s){let t=s.join("%2C");return"".concat(e,"/issues?q=is%3Aopen+is%3Aissue+label%3A").concat(t,"+")}let n=(e,s)=>{let t=s?e.slice(0,s):e,a=/(?:https?:\/\/|www\.)[^\s]+|[^\s]+\.(?:com|org|net)\/[^\s]*/g,r=t.match(a)||[],n=t.split(a).map(e=>e.replace(/[~`@#%^&*()_+={}\[\]:;"'<>\/\\|]/g,"").replace(/\s+/g," ").trim()),i="";for(let e=0;e<n.length;e++)i+=n[e],r[e]&&(i+=" "+r[e]+" ");return i.trim()},i=(e,s)=>e.length<=s?e:e.slice(0,s)+"...",c=e=>"number"!=typeof e?"N/A":"".concat(Math.floor(100*e),"%")},3641:function(e,s,t){"use strict";t.d(s,{Bu:function(){return l},Hi:function(){return d},O4:function(){return o},ZG:function(){return u},jc:function(){return c}});var a=t(64314),r=t(83791),n=t(54518),i=t(73891);let c=e=>{let s=e.filter(e=>e.chainId===a.R.id&&!0===e.useForPayment)[0];return s?s.address:""},u=e=>{let s=e.filter(e=>e.chainId===r.y.id&&!0===e.useForPayment)[0];return s?s.address:""},o=e=>{let s=e.filter(e=>e.chainId===n.y.id&&!0===e.useForPayment)[0];return s?s.address:""},l=e=>{let s=e.filter(e=>e.chainId===i.v.id&&!0===e.useForPayment)[0];return s?s.address:""},d=async e=>{try{return{result:await e(),errorMsg:""}}catch(e){return console.error(e),{result:null,errorMsg:e.message||"Unexpected error"}}}},85624:function(e,s,t){"use strict";t.d(s,{Le:function(){return c},Mn:function(){return d},S_:function(){return i},YN:function(){return r},is:function(){return o},po:function(){return n},ym:function(){return u},zq:function(){return l}});var a=t(4012);let r=e=>{let s=[];return(0,a.U)(e)||s.push("Wallet address must begin with 0x and be 42 characters long"),s},n=e=>""===e?[]:r(e),i=e=>e?e.startsWith("@")?["Username cannot start with '@'"]:e.includes("@")&&e.indexOf("@")!==e.length-1?["Please enter your username, not your email"]:/^[0-9a-zA-Z_-]+$/.test(e)?[]:["Username supports alphanumeric characters, underscores and hyphens"]:["Username is required"],c=e=>{let s=[];return/\S+@\S+\.\S+/.test(e)||s.push("Please enter a valid email address"),s},u=e=>{let s=[];return e.length<18&&s.push("Password should be at least 18 characters long."),e.length>50&&s.push("Password should be at most 50 characters long."),s},o=(e,s)=>{let t=[];return!s&&e&&t.push("Comparative password missing."),e!==s&&t.push("Passwords do not match."),t},l=e=>{if(!e.trim())return!1;let s=new URL((e||"").trim());return"https:"===s.protocol&&"github.com"===s.hostname},d=e=>RegExp("#L[0-9]+(-L[0-9]+)?$").test((e||"").trim())}}]);