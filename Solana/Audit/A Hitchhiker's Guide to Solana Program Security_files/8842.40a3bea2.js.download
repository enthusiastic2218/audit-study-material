"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["8842"],{53311:function(e,t,r){r.d(t,{s:()=>ei});var n=r(7409),i=r(99282),l=r(16584),a=r(6400),s=r(30396),o=r(58017),c=r(94184),u=r.n(c),d=r(24840),h=r(71375),p=r(62686),Z=r(60823),g=r(41002),b=r(41486),m=r(77508),f=r(24130),y=r(45208),v=r(57469),k=r(49488),x=r(46555),w=r(40367),B=r(40131),X=r(6453),_=r(89733),z=r(66577),C=r(98147),E=r(41694),q=r(53095),D=r(9574),O=r(74945),Y=r(34539),N=r(22534),I=r(5958),A=r(36750),K=r(68402),R=r(96220),H=r(80552),P=r(94895),U=r(98770),T=r(28549),j=r(20888),F=r(95441),L=r(94874),M=r(80026),S=r(4615),W=r(6490),V=r(98248),Q=r(38841),G=r(58175),J=r(87989);r(36889);var $=r(91400);function ee(e){return{segments:[{text:e}]}}function et(e,t){if(!e||0===e.length)return{segments:[]};if(0===t.length)return{segments:[{text:e}]};let r=e.toLowerCase().indexOf(t.toLowerCase());if(-1===r)return{segments:[{text:e}]};let n=[];return 0!==r&&(n.push({text:e.substring(0,r)}),e=e.substring(r)),n.push({text:e.substring(0,t.length),isHighlighted:!0}),0!==(e=e.substring(t.length)).length&&n.push({text:e}),{segments:n}}function er(e){let{segments:t}=e;if(0===t.length||!t.some(e=>e.isHighlighted))return null;let[r,...n]=t;if(r.isHighlighted)return{segments:t};let i=r.text.length,l=i>40?i-40:0;return{segments:[{text:"".concat(l>0?"…":"").concat(r.text.substring(l))},...n]}}let en={image:"image-gSnHYG",icon:"icon-pLzgnZ",searchOptions:"searchOptions-Y2hxE_",row:"row-YqulPz",active:"active-GcpEyo",highlight:"highlight-ElgDnZ",spinner:"spinner-YyUUa4",ribbon:"ribbon-pRoQmk",ribbonResult:"ribbonResult-uYaV0j",ribbonText:"ribbonText-Hi7Ks1",ribbonAvatar:"ribbonAvatar-UiZ9dj",searchInput:"searchInput-tYjotu"};function ei(e){let{isOpen:t,placeholder:r,results:n,ribbonResults:i,onClose:a,onQueryChange:s,onEnter:o,noQueryZeroState:c,noResultsZeroState:u,isLoading:d,value:h}=e;return(0,l.tZ)(W.u_,{testId:"search-modal",isOpen:t,onClose:a,width:600,fullscreenMobile:!0,children:(0,l.tZ)(S.Sf,{children:(0,l.tZ)(el,{placeholder:r,results:n,onQueryChange:s,onEnter:o,onClose:a,noQueryZeroState:c,noResultsZeroState:u,isLoading:d,value:h,ribbonResults:i})})})}function el(e){let{placeholder:t,results:r,ribbonResults:n,onQueryChange:i,onEnter:a,onClose:c,noQueryZeroState:h,noResultsZeroState:p,isLoading:Z,value:g}=e,[b,m]=(0,s.eJ)(""),f=(0,$.XA)(),[y,v]=(0,s.eJ)(!1),k=e=>{let t=e.currentTarget.value.trim();m(t),i(t),v(!1)},x=e=>{v(!0),k(e)},w=(e,t)=>{"Enter"===e.key&&0===r.length&&(e.stopPropagation(),e.preventDefault()),"Enter"===e.key&&t&&(e.stopPropagation(),e.preventDefault(),a(t,e.metaKey)),"Escape"===e.key&&b&&(m(""),i(""),v(!1))};return(0,l.tZ)(M.sg,{children:(0,l.tZ)(o.h,{onChange:e=>{e&&a(e)},by:"id",value:null!=g?g:null,nullable:!0,children:e=>{let{activeOption:i}=e;return(0,l.BX)(l.HY,{children:[(0,l.BX)(M.X2,{flex:f?void 0:"grow",paddingY:f?8:16,paddingLeft:16,paddingRight:f?8:16,alignItems:"center",gap:12,borderBottom:"detail",position:"relative",children:[(0,l.tZ)(d.Z,{size:20}),(0,l.tZ)(o.h.Input,{type:"search",name:"search-dialog-input",placeholder:t,className:u()(ea,en.searchInput),autoFocus:!0,autocomplete:"off",autocorrect:"off",spellcheck:!1,displayValue:e=>e&&"displayValue"in e?e.displayValue:b,onChange:x,onKeyDown:e=>w(e,i)}),f&&(0,l.tZ)(M.zx,{onClick:c,priority:"tertiary",children:"Cancel"}),(Z||y)&&(0,l.tZ)(V.jv,{"data-testid":"search-thinker",className:en.spinner,size:20})]}),(0,l.BX)(o.h.Options,{className:u()((0,M.oB)({display:"flex",direction:"column",margin:0,paddingY:8,paddingX:0,height:f?void 0:540,overflowY:"auto"}),en.searchOptions),static:!0,children:[0===b.length&&(null==n?void 0:n.length)?(0,l.tZ)(M.X2,{className:en.ribbon,gap:8,paddingX:8,paddingBottom:8,children:n.map(e=>(0,l.tZ)(eg,{result:e,onEnter:a},e.id))}):null,0===b.length&&h?h:0===r.length?p?p(b):null:r.map(e=>(0,l.tZ)(es,{result:e,query:b,onEnter:a},e.id))]})]})}})})}let ea=(0,M.oB)((0,i._)((0,n._)({},M.et),{height:24,border:"unset",flex:"grow",bg:"primary",color:"primary"}));function es(e){let{result:t,query:r,onEnter:n}=e;if("user"===t.type)return(0,l.tZ)(ed,{result:t,query:r,onEnter:n});if("post"===t.type)return(0,l.tZ)(ep,{result:t,query:r,onEnter:n});if("publication"===t.type)return(0,l.tZ)(eu,{result:t,query:r,onEnter:n});if("result-group-header"===t.type)return(0,l.tZ)(ec,{result:t});if("action"===t.type)return(0,l.tZ)(eo,{result:t,query:r,onEnter:n});else if("chat-post"===t.type||"chat-reply"===t.type)return(0,l.tZ)(eh,{result:t,query:r,onEnter:n});else if("category"===t.type)return(0,l.tZ)(eZ,{result:t,query:r,onEnter:n});return null}function eo(e){let{result:t,query:r,onEnter:a}=e,s=t.url?{as:"a",href:t.url}:{as:"li"};return(0,l.tZ)(o.h.Option,(0,i._)((0,n._)({onClick:e=>{e.preventDefault(),a(t,!!e.metaKey)},value:t,id:t.id},s),{children:e=>{let{active:n}=e;return(0,l.tZ)(eB,{children:(0,l.BX)(e_,{isActive:n,children:[(0,l.tZ)(ez,{children:(0,l.tZ)(t.icon,{size:20})}),"string"==typeof t.title?(0,l.tZ)(M.X2,{flex:"grow",children:(0,l.tZ)(ev,{children:(0,l.tZ)(ef,{text:t.title,query:r,center:!0})})}):t.title,t.onRemove&&(0,l.tZ)(M.hU,{size:"sm",priority:"quaternary",onClick:e=>{var r;e.preventDefault(),e.stopPropagation(),null===(r=t.onRemove)||void 0===r||r.call(t)},"aria-label":"Remove",children:(0,l.tZ)(h.Z,{size:16})})]})})}}))}function ec(e){let{result:t}=e;return(0,l.tZ)(M.X2,{paddingY:8,paddingX:16,children:(0,l.tZ)(G.xv.Meta,{weight:"semibold",children:t.header})})}function eu(e){var t;let{result:r,query:n,onEnter:i}=e,{iString:a}=(0,F.M1)(),s=a("Publication"),c=r.publication.author_name&&n.length>0&&(null===(t=r.publication.author_name)||void 0===t?void 0:t.includes(n));return(0,l.tZ)(o.h.Option,{href:r.publication.url,as:"a",id:r.id,value:r,onClick:e=>{e.preventDefault(),i(r,!!e.metaKey)},children:e=>{let{active:t}=e;return(0,l.tZ)(eB,{children:(0,l.BX)(e_,{isActive:t,children:[(0,l.tZ)(Q.wk,{radius:"sm",size:40,pub:r.publication,logoUrl:r.publication.logo_url}),(0,l.BX)(ew,{children:[(0,l.tZ)(ev,{children:(0,l.tZ)(ef,{text:r.publication.name,query:n,center:!0})}),(0,l.BX)(ex,{children:[(0,l.tZ)(ek,{children:s}),c&&(0,l.BX)(ek,{children:[" ∙ ".concat(a("By ")),(0,l.tZ)(ef,{text:r.publication.author_name,query:n,center:!0})]}),r.publication.subscriber_count_string&&(0,l.tZ)(ek,{children:" ∙ ".concat(r.publication.subscriber_count_string)})]})]})]})})}})}function ed(e){var t,r,n;let{result:i,query:a,onEnter:s}=e,{iString:c}=(0,F.M1)(),u=i.user.is_pub_search,d=a.length>0&&(null===(r=i.user.pub)||void 0===r?void 0:null===(t=r.name)||void 0===t?void 0:t.includes(a)),h=!u&&(null===(n=i.user.pub)||void 0===n?void 0:n.name)&&i.user.pub.name!==i.user.name&&!d,p=c(u?"Author":"Profile");return(0,l.tZ)(o.h.Option,{onClick:e=>{e.preventDefault(),s(i,!!e.metaKey)},as:"a",href:i.user.profile_url,id:i.id,value:i,children:e=>{var t,r;let{active:n}=e;return(0,l.tZ)(eB,{children:(0,l.BX)(e_,{isActive:n,children:[(0,l.tZ)(L.qE,{user:i.user,size:40}),(0,l.BX)(ew,{children:[(0,l.BX)(eX,{children:[(0,l.tZ)(ev,{children:(0,l.tZ)(ef,{text:i.user.name,query:a,center:!0})}),(0,l.tZ)(J.UserBadge,{tier:i.user.bestseller_tier,userId:i.user.id,tooltipOnHover:!0,size:"sm"})]}),(0,l.BX)(ex,{children:[(0,l.tZ)(ek,{children:p}),h&&(0,l.BX)(ek,{children:[" ∙ ",(0,l.tZ)(ef,{text:null!==(r=null===(t=i.user.pub)||void 0===t?void 0:t.name)&&void 0!==r?r:"",query:a,center:!0}),i.user.subscriber_count_string?" ∙ ".concat(i.user.subscriber_count_string):null]}),!h&&!!i.user.handle&&(0,l.tZ)(ek,{children:" ∙ @".concat(i.user.handle)})]})]})]})})}})}function eh(e){let{result:t,query:r,onEnter:n}=e;return(0,l.tZ)(o.h.Option,{onClick:e=>{e.preventDefault(),n(t,!!e.metaKey)},as:"a",value:t,href:t.url,id:t.id,children:e=>{let{active:n}=e;return(0,l.tZ)(eB,{children:(0,l.BX)(e_,{isActive:n,children:[(0,l.tZ)(L.qE,{user:{photo_url:t.user_photo_url},size:40}),(0,l.BX)(ew,{children:[(0,l.tZ)(ev,{children:t.user_name}),(0,l.tZ)(ek,{ellipsis:!1,children:t.highlights&&t.highlights.length>0?(0,l.tZ)(ey,{text:t.highlights[0]}):(0,l.tZ)(ef,{text:t.body_text,query:r,center:!0})})]})]})})}})}function ep(e){var t,r;let{result:n,query:i,onEnter:a}=e,{iString:s}=(0,F.M1)(),c=n.post.title,u=n.post.body||"",d=n.post.subtitle||"",h=(null===(t=n.post.highlights)||void 0===t?void 0:t.length)?n.post.highlights[0]:null,Z=!!n.post.is_paywalled,g=n.post.audience,b=null!==(r=er(et(c,i)))&&void 0!==r?r:ee(c),m=er(et(d,i));!m&&h&&(m=er(h)),m||(m=er(et(u,i)));let f=function(e){let t;let r=new Date(e),n=new Date;return t=r>new Date(new Date().setFullYear(n.getFullYear()-1))?{month:"short",day:"numeric"}:{year:"numeric",month:"short",day:"numeric"},new Intl.DateTimeFormat("en-US",t).format(r)}(n.post.date);return(0,l.tZ)(o.h.Option,{onClick:e=>{e.preventDefault(),a(n,!!e.metaKey)},as:"a",href:n.post.url,id:n.id,value:n,children:e=>{var t;let{active:r}=e;return(0,l.tZ)(eB,{children:(0,l.BX)(e_,{isActive:r,children:[n.post.image?(0,l.tZ)(j.e,{src:n.post.image,radius:"sm",maxWidth:40,imageProps:{smartCrop:!0,aspect:"1:1"},className:en.image}):(0,l.tZ)(ez,{children:(0,l.tZ)(p.Z,{size:24,stroke:"var(--color-fg-secondary)"})}),(0,l.BX)(M.sg,{flex:"grow",minWidth:0,children:[(0,l.tZ)(ev,{children:(0,l.tZ)(ey,{text:b})}),(0,l.BX)(ex,{children:[(0,l.tZ)(ek,{children:Z?(0,l.BX)(l.HY,{children:["\uD83D\uDD12 ","founding"===g?s("Founding subscribers only"):s("Paid subscribers only")]}):(0,l.tZ)(ey,{text:null!==(t=null!=m?m:h)&&void 0!==t?t:ee(d||u)})}),(0,l.BX)(ek,{ellipsis:!1,children:[(d||u)&&" ∙ ",f]})]})]})]})})}})}function eZ(e){let{result:t,query:r,onEnter:n}=e;return(0,l.tZ)(o.h.Option,{onClick:e=>{e.preventDefault(),n(t,!!e.metaKey)},as:"a",href:t.category.url,id:t.id,value:t,children:e=>{var n;let{active:i}=e;return(0,l.tZ)(eB,{children:(0,l.BX)(e_,{isActive:i,children:[(0,l.tZ)(eC,{slug:null!==(n=t.category.slug)&&void 0!==n?n:""}),"string"==typeof t.category.name?(0,l.tZ)(G.xv.B3,{children:(0,l.tZ)(ef,{text:t.category.name,query:r,center:!0})}):t.category.name]})})}})}function eg(e){let{result:t,onEnter:r}=e;return"visited-profile"===t.type?(0,l.tZ)(eb,{result:t,onEnter:r}):"visited-publication"===t.type?(0,l.tZ)(em,{result:t,onEnter:r}):null}function eb(e){var t;let{result:r,onEnter:n}=e;return(0,l.tZ)(o.h.Option,{onClick:e=>{e.preventDefault(),n(r,!!e.metaKey)},as:"a",href:null===(t=r.profile)||void 0===t?void 0:t.url,id:r.id,value:r,children:e=>{let{active:t}=e;return(0,l.BX)(M.sg,{className:en.ribbonResult,padding:8,gap:8,alignItems:"center",bg:t?"secondary":"primary",radius:"sm",children:[(0,l.tZ)(L.qE,{user:r.profile,size:56,className:en.ribbonAvatar}),(0,l.tZ)(G.xv.B5,{color:"primary",weight:"semibold",ellipsis:!0,className:en.ribbonText,children:r.profile.name})]})}})}function em(e){let{result:t,onEnter:r}=e;return(0,l.tZ)(o.h.Option,{onClick:e=>{e.preventDefault(),r(t,!!e.metaKey)},as:"a",href:t.publication.url,id:t.id,value:t,children:e=>{let{active:r}=e;return(0,l.BX)(M.sg,{className:en.ribbonResult,padding:8,gap:8,alignItems:"center",bg:r?"secondary":"primary",radius:"sm",children:[(0,l.tZ)(Q.wk,{pub:t.publication,size:56,className:en.ribbonAvatar}),(0,l.tZ)(G.xv.B5,{color:"primary",weight:"semibold",ellipsis:!0,className:en.ribbonText,children:t.publication.name})]})}})}function ef(e){var t;let{text:r,query:n,center:i}=e,a=et(r,n),s=null!==(t=i?er(a):a)&&void 0!==t?t:ee(r);return(0,l.tZ)(ey,{text:s})}function ey(e){let{text:t}=e;return(0,l.tZ)(l.HY,{children:t.segments.map(e=>{let{text:t,isHighlighted:r}=e;return(0,l.tZ)("span",{className:u()({[en.highlight]:r}),children:t})})})}let ev=e=>{let{children:t}=e;return(0,l.tZ)(G.xv.B3,{weight:"medium",ellipsis:!0,nowrap:!0,children:t})},ek=e=>{let{children:t,ellipsis:r=!0}=e;return(0,l.tZ)(G.xv.B4,{color:"secondary",ellipsis:r,nowrap:!0,children:t})},ex=(0,M.zo)({display:"flex",gap:4}),ew=(0,M.zo)({display:"flex",direction:"column",flex:"grow",minWidth:0}),eB=(0,M.zo)({display:"flex",paddingX:8}),eX=(0,M.zo)({display:"flex",alignItems:"center",flex:"grow",gap:6,minWidth:0}),e_=e=>{let{children:t,isActive:r}=e;return(0,l.tZ)(M.X2,{padding:8,gap:12,alignItems:"center",cursor:"pointer",radius:"md",flex:"grow",minWidth:0,bg:r?"secondary":void 0,className:u()(en.row,r&&en.active),children:t})},ez=(0,M.zo)({display:"flex",bg:"secondary",radius:"sm",alignItems:"center",justifyContent:"center",className:en.icon});function eC(e){let t,{slug:r}=e;switch(r){case"education":t=(0,l.tZ)(Z.Z,{});break;case"humor":t=(0,l.tZ)(g.Z,{});break;case"culture":t=(0,l.tZ)(b.Z,{});break;case"technology":t=(0,l.tZ)(m.Z,{});break;case"business":t=(0,l.tZ)(f.Z,{});break;case"us-politics":t=(0,l.tZ)(y.Z,{});break;case"world-politics":t=(0,l.tZ)(v.Z,{});break;case"finance":t=(0,l.tZ)(k.Z,{});break;case"food":t=(0,l.tZ)(x.Z,{});break;case"sports":t=(0,l.tZ)(w.Z,{});break;case"art":t=(0,l.tZ)(B.Z,{});break;case"news":t=(0,l.tZ)(X.Z,{});break;case"fashionandbeauty":t=(0,l.tZ)(_.Z,{});break;case"music":t=(0,l.tZ)(z.Z,{});break;case"faith":t=(0,l.tZ)(C.Z,{});break;case"climate":t=(0,l.tZ)(E.Z,{});break;case"science":t=(0,l.tZ)(q.Z,{});break;case"literature":t=(0,l.tZ)(D.Z,{});break;case"fiction":t=(0,l.tZ)(O.Z,{});break;case"health":t=(0,l.tZ)(Y.Z,{});break;case"design":t=(0,l.tZ)(N.Z,{});break;case"travel":t=(0,l.tZ)(I.Z,{});break;case"parenting":t=(0,l.tZ)(A.Z,{});break;case"philosophy":t=(0,l.tZ)(K.Z,{});break;case"comics":t=(0,l.tZ)(R.Z,{});break;case"crypto":t=(0,l.tZ)(H.Z,{});break;case"international":t=(0,l.tZ)(P.Z,{});break;case"history":t=(0,l.tZ)(U.Z,{});break;case"search":t=(0,l.tZ)(d.Z,{});break;default:t=(0,l.tZ)(T.Z,{size:20})}return(0,l.tZ)(ez,{children:(0,a.cloneElement)(t,{size:20})})}}}]);