"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3030"],{15186:function(t,e,i){if(i.d(e,{Z:()=>g,j:()=>v}),2787!=i.j)var n=i(7409);if(2787!=i.j)var r=i(99282);var a=i(16584);if(2787!=i.j)var l=i(49550);var o=i(98661),s=i(95441),d=i(15771),c=i(80026),u=i(17172),h=i(45783),f=i(20346);function g(t){let{tabs:e,value:i,onChange:d,ariaLabel:g}=t,{iString:v}=(0,s.M1)(),Z=(0,o.useRef)(null),w=(0,o.useRef)(null),{props:b,hasOverflow:I}=(0,u.aZ)(Z),{state:x}=(0,h.eK)(Z),C=t=>{let e=w.current,i=Z.current;if(!i||!e||t<0)return;let n=i.getElementsByClassName(f.Z.segment)[t];if(!n)return;let r=n.getBoundingClientRect(),a=i.getBoundingClientRect(),l=parseInt(window.getComputedStyle(i).paddingLeft),o=r.left-a.left-l+i.scrollLeft;requestAnimationFrame(()=>{e.style.setProperty("--highlight-width","".concat(r.width,"px")),e.style.setProperty("--highlight-x","".concat(o,"px"))})},N=e.findIndex(t=>t.value===i);return(0,o.useLayoutEffect)(()=>{C(N)},[e,i,N]),(0,o.useEffect)(()=>{C(N)},[e,i,N]),(0,a.BX)(m,{children:[(0,a.tZ)(l.O.Group,{manual:!0,selectedIndex:-1===N?0:N,onChange:t=>{var i;let n=null===(i=e[t])||void 0===i?void 0:i.value;void 0!==n&&d(n)},children:(0,a.tZ)(l.O.List,(0,r._)((0,n._)({as:c.X2},b),{ref:Z,className:f.Z.container,position:"relative",cursor:I()?"grab":"default",gap:4,padding:4,radius:"sm",overflow:"auto",scrollBar:"hidden",outline:"detail","aria-label":null!=g?g:"".concat(v("Tabs")),children:()=>(0,a.BX)(a.HY,{children:[e.map((t,e)=>(0,a.tZ)(p,{tab:t,index:e,children:t.label},t.value)),(0,a.tZ)(y,{ref:w})]})}))}),(0,a.tZ)(h.R3,{direction:"left",isVisible:x.showLeft}),(0,a.tZ)(h.R3,{direction:"right",isVisible:x.showRight})]})}function p(t){let{tab:e,index:i,children:n}=t;return(0,a.tZ)(l.O,{as:o.Fragment,children:t=>{let{selected:r}=t;return(0,a.tZ)(d.zx,{className:f.Z.segment,leading:e.leadingIcon,trailing:e.trailingIcon,priority:r?"tertiary":"quaternary",size:"sm",children:n},i)}})}let m=(0,c.zo)({display:"flex",direction:"column",position:"relative",bg:"primary",radius:"sm",minWidth:0,overflow:"hidden"}),y=(0,c.zo)({position:"absolute",height:32,radius:"xs",bg:"secondary",sizing:"border-box",className:f.Z.highlight}),v=(0,c.zo)({display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24})},79075:function(t,e,i){i.r(e),i.d(e,{MiniNotificationsStack:()=>R,MiniNotificationsViewer:()=>N});var n=i(16584),r=i(30396),a=i(94184),l=i.n(a),o=i(78796),s=i(48493),d=i(95441),c=i(36518),u=i(42375),h=i(68833),f=i(15771),g=i(61254),p=i(86075),m=i(19081),y=i(58175),v=i(74949),Z=i(35449),w=i(27744),b=i(65575),I=i(98012),x=i(63651),C=i(21694);function N(t){var e;let{resource:i,bellCount:a}=t,{iString:c}=(0,d.M1)(),{result:v,error:I}=i,N="".concat((0,x.SVA)(),"/activity"),[k,z]=(0,w.d6)();(0,r.d4)(()=>{v&&z({type:"update_paused_notifications",payload:v.feedItemComments.filter(t=>t.isMuted)})},[v,z]);let B=null==v?void 0:null===(e=v.activityItems[0])||void 0===e?void 0:e.id;return(0,r.d4)(()=>{v&&(0,h.j)(h.FP.NOTIFICATIONS_DROPDOWN_VIEWED,{count:v.activityItems.length,bellCount:a})},[B]),(0,n.tZ)(u.$U,{surface:"mini-notifications-viewer",dispatch:z,state:k,children:(0,n.BX)(m.tu,{className:l()("notifications-root",C.Z.root),color:"primary",style:{width:"360px",maxHeight:"80vh"},children:[(0,n.BX)(m.hs,{padding:16,gap:8,alignItems:"center",children:[(0,n.tZ)(m.hs,{flex:"grow",children:(0,n.tZ)(y.xv.H3,{weight:"heavy",children:(0,n.tZ)(b.EU,{href:N,children:c("Activity")})})}),(0,n.tZ)(f.hU,{"aria-label":"Settings",size:"md",href:"".concat((0,x.SVA)(),"/settings"),priority:"tertiary",newTab:!0,children:(0,n.tZ)(o.Z,{size:20,"aria-hidden":!0})})]}),(0,n.tZ)(g.iz,{}),(0,n.tZ)(m.tu,{overflowY:"auto",children:I?"Error":v?v.activityItems.length>0?(0,n.tZ)(b.pe,{gap:0,children:(0,n.tZ)(R,{result:v})}):(0,n.tZ)(m.tu,{style:{minHeight:"240px"},paddingBottom:32,justifyContent:"center",children:(0,n.tZ)(p.u,{icon:(0,n.tZ)(s.Z,{}),title:"You donâ€™t have any activity yet.",description:"Likes and replies will appear here."})}):(0,n.tZ)(Z.f,{})}),(0,n.tZ)(m.X2,{borderTop:"detail",height:48,alignItems:"center",justifyContent:"center",children:(0,n.tZ)(f.zx,{priority:"tertiary",href:N,newTab:!0,localNavigation:!1,justifyContent:"center",children:"See all"})})]})})}function R(t){let{result:e,isReadOnly:i=!1}=t,a=(0,c.lR)(),l=(0,r.Ye)(()=>{var t;return null!==(t=a.lastViewedAt)&&void 0!==t?t:new Date(0).toISOString()},[]);(0,r.d4)(()=>{i||a.markAllAsRead()},[]);let o=(0,w.I0)(),s=(0,w.kc)(),d=(0,v.IC)(e);return(0,r.d4)(()=>{o({type:"comments_load",payload:{comments:(null==e?void 0:e.comments)||[]}})},[o,e]),(0,n.tZ)(n.HY,{children:e.activityItems.filter(t=>v.gG.has(t.type)).map((t,r)=>(0,n.tZ)(v.P_,{item:(0,v.Xn)({activityResult:e,activityResultMaps:d,feedState:s,item:t,idx:r}),isUnread:null==l||(0,I.Z)(l).isBefore(t.updated_at),readOnly:i},r))})}}}]);