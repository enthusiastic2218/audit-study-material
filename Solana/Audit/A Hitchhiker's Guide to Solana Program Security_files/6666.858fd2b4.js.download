"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["6666"],{66925:function(){},14640:function(e,t,r){let n,o,a,l,s,d,c,u,h;r.d(t,{fZ:()=>xP,hl:()=>ef,mb:()=>$9,zj:()=>x2,zv:()=>xE});let p=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"},{value:65506,name:"app2"}];var $=e=>{let t,r;if(65496!==e.getUint16(0))return;let n=e.byteLength,o=2;for(;o<n&&255===e.getUint8(o);){t=e.getUint16(o);let n=p.find(r=>r.value===t&&(!r.subvalue||r.subvalue===e.getUint16(o+2+2)));if(n){let{name:t}=n;r||(r={}),r[t]||(r[t]={offset:o,size:e.getUint16(o+2)})}if(65498===t)break;o+=2+e.getUint16(o+2)}return r},m=(e,t)=>{if(65505!==e.getUint16(t))return;let r=e.getUint16(t+2);if(t+=4,0x45786966!==e.getUint32(t))return;t+=6;let n=e.getUint16(t);if(18761!==n&&19789!==n)return;let o=18761===n;if(t+=2,42!==e.getUint16(t,o))return;t+=e.getUint32(t+2,o);let a=n=>{let a=[],l=t,s=Math.min(e.byteLength,t+r-16);for(;l<s;l+=12){let t=l;e.getUint16(t,o)===n&&a.push(t)}return a};return{read:t=>{let r=a(t);if(r.length)return e.getUint16(r[0]+8,o)},write:(t,r)=>{let n=a(t);return!!n.length&&(n.forEach(t=>e.setUint16(t+8,r,o)),!0)}}},f=(e,t,r)=>{if(!e)return;let n=new DataView(e),o=$(n);if(!o||!o.exif)return;let a=m(n,o.exif.offset);if(a)return void 0===r?a.read(t):a.write(t,r)};let g="__pqina_webapi__";var y=e=>window[g]?window[g][e]:window[e],x=(...e)=>{},b=(e,t=x,r={})=>new Promise((n,o)=>{let{dataFormat:a="readAsArrayBuffer"}=r,l=new(y("FileReader"));l.onload=()=>n(l.result),l.onerror=()=>o(l.error),l.onprogress=t,l[a](e)}),v=async(e,t=[0,e.size],r)=>await b(e.slice(...t),r),w=async(e,t)=>f(await v(e,[0,262144],t),274)||1;let S=null;var k=()=>(null===S&&(S="undefined"!=typeof window&&void 0!==window.document),S);let C=null;var T=()=>new Promise(e=>{if(null===C){let t=k()?new Image:{};t.onload=()=>{C=1===t.naturalWidth,t=void 0,e(C)},t.src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";return}return e(C)}),M=e=>e.getContext("2d").getImageData(0,0,e.width,e.height),P=e=>"string"==typeof e;function E(e,t){t.split(";").forEach(t=>{let[r,n]=t.split(":");if(!r.length||!n)return;let[o,a]=n.split("!important");e.style.setProperty(r,o,P(a)?"important":void 0)})}var R=(e,t,r=[])=>{let n=document.createElement(e),o=Object.getOwnPropertyDescriptors(n.__proto__);for(let e in t)"style"===e?E(n,t[e]):o[e]&&o[e].set||/textContent|innerHTML/.test(e)||"function"==typeof t[e]?n[e]=t[e]:n.setAttribute(e,t[e]);return r.forEach(e=>n.appendChild(e)),n};let I={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]};var A=(e,t,r=-1)=>(-1===r&&(r=1),I[r](e,t)),L=e=>{e.width=1,e.height=1;let t=e.getContext("2d");t&&t.clearRect(0,0,1,1)},F=e=>"data"in e,z=e=>k()?RegExp(e).test(window.navigator.userAgent):void 0;let B=null;var O=()=>(null===B&&(B=z(/Android/)),B),D=(e,t)=>{let r=R("canvas",{width:e.width,height:e.height});return r.getContext("2d",t).drawImage(e,0,0),r},_=async(e,t=1)=>{let r=await T(),[n,o]=r||t<5?[e.width,e.height]:[e.height,e.width],a=R("canvas",{width:n,height:o}),l=a.getContext("2d",{willReadFrequently:!0});if(F(e)&&!r&&t>1){let t=R("canvas",{width:e.width,height:e.height});t.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),e=t}if(!r&&t>1&&l.transform.apply(l,A(e.width,e.height,t)),F(e)){if(l.putImageData(e,0,0),O())return D(a)}else l.drawImage(e,0,0);return e instanceof HTMLCanvasElement&&L(e),a},W=async(e,t=1)=>1===t?e:await T()?e:M(await _(e,t)),N=e=>"object"==typeof e;let V=e=>e instanceof HTMLElement?e:N(e)?j(e):e,j=e=>{let t;return Array.isArray(e)?(t=[],e.forEach((e,r)=>{t[r]=V(e)})):(t={},null!==e&&Object.keys(e).forEach(r=>{let n=e[r];t[r]=V(n)})),t};var U=e=>"function"==typeof e,H=(e,{width:t,height:r,canvasMemoryLimit:n,contextOptions:o})=>{let a=t||e.naturalWidth,l=r||e.naturalHeight;a||l||(a=300,l=150);let s=a*l;if(n&&s>n){let e=Math.sqrt(n)/Math.sqrt(s);a=Math.floor(a*e),l=Math.floor(l*e)}let d=R("canvas");return d.width=a,d.height=l,d.getContext("2d",o).drawImage(e,0,0,a,l),d},G=(e,t)=>new Promise((r,n)=>{let o=()=>r(H(e,t));e.complete&&e.width?o():(e.onload=o,e.onerror=()=>n(Error("Failed to load image")))}),X=async(e,t)=>{let r=R("img",{src:URL.createObjectURL(e)}),n=await G(r,t);return URL.revokeObjectURL(r.src),n},Z=()=>"createImageBitmap"in window,Y=()=>"OffscreenCanvas"in window,q=e=>/svg/.test(e.type),K=()=>Math.random().toString(36).substring(2,9),J=e=>new Blob(["(","function"==typeof e?e.toString():e,")()"],{type:"application/javascript"});let Q=e=>`function () {self.onmessage = function (message) {(${e.toString()}).apply(null, message.data.content.concat([function (err, response) {
    response = response || {};
    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];
    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);
}]))}}`,ee=new Map;var et=(e,t,r)=>new Promise((n,o)=>{let a=e.toString(),l=ee.get(a);if(!l){let t=Q(e),r=URL.createObjectURL(J(t)),n=new Map,o=new Worker(r);l={url:r,worker:o,messages:n,terminationTimeout:void 0,terminate:()=>{clearTimeout(l.terminationTimeout),l.worker.terminate(),URL.revokeObjectURL(r),ee.delete(a)}},o.onmessage=function(e){let{id:t,content:r,error:o}=e.data;if(clearTimeout(l.terminationTimeout),l.terminationTimeout=setTimeout(()=>{n.size>0||l.terminate()},500),!n.has(t))return;let a=n.get(t);n.delete(t),null!=o?a.reject(o):a.resolve(r)},ee.set(a,l)}let s=K();l.messages.set(s,{resolve:n,reject:o}),l.worker.postMessage({id:s,content:t},r)});let ei=null;var er=()=>(null===ei&&(ei=z(/Firefox/)),ei);let en=async(e,t)=>{let r=await X(e,{canvasMemoryLimit:t,contextOptions:{willReadFrequently:!0}}),n=M(r);return L(r),n};var eo=async(e,t)=>{let r;if(O()&&!er())return await en(e,t);if(Z()&&!q(e)&&Y())try{r=await et((e,t,r)=>{createImageBitmap(e).then(e=>{let n=e.width,o=e.height,a=n*o;if(t&&a>t){let e=Math.sqrt(t)/Math.sqrt(a);n=Math.floor(n*e),o=Math.floor(o*e)}let l=new OffscreenCanvas(n,o),s=l.getContext("2d",{willReadFrequently:!0});s.drawImage(e,0,0,n,o);let d=s.getImageData(0,0,l.width,l.height);r(null,d)}).catch(e=>{r(e)})},[e,t])}catch(e){}return r&&r.width?r:await en(e,t)},ea=(e,t,r)=>new Promise((n,o)=>{try{e.toBlob(e=>{if(!e)return o(Error("Failed to create blob"));n(e)},t,r)}catch(e){o(e)}}),el=async(e,t,r)=>{let n=await _(e),o=await ea(n,t,r);return L(n),o};let es={matroska:"mkv"};var ed=e=>{let t=(e.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(t)){let[,t=""]=e.split("/x-");return es[t]}return t},ec=e=>e.substring(0,e.lastIndexOf("."))||e,eu=e=>e.split(".").pop();let eh=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var ep=e=>eh.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":"svg"===e?"svg+xml":e):"",e$=e=>e&&ep(eu(e).toLowerCase()),em=(e,t)=>{let r=e$(e);if(r===t)return e;let n=ed(t)||r;return`${ec(e)}.${n}`},ef=(e,t,r)=>{let n=new Date().getTime(),o=e.type.length&&!/null|text/.test(e.type),a=o?e.type:r,l=em(t,a);try{return new(y("File"))([e],l,{lastModified:n,type:o?e.type:a})}catch(r){let t=o?e.slice():e.slice(0,e.size,a);return t.lastModified=n,t.name=l,t}},eg=(e,t)=>e/t,ey=e=>e;let ex=Math.PI,eb=Math.PI/2,ev=eb/2;var ew=e=>{let t=Math.abs(e)%Math.PI;return t>ev&&t<Math.PI-ev};let eS={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:ek,Right:eC,Bottom:eT,Left:eM,TopLeft:eP,TopRight:eE,BottomRight:eR,BottomLeft:eI}=eS;var eA={[ek]:[.5,0],[eC]:[1,.5],[eT]:[.5,1],[eM]:[0,.5],[eP]:[0,0],[eE]:[1,0],[eR]:[1,1],[eI]:[0,1]},eL=(e,t=12)=>parseFloat(e.toFixed(t));let eF=(e,t,r)=>r+(e-r)*t,ez=e=>({x:e.x+.5*e.width,y:e.y+.5*e.height,rx:.5*e.width,ry:.5*e.height}),eB=()=>eO(0,0),eO=(e,t)=>({x:e,y:t}),eD=e=>eO(e.width,e.height),e_=e=>eO(e.x,e.y),eW=e=>eO(e.pageX,e.pageY),eN=e=>eO(e.offsetX,e.offsetY),eV=e=>eO(e.x,e.y),ej=(e,t,r)=>(e.x=t,e.y=r,e),eU=e=>(e.x=-e.x,e.y=-e.y,e),eH=e=>{let t=e.x;return e.x=-e.y,e.y=t,e},eG=(e,t,r=eB())=>{let n=Math.cos(t),o=Math.sin(t),a=e.x-r.x,l=e.y-r.y;return e.x=r.x+n*a-o*l,e.y=r.y+o*a+n*l,e},eX=e=>Math.sqrt(e.x*e.x+e.y*e.y),eZ=e=>{let t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?eB():(e.x/=t,e.y/=t,e)},eY=e=>Math.atan2(e.y,e.x),eq=(e,t)=>Math.atan2(t.y-e.y,t.x-e.x),eK=(e,t)=>e.x===t.x&&e.y===t.y,eJ=(e,t)=>(e.x=t(e.x),e.y=t(e.y),e),eQ=(e,t)=>e.x>=0&&e.y>=0&&e.x<=t.width&&e.y<=t.height,e0=(e,t)=>(e.x+=t.x,e.y+=t.y,e),e1=(e,t)=>(e.x-=t.x,e.y-=t.y,e),e2=(e,t)=>(e.x/=t,e.y/=t,e),e4=(e,t)=>(e.x*=t,e.y*=t,e),e5=(e,t)=>e.x*t.x+e.y*t.y,e3=(e,t)=>e.x*t.y-e.y*t.x,e6=(e,t=eB())=>{let r=e.x-t.x,n=e.y-t.y;return r*r+n*n},e8=(e,t=eB())=>Math.sqrt(e6(e,t)),e7=(e,t,r)=>(e.x=eF(e.x,t,r.x),e.y=eF(e.y,t,r.y),e),e9=e=>{let t=0,r=0;return e.forEach(e=>{t+=e.x,r+=e.y}),eO(t/e.length,r/e.length)},te=(e,t,r,n,o)=>(e.forEach(e=>{e.x=t?n-(e.x-n):e.x,e.y=r?o-(e.y-o):e.y}),e),tt=(e,t,r,n)=>{let o=Math.sin(t),a=Math.cos(t);return e.forEach(e=>{e.x-=r,e.y-=n;let t=e.x*a-e.y*o,l=e.x*o+e.y*a;e.x=r+t,e.y=n+l}),e},ti=(e,t)=>({width:e,height:t}),tr=e=>ti(e.width,e.height),tn=e=>ti(e.width,e.height),to=e=>ti(e.width,e.height),ta=e=>ti(e[0],e[1]),tl=e=>ti(e.naturalWidth,e.naturalHeight),ts=e=>/img/i.test(e.nodeName)?tl(e):tn(e),td=(e,t)=>ti(e,t),tc=(e,t,r=ey)=>r(e.width)===r(t.width)&&r(e.height)===r(t.height),tu=(e,t)=>(e.width*=t,e.height*=t,e),th=e=>eO(.5*e.width,.5*e.height),tp=(e,t)=>{let r=Math.abs(t),n=Math.abs(Math.cos(r)),o=Math.abs(Math.sin(r)),a=n*e.width+o*e.height,l=o*e.width+n*e.height;return e.width=a,e.height=l,e},t$=(e,t)=>{let r=e.width,n=e.height;return ew(t)&&(e.width=n,e.height=r),e},tm=(e,t)=>e.width>=t.width&&e.height>=t.height,tf=(e,t)=>(e.width=t(e.width),e.height=t(e.height),e),tg=e=>Math.sqrt(e.width*e.width+e.height*e.height),ty=(e,t)=>td(Math.min(e.width,t.width),Math.min(e.height,t.height)),tx=(e,t)=>({start:e,end:t}),tb=e=>tx(eV(e.start),eV(e.end)),tv=(e,t)=>{if(0===t)return e;let r=e4(eZ(eO(e.start.x-e.end.x,e.start.y-e.end.y)),t);return e.start.x+=r.x,e.start.y+=r.y,e.end.x-=r.x,e.end.y-=r.y,e},tw=(e,t)=>{if(0===t)return e;let r=e4(eZ(eO(e.start.x-e.end.x,e.start.y-e.end.y)),t);return e.end.x+=r.x,e.end.y+=r.y,e},tS=({start:e,end:t},r)=>{if(0===r)return[eO(e.x,e.y),eO(e.x,e.y),eO(t.x,t.y),eO(t.x,t.y)];let n=Math.atan2(t.y-e.y,t.x-e.x),o=Math.sin(n)*r,a=Math.cos(n)*r;return[eO(o+e.x,-a+e.y),eO(-o+e.x,a+e.y),eO(-o+t.x,a+t.y),eO(o+t.x,-a+t.y)]},tk=[eO(-1,-1),eO(-1,1),eO(1,1),eO(1,-1)],tC=(e,t,r,n)=>({x:e,y:t,width:r,height:n}),tT=e=>tC(e.x,e.y,e.width,e.height),tM=()=>tC(0,0,0,0),tP=(e,t)=>tC(0,0,e,t),tE=e=>tC(0,0,e.width,e.height),tR=e=>tC(e[3],e[0],e[1]-e[3],e[2]-e[0]),tI=e=>tC(e.x||0,e.y||0,e.width||0,e.height||0),tA=e=>{let t=e[0].x,r=e[0].x,n=e[0].y,o=e[0].y;return e.forEach(e=>{t=Math.min(t,e.x),r=Math.max(r,e.x),n=Math.min(n,e.y),o=Math.max(o,e.y)}),tC(t,n,r-t,o-n)},tL=e=>tz(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),tF=(e,t)=>tC(e.x-.5*t.width,e.y-.5*t.height,t.width,t.height),tz=(e,t,r,n)=>tC(e,t,r,n),tB=e=>eO(e.x+.5*e.width,e.y+.5*e.height),tO=(e,t)=>(e.x+=t.x,e.y+=t.y,e),tD=(e,t,r)=>(r=r||tB(e),e.x=t*(e.x-r.x)+r.x,e.y=t*(e.y-r.y)+r.y,e.width=t*e.width,e.height=t*e.height,e),t_=(e,t,r,n)=>{let o=(n.x-e.x)/e.width,a=(n.y-e.y)/e.height,l=Math.max(t.width,e.width),s=Math.max(t.height,e.height);return l=Math.min(r.width,l),s=Math.min(r.height,s),e.x=n.x-o*l,e.y=n.y-a*s,e.width=l,e.height=s,e},tW=(e,t)=>{let[r,n]=eA[t],o=r*e.width,a=n*e.height;return eO(e.x+o,e.y+a)},tN=(e,t)=>(e.x*=t,e.y*=t,e.width*=t,e.height*=t,e),tV=(e,t)=>(e.x/=t,e.y/=t,e.width/=t,e.height/=t,e),tj=(e,t)=>(e.x-=t.x,e.y-=t.y,e.width-=t.width,e.height-=t.height,e),tU=(e,t)=>(e.x+=t.x,e.y+=t.y,e.width+=t.width,e.height+=t.height,e),tH=(e,t,r=ey)=>r(e.x)===r(t.x)&&r(e.y)===r(t.y)&&r(e.width)===r(t.width)&&r(e.height)===r(t.height),tG=e=>eg(e.width,e.height),tX=(e,t,r,n,o)=>(e.x=t,e.y=r,e.width=n,e.height=o,e),tZ=(e,t)=>(e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e),tY=(e,t,r)=>(r||(r=tB(e)),t4(e).map(e=>eG(e,t,r))),tq=(e,t)=>tC(.5*e.width-.5*t.width,.5*e.height-.5*t.height,t.width,t.height),tK=(e,t)=>!(t.x<e.x)&&!(t.y<e.y)&&!(t.x>e.x+e.width)&&!(t.y>e.y+e.height),tJ=(e,t,r=eB())=>{if(0===e.width||0===e.height)return tM();let n=tG(e);t||(t=n);let o=e.width,a=e.height;return t>n?o=a*t:a=o/t,tC(r.x+(e.width-o)*.5,r.y+(e.height-a)*.5,o,a)},tQ=(e,t,r)=>{let[n,o,a,l]=t2(e),s={...e};if(n<t.y&&(e.height=e.height-(t.y-n),e.y=t.y),o>t.x+t.width&&(e.width=t.x+t.width-e.x),a>t.y+t.height&&(e.height=t.y+t.height-e.y),l<t.x&&(e.width=e.width-(t.x-l),e.x=t.x),r){let t=Math.min(1,s.width/e.width,s.height/e.height);return tN(s,t)}return e},t0=(e,t)=>{let[r,n,o,a]=t2(e);return r<t.y&&(e.y=Math.max(t.y,e.y)),n>t.width&&(e.x=t.width-e.width),o>t.height&&(e.y=t.height-e.height),a<t.x&&(e.x=Math.max(t.x,e.x)),e},t1=(e,t=tG(e),r=eB())=>{if(0===e.width||0===e.height)return tM();let n=e.width,o=n/t;return o>e.height&&(n=(o=e.height)*t),tC(r.x+(e.width-n)*.5,r.y+(e.height-o)*.5,n,o)},t2=e=>[Math.min(e.y,e.y+e.height),Math.max(e.x,e.x+e.width),Math.max(e.y,e.y+e.height),Math.min(e.x,e.x+e.width)],t4=e=>[eO(e.x,e.y),eO(e.x+e.width,e.y),eO(e.x+e.width,e.y+e.height),eO(e.x,e.y+e.height)],t5=(e,t)=>{if(e)return e.x=t(e.x),e.y=t(e.y),e.width=t(e.width),e.height=t(e.height),e},t3=(e,t,r=tB(e))=>t4(e).map((e,n)=>{let o=tk[n];return eO(eF(e.x,1+o.x*t.x,r.x),eF(e.y,1+o.y*t.y,r.y))}),t6=e=>(e.x=0,e.y=0,e),t8=e=>{let t,r,n;let o=e[0];e=eK(o,e[e.length-1])?e:[...e,o];let a=o.x,l=o.y,s=0,d=0,c=0,u=0,h=e.length;for(;d<h;d++)t=e[d],r=e[d+1>h-1?0:d+1],s+=n=(t.y-l)*(r.x-a)-(r.y-l)*(t.x-a),c+=(t.x+r.x-2*a)*n,u+=(t.y+r.y-2*l)*n;return eO(a+c/(n=3*s),l+u/n)},t7=(e,t)=>t9(e.start,e.end,t.start,t.end),t9=(e,t,r,n)=>{let o=(n.y-r.y)*(t.x-e.x)-(n.x-r.x)*(t.y-e.y);if(0===o)return;let a=((n.x-r.x)*(e.y-r.y)-(n.y-r.y)*(e.x-r.x))/o,l=((t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x))/o;if(!(a<0)&&!(a>1)&&!(l<0)&&!(l>1))return eO(e.x+a*(t.x-e.x),e.y+a*(t.y-e.y))},ie=(e,t,{ignoreIdenticalLines:r=!1,breakOnIntersection:n=!1}={})=>{let o=t.length,a=[];for(let l=0;l<o-1;l++){if(r&&(eK(e.start,t[l])||eK(e.start,t[l+1])||eK(e.end,t[l])||eK(e.end,t[l+1])))continue;let o=t9(e.start,e.end,t[l],t[l+1]);if(o){if(n)return[o];a.push(o)}}return a.length?a:void 0},it=(e,t)=>{let r=0,n=0,o=!1,a=t.length;for(r=0,n=a-1;r<a;n=r++)t[r].y>e.y!=t[n].y>e.y&&e.x<(t[n].x-t[r].x)*(e.y-t[r].y)/(t[n].y-t[r].y)+t[r].x&&(o=!o);return o},ii=(e,t)=>!!(e.find(e=>it(e,t))||t.find(t=>it(t,e))),ir=e=>{let t=[];for(let r=0;r<e.length;r++){let n=r+1;n===e.length&&(n=0),t.push(tx(eV(e[r]),eV(e[n])))}return t},io=(e,t=0)=>ir(e).map(e=>tv(e,t)),ia=(e,t,r,n=0,o=!1,a=!1,l=12)=>{let s=[];for(let n=0;n<l;n++)s.push(eO(e.x+t*Math.cos(2*Math.PI*n/l),e.y+r*Math.sin(2*Math.PI*n/l)));return(o||a)&&te(s,o,a,e.x,e.y),n&&tt(s,n,e.x,e.y),s},il=(e,t,r,n)=>{let o=eO(e.x-r.x,e.y-r.y),a=eO(n.x-r.x,n.y-r.y),l=e5(a,a),s=e5(o,a)/l;s=(s=s<0?0:s)>1?1:s;let d=eO(a.x*s+r.x-e.x,a.y*s+r.y-e.y);return e5(d,d)<=t*t},is=(e,t,r)=>{let n=r.length;for(let o=0;o<n-1;o++)if(il(e,t,r[o],r[o+1]))return!0;return!1},id=(e,t,r)=>!!(it(e,r)||is(e,t,r))||il(e,t,r[0],r[r.length-1]),ic=(e,t,r,n,o,a)=>id(e,t,ia(eO(r.x,r.y),r.rx,r.ry,n,o,a,12)),iu=(e,t,r,n,o)=>id(e,t,tY(r,n,o||tB(r)));var ih=(e,t)=>{let r=tE(e),n=tB(r);return t6(tA(tY(r,t,n)))},ip=(e,t)=>e instanceof HTMLElement&&(!t||RegExp(`^${t}$`,"i").test(e.nodeName)),i$=e=>e instanceof File,im=async(e,t,r)=>ef(await ea(e,t,r),"canvas"),ig=e=>e.split("/").pop().split(/\?|\#/).shift();let iy=k()&&Node.prototype.replaceChildren?(e,t)=>e.replaceChildren(t):(e,t)=>{for(;e.lastChild;)e.removeChild(e.lastChild);void 0!==t&&e.append(t)},ix=k()&&R("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});var ib=e=>(iy(ix,e),ix.parentNode||document.body.append(ix),clearTimeout(n),n=setTimeout(()=>{ix.remove()},500),e);let iv=null;var iw=()=>(null===iv&&(iv=k()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),iv),iS=e=>new Promise((t,r)=>{let n=!1;!e.parentNode&&iw()&&(n=!0,e.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",ib(e));let o=()=>{let r=e.naturalWidth,o=e.naturalHeight;r&&o&&(n&&e.remove(),clearInterval(a),t({width:r,height:o}))};e.onerror=e=>{clearInterval(a),r(e)};let a=setInterval(o,1);o()}),ik=e=>new Promise((t,r)=>{let n=()=>{t({width:e.videoWidth,height:e.videoHeight})};if(e.readyState>=1)return n();e.onloadedmetadata=n,e.onerror=()=>r(e.error)}),iC=e=>/^image/.test(e.type),iT=e=>new Promise(t=>{let r=P(e)?e:URL.createObjectURL(e),n=()=>{let e=new Image;e.src=r,t(e)};if(e instanceof Blob&&iC(e))return n();let o=document.createElement("video");o.preload="metadata",o.onloadedmetadata=()=>t(o),o.onerror=n,o.src=r}),iM=e=>"VIDEO"===e.nodeName,iP=async e=>{let t,r;t=e.src?e:await iT(e);try{r=iM(t)?await ik(t):await iS(t)}finally{i$(e)&&URL.revokeObjectURL(t.src)}return r};let iE=e=>new Promise((t,r)=>{if(e.complete)return t(e);e.onload=()=>t(e),e.onerror=()=>r(Error("Failed to load image"))});var iR=async e=>{let t=await iP(e),r=await iE(e),n=R("canvas",t);return n.getContext("2d",{willReadFrequently:!0}).drawImage(r,0,0),ef(await ea(n),ig(r.src))},iI=e=>/^data:/.test(e),iA=(e=0,t=!0)=>new(y("ProgressEvent"))("progress",{loaded:100*e,total:100,lengthComputable:t}),iL=async(e,t="data-uri",r=x)=>{let n;r(iA(0));let o=await fetch(e);r(iA(.33));let a=await o.blob();iC(a)||(n=`image/${e.includes(",/9j/")?"jpeg":"png"}`),r(iA(.66));let l=ef(a,t,n);return r(iA(1)),l},iF=(e,t,r=e=>e)=>e.getAllResponseHeaders().indexOf(t)>=0?r(e.getResponseHeader(t)):void 0,iz=e=>{if(!e)return null;let t=e.split(/filename=|filename\*=.+''/).splice(1).map(e=>e.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(e=>e.length);return t.length?decodeURI(t[t.length-1]):null};class iB extends Error{constructor(e,t,r){super(e),this.name="EditorError",this.code=t,this.metadata=r}}var iO=(e,t)=>{let{headers:r={},credentials:n}=t||{};Object.entries(r).forEach(([t,r])=>e.setRequestHeader(t,r)),n&&(e.withCredentials="omit"!==n)},iD=(e,t,r)=>new Promise((n,o)=>{let a=()=>o(new iB("Error fetching image","URL_REQUEST",l)),l=new XMLHttpRequest;l.onprogress=t,l.onerror=a,l.onload=()=>{if(!l.response||l.status>=300||l.status<200)return a();let t=iF(l,"Content-Type"),r=iF(l,"Content-Disposition",iz)||ig(e);n(ef(l.response,r,t||e$(r)))};let{willRequest:s}=r;Promise.resolve(s&&s(e,{resourceType:"image"})).then(t=>{if(!1===t)return o("Image load rejected");l.open("GET",e,!0),iO(l,t),l.responseType="blob",l.send()}).catch(console.error)}),i_=(e,t,r)=>iI(e)?iL(e,void 0,t):iD(e,t,r),iW=e=>e instanceof Blob&&!(e instanceof File),iN=e=>"close"in e,iV=async(e,t,r)=>{if(i$(e)||iW(e))return e;if(P(e))return await i_(e,t,r);if(ip(e,"canvas"))return await im(e);if(ip(e,"img"))return await iR(e);if(F(e)||iN(e))return await im(await _(e));throw new iB("Invalid image source","invalid-image-source")};let ij=null;var iU=()=>(null===ij&&(ij=k()&&/^mac/i.test(navigator.platform)),ij);let iH=null;var iG=()=>(null===iH&&(iH=k()&&(z(/iPhone|iPad|iPod/)||iU()&&navigator.maxTouchPoints>=1)),iH),iX=async(e,t=1)=>await T()||iG()||t<5?e:td(e.height,e.width),iZ=e=>/jpeg/.test(e.type),iY=e=>"object"==typeof e&&e.constructor==Object,iq=e=>iY(e)?JSON.stringify(e):e,iK=(e,t,r)=>new Promise((n,o)=>{let{token:a={},beforeSend:l=x,onprogress:s=x}=r;a.cancel=()=>d.abort();let d=new XMLHttpRequest;d.upload.onprogress=s,d.onload=()=>d.status>=200&&d.status<300?n(d):o(d),d.onerror=()=>o(d),d.ontimeout=()=>o(d),d.open("POST",encodeURI(e)),l(d),d.send(t instanceof FormData?t:t.reduce((e,t)=>(e.append(...t.map(iq)),e),new FormData))}),iJ=(e,t=0,r)=>(0===t||(e.translate(r.x,r.y),e.rotate(t),e.translate(-r.x,-r.y)),e),iQ=(e,t,r)=>(e.translate(t,r),e),i0=(e,t,r)=>(e.scale(t,r),e),i1=async(e,t={})=>{let r;let{flipX:n,flipY:o,rotation:a,crop:l}=t,s=tn(e),d=n||o,c=!!a,u=l&&(l.x||l.y||l.width||l.height),h=u&&tH(l,tE(s)),p=u&&!h;if(!d&&!c&&!p)return e;let $=R("canvas",{width:e.width,height:e.height});if($.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),d){let e=R("canvas",{width:$.width,height:$.height}).getContext("2d",{willReadFrequently:!0});i0(e,n?-1:1,o?-1:1),e.drawImage($,n?-$.width:0,o?-$.height:0),e.restore(),L($),$=e.canvas}if(c){let e=tf(to(tA(tY(tI($),a))),Math.floor),t=R("canvas",{width:l.width,height:l.height}).getContext("2d",{willReadFrequently:!0});iQ(t,-l.x,-l.y),iJ(t,a,th(e)),t.drawImage($,(e.width-$.width)*.5,(e.height-$.height)*.5),t.restore(),L($),$=t.canvas}else if(p)return r=$.getContext("2d",{willReadFrequently:!0}).getImageData(l.x,l.y,l.width,l.height),L($),r;return r=$.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,$.width,$.height),L($),r},i2=(e,t)=>{let{imageData:r,width:n,height:o}=e,a=r.width,l=r.height,s=Math.round(n),d=Math.round(o),c=r.data,u=new Uint8ClampedArray(s*d*4),h=a/s,p=l/d,$=Math.ceil(.5*h),m=Math.ceil(.5*p);for(let e=0;e<d;e++)for(let t=0;t<s;t++){let r=(t+e*s)*4,n=0,o=0,l=0,d=0,f=0,g=0,y=0,x=(e+.5)*p;for(let r=Math.floor(e*p);r<(e+1)*p;r++){let e=Math.abs(x-(r+.5))/m,s=(t+.5)*h,u=e*e;for(let e=Math.floor(t*h);e<(t+1)*h;e++){let t=Math.abs(s-(e+.5))/$,h=Math.sqrt(u+t*t);if(h<-1||h>1||(n=2*h*h*h-3*h*h+1)<=0)continue;let p=c[(t=4*(e+r*a))+3];y+=n*p,l+=n,p<255&&(n=n*p/250),d+=n*c[t],f+=n*c[t+1],g+=n*c[t+2],o+=n}}u[r]=d/o,u[r+1]=f/o,u[r+2]=g/o,u[r+3]=y/l}t(null,{data:u,width:s,height:d})},i4=e=>{let t;if(e instanceof ImageData)return e;try{t=new ImageData(e.width,e.height)}catch(r){t=R("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(e.data),t},i5=async(e,t={},r)=>{let{width:n,height:o,fit:a,upscale:l}=t;if(!n&&!o)return e;let s=n,d=o;if(n?o||(d=n):s=o,"force"!==a){let t=s/e.width,r=d/e.height,n=1;if("cover"===a?n=Math.max(t,r):"contain"===a&&(n=Math.min(t,r)),n>1&&!1===l)return e;s=Math.round(e.width*n),d=Math.round(e.height*n)}return(s=Math.max(s,1),d=Math.max(d,1),e.width===s&&e.height===d)?e:r?r(e,s,d):i4(e=await et(i2,[{imageData:e,width:s,height:d}],[e.data.buffer]))},i3=(e,t)=>{let{imageData:r,matrix:n}=e;if(!n)return t(null,r);let o=r.data,a=o.length,l=n[0],s=n[1],d=n[2],c=n[3],u=n[4],h=n[5],p=n[6],$=n[7],m=n[8],f=n[9],g=n[10],y=n[11],x=n[12],b=n[13],v=n[14],w=n[15],S=n[16],k=n[17],C=n[18],T=n[19],M=0,P=0,E=0,R=0,I=0,A=0,L=0,F=0,z=0,B=0,O=0,D=0;for(;M<a;M+=4)P=o[M]/255,E=o[M+1]/255,A=P*l+E*s+(R=o[M+2]/255)*d+(I=o[M+3]/255)*c+u,L=P*h+E*p+R*$+I*m+f,F=P*g+E*y+R*x+I*b+v,B=Math.max(0,A*(z=P*w+E*S+R*k+I*C+T))+(1-z),O=Math.max(0,L*z)+(1-z),D=Math.max(0,F*z)+(1-z),o[M]=255*Math.max(0,Math.min(1,B)),o[M+1]=255*Math.max(0,Math.min(1,O)),o[M+2]=255*Math.max(0,Math.min(1,D)),o[M+3]=255*I;t(null,{data:o,width:r.width,height:r.height})},i6=(e,t)=>{let{imageData:r,matrix:n}=e;if(!n)return t(null,r);let o=n.reduce((e,t)=>e+t);o=o<=0?1:o;let a=r.width,l=r.height,s=r.data,d=0,c=0,u=0,h=Math.round(Math.sqrt(n.length)),p=Math.floor(h/2),$=0,m=0,f=0,g=0,y=0,x=0,b=0,v=0,w=0,S=0,k=new Uint8ClampedArray(a*l*4);for(u=0;u<l;u++)for(c=0;c<a;c++){for(x=0,$=0,m=0,f=0,g=0;x<h;x++)for(y=0;y<h;y++)b=u+x-p,v=c+y-p,b<0&&(b=l-1),b>=l&&(b=0),v<0&&(v=a-1),v>=a&&(v=0),w=(b*a+v)*4,S=n[x*h+y],$+=s[w]*S,m+=s[w+1]*S,f+=s[w+2]*S,g+=s[w+3]*S;k[d]=$/o,k[d+1]=m/o,k[d+2]=f/o,k[d+3]=g/o,d+=4}t(null,{data:k,width:a,height:l})},i8=(e,t)=>{let r,n,o,a,l,s,d,c,u,h,p,{imageData:$,strength:m}=e;if(!m)return t(null,$);let f=$.width,g=$.height,y=$.data,x=(e,t)=>Math.sqrt((r=e-w)*r+(n=t-S)*n),b=0,v=0,w=.5*f,S=.5*g,k=x(0,0),C=(e,t,r,n)=>{s=t[e]/255,d=t[e+1]/255,c=t[e+2]/255,u=t[e+3]/255,p=(h=1-n)*u+n,r[e]=(h*u*s+n*o)/p*255,r[e+1]=(h*u*d+n*a)/p*255,r[e+2]=(h*u*c+n*l)/p*255,r[e+3]=255*p};for(m>0?(o=0,a=0,l=0):(m=Math.abs(m),o=1,a=1,l=1),v=0;v<g;v++)for(b=0;b<f;b++)C((b+v*f)*4,y,y,x(b,v)*m/k);t(null,{data:y,width:$.width,height:$.height})},i7=(e,t)=>{let r,n,o;let{imageData:a,level:l,monochrome:s=!1}=e;if(!l)return t(null,a);let d=a.data,c=d.length,u=0,h=()=>(-1+2*Math.random())*255*l,p=s?()=>{let e=h();return[e,e,e]}:()=>[h(),h(),h()];for(;u<c;u+=4)[r,n,o]=p(),d[u]=d[u]+r,d[u+1]=d[u+1]+n,d[u+2]=d[u+2]+o;t(null,{data:d,width:a.width,height:a.height})},i9=(e,t)=>{let r,n,o;let{imageData:a,level:l}=e;if(!l)return t(null,a);let s=a.data,d=s.length,c=0;for(;c<d;c+=4)r=s[c]/255,n=s[c+1]/255,o=s[c+2]/255,s[c]=255*Math.pow(r,l),s[c+1]=255*Math.pow(n,l),s[c+2]=255*Math.pow(o,l);t(null,{data:s,width:a.width,height:a.height})},re=e=>{let t;let r=e.length,n=r>=20?6:r>=16?5:3;for(let o=0;o<r;o++)if(1===(t=e[o])&&o%n!=0||0!==t&&1!==t)return!1;return!0},rt=async(e,t={})=>{let{colorMatrix:r,convolutionMatrix:n,gamma:o,noise:a,vignette:l}=t,s=[];if(n&&s.push([i6,{matrix:n.clarity}]),o>0&&s.push([i9,{level:1/o}]),r&&!re(r)&&s.push([i3,{matrix:r}]),(a>0||a<0)&&s.push([i7,{level:a}]),(l>0||l<0)&&s.push([i8,{strength:l}]),!s.length)return e;let d=(e,t)=>`(err, imageData) => {
            (${e[t][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${t}]), 
                ${e[t+1]?d(e,t+1):"done"})
        }`,c=`function (options, done) {
        const filterInstructions = options.filterInstructions;
        const imageData = options.imageData;
        (${d(s,0)})(null, imageData)
    }`;return i4(e=await et(c,[{imageData:e,filterInstructions:s.map(e=>e[1])}],[e.data.buffer]))},ri=e=>"number"==typeof e,rr=e=>P(e)&&null!==e.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g),rn=(e,t)=>e.hasOwnProperty(t),ro=e=>Array.isArray(e),ra=()=>iG()||iU(),rl=()=>/^win/i.test(navigator.platform);let rs=64,rd=102,rc=112,ru=!1;var rh=(e,t)=>(!ru&&k()&&(rl()&&(rd=103),ra()&&(rs=63.5,rd=110,rc=123),ru=!0),`<svg${t?` aria-label="${t}"`:""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${rs}" y="${rd}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${rc}px">${e}</text></svg>`),rp=e=>`data:image/svg+xml,${e.replace("<","%3C").replace(">","%3E")}`,r$=e=>e instanceof Blob,rm=(e,t)=>`${e/t*100}%`,rf=e=>`rgba(${Math.round(255*e[0])}, ${Math.round(255*e[1])}, ${Math.round(255*e[2])}, ${ri(e[3])?e[3]:1})`,rg=e=>Object.values(e).join("_"),ry=(e=0)=>new Promise(t=>{setTimeout(t,e)});let rx=e=>!new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data.buffer).some(e=>0!==e),rb=async(e,t=0)=>{let r=R("canvas",{width:80,height:80}).getContext("2d");return await ry(t),r.drawImage(e,0,0,80,80),!rx(r)||!(t<=256)||await rb(e,t+16)},rv=new Map;var rw=(e,{safariCacheKey:t="*"}={})=>new Promise((r,n)=>{let o=new Image;o.onerror=()=>n(Error("Failed to load SVG")),o.onload=()=>{if(!iw()||!e.includes("@font-face")||rv.has(t))return r(o);rb(o).then(()=>{rv.set(t,!0),r(o)})},o.src="data:image/svg+xml,"+e}),rS=e=>new Promise((t,r)=>{let n=new FileReader;n.onerror=()=>r(n.error),n.onload=()=>t(n.result),n.readAsDataURL(e)}),rk=()=>{let e=[];return{sub:(t,r)=>(e.push({event:t,callback:r}),()=>e=e.filter(e=>e.event!==t||e.callback!==r)),pub:(t,r)=>{e.filter(e=>e.event===t).forEach(e=>e.callback(r))}}};let rC=({fontSize:e=16,lineHeight:t=20}={})=>.5*Math.max(0,e-t),rT=(e="")=>e.split("\n").length,rM=({color:e=[0,0,0],fontSize:t=16,fontFamily:r="sans-serif",fontVariant:n="normal",fontWeight:o="normal",fontStyle:a="normal",textAlign:l="left",letterSpacing:s="normal",lineHeight:d=20},c=1)=>`font-size:${t*c}px;font-style:${a};font-weight:${o};font-family:${r};font-variant:${n};line-height:${d*c}px;text-align:${l};letter-spacing:${ri(s)?s+"px":"normal"};color:${rf(e)};`,rP=(e,t,r=1)=>{let{width:n,height:o,disableNewline:a}=t,l=!n,s=!1===a?rT(e):void 0,d=l?"auto":`${n*r}px`,c=o?`${o*r}px`:"auto",u=rC(t)*r;return`max-width:none;min-width:auto;width:${d};height:${c};margin-top:0;margin-bottom:0;padding-top:${u}px;word-break:${l?"normal":"break-word"};word-wrap:normal;white-space:${l&&!s?"nowrap":"pre-line"};`},rE=new Map,rR=e=>{let t=[];for(let r of Array.from(e.childNodes))r.nodeType===Node.TEXT_NODE?t.push(rL(r)):t.push(...rR(r));return t},rI="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",rA=(e="",t)=>{let{width:r=0,height:n="auto",fontSize:o,fontFamily:a,lineHeight:l,fontWeight:s,fontStyle:d,fontVariant:c,letterSpacing:u}=t,h=rg({text:e,fontFamily:a,fontWeight:s,fontStyle:d,fontVariant:c,fontSize:o,lineHeight:l,letterSpacing:u,width:r,height:n}),p=rE.get(h);if(p)return p;let $=1;o>1e3&&er()&&($=o/1e3,o=1e3,l*=$);let m=ib(R("pre",{contenteditable:"true",spellcheck:"false",style:`${rI}${rM({fontFamily:a,fontWeight:s,fontStyle:d,fontVariant:c,fontSize:o,letterSpacing:u,lineHeight:l})};${rP(e,t)}"`,innerHTML:e})),f=m.getBoundingClientRect();return p={signature:rR(m).flat().map(e=>e.text).join("_;_"),textSize:tf(tn(f),e=>Math.ceil(e*$))},rE.set(h,p),m.remove(),p},rL=e=>{let t=e.nodeValue;if(!t)return[];let r=t.length,n=document.createRange();n.selectNodeContents(e);let o=[];for(let a=0;a<r;a++){n.setStart(e,0),n.setEnd(e,a+1);let r=n.getClientRects().length-1,l=t.charAt(a);o[r]?o[r]+=l:o.push(l)}let a=n.getClientRects();return o.map((e,t)=>({rect:a[t],text:e}))},rF=new Map,rz=(e="",t)=>{let{width:r=0,height:n=0}=t;if(r&&n)return td(r,n);let{fontSize:o=16,fontFamily:a,lineHeight:l=20,fontWeight:s,fontStyle:d,fontVariant:c,letterSpacing:u}=t,h=rg({text:e,fontFamily:a,fontWeight:s,fontStyle:d,fontVariant:c,fontSize:o,letterSpacing:u,lineHeight:l,width:r}),p=rF.get(h);if(p)return p;let $=1;return o>1e3&&er()&&($=o/1e3,o=1e3,l/=$),p=tf(p=tn(ib(R("pre",{contenteditable:"true",spellcheck:"false",style:`${rI}${rM({...t,fontSize:o,lineHeight:l})};${rP(e,t)}"`,innerHTML:e})).getBoundingClientRect()),e=>e*$),r&&(p.width=r),rF.set(h,p),p},rB=e=>e.pathname.split("/").slice(0,-1).join("/"),rO=(e,t)=>{let r,n;let{sub:o,pub:a}=rk();return Promise.resolve(t&&t(e,{resourceType:"stylesheet"})).then(t=>{if(!1===t)return a("error",n="requestPrevented");let{headers:o,credentials:l}=t||{};fetch(e,{headers:o,credentials:l}).then(e=>e.text()).then(e=>{a("load",r=e)}).catch(e=>{a("error",n=e)})}),{sub:(e,t)=>"load"===e&&r?t(r):"error"===e&&n?t(n):void o(e,t)}},rD=new Map,r_=(e,t)=>new Promise((r,n)=>{let o=rD.get(e);void 0===o&&(o=rO(e,t),rD.set(e,o)),o.sub("load",r),o.sub("error",n)}),rW=async(e,t,r)=>{let n;try{n=await r_(e,t)}catch(e){return[]}let o={innerHTML:n,id:K()};r&&(o.nonce=r);let a=R("style",o);document.head.append(a);let l=Array.from(document.styleSheets).find(e=>e.ownerNode.id===a.id);return a.remove(),Array.from(l.cssRules)},rN=new Map,rV=e=>e.filter(e=>e instanceof CSSFontFaceRule),rj=e=>e.filter(e=>e instanceof CSSImportRule),rU=async(e,t,r)=>{let n;if(rN.has(e.href))return rN.get(e.href);try{for(let o of(n=Array.from(e.cssRules),rj(n))){let e=o.href;if(rN.has(e)){let t=rN.get(e);n=[...n,...t];continue}let a=await rW(e,t,r);rN.set(e,a),n=[...n,...a]}}catch(a){let o=e.href;n=await rW(o,t,r),rN.set(o,n)}return rV(n)},rH=(e,t)=>e.style.getPropertyValue(t),rG=(e,t)=>!!e.style&&rH(e,"font-family").replace(/^"|"$/g,"")==t,rX=(e,t)=>{let r=[];for(let n of e)rG(n,t)&&r.push(n);return r},rZ=async(e,t)=>{let r=Array.from(document.styleSheets).map(r=>rU(r,e,t)),n=await Promise.all(r),o=[];return n.forEach(e=>o.push(...e)),o},rY=async(e,t,r)=>{let n=rX(await rZ(t,r),e);return n.length?n.map(e=>{let t=e.parentStyleSheet&&e.parentStyleSheet.href&&new URL(e.parentStyleSheet.href),r=t?t.origin+rB(t)+"/":"",n=e.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],o=Array.from(e.style).filter(e=>"src"!=e).reduce((t,r)=>t+=r+":"+rH(e,r)+";","");return[/^http/.test(n)?n:r+n,o]}):[]},rq=new Map,rK=new Map,rJ=e=>!e||/woff2/.test(e)?"woff2":/woff/.test(e)?"woff":/ttf|truetype/.test(e)?"truetype":/otf|opentype/.test(e)?"opentype":/svg/.test(e)?"svg":"woff2",rQ=async(e,t,r)=>{if(rq.get(e))return;let n=rK.get(e);if(!n){let o=await rY(e,t,r);if(!o.length){rq.set(e,!0);return}let a=[];for(let[e,t]of o){let r=await fetch(e).then(e=>e.blob()),n=rJ(r.type),o=await rS(r);a.push(`@font-face { src:url(${o}) format('${n}');${t};font-display:block; }`)}n=a.join(""),rK.set(e,n)}return n};var r0=async(e="",t)=>{if(!e.length)return;let{color:r,imageWidth:n=300,imageHeight:o=150,paddingTop:a=0,paddingRight:l=32,paddingBottom:s=0,paddingLeft:d=32,fontFamily:c,fontSize:u,pixelRatio:h=1,willRequest:p,outline:$,blur:m,styleNonce:f}=t,g=1,y="";u>1e3&&er()&&(g=u/1e3,y=`transform-origin:0 0;transform:scale(${g})`);let x=h/g,b=(n+d+l)*h,v=(o+s+a)*h,w=await rQ(c,p,f),S="";w&&(S=`<style${f?` nonce="${f}"`:""}>${w}</style>`);let k=e.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g,"\xa0").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>"),C=a*x,T=l*x,M=s*x,P=d*x,E=`top:${C}px;right:${T}px;bottom:${M}px;left:${P}px`,R=r,I="",A="";if($||m){let e=rf(r);$&&(R=[0,0,0,0],I=`-webkit-text-stroke: ${2*$*x}px ${e}`),m&&(iw()?A=`filter:blur(${m*x*.4}px)`:(R=[0,0,0,0],A=`text-shadow: 0 0 ${m*x}px ${e}`))}let L=rM({...t,color:R,fontSize:u},x),F=rP(e,t,x);return rw(`<svg xmlns="http://www.w3.org/2000/svg" width="${b}" height="${v}" viewBox="0 0 ${b} ${v}"><foreignObject x="0" y="0" width="${b}" height="${v}"><div xmlns="http://www.w3.org/1999/xhtml">${S}<pre contenteditable="true" spellcheck="false" style="position:absolute;${E};${L};${F};${y};${I};${A}">${k}</pre></div></foreignObject></svg>`,{safariCacheKey:c})};let r1=(e,t)=>JSON.stringify(e)===JSON.stringify(t),r2=e=>j({...e}),r4=(e,t={})=>{let r,n;let o=tG(e),a=t.width||t.rx,l=t.height||t.ry;if(a&&l)return tr(t);if(a||l){let e=Math.min(r=parseFloat(a||Number.MAX_SAFE_INTEGER),n=parseFloat(l||Number.MAX_SAFE_INTEGER));P(a)||P(l)?(r=`${e}%`,n=`${e*o}%`):(r=e,n=e)}else r="10%",n=`${10*o}%`;return{[(t.width?"width":t.rx?"rx":void 0)||"width"]:r,[(t.width?"height":t.rx?"ry":void 0)||"height"]:n}},r5=(e,t={})=>({width:void 0,height:void 0,...t,aspectRatio:1,backgroundImage:rp(rh(e))}),r3=(e,t={})=>({backgroundColor:[0,0,0,0],...nr(t)?{}:{width:void 0,height:void 0,aspectRatio:void 0},...t,backgroundImage:P(e)?e:r$(e)?URL.createObjectURL(e):e}),r6=(e,t)=>{let r;if(P(e)||r$(e)){let n={...r4(t),backgroundSize:"contain"};r=rr(e)?r5(e,n):r3(e,n)}else if(e.src){let n=r4(t,e.shape||e),o={...e.shape,...n};if(e.width&&e.height&&!rn(o,"aspectRatio")){let e=oe(n,"width",t),r=oe(n,"height",t);o.aspectRatio=eg(e,r)}o.backgroundSize||e.shape||e.width&&e.height||(o.backgroundSize="contain"),r=rr(e.src)?r5(e.src,o):r3(e.src,o)}else e.shape&&(r=r2(e.shape));return rn(r,"backgroundImage")&&(rn(r,"backgroundColor")||(r.backgroundColor=[0,0,0,0]),rn(r,"disableStyle")||(r.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),t?n8(r,t):r},r8=e=>eO(e.x1,e.y1),r7=e=>eO(e.x2,e.y2),r9=e=>rn(e,"text"),ne=e=>r9(e)&&!(nf(e)||rn(e,"width")),nt=e=>r9(e)&&(nf(e)||rn(e,"width")),ni=e=>!r9(e)&&ng(e),nr=e=>rn(e,"rx"),nn=e=>rn(e,"x1"),no=e=>rn(e,"points"),na=e=>r9(e)&&!e.text.length,nl=e=>r9(e)&&e.isEditing,ns=e=>!rn(e,"opacity")||e.opacity>0,nd=e=>e.isSelected,nc=e=>e.isEditing,nu=e=>e._isDraft,nh=e=>rn(e,"width")&&rn(e,"height"),np=e=>ri(e.strokeWidth)&&e.strokeWidth>0,n$=e=>{let t=rn(e,"right"),r=rn(e,"bottom");return t||r},nm=e=>rn(e,"backgroundImage")||rn(e,"text"),nf=e=>(rn(e,"x")||rn(e,"left"))&&rn(e,"right")||(rn(e,"y")||rn(e,"top"))&&rn(e,"bottom"),ng=e=>nh(e)||nf(e),ny=(e,t)=>{let r=e[t];return!!r&&(3===r.length||r[3]>0)},nx=e=>e.strokeWidth&&ny(e,"strokeColor"),nb=e=>(e.isSelected=!0,e),nv=e=>(e._isDraft=!0,e),nw=e=>(e._isDraft=!1,e),nS=(e,t)=>!0!==e.disableStyle&&(!ro(e.disableStyle)||!t||!e.disableStyle.includes(t)),nk=e=>!0!==e.disableAcceptSnap,nC=e=>!0!==e.disableSelect,nT=e=>!0!==e.disableRemove,nM=e=>!0!==e.disableDuplicate&&nz(e),nP=e=>!0!==e.disableReorder,nE=e=>!(e.disableFlip||nu(e)||n$(e))&&nm(e),nR=(e,t)=>!!r9(e)&&!0!==e.disableInput&&(U(e.disableInput)?e.disableInput(null!=t?t:e.text):t||!0),nI=(e,t)=>!0!==e.disableTextLayout&&(!ro(e.disableTextLayout)||!t||!e.disableTextLayout.includes(t)),nA=e=>nL(e)&&e.points.length>3,nL=e=>!!no(e)&&void 0!==e.disableAddPoints&&!0!==e.disableAddPoints,nF=e=>!0!==e.disableManipulate&&!nu(e)&&!n$(e),nz=e=>nF(e)&&!0!==e.disableMove,nB=e=>nF(e)&&nz(e)&&!0!==e.disableResize&&(nh(e)||nt(e)||nr(e)||nn(e)||no(e)&&rn(e,"pathClose")),nO=e=>nF(e)&&!0!==e.disableRotate&&(nh(e)||rn(e,"text")||nr(e)),nD=e=>(delete e.left,delete e.right,delete e.top,delete e.bottom,e),n_=e=>(delete e.rotation,e),nW=e=>(e.strokeWidth=e.strokeWidth||1,e.strokeColor=e.strokeColor||[0,0,0],e),nN=e=>(e.backgroundColor=e.backgroundColor?e.backgroundColor:e.strokeWidth||e.backgroundImage?void 0:[0,0,0],e),nV=e=>{let t=e.text;t=(t=t.replace(/&(#[0-9]+|[a-z]+);/gi,(e,t)=>`___${t}___`)).replace(/&/,"&amp;"),e.text=t.replace(/___(#[0-9]+|[a-z]+)___/gi,(e,t)=>`&${t};`)},nj=e=>{nV(e);let t=e.text;t=(t=t.replace(/</g,"&gt;")).replace(/>/g,"&lt;"),e.text=t},nU=e=>{if(e.fontSize=e.fontSize||"4%",e.fontFamily=e.fontFamily||"sans-serif",e.fontWeight=e.fontWeight||"normal",e.fontStyle=e.fontStyle||"normal",e.fontVariant=e.fontVariant||"normal",e.lineHeight=e.lineHeight||"120%",e.color=e.color||[0,0,0],e.format="html"===e.format?"html":"text",e.textShadow){let[t,r,n,o]=e.textShadow;e.textShadowX=t,e.textShadowY=r,e.textShadowBlur=n,e.textShadowColor=o,delete e.textShadow}if(e.textOutline){let[t,r]=e.textOutline;e.textOutlineWidth=t,e.textOutlineColor=r,delete e.textOutline}return"html"===e.format?nV(e):nj(e),ne(e)?nH(e):nG(e)},nH=e=>(!1!==e.disableNewline&&(delete e.textAlign,e.text=e.text.replace(/\n/g," ")),nD(e)),nG=e=>(e.textAlign=e.textAlign||"left",e),nX=e=>(e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],nN(e)),nZ=e=>(e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],nN(e)),nY=e=>(nW(e),n_(e),rn(e,"pathClose")||(e.disableResize=!0,rn(e,"disableMove")||(e.disableMove=!0)),nD(e)),nq=e=>(nW(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,n_(e),nD(e)),nK=e=>{P(e.id)||(e.id=K()),rn(e,"rotation")||(e.rotation=0),rn(e,"opacity")||(e.opacity=1),rn(e,"disableErase")||(e.disableErase=!0)},nJ=e=>(nK(e),r9(e)?nU(e):ni(e)?nX(e):no(e)?nY(e):nn(e)?nq(e):nr(e)&&nZ(e),e),nQ=e=>r9(e)?"text":ni(e)?"rectangle":no(e)?"path":nn(e)?"line":nr(e)?"ellipse":void 0,n0=(e,t)=>parseFloat(e)/100*t,n1=RegExp(/^x|left|right|^width|rx|fontSize|eraseRadius|feather|cornerRadius|strokeWidth|strokeDash/,"i"),n2=RegExp(/^y|top|bottom|^height|ry/,"i"),n4=(e,t,{width:r,height:n})=>{if(Array.isArray(t))return t.map(t=>(N(t)&&n6(t,{width:r,height:n}),P(t)&&(t=n4(e,t,{width:r,height:n})),t));if("string"!=typeof t||!t.endsWith("%"))return t;let o=parseFloat(t)/100;return n1.test(e)?eL(r*o,6):n2.test(e)?eL(n*o,6):t},n5=(e,t)=>Math.round(t*(parseFloat(e)/100)),n3=["lineHeight","textOutlineWidth","textShadowX","textShadowY","textShadowBlur"],n6=(e,t)=>{Object.entries(e).map(([r,n])=>{e[r]=n4(r,n,t)}),e.text&&n3.filter(t=>P(e[t])).forEach(t=>{e[t]=n5(e[t],e.fontSize)})},n8=(e,t)=>(n6(e,t),oa(e,t),e),n7=(e,t)=>{let r;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(e)?r=t.width:/^y|height|ry/.test(e)&&(r=t.height),r},n9=(e,t,r,n)=>{if(!P(e[t]))return e[t]=r,e;let o=n7(t,n);return e[t]=void 0===o?r:rm(r,o),e},oe=(e,t,r)=>Array.isArray(e[t])?e[t].map(e=>Object.entries(e).reduce((e,[t,n])=>(e[t]=P(n)?n0(n,n7(t,r)):n,e),{})):P(e[t])?n0(e[t],n7(t,r)):e[t],ot=(e,t,r)=>t.reduce((t,n)=>{let o=oe(e,n,r);return t[n]=o,t},{}),oi=(e,t,r)=>(Object.keys(t).forEach(n=>n9(e,n,t[n],r)),e),or=e=>{let t=tM(),r=e.strokeWidth||0;if(ni(e))t.x=e.x-.5*r,t.y=e.y-.5*r,t.width=e.width+r,t.height=e.height+r;else if(nn(e)){let{x1:n,y1:o,x2:a,y2:l}=e,s=Math.abs(Math.min(n,a)),d=Math.abs(Math.max(n,a)),c=Math.abs(Math.min(o,l)),u=Math.abs(Math.min(o,l));t.x=s+.5*r,t.y=d+.5*r,t.width=d-s+r,t.height=u-c+r}else nr(e)&&(t.x=e.x-e.rx+.5*r,t.y=e.y-e.ry+.5*r,t.width=2*e.rx+r,t.height=2*e.ry+r);return t&&rn(e,"rotation")&&tY(t,e.rotation),t2(t)},on=(e,t)=>{let r=e.filter(e=>e.x<0||e.y<0||e.x1<0||e.y1<0).reduce((e,t)=>{let[r,n,o,a]=or(t);return e.top=Math.min(r,e.top),e.left=Math.min(a,e.left),e.bottom=Math.max(o,e.bottom),e.right=Math.max(n,e.right),e},{top:0,right:0,bottom:0,left:0});return r.right>0&&(r.right-=t.width),r.bottom>0&&(r.bottom-=t.height),r},oo=(e,t,r)=>{let n=r2(e);n8(n,t);let o=r(n);return Array.isArray(o)?o:[o]},oa=(e,t)=>{if(rn(e,"left")&&(e.x=e.left),rn(e,"right")&&!P(e.right)){let r=t.width-e.right;rn(e,"left")?(e.x=e.left,e.width=Math.max(0,r-e.left)):rn(e,"width")&&(e.x=r-e.width)}if(rn(e,"top")&&(e.y=e.top),rn(e,"bottom")&&!P(e.bottom)){let r=t.height-e.bottom;rn(e,"top")?(e.y=e.top,e.height=Math.max(0,r-e.top)):rn(e,"height")&&(e.y=r-e.height)}return e},ol=(e,t)=>(no(e)&&e.points.filter(e=>ri(e.x)).forEach(e=>{e.x*=t,e.y*=t}),nn(e)&&ri(e.x1)&&(e.x1*=t,e.y1*=t,e.x2*=t,e.y2*=t),ri(e.x)&&ri(e.y)&&(e.x*=t,e.y*=t),ri(e.width)&&ri(e.height)&&(e.width*=t,e.height*=t),ri(e.rx)&&ri(e.ry)&&(e.rx*=t,e.ry*=t),np(e)&&(e.strokeWidth*=t),r9(e)&&(e._scale=t,ri(e.fontSize)&&(e.fontSize*=t),ri(e.lineHeight)&&(e.lineHeight*=t),ri(e.width)&&!ri(e.height)&&(e.width*=t)),rn(e,"cornerRadius")&&ri(e.cornerRadius)&&(e.cornerRadius*=t),e),os=e=>{if(ni(e))return eO(e.x+.5*e.width,e.y+.5*e.height);if(nr(e))return eO(e.x,e.y);if(e.text){if(nt(e)){let t=e.height||rz(e.text,e).height;return eO(e.x+.5*e.width,e.y+.5*t)}let t=rz(e.text,e);return eO(e.x+.5*t.width,e.y+.5*t.height)}return no(e)?e9(e.points):nn(e)?e9([r8(e),r7(e)]):void 0};var od=(e,t,r,n,o,a)=>(n<2*a&&(a=n/2),o<2*a&&(a=o/2),e.beginPath(),e.moveTo(t+a,r),e.arcTo(t+n,r,t+n,r+o,a),e.arcTo(t+n,r+o,t,r+o,a),e.arcTo(t,r+o,t,r,a),e.arcTo(t,r,t+n,r,a),e.closePath(),e),oc=e=>/canvas/i.test(e.nodeName),ou=e=>new URL(e,location.href).origin!==location.origin,oh=(e,t)=>new Promise((r,n)=>{let o=e,a=!1,l=()=>{!a&&(a=!0,U(t)&&Promise.resolve().then(()=>t(td(o.naturalWidth,o.naturalHeight))))};if(o.src||(o=new Image,P(e)&&ou(e)&&(o.crossOrigin="anonymous"),o.src=P(e)?e:URL.createObjectURL(e)),o.complete)return l(),r(o);U(t)&&iS(o).then(l).catch(n),o.onload=()=>{l(),r(o)},o.onerror=()=>n(Error("Failed to load image"))});let op=new Map([]),o$=(e,t={})=>new Promise((r,n)=>{let{onMetadata:o=x,onLoad:a=r,onError:l=n,onComplete:s=x}=t,d=op.get(e);if(d||(d={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:rk()},op.set(e,d)),d.bus.sub("meta",o),d.bus.sub("load",a),d.bus.sub("error",l),d.bus.sub("complete",s),oc(e)){let t=e.cloneNode();d.complete=!0,d.image=t,d.size=ts(e)}if(d.complete){d.bus.pub("meta",{size:d.size}),d.error?d.bus.pub("error",d.error):d.bus.pub("load",d.image),d.bus.pub("complete"),d.bus=rk();return}d.loading||(d.loading=!0,oh(e,e=>{d.size=e,d.bus.pub("meta",{size:e})}).then(e=>{d.image=e,d.bus.pub("load",e)}).catch(e=>{d.error=e,d.bus.pub("error",e)}).finally(()=>{d.complete=!0,d.loading=!1,d.bus.pub("complete"),d.bus=rk()}))}),om=(e,t,r,n)=>e.drawImage(t,r.x,r.x,r.width,r.height,n.x,n.y,n.width,n.height);var of=async(e,t,r,n,o=om,a)=>{e.save(),e.clip(),await o(e,t,r,n,a),e.restore()};let og=(e,t,r,n,o)=>{let a=tT(e);if(n){let e=t5(tA(n),eL);return e.x*=r.width,e.width*=r.width,e.y*=r.height,e.height*=r.height,{srcRect:e,destRect:a}}let l=tz(0,0,r.width,r.height);if("contain"===t){let t=t1(e,tG(l));a.width=t.width,a.height=t.height,o?(a.x+=o.x,a.y+=o.y):(a.x+=t.x,a.y+=t.y)}else if("cover"===t){let e=tJ(a,l.width/l.height);a.width=e.width,a.height=e.height,o?(a.x+=o.x,a.y+=o.y):(a.x+=e.x,a.y+=e.y)}else t?(a.width=t.width,a.height=t.height,o&&(a.x+=o.x,a.y+=o.y)):o&&(a.width=r.width,a.height=r.height,a.x+=o.x,a.y+=o.y);return{srcRect:l,destRect:a}},oy=(e,t)=>(t.cornerRadius>0?od(e,t.x,t.y,t.width,t.height,t.cornerRadius):e.rect(t.x,t.y,t.width,t.height),e),ox=(e,t)=>(t.backgroundColor&&e.fill(),e),ob=(e,t)=>(t.strokeWidth&&e.stroke(),e);var ov=async(e,t,r={})=>{let{drawImage:n}=r;if(e.lineWidth=t.strokeWidth?t.strokeWidth:1,e.strokeStyle=t.strokeColor?rf(t.strokeColor):"none",e.fillStyle=t.backgroundColor?rf(t.backgroundColor):"none",e.globalAlpha=t.opacity,t.backgroundImage){let r;if(r=oc(t.backgroundImage)?t.backgroundImage:await o$(t.backgroundImage),oy(e,t),ox(e,t),"repeat"===t.backgroundRepeat){let o=t.backgroundPosition||{x:0,y:0},{srcRect:a,destRect:l}=og(t,t.backgroundSize||ts(r),ts(r),t.backgroundCorners,{x:0,y:0}),s=document.createElement("canvas");s.width=l.width,s.height=l.height;let d=s.getContext("2d",{willReadFrequently:!1,desynchronized:!0});await n(d,r,a,{...l,x:0,y:0});let c=e.createPattern(s,"repeat");e.fillStyle=c,e.save(),e.beginPath(),e.rect(t.x+o.x,t.y+o.y,t.width-o.x,t.height-o.y),e.clip(),e.translate(l.x+o.x,l.y+o.y),e.fill(),L(s),e.restore()}else{let{srcRect:o,destRect:a}=og(t,t.backgroundSize,ts(r),t.backgroundCorners,t.backgroundPosition);await of(e,r,o,a,n,{feather:t.feather})}return e.beginPath(),oy(e,t),ob(e,t),[]}return oy(e,t),ox(e,t),ob(e,t),[]},ow=async(e,t,r={})=>new Promise(async(n,o)=>{let{drawImage:a}=r;if(e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?rf(t.strokeColor):"none",e.fillStyle=t.backgroundColor?rf(t.backgroundColor):"none",e.globalAlpha=t.opacity,e.ellipse(t.x,t.y,t.rx,t.ry,0,0,2*Math.PI),t.backgroundColor&&e.fill(),t.backgroundImage){let r;try{r=await o$(t.backgroundImage)}catch(e){o(e)}let{srcRect:l,destRect:s}=og(tz(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),t.backgroundSize,ts(r),t.backgroundCorners,t.backgroundPosition);await of(e,r,l,s,a),t.strokeWidth&&e.stroke(),n([])}else t.strokeWidth&&e.stroke(),n([])}),oS=async(e,t,r)=>{let n=ri(t.width)?Math.floor(t.width):void 0,o=ri(t.height)?Math.floor(t.height):void 0,a=n&&o?tn(t):rz(t.text,{...t,width:n,height:o}),l={x:t.x,y:t.y,width:a.width,height:a.height};if(ov(e,{...t,...l,options:r}),!t.text.length)return[];let{textOutlineWidth:s=0,textShadowX:d=0,textShadowY:c=0,textShadowBlur:u=0,textShadowColor:h,outline:p,blur:$,...m}=t,f=!!t.height;if(f&&(e.rect(l.x,l.y,l.width,l.height),e.save(),e.clip()),d||c||u){e.save(),e.translate(d,c);let a={...l};f||(a.height+=32+u),await ok(e,a,{...t,width:n,height:o},{...r,paddingLeft:32+u,paddingRight:32+u,paddingTop:u,paddingBottom:u+(f?-1*c:t.fontSize),shapeExtendedProps:{color:h,blur:u}}),e.restore()}if(s){let a={...l};f||(a.height+=32+s),await ok(e,a,{...t,width:n,height:o},{...r,paddingLeft:32+s,paddingRight:32+s,paddingTop:s,paddingBottom:s+f?0:t.fontSize,shapeExtendedProps:{color:t.textOutlineColor,outline:s}})}return f&&e.restore(),await ok(e,l,{...m,width:n,height:o},{...r,paddingLeft:32,paddingRight:32,paddingTop:0,paddingBottom:f?0:t.fontSize}),[]};let ok=async(e,t,r,n)=>{let{willRequest:o,shapeExtendedProps:a,paddingLeft:l,paddingRight:s,paddingTop:d,paddingBottom:c,styleNonce:u}=n,h=ri(r.width)?Math.floor(t.width):void 0,p=ri(r.height)?Math.floor(t.height):void 0,$=Math.ceil(t.width),m=Math.ceil(t.height),f=await r0(r.text,{...r,...a,...t,width:h,height:p,paddingLeft:l,paddingRight:s,paddingTop:d,paddingBottom:c,imageWidth:$,imageHeight:m,willRequest:o,styleNonce:u});e.drawImage(f,r.x-l,r.y-d,f.width,f.height)};var oC=async(e,t)=>new Promise(async r=>{e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?rf(t.strokeColor):"none",e.globalAlpha=t.opacity,t.bitmap&&(e.lineCap=t.strokeCap,e.lineJoin=t.strokeJoin,e.setLineDash(t.strokeDash||[]));let n=r8(t),o=r7(t);e.moveTo(n.x,n.y),e.lineTo(o.x,o.y),t.strokeWidth&&e.stroke(),r([])}),oT=async(e,t)=>new Promise((r,n)=>{if(t.bitmap&&1===t.points.length){ow(e,{x:t.points[0].x,y:t.points[0].y,rx:.5*t.strokeWidth,ry:.5*t.strokeWidth,backgroundColor:t.strokeColor}).then(()=>r([]));return}e.lineWidth=t.strokeWidth||1,e.strokeStyle=t.strokeColor?rf(t.strokeColor):"none",e.fillStyle=t.backgroundColor?rf(t.backgroundColor):"none",e.globalAlpha=t.opacity;let{points:o}=t;t.bitmap&&(e.lineCap=t.strokeCap,e.lineJoin=t.strokeJoin,e.setLineDash(t.strokeDash||[])),t.pathClose&&e.beginPath(),e.moveTo(o[0].x,o[0].y);let a=o.length;for(let t=1;t<a;t++)e.lineTo(o[t].x,o[t].y);t.pathClose&&e.closePath(),t.strokeWidth&&e.stroke(),t.backgroundColor&&e.fill(),r([])}),oM=(e,t,r,n)=>((t||r)&&(e.translate(n.x,n.y),e.scale(t?-1:1,r?-1:1),e.translate(-n.x,-n.y)),e);let oP=async(e,t,r)=>{let n;e.globalCompositeOperation="subtract"===t.drawMode?"destination-out":"source-over";let o=os(t);if(iJ(e,t.rotation,o),oM(e,t.flipX,t.flipY,o),ni(t)?n=ov:nr(t)?n=ow:nn(t)?n=oC:no(t)?n=oT:r9(t)&&(n=oS),n){let o=await n(e,t,r);return o.length?[t,...await oE(e,o,r)]:[]}return[]};var oE=async(e,t,r)=>{let n=[];for(let o of t)e.save(),e.beginPath(),n=[...n,...await oP(e,o,r)],e.restore();return n},oR=async(e,t={})=>{let{shapes:r=[],contextBounds:n=e,transform:o=x,drawImage:a,willRequest:l,styleNonce:s,canvasMemoryLimit:d,computeShape:c=ey,preprocessShape:u=ey}=t;if(!r.length)return e;let h=R("canvas");h.width=n.width,h.height=n.height;let p=h.getContext("2d",{willReadFrequently:!0});p.putImageData(e,n.x||0,n.y||0);let $=r.map(r2).map(c).map(u).flat().filter(Boolean);o(p),await oE(p,$,{drawImage:a,canvasMemoryLimit:d,willRequest:l,styleNonce:s});let m=p.getImageData(0,0,h.width,h.height);return L(h),m},oI=async(e,t={})=>{let{backgroundColor:r,backgroundImage:n}=t,o=!(!r||r&&0===r[3]);if(!n&&!o)return e;let a=R("canvas");a.width=e.width,a.height=e.height;let l=a.getContext("2d",{willReadFrequently:!0});if(l.putImageData(e,0,0),l.globalCompositeOperation="destination-over",o&&(l.fillStyle=rf(r),l.fillRect(0,0,a.width,a.height)),n){let t;t=oc(n)?n:await o$(n);let{srcRect:r,destRect:o}=og({x:0,y:0,width:e.width,height:e.height},"cover",{width:t.width,height:t.height});l.drawImage(t,r.x,r.y,r.width,r.height,o.x,o.y,o.width,o.height)}let s=l.getImageData(0,0,a.width,a.height);return L(a),s},oA=(e,t)=>{let r=Array(20);return r[0]=e[0]*t[0]+e[1]*t[5]+e[2]*t[10]+e[3]*t[15],r[1]=e[0]*t[1]+e[1]*t[6]+e[2]*t[11]+e[3]*t[16],r[2]=e[0]*t[2]+e[1]*t[7]+e[2]*t[12]+e[3]*t[17],r[3]=e[0]*t[3]+e[1]*t[8]+e[2]*t[13]+e[3]*t[18],r[4]=e[0]*t[4]+e[1]*t[9]+e[2]*t[14]+e[3]*t[19]+e[4],r[5]=e[5]*t[0]+e[6]*t[5]+e[7]*t[10]+e[8]*t[15],r[6]=e[5]*t[1]+e[6]*t[6]+e[7]*t[11]+e[8]*t[16],r[7]=e[5]*t[2]+e[6]*t[7]+e[7]*t[12]+e[8]*t[17],r[8]=e[5]*t[3]+e[6]*t[8]+e[7]*t[13]+e[8]*t[18],r[9]=e[5]*t[4]+e[6]*t[9]+e[7]*t[14]+e[8]*t[19]+e[9],r[10]=e[10]*t[0]+e[11]*t[5]+e[12]*t[10]+e[13]*t[15],r[11]=e[10]*t[1]+e[11]*t[6]+e[12]*t[11]+e[13]*t[16],r[12]=e[10]*t[2]+e[11]*t[7]+e[12]*t[12]+e[13]*t[17],r[13]=e[10]*t[3]+e[11]*t[8]+e[12]*t[13]+e[13]*t[18],r[14]=e[10]*t[4]+e[11]*t[9]+e[12]*t[14]+e[13]*t[19]+e[14],r[15]=e[15]*t[0]+e[16]*t[5]+e[17]*t[10]+e[18]*t[15],r[16]=e[15]*t[1]+e[16]*t[6]+e[17]*t[11]+e[18]*t[16],r[17]=e[15]*t[2]+e[16]*t[7]+e[17]*t[12]+e[18]*t[17],r[18]=e[15]*t[3]+e[16]*t[8]+e[17]*t[13]+e[18]*t[18],r[19]=e[15]*t[4]+e[16]*t[9]+e[17]*t[14]+e[18]*t[19]+e[19],r},oL=e=>e.length?e.reduce((e,t)=>oA([...e],t),e.shift()):[],oF=(e,t=2)=>Math.round(e*t)/t,oz=(e,t)=>{let r=e.width*e.height,n=t.reduce((e,t)=>(t.width>e.width&&t.height>e.height&&(e.width=t.width,e.height=t.height),e),{width:0,height:0});return oF(Math.max(.5,.5+(1-n.width*n.height/r)/2),5)};function oB(){}let oO=e=>e;function oD(e,t){for(let r in t)e[r]=t[r];return e}function o_(e){return e()}function oW(){return Object.create(null)}function oN(e){e.forEach(o_)}function oV(e){return"function"==typeof e}function oj(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function oU(e,t){return o||(o=document.createElement("a")),o.href=t,e===o.href}function oH(e,...t){if(null==e)return oB;let r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function oG(e){let t;return oH(e,e=>t=e)(),t}function oX(e,t,r){e.$$.on_destroy.push(oH(t,r))}function oZ(e,t,r,n){if(e){let o=oY(e,t,r,n);return e[0](o)}}function oY(e,t,r,n){return e[1]&&n?oD(r.ctx.slice(),e[1](n(t))):r.ctx}function oq(e,t,r,n){if(e[2]&&n){let o=e[2](n(r));if(void 0===t.dirty)return o;if("object"==typeof o){let e=[],r=Math.max(t.dirty.length,o.length);for(let n=0;n<r;n+=1)e[n]=t.dirty[n]|o[n];return e}return t.dirty|o}return t.dirty}function oK(e,t,r,n,o,a){if(o){let l=oY(t,r,n,a);e.p(l,o)}}function oJ(e){if(e.ctx.length>32){let t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return -1}function oQ(e){let t={};for(let r in e)"$"!==r[0]&&(t[r]=e[r]);return t}function o0(e,t){let r={};for(let n in t=new Set(t),e)t.has(n)||"$"===n[0]||(r[n]=e[n]);return r}function o1(e,t,r){return e.set(r),t}function o2(e){return e&&oV(e.destroy)?e.destroy:oB}let o4="undefined"!=typeof window,o5=o4?()=>window.performance.now():()=>Date.now(),o3=o4?e=>requestAnimationFrame(e):oB,o6=new Set;function o8(e){o6.forEach(t=>{t.c(e)||(o6.delete(t),t.f())}),0!==o6.size&&o3(o8)}function o7(e){let t;return 0===o6.size&&o3(o8),{promise:new Promise(r=>{o6.add(t={c:e,f:r})}),abort(){o6.delete(t)}}}function o9(e,t){e.appendChild(t)}function ae(e){if(!e)return document;let t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function at(e,t,r){e.insertBefore(t,r||null)}function ai(e){e.parentNode.removeChild(e)}function ar(e){return document.createElement(e)}function an(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ao(e){return document.createTextNode(e)}function aa(){return ao(" ")}function al(){return ao("")}function as(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function ad(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function ac(e,t){let r=Object.getOwnPropertyDescriptors(e.__proto__);for(let n in t)null==t[n]?e.removeAttribute(n):"style"===n?e.style.cssText=t[n]:"__value"===n?e.value=e[n]=t[n]:r[n]&&r[n].set?e[n]=t[n]:ad(e,n,t[n])}function au(e,t){Object.keys(t).forEach(r=>{var n,o,a;n=e,o=r,a=t[r],o in n?n[o]="boolean"==typeof n[o]&&""===a||a:ad(n,o,a)})}function ah(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ap(e,t){e.value=null==t?"":t}function a$(e,t,r,n){null===r?e.style.removeProperty(t):e.style.setProperty(t,r,n?"important":"")}function am(e,t,{bubbles:r=!1,cancelable:n=!1}={}){let o=document.createEvent("CustomEvent");return o.initCustomEvent(e,r,n,t),o}class af{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=an(t.nodeName):this.e=ar(t.nodeName),this.t=t,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)at(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(ai)}}let ag=new Map,ay=0;function ax(e,t,r,n,o,a,l,s=0){let d=16.666/n,c="{\n";for(let e=0;e<=1;e+=d){let n=t+(r-t)*a(e);c+=100*e+`%{${l(n,1-n)}}
`}let u=c+`100% {${l(r,1-r)}}
}`,h=`__svelte_${function(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}(u)}_${s}`,p=ae(e),{stylesheet:$,rules:m}=ag.get(p)||function(e,t){let r={stylesheet:function(e){var t,r;let n=ar("style");return t=ae(e),r=n,o9(t.head||t,r),r.sheet,n.sheet}(t),rules:{}};return ag.set(e,r),r}(p,e);m[h]||(m[h]=!0,$.insertRule(`@keyframes ${h} ${u}`,$.cssRules.length));let f=e.style.animation||"";return e.style.animation=`${f?`${f}, `:""}${h} ${n}ms linear ${o}ms 1 both`,ay+=1,h}function ab(){if(!a)throw Error("Function called outside component initialization");return a}function av(e){ab().$$.on_mount.push(e)}function aw(e){ab().$$.after_update.push(e)}function aS(e){ab().$$.on_destroy.push(e)}function ak(){let e=ab();return(t,r,{cancelable:n=!1}={})=>{let o=e.$$.callbacks[t];if(o){let a=am(t,r,{cancelable:n});return o.slice().forEach(t=>{t.call(e,a)}),!a.defaultPrevented}return!0}}function aC(e,t){return ab().$$.context.set(e,t),t}function aT(e){return ab().$$.context.get(e)}function aM(e,t){let r=e.$$.callbacks[t.type];r&&r.slice().forEach(e=>e.call(this,t))}let aP=[],aE=[],aR=[],aI=[],aA=Promise.resolve(),aL=!1;function aF(){aL||(aL=!0,aA.then(a_))}function az(e){aR.push(e)}function aB(e){aI.push(e)}let aO=new Set,aD=0;function a_(){let e=a;do{for(;aD<aP.length;){let e=aP[aD];aD++,a=e,function(e){if(null!==e.fragment){e.update(),oN(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(az)}}(e.$$)}for(a=null,aP.length=0,aD=0;aE.length;)aE.pop()();for(let e=0;e<aR.length;e+=1){let t=aR[e];aO.has(t)||(aO.add(t),t())}aR.length=0}while(aP.length);for(;aI.length;)aI.pop()();aL=!1,aO.clear(),a=e}function aW(e,t,r){e.dispatchEvent(am(`${t?"intro":"outro"}${r}`))}let aN=new Set;function aV(){s={r:0,c:[],p:s}}function aj(){s.r||oN(s.c),s=s.p}function aU(e,t){e&&e.i&&(aN.delete(e),e.i(t))}function aH(e,t,r,n){e&&e.o?aN.has(e)||(aN.add(e),s.c.push(()=>{aN.delete(e),n&&(r&&e.d(1),n())}),e.o(t)):n&&n()}let aG={duration:0};function aX(e,t,r,n){let o=t(e,r),a=+!n,d=null,c=null,u=null;function h(){u&&function(e,t){let r=(e.style.animation||"").split(", "),n=r.filter(t?e=>0>e.indexOf(t):e=>-1===e.indexOf("__svelte")),o=r.length-n.length;!o||(e.style.animation=n.join(", "),(ay-=o)||o3(()=>{ay||(ag.forEach(e=>{let{ownerNode:t}=e.stylesheet;t&&ai(t)}),ag.clear())}))}(e,u)}function p(e,t){let r=e.b-a;return t*=Math.abs(r),{a:a,b:e.b,d:r,duration:t,start:e.start,end:e.start+t,group:e.group}}function $(t){let{delay:r=0,duration:n=300,easing:l=oO,tick:$=oB,css:m}=o||aG,f={start:o5()+r,b:t};t||(f.group=s,s.r+=1),d||c?c=f:(m&&(h(),u=ax(e,a,t,n,r,l,m)),t&&$(0,1),d=p(f,n),az(()=>aW(e,t,"start")),o7(t=>{if(c&&t>c.start&&(d=p(c,n),c=null,aW(e,d.b,"start"),m&&(h(),u=ax(e,a,d.b,d.duration,0,l,o.css))),d){if(t>=d.end)$(a=d.b,1-a),aW(e,d.b,"end"),c||(d.b?h():--d.group.r||oN(d.group.c)),d=null;else if(t>=d.start){let e=t-d.start;$(a=d.a+d.d*l(e/d.duration),1-a)}}return!!(d||c)}))}return{run(e){oV(o)?(l||(l=Promise.resolve()).then(()=>{l=null}),l).then(()=>{o=o(),$(e)}):$(e)},end(){h(),d=c=null}}}let aZ="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function aY(e,t){e.d(1),t.delete(e.key)}function aq(e,t){aH(e,1,1,()=>{t.delete(e.key)})}function aK(e,t,r,n,o,a,l,s,d,c,u,h){let p=e.length,$=a.length,m=p,f={};for(;m--;)f[e[m].key]=m;let g=[],y=new Map,x=new Map;for(m=$;m--;){let e=h(o,a,m),s=r(e),d=l.get(s);d?n&&d.p(e,t):(d=c(s,e)).c(),y.set(s,g[m]=d),s in f&&x.set(s,Math.abs(m-f[s]))}let b=new Set,v=new Set;function w(e){aU(e,1),e.m(s,u),l.set(e.key,e),u=e.first,$--}for(;p&&$;){let t=g[$-1],r=e[p-1],n=t.key,o=r.key;t===r?(u=t.first,p--,$--):y.has(o)?!l.has(n)||b.has(n)?w(t):v.has(o)?p--:x.get(n)>x.get(o)?(v.add(n),w(t)):(b.add(o),p--):(d(r,l),p--)}for(;p--;){let t=e[p];y.has(t.key)||d(t,l)}for(;$;)w(g[$-1]);return g}function aJ(e,t){let r={},n={},o={$$scope:1},a=e.length;for(;a--;){let l=e[a],s=t[a];if(s){for(let e in l)e in s||(n[e]=1);for(let e in s)o[e]||(r[e]=s[e],o[e]=1);e[a]=s}else for(let e in l)o[e]=1}for(let e in n)e in r||(r[e]=void 0);return r}function aQ(e){return"object"==typeof e&&null!==e?e:{}}function a0(e,t,r){let n=e.$$.props[t];void 0!==n&&(e.$$.bound[n]=r,r(e.$$.ctx[n]))}function a1(e){e&&e.c()}function a2(e,t,r,n){let{fragment:o,after_update:a}=e.$$;o&&o.m(t,r),n||az(()=>{let t=e.$$.on_mount.map(o_).filter(oV);e.$$.on_destroy?e.$$.on_destroy.push(...t):oN(t),e.$$.on_mount=[]}),a.forEach(az)}function a4(e,t){let r=e.$$;null!==r.fragment&&(oN(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function a5(e,t,r,n,o,l,s,d=[-1]){let c=a;a=e;let u=e.$$={fragment:null,ctx:[],props:l,update:oB,not_equal:o,bound:oW(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:oW(),dirty:d,skip_bound:!1,root:t.target||c.$$.root};s&&s(u.root);let h=!1;if(u.ctx=r?r(e,t.props||{},(t,r,...n)=>{let a=n.length?n[0]:r;if(u.ctx&&o(u.ctx[t],u.ctx[t]=a)&&(!u.skip_bound&&u.bound[t]&&u.bound[t](a),h))-1===e.$$.dirty[0]&&(aP.push(e),aF(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31;return r}):[],u.update(),h=!0,oN(u.before_update),u.fragment=!!n&&n(u.ctx),t.target){if(t.hydrate){let e=Array.from(t.target.childNodes);u.fragment&&u.fragment.l(e),e.forEach(ai)}else u.fragment&&u.fragment.c();t.intro&&aU(e.$$.fragment),a2(e,t.target,t.anchor,t.customElement),a_()}a=c}class a3{$destroy(){a4(this,1),this.$destroy=oB}$on(e,t){if(!oV(t))return oB;let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{let e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&0!==Object.keys(e).length&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}let a6=[];function a8(e,t){return{subscribe:a7(e,t).subscribe}}function a7(e,t=oB){let r;let n=new Set;function o(t){if(oj(e,t)&&(e=t,r)){let t=!a6.length;for(let t of n)t[1](),a6.push(t,e);if(t){for(let e=0;e<a6.length;e+=2)a6[e][0](a6[e+1]);a6.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(a,l=oB){let s=[a,l];return n.add(s),1===n.size&&(r=t(o)||oB),a(e),()=>{n.delete(s),0===n.size&&(r(),r=null)}}}}function a9(e,t,r){let n=!Array.isArray(e),o=n?[e]:e,a=t.length<2;return a8(r,e=>{let r=!1,l=[],s=0,d=oB,c=()=>{if(s)return;d();let r=t(n?l[0]:l,e);a?e(r):d=oV(r)?r:oB},u=o.map((e,t)=>oH(e,e=>{l[t]=e,s&=~(1<<t),r&&c()},()=>{s|=1<<t}));return r=!0,c(),function(){oN(u),d()}})}var le=e=>e.reduce((e,t)=>Object.assign(e,t),{});let lt=e=>({updateValue:e}),li=e=>({defaultValue:e}),lr=e=>({store:e}),ln=e=>({store:(t,r)=>a9(...e(r))}),lo=e=>({store:(t,r)=>{let n;let[o,a,l=()=>!1]=e(r),s=!0;return a9(o,(e,t)=>{a(e,e=>{!s&&l(n,e)||(n=e,s=!1,t(e))})})}}),la=e=>({store:(t,r)=>{let[n,o={},a]=e(r),l=[],s={},d=e=>n(e,s),c=e=>{(l.length||e.length)&&(l=e,u())},u=()=>{let e=l.map(d);a&&e.sort(a),l=[...e],p(e)};Object.entries(o).map(([e,t])=>t.subscribe(t=>{s[e]=t,t&&u()}));let{subscribe:h,set:p}=a7(t||[]);return{set:c,update:e=>c(e(l)),subscribe:h}}}),ll=(e,t,r)=>{let n;let{store:o=e=>a7(e),defaultValue:a=x,updateValue:l}=r,s=o(a(),t,e),{subscribe:d,update:c=x}=s,u=e=>{let t=!0;n&&n(),n=d(r=>{if(t)return t=!1;e(r),n(),n=void 0})},h=l?l(e):ey;return s.set=e=>c(t=>h(e,t,u)),s.defaultValue=a,s};var ls=e=>{let t={},r={};return e.forEach(([e,...n])=>{let o=le(n),a=t[e]=ll(r,t,o);Object.defineProperty(r,e,{get:()=>oG(a),set:a.set})}),{stores:t,accessors:r}},ld=[["src",lr(()=>{let e;let{subscribe:t,set:r}=a7(),n=t=>{e!==t&&r(e=t)};return{set:n,subscribe:t,update:t=>n(t(e))}})],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",li(()=>"pixelated")],["images",li(()=>[])],["shapePreprocessor"],["willRequestResource"],["willRequest"],["csp"]],lc=e=>e.charAt(0).toUpperCase()+e.slice(1),lu=(e,t)=>{Object.keys(t).forEach(r=>{let n=U(t[r])?{value:t[r],writable:!1}:t[r];Object.defineProperty(e,r,n)})};let lh=(e,t)=>{let r,n,o,a,l,s,d,c,u;let h=t.length;for(r=0;r<h;r++)if(n=t[r],o=t[r+1>h-1?0:r+1],a=n.x-e.x,l=n.y-e.y,s=o.x-e.x,d=o.y-e.y,c=a-s,u=l-d,c*l-u*a<-1e-5)return!1;return!0};var lp=(e,t)=>{let r=ir(t),n=eB();t4(e).forEach(e=>{e0(e,n),lh(e,t)||r.forEach(t=>{let r=Math.atan2(t.start.y-t.end.y,t.start.x-t.end.x),o=1e4*Math.sin(Math.PI-r),a=1e4*Math.cos(Math.PI-r),l=eO(e.x+o,e.y+a),s=tv(tb(t),1e4),d=t7(tx(e,l),s);d&&e0(n,e1(eV(d),e))})});let o=tT(e);return e0(o,n),!!t4(o).every(e=>lh(e,t))&&(tZ(e,o),!0)},l$=(e,t)=>{let r=t4(e),n=io(t,5),o=tB(e),a=[];r.forEach(e=>{let t=tw(tx(eV(o),eV(e)),1e6),r=!1;n.map(tb).forEach(e=>{let n=t7(t,e);n&&!r&&(a.push(n),r=!0)})});let l=tA(e8(a[0],a[2])<e8(a[1],a[3])?[a[0],a[2]]:[a[1],a[3]]);return l.width<e.width&&(tZ(e,l),!0)},lm=(e,t,r={x:0,y:0})=>{let n=tE(e),o=tB(n),a=t3(n,r,o).map(e=>eG(e,t,o)),l=tA(a);return a.map(e=>e1(e,l))},lf=(e,t=0,r=tG(e))=>{let n,o;if(0!==t){let a;let l=Math.atan2(1,r),s=Math.sign(t)*t,d=s%Math.PI,c=s%eb;a=d>ev&&d<eb+ev?c>ev?s:eb-c:c>ev?eb-c:s;let u=Math.min(Math.abs(e.height/Math.sin(l+a)),Math.abs(e.width/Math.cos(l-a)));o=(n=Math.cos(l)*u)/r}else(o=(n=e.width)/r)>e.height&&(n=(o=e.height)*r);return td(n,o)},lg=(e,t,r=0,n=eB(),o)=>{if(ri(r)&&0!==r||n.x||n.y){let o=tG(e),a=lm(t,r,n),l=lf(t,r,o);if(!(e.width<l.width&&e.height<l.height)){let t=.5*e.width-.5*l.width,r=.5*e.height-.5*l.height;e.width>l.width&&(e.width=l.width,e.x+=t),e.height>l.height&&(e.height=l.height,e.y+=r)}lp(e,a),l$(e,a)&&lp(e,a)}else{let r=tG(e);e.width=Math.min(e.width,t.width),e.height=Math.min(e.height,t.height),e.x=Math.max(e.x,0),e.x+e.width>t.width&&(e.x-=e.x+e.width-t.width),e.y=Math.max(e.y,0),e.y+e.height>t.height&&(e.y-=e.y+e.height-t.height);let n=tB(e),a=t1(e,r);a.width=Math.max(o.width,a.width),a.height=Math.max(o.height,a.height),a.x=n.x-.5*a.width,a.y=n.y-.5*a.height,tZ(e,a)}},ly=(e,t,r,n,o,a,l,s)=>{let d=tr(l),c=tr(s),u=eL(Math.max(t.width/c.width,t.height/c.height)),h=eL(Math.min(t.width/d.width,t.height/d.height)),p=tT(t);if(h<1||u>1){let r=tB(e),n=tB(t),o=h<1?h:u,a=(n.x+r.x)/2,l=(n.y+r.y)/2,s=p.width/o,d=p.height/o;tX(p,a-.5*s,l-.5*d,s,d)}return a&&lg(p,r,n,o,d),{crop:p}},lx=(e,t,r)=>{let n=tE(e),o=tB(n),a=tB(t6(tA(tY(n,r,o)))),l=eJ(e0(o,e1(eG(tB(t),-r,a),a)),eL);return tz(l.x-.5*t.width,l.y-.5*t.height,t.width,t.height)},lb=(e,t,r)=>Math.max(t,Math.min(e,r)),lv=(e,t,r,n,o,a,l,s,d,c)=>{let u=tr(d),h=tr(c);l&&(h.width=Math.min(c.width,o.width),h.height=Math.min(c.height,o.height));let p=!1,$=(t,r)=>{let d=lx(o,n,t),c=tE(o),m=tB(c),f=t3(c,a,m),g=e1(eV(m),t8(f)),y=eG(tB(d),r,m),x=e1(eV(m),y);f.forEach(e=>eG(e,r,m));let b=tA(f),v=e0(e1(e1(t8(f),x),b),g),w=tz(v.x-.5*d.width,v.y-.5*d.height,d.width,d.height);s&&tD(w,s.width/w.width),l&&l$(w,lm(o,r,a));let S=eL(Math.min(w.width/u.width,w.height/u.height),8),k=eL(Math.max(w.width/h.width,w.height/h.height),8);return(S<1||k>1)&&eL(Math.abs(r-t))===eL(Math.PI/2)&&!p?(p=!0,$(e,e+Math.sign(r-t)*Math.PI)):{rotation:r,crop:t5(w,e=>eL(e,8))}},m=Math.sign(t)*Math.round(Math.abs(t)/eb)*eb;return $(e,lb(t,m+r[0],m+r[1]))};let lw=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","manipulation","redaction","annotation","decoration","selection","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume","minDuration","maxDuration","currentTime"],lS=e=>{if(ro(e))return e.map(lS);if(iW(e)||i$(e));else if(N(e))return{...e};return e},lk=e=>e.map(e=>Object.entries(e).reduce((e,[t,r])=>(t.startsWith("_")||(e[t]=r),e),{}));var lC=e=>{if(e){if(/:/.test(e)){let[t,r]=e.split(":");return t/r}return parseFloat(e)}};let lT=(e,t)=>e===t;var lM=(e,t,r=lT)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0},lP=(e=[0,0,0,0],t=1)=>4===e.length?e:[...e,t];let lE=(e,t,r)=>{let n=eJ(tB(e),e=>eL(e,8)),o=tE(t),a=tB(o),l=eJ(th(tA(tY(o,r,a))),e=>eL(e,8)),s=Math.abs(l.x-n.x),d=Math.abs(l.y-n.y);return s<1&&d<1},lR=(e,t,r)=>tc(tf(lf(t,r,tG(e)),Math.round),tf(tr(e),Math.round)),lI=(e,t,r,n,o)=>{if(!o)return[-1/0,1/0];let a=Math.max(r.width/n.width,r.height/n.height),l=td(n.width*a,n.height*a),s=tg(l);if(s<Math.min(e.width,e.height))return[-1/0,1/0];let d=t?e.height:e.width,c=t?e.width:e.height,u=Math.acos(l.height/s),h=u-Math.acos(c/s),p=Math.asin(d/s)-u;if(Number.isNaN(h)&&Number.isNaN(p))return[-1/0,1/0];let $=Number.isNaN(h)?p:Number.isNaN(p)?h:Math.min(h,p);return[-$,$]},lA=(e,t,r,n,o,a)=>{let l=tr(n),s=tr(o);return a?[l,tf(lf(e,t,r),Math.round)]:[l,s]},lL=(e,t)=>{let{context:r,props:n}=t;return e._isFormatted||((e=nJ(e))._isFormatted=!0,Object.assign(e,n)),!e._isDraft&&nf(e)&&(!e._context||!tH(r,e._context))&&(oa(e,r),e._context={...r}),e},lF=(e,t)=>(e._isFormatted||(e.disableMove=!0,e.disableSelect=!0,e.disableResize=!0,e.disableRotate=!0),lL(e,t));var lz=[["file"],["size"],["loadState"],["processState"],["aspectRatio",ln(({size:e})=>[e,e=>e?tG(e):void 0])],["perspectiveX",li(()=>0)],["perspectiveY",li(()=>0)],["perspective",ln(({perspectiveX:e,perspectiveY:t})=>[[e,t],([e,t])=>({x:e,y:t})])],["rotation",li(()=>0),lt(e=>(t,r,n)=>{if(t===r)return t;let{loadState:o,size:a,rotationRange:l,cropMinSize:s,cropMaxSize:d,crop:c,perspective:u,cropLimitToImage:h,cropOrigin:p}=e;if(!c||!o||!o.beforeComplete)return t;let $=h&&lR(c,a,r),m=h&&lE(c,a,r),f=lv(r,t,l,c,a,u,h,p,s,d);if($&&m){let e=lf(a,t,tG(f.crop));f.crop.x+=.5*f.crop.width,f.crop.y+=.5*f.crop.height,f.crop.x-=.5*e.width,f.crop.y-=.5*e.height,f.crop.width=e.width,f.crop.height=e.height}return n(()=>{e.crop=t5(f.crop,e=>eL(e,8))}),f.rotation})],["flipX",li(()=>!1)],["flipY",li(()=>!1)],["flip",ln(({flipX:e,flipY:t})=>[[e,t],([e,t])=>({x:e,y:t})])],["isRotatedSideways",lo(({rotation:e})=>[[e],([e],t)=>t(ew(e)),(e,t)=>e!==t])],["crop",lt(e=>(t,r=t)=>{let{loadState:n,size:o,cropMinSize:a,cropMaxSize:l,cropLimitToImage:s,cropAspectRatio:d,rotation:c,perspective:u}=e;if(!t&&!r||!n||!n.beforeComplete)return t;t||(t=tE(lf(o,c,d||tG(o))));let h=t5(ly(r,t,o,c,u,s,a,l).crop,e=>eL(e,8));return tH(r,h)?r:h})],["cropAspectRatio",lt(e=>(t,r)=>{let{loadState:n,crop:o,size:a,rotation:l,cropLimitToImage:s}=e,d=lC(t);if(!d)return;if(!o||!n||!n.beforeComplete)return d;let c=r?Math.abs(t-r):1;if(lE(o,a,l)&&s&&c>=.1){let r=t$(tr(a),l);e.crop=t5(t1(tE(r),t),eL)}else{let t={width:o.height*d,height:o.height},r=(o.width-t.width)*.5,n=(o.height-t.height)*.5;e.crop=t5(tz(o.x+r,o.y+n,t.width,t.height),eL)}return d})],["cropOrigin"],["cropMinSize",li(()=>({width:1,height:1}))],["cropMaxSize",li(()=>({width:32768,height:32768}))],["cropLimitToImage",li(()=>!0),lt(e=>(t,r,n)=>{let{crop:o}=e;return o&&!r&&t&&n(()=>e.crop=tT(e.crop)),t})],["cropSize",lo(({crop:e})=>[[e],([e],t)=>{e&&t(td(e.width,e.height))},(e,t)=>tc(e,t)])],["cropRectAspectRatio",ln(({cropSize:e})=>[[e],([e],t)=>{e&&t(eL(tG(e),5))}])],["cropRange",lo(({size:e,rotation:t,cropRectAspectRatio:r,cropMinSize:n,cropMaxSize:o,cropLimitToImage:a})=>[[e,t,r,n,o,a],([e,t,r,n,o,a],l)=>{e&&l(lA(e,t,r,n,o,a))},(e,t)=>lM(e,t)])],["rotationRange",lo(({size:e,isRotatedSideways:t,cropMinSize:r,cropSize:n,cropLimitToImage:o})=>[[e,t,r,n,o],([e,t,r,n,o],a)=>{e&&n&&a(lI(e,t,r,n,o))},(e,t)=>lM(e,t)])],["backgroundColor",lt(()=>e=>lP(e))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["currentTime"],["minDuration",li(()=>1/24)],["maxDuration",li(()=>1/0)],["volume",li(()=>1)],["trim"],["redaction",la(({size:e})=>[lL,{context:e}])],["manipulation",la(({size:e})=>[lL,{context:e}])],["annotation",la(({size:e})=>[lL,{context:e}])],["decoration",la(({crop:e})=>[lL,{context:e}])],["selection",la(({size:e})=>[lF,{context:e}])],["frame",lt(()=>e=>{if(!e)return;let t={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return P(e)?t.frameStyle=e:Object.assign(t,e),t})],["metadata"],["state",lr((e,t,r)=>{let n=lw.map(e=>t[e]),o=!1,a=a7({}),{subscribe:l}=a9([...n,a],(e,t)=>{if(o)return;let r=lw.reduce((t,r,n)=>(t[r]=lS(e[n]),t),{});r.crop&&t5(r.crop,Math.round),r.manipulation=r.manipulation&&lk(r.manipulation),r.redaction=r.redaction&&lk(r.redaction),r.annotation=r.annotation&&lk(r.annotation),r.decoration=r.decoration&&lk(r.decoration),r.selection=r.selection&&lk(r.selection),t(r)}),s=e=>{e&&(o=!0,r.cropOrigin=void 0,lw.filter(t=>rn(e,t)).forEach(t=>{let n=e[t];r[t]=null===n?void 0:lS(n)}),o=!1,a.set({}))};return{set:s,update:e=>s(e(null)),subscribe:l}})]],lB=async(e,t,r={},n)=>{let{ontaskstart:o,ontaskprogress:a,ontaskend:l,token:s}=n,d=!1,c={cancel:x};for(let[n,u]of(s.cancel=()=>{d=!0,c.cancel()},t.entries())){if(d)return;let[t,s]=u;o(n,s);try{e=await t(e,{...r,taskCancelToken:c},e=>a(n,s,e))}catch(e){throw d=!0,e}l(n,s)}return e},lO=({minSize:e={width:1,height:1},minDuration:t=0}={})=>{let{stores:r,accessors:n}=ls(lz),{pub:o,sub:a}=rk(),l=(e,t)=>{let r=()=>n[e]||{},a=t=>{n[e]={...r(),...t,timeStamp:Date.now()}},l=()=>r().error,s=e=>{l()||(a({error:e}),o(`${t}error`,{...r()}))};return{start(){o(`${t}start`)},onabort(){a({abort:!0}),o(`${t}abort`,{...r()})},ontaskstart(e,n){l()||(a({index:e,task:n,taskProgress:void 0,taskLengthComputable:void 0}),o(`${t}taskstart`,{...r()}))},ontaskprogress(e,n,s){l()||(a({index:e,task:n,taskProgress:s.loaded/s.total,taskLengthComputable:s.lengthComputable}),o(`${t}taskprogress`,{...r()}),o(`${t}progress`,{...r()}))},ontaskend(e,n){l()||(a({index:e,task:n}),o(`${t}taskend`,{...r()}))},ontaskerror(e){s(e)},error(e){s(e)},beforeComplete(e){l()||(a({beforeComplete:!0}),o(`before${t}`,e))},complete(e){l()||(a({complete:!0}),o(t,e))}}};return lu(n,{read:(r,{reader:o},a={})=>{if(!o)return;Object.assign(n,{file:void 0,size:void 0,loadState:void 0});let s={cancel:x},d=!1,c=l("loadState","load"),u={token:s,...c},h={src:r,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(async()=>{try{if(c.start(),d)return c.onabort();let r=await lB(h,o,a,u);if(d)return c.onabort();let{size:l,duration:s,dest:p}=r||{};if(!l||!l.width||!l.height)throw new iB("Image size missing","IMAGE_SIZE_MISSING",r);if(s>0&&s<t)throw new iB("Video too short","VIDEO_TOO_SHORT",{...r,minDuration:t});if(l.width<e.width||l.height<e.height)throw new iB("Image too small","IMAGE_TOO_SMALL",{...r,minWidth:e.width,minHeight:e.height});Object.assign(n,{file:p,size:l,duration:s}),c.beforeComplete(r),c.complete(r)}catch(e){c.error(e)}finally{s=void 0}}),()=>{d=!0,s&&s.cancel(),c.onabort()}},write:(e,t)=>{if(!n.loadState.complete)return;n.processState=void 0;let r=l("processState","process"),o={src:n.file,imageState:n.state,dest:void 0};if(U(e)&&(e=e(n.file,n.state)),!e){r.start(),r.complete(o);return}let a={cancel:x},s=!1,d={token:a,...r};return Promise.resolve().then(async()=>{try{if(r.start(),s)return r.onabort();let n=await lB(o,e,t,d);if(s)return r.onabort();r.complete(n)}catch(e){r.error(e)}finally{a=void 0}}),()=>{s=!0,a&&a.cancel()}},on:a}),{accessors:n,stores:r}};let lD=e=>console.warn(`Pintura: ${e} is a required prop.`),l_=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],lW=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],lN=lz.map(([e])=>e).filter(e=>!lW.includes(e)),lV=e=>`image${lc(e)}`,lj=e=>P(e)||r$(e)||ip(e),lU=e=>rn(e,"crop");var lH=()=>{let e,t,r;let{stores:n,accessors:o}=ls(ld),{sub:a,pub:l}=rk(),s=e=>t=>l(e,t),d=()=>o.images?o.images[0]:{},c={},u={};lN.forEach(e=>{Object.defineProperty(o,lV(e),{get:()=>{let t=d();if(t)return t.accessors[e]},set:t=>{c[lV(e)]=t,u[lV(e)]=t;let r=d();r&&(r.accessors[e]=t)}})});let h=()=>o.images&&o.images[0],p=n.src.subscribe(t=>{if(!t)return o.images=[];if(!o.imageReader){e=setTimeout(()=>lD("imageReader"),32);return}o.images.length&&(c={}),m(t)}),$=n.imageReader.subscribe(t=>{if(t)clearTimeout(e),!o.images.length&&o.src&&m(o.src)}),m=e=>{Promise.resolve().then(()=>g(e,c)).catch(()=>{})},f=(e,t)=>{if(lU(t)){o.imageState=t;return}if(!t.imageCrop){let r;let n=e.accessors.size,o=t.imageRotation||0,a=tE(tp(tr(n),o));a.width=eL(Math.abs(a.width),6),a.height=eL(Math.abs(a.height),6);let l=t.imageCropAspectRatio||(t.imageCropLimitToImage?tG(n):tG(a));t.imageCropLimitToImage?r=t1(a,l):((r=tJ(a,l)).x=(n.width-r.width)/2,r.y=(n.height-r.height)/2),t.imageCrop=r}if(e.accessors.duration&&!t.imageTrim&&t.imageMaxDuration){let{duration:r}=e.accessors;t.imageTrim=[[0,Math.min(t.imageMaxDuration/r,1)]]}let r=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];r.filter(e=>rn(t,e)).forEach(e=>{o[e]=t[e],delete t[e]}),Object.assign(o,Object.keys(t).filter(e=>!r.includes(e)).reduce((e,r)=>(e[r]=t[r],e),{}))},g=(e,r={})=>new Promise((n,a)=>{let l=h(),d=!1!==r.cropLimitToImage&&!1!==r.imageCropLimitToImage&&!1!==u.imageCropLmitedToImage,p=r.cropMinSize||r.imageCropMinSize||u.imageCropMinSize,$=d?p:l&&l.accessors.cropMinSize,m=r.minDuration||r.imageMinDuration;l&&y(),l=lO({minSize:$,minDuration:m}),l_.map(e=>l.accessors.on(e,s(e)));let g=()=>{c={},x.forEach(e=>e())},x=[];x.push(l.accessors.on("loaderror",e=>{g(),a(e)})),x.push(l.accessors.on("loadabort",()=>{g(),a({name:"AbortError"})})),x.push(l.accessors.on("load",e=>{t=void 0,g(),n(e)})),x.push(l.accessors.on("beforeload",()=>f(l,r))),o.images=[l],r.imageReader&&(o.imageReader=r.imageReader),r.imageWriter&&(o.imageWriter=r.imageWriter),t=l.accessors.read(e,{reader:o.imageReader},{willRequest:o.willRequest})}),y=()=>{let e=h();e&&(t&&t(),e.accessors.loadState=void 0,o.images=[])};return Object.defineProperty(o,"stores",{get:()=>n}),lu(o,{on:a,loadImage:g,abortLoadImage:()=>{t&&t(),o.images=[]},editImage:(e,t)=>new Promise((r,n)=>{g(e,t).then(()=>{let{images:e}=o,t=e[0],a=()=>{l(),s()},l=t.accessors.on("processerror",e=>{a(),n(e)}),s=t.accessors.on("process",e=>{a(),r(e)})}).catch(n)}),removeImage:y,processImage:(e,t)=>new Promise((n,a)=>{try{let l=[],s=()=>{r=void 0,l.forEach(e=>e())};(async()=>{if(lj(e))try{await g(e,t)}catch(e){a(e)}else e&&(lU(e)?o.imageState=e:Object.assign(o,e));let d=h();if(!d)return a("no image");l.push(d.accessors.on("processerror",e=>{s(),a(e)})),l.push(d.accessors.on("processabort",()=>{s(),a({name:"AbortError"})})),l.push(d.accessors.on("process",e=>{s(),n(e)})),r=d.accessors.write(o.imageWriter,{redactionRenderStyle:o.imageRedactionRendering,shapePreprocessor:o.shapePreprocessor||ey,imageScrambler:o.imageScrambler,willRequest:o.willRequest,csp:o.csp||{},willRequestResource:o.willRequestResource})})()}catch(e){a(e)}}),abortProcessImage:()=>{let e=h();e&&(r&&r(),e.accessors.processState=void 0)},destroy:()=>{p&&p(),$&&$()}}),o};let lG=(e,t)=>{let{processImage:r}=lH();return r(e,t)};var lX=()=>iw()?iG()?/15_|16_/.test(navigator.userAgent)?0xe10000:0x1000000:/15_/.test(navigator.userAgent)?0x1000000:1/0:1/0,lZ=(e,t)=>Object.keys(e).filter(e=>!t.includes(e)).reduce((t,r)=>(t[r]=e[r],t),{}),lY=e=>new Promise(t=>{if(e.duration===1/0){e.ontimeupdate=()=>{e.ontimeupdate=void 0,t(e)},e.currentTime=Number.MAX_SAFE_INTEGER;return}t(e)}),lq=e=>new Promise((t,r)=>{let n=()=>{lY(e).then(()=>{t(e.duration)})};if(e.readyState>=1)return n();e.onloadedmetadata=n,e.onerror=()=>r(e.error)}),lK=async e=>l2(new DataView(await lJ(e)));let lJ=e=>new Promise(t=>{let r=new FileReader;r.onload=()=>t(r.result),r.readAsArrayBuffer(e)}),lQ=(e,t,r)=>{let n=!1,o=-1;for(let a=t;a<r;a++)if(n||0x7472616b!==e.getUint32(a)||(n=!0,a+=4),n&&64==e.getUint8(a)){o=a;break}if(o<0)return 0;let a=e.getUint32(o-28),l=e.getUint32(o-20),s=e.getUint32(o-32),d=e.getUint32(o-16);return 65536===a&&0xffff0000===l?90:0xffff0000===s&&0xffff0000===d?180:270*(0xffff0000===a&&65536===l)},l0=(e,t=0,r=e.byteLength)=>{let n=[],o=t+r;for(;t<o;){let r=e.getUint32(t);if(r<0)break;let o=e.getUint32(t+4);if(n.push({type:o,size:r,offset:t,bodyOffset:t+8,bodySize:r-8}),r<8)break;t+=r}return n},l1=e=>{let t=l0(e).find(e=>0x6d6f6f76===e.type);if(!t)return 0;let r=l0(e,t.bodyOffset,t.bodySize);r.filter(e=>0x7472616b===e.type).forEach(t=>{r.push(...l0(e,t.bodyOffset,t.bodySize))});let n=[0x6d766864,0x746b6864];for(let{type:t,bodyOffset:o}of r.filter(e=>n.includes(e.type))){let r=e.getUint8(o),n=o+4;n+=0x6d766864===t?32:36,n+=12*(1===r);let a=e.getInt32(n),l=e.getInt32(n+4);if(0===a&&l>0)return 90;if(a<0&&0===l)return 180;if(0===a&&l<0)return 270}return 0},l2=(e,{limit:t=1024}={})=>{let r;if(r=4,0x66747970!==e.getUint32(r))return 0;r+=4;let n=e.getUint32(r);return 0x6d703432===n?lQ(e,r,t):0x71742020===n?l1(e):0};var l4=e=>new Promise((t,r)=>{(er()?lK(e):Promise.resolve(0)).then(n=>{let o=document.createElement("video");o.onerror=()=>r(o.error),o.playsInline=!0,o.preload="auto",o.onseeked=()=>{o.onseeked=void 0,t(o)},o.onloadeddata=()=>{o.onloadeddata=void 0,o.dataset.rotation=n?`${n}`:"0",lY(o).then(t),o.currentTime=0},o.src=URL.createObjectURL(e)+(iG()&&iw()?"#t=0.00001":"")})}),l5=(e,t)=>new Promise(r=>{if(e.currentTime===t)return r(e);let n=e.onseeked;e.onseeked=()=>{e.onseeked=n,r(e)},e.currentTime=lb(t,0,e.duration)}),l3=(e,t=0)=>new Promise((r,n)=>{l4(e).then(e=>{l5(e,t).then(e=>{let t=R("canvas");ik(e).then(({width:n,height:o})=>{t.width=n,t.height=o;let a=t.getContext("2d",{willReadFrequently:!0}),l=()=>{a.drawImage(e,0,0,t.width,t.height);let n=a.getImageData(0,0,t.width,t.height);L(t),URL.revokeObjectURL(e.src),r(n)};iw()?setTimeout(l,16):l()})})})}),l6=e=>/video/.test(e.type);let l8=({imageDataResizer:e,canvasMemoryLimit:t}={})=>async(r,n,o,a,l)=>{o.width=Math.max(o.width,1),o.height=Math.max(o.height,1),a.width=Math.max(a.width,1),a.height=Math.max(a.height,1);let{dest:s}=await lG(n,{imageReader:sM(),imageWriter:sE({format:"canvas",targetSize:{...a,upscale:!0},imageDataResizer:e,canvasMemoryLimit:t}),imageCrop:o}),{feather:d=0}=l||{};if(d>0){let e=R("canvas");e.width=s.width,e.height=s.height;let t=e.getContext("2d",{willReadFrequently:!0}),r=1/d,n=0;for(n=0;n<d;n++){let e=n*r;t.strokeStyle=`rgba(0,0,0,${e*e})`,t.strokeRect(n+.5,n+.5,s.width-2*n-1,s.height-2*n-1)}t.fillStyle="#000",t.fillRect(n,n,s.width+.5-2*n,s.height+.5-2*n);let o=s.getContext("2d");o.globalCompositeOperation="destination-in",o.drawImage(e,0,0),L(e)}r.drawImage(s,a.x,a.y,a.width,a.height),L(s)},l7=(e,t=(...e)=>e,r)=>async(n,o,a)=>{a(iA(0,!1));let l=!1,s=await e(...t(n,o,e=>{l=!0,a(e)}));return r&&r(n,s),l||a(iA(1,!1)),n},l9=({willRequest:e,srcProp:t="src",destProp:r="dest"}={})=>[l7(iV,(r,n,o)=>[r[t],o,{...n,willRequest:e}],(e,t)=>e[r]=t),"any-to-file"],se=({srcProp:e="dest",destProp:t="dest"}={})=>[l7(async e=>{if(/octet-stream/.test(e.type)){console.warn(`Pintura: File has unknown mime type "${e.type}", make sure your server sets the correct Content-Type header.`);let t="image",r=await iT(e);/video/i.test(r.nodeName)&&(t="video");let n={type:t+"/unknown"};return i$(e)?new File([e],e.name,{...n,lastModified:e.lastModified}):new Blob([e],n)}return e},t=>[t[e]],(e,r)=>e[t]=r),"any-to-file"],st=({srcProp:e="src",destProp:t="size"}={})=>[l7(iP,t=>[t[e]],(e,r)=>e[t]=r),"read-image-size"],si=async e=>{let t=await iT(e);if(iM(t))return await lq(t)},sr=({srcProp:e="src",destProp:t="duration"}={})=>[l7(si,t=>[t[e]],(e,r)=>e[t]=r),"read-media-duration"],sn=({srcSize:e="size",srcOrientation:t="orientation",destSize:r="size"}={})=>[l7(iX,r=>[r[e],r[t]],(e,t)=>e[r]=t),"image-size-match-orientation"],so=({srcProp:e="src",destProp:t="copy"}={})=>[l7((e,t)=>iZ(e)?b(e,t):void 0,t=>[t[e],onprogress],(e,r)=>e[t]=r),"read-image-head"],sa=({srcProp:e="copy",destProp:t="orientation"}={})=>[l7(f,t=>[t[e],274],(e,r=1)=>e[t]=r),"read-exif-orientation-tag"],sl=({srcProp:e="copy"}={})=>[l7(f,t=>[t[e],274,1]),"clear-exif-orientation-tag"],ss=({srcImageSize:e="size",srcCanvasSize:t="imageData",srcImageState:r="imageState",destImageSize:n="size",destScalar:o="scalar"}={})=>[l7((e,t)=>[Math.min(t.width/e.width,t.height/e.height),tn(t)],n=>[n[e],n[t],n[r]],(e,[t,r])=>{e[o]=t,e[n]=r}),"calculate-canvas-scalar"],sd=({srcProp:e="src",destProp:t="imageData",canvasMemoryLimit:r,srcImageState:n="imageState"}={})=>[l7((e,t,r)=>l6(e)?l3(e,r.currentTime):eo(e,t),t=>[t[e],r,t[n]],(e,r)=>e[t]=r),"blob-to-image-data"],sc=({srcImageData:e="imageData",srcOrientation:t="orientation"}={})=>[l7(W,r=>[r[e],r[t]],(e,t)=>e.imageData=t),"image-data-match-orientation"],su=({srcImageData:e="imageData",srcImageState:t="imageState"}={})=>[l7(oI,r=>[r[e],{backgroundColor:r[t].backgroundColor,backgroundImage:r[t].backgroundImage}],(e,t)=>e.imageData=t),"image-data-fill"],sh=({srcImageData:e="imageData",srcImageState:t="imageState",destScalar:r="scalar"}={})=>[l7(i1,n=>{let o=n[r],{crop:a}=n[t];return a&&1!==o&&(a=tD(tT(a),o,eB())),[n[e],{crop:a,rotation:n[t].rotation,flipX:n[t].flipX,flipY:n[t].flipY}]},(e,t)=>e.imageData=t),"image-data-crop"],sp=e=>!!(e.targetSize&&e.targetSize.width||e.targetSize&&e.targetSize.height),s$=({targetSize:e={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:t,srcProp:r="imageData",srcImageState:n="imageState",destImageScaledSize:o="imageScaledSize"})=>[l7(i5,o=>{let a=Math.min(e.width||Number.MAX_SAFE_INTEGER,o[n].targetSize&&o[n].targetSize.width||Number.MAX_SAFE_INTEGER),l=Math.min(e.height||Number.MAX_SAFE_INTEGER,o[n].targetSize&&o[n].targetSize.height||Number.MAX_SAFE_INTEGER);return[o[r],{width:a,height:l,fit:e.fit||"contain",upscale:!!sp(o[n])||e.upscale||!1},t]},(e,t)=>{tc(e.imageData,t)||(e[o]=tn(t)),e.imageData=t}),"image-data-resize"],sm=({srcImageData:e="imageData",srcImageState:t="imageState",destImageData:r="imageData"}={})=>[l7(rt,r=>{let{colorMatrix:n}=r[t],o=n&&Object.keys(n).map(e=>n[e]).filter(Boolean);return[r[e],{colorMatrix:o&&oL(o),convolutionMatrix:r[t].convolutionMatrix,gamma:r[t].gamma,noise:r[t].noise,vignette:r[t].vignette}]},(e,t)=>e[r]=t),"image-data-filter"],sf=({srcImageData:e="imageData",srcImageState:t="imageState",destImageData:r="imageData",destScalar:n="scalar"}={})=>[l7(async(e,t,r,n,o,a)=>{let l;if(!t||!n.length)return e;try{let o={dataSizeScalar:oz(e,n)};r&&r[3]>0&&(o.backgroundColor=[...r]),l=await t(e,o)}catch(e){}let s=R("canvas");s.width=e.width,s.height=e.height;let d=s.getContext("2d",{willReadFrequently:!0});if(d.putImageData(e,0,0),"auto"===a){let t=Math.sqrt(e.width*e.height);d.filter=`blur(${Math.round(t/100)}px)`}let c=new Path2D;n.forEach(e=>{let t=tz(e.x,e.y,e.width,e.height);tN(t,o);let r=tY(tT(t),e.rotation),n=new Path2D;r.forEach((e,t)=>{if(0===t)return n.moveTo(e.x,e.y);n.lineTo(e.x,e.y)}),c.addPath(n)}),d.clip(c,"nonzero"),d.imageSmoothingEnabled=!1,d.drawImage(l,0,0,s.width,s.height),L(l);let u=d.getImageData(0,0,s.width,s.height);return L(s),u},(r,{imageScrambler:o,redactionRenderStyle:a})=>[r[e],o,r[t].backgroundColor,r[t].redaction,r[n],a],(e,t)=>e[r]=t),"image-data-redact"],sg=({srcImageData:e="imageData",srcSize:t="size",srcImageState:r="imageState",srcShapes:n="annotation",destImageData:o="imageData",destImageScaledSize:a="imageScaledSize",destScalar:l="scalar",imageDataResizer:s,canvasMemoryLimit:d,shapeFilter:c=ey,shapeClip:u=!0,destImageContext:h="imageContext"}={})=>[l7(oR,(o,{shapePreprocessor:p,willRequestResource:$,csp:m,willRequest:f})=>{let g=o[r][n].filter(c);if(!g.length)return[o[e]];let y=o[l],{crop:x}=o[r],b=o[t],v=y,w=o[a];w&&(v=Math.min(w.width/x.width,w.height/x.height));let S={width:b.width/y,height:b.height/y};return[o[e],{shapes:g,computeShape:e=>e=ol(e=lZ(e=n8(e,S),["left","right","top","bottom"]),v),transform:e=>{let n=o[t],{rotation:l=0,flipX:s,flipY:d,cropLimitToImage:c}=o[r],{crop:p=tE(n)}=o[r],$=o[a],m=1;m=$?v:y;let f={width:n.width/y*m,height:n.height/y*m},g=ih(f,l),x={width:g.width,height:g.height},b=.5*f.width-.5*x.width,w=.5*f.height-.5*x.height,S=th(f);e.translate(-b,-w),e.translate(-p.x*m,-p.y*m),e.translate(S.x,S.y),e.rotate(l),e.translate(-S.x,-S.y);let k=o[h]||{x:0,y:0};e.translate(k.x,k.y),e.scale(s?-1:1,d?-1:1),e.translate(s?-f.width*y:0,d?-f.height*y:0),c&&u&&(e.rect(0,0,f.width,f.height),e.clip())},drawImage:l8({imageDataResizer:s,canvasMemoryLimit:d}),preprocessShape:e=>p(e,{isPreview:!1,...o[r]}),canvasMemoryLimit:d,willRequest:f||$,styleNonce:m.styleNonce}]},(e,t)=>e[o]=t),"image-data-annotate"],sy=({srcImageData:e="imageData",srcImageState:t="imageState",destImageData:r="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:o,canvasMemoryLimit:a,destScalar:l="scalar",shapeFilter:s=ey,destImageContext:d="imageContext"}={})=>[l7(oR,(r,{shapePreprocessor:c,willRequestResource:u,willRequest:h,csp:p})=>{let $=r[t].decoration.filter(s);if(!$.length)return[r[e]];let m=r[l],{crop:f}=r[t],g=r[n];return g&&(m=Math.min(g.width/f.width,g.height/f.height)),[r[e],{shapes:$,drawImage:l8({imageDataResizer:o,canvasMemoryLimit:a}),computeShape:e=>e=ol(e=lZ(e=n8(e,f),["left","right","top","bottom"]),m),preprocessShape:e=>c(e,{isPreview:!1,...r[t]}),canvasMemoryLimit:a,willRequest:h||u,styleNonce:p.styleNonce,transform:e=>{let t=r[d]||{x:0,y:0};e.translate(t.x,t.y)}}]},(e,t)=>e[r]=t),"image-data-decorate"],sx=({srcImageData:e="imageData",srcImageState:t="imageState",destImageData:r="imageData",destImageScaledSize:n="imageScaledSize",imageDataResizer:o,canvasMemoryLimit:a,destScalar:l="scalar",destImageContext:s="imageContext"}={})=>[l7((e,t)=>new Promise(r=>{if(!t)return r([e]);oR(e,t).then(e=>{r([e,t.contextBounds])})}),(r,{shapePreprocessor:s,willRequestResource:d,willRequest:c,csp:u})=>{let h=r[t].frame;if(!h)return[r[e]];let p=r[l],{crop:$}=r[t];$&&1!==p&&($=tD(tT($),p,eB()));let m={...$},f=on(oo(h,m,s),m);m.x=Math.abs(f.left),m.y=Math.abs(f.top),m.width+=Math.abs(f.left)+Math.abs(f.right),m.height+=Math.abs(f.top)+Math.abs(f.bottom);let g=r[n];return tN(m,g?Math.min(g.width/$.width,g.height/$.height):1),m.x=Math.floor(m.x),m.y=Math.floor(m.y),m.width=Math.floor(m.width),m.height=Math.floor(m.height),[r[e],{shapes:[h],contextBounds:m,computeShape:t=>n8(t,r[e]),transform:e=>{e.translate(m.x,m.y)},drawImage:l8({imageDataResizer:o,canvasMemoryLimit:a}),preprocessShape:e=>s(e,{isPreview:!1,...r[t]}),canvasMemoryLimit:a,willRequest:c||d,styleNonce:u.styleNonce}]},(e,[t,n])=>{e[s]=n,e[r]=t}),"image-data-frame"],sb=({mimeType:e,quality:t,srcImageData:r="imageData",srcFile:n="src",destBlob:o="blob"}={})=>[l7(el,o=>[o[r],e||e$(o[n].name)||o[n].type,t],(e,t)=>e[o]=t),"image-data-to-blob"],sv=({srcImageData:e="imageData",srcOrientation:t="orientation",destCanvas:r="dest"}={})=>[l7(_,r=>[r[e],r[t]],(e,t)=>e[r]=t),"image-data-to-canvas"],sw=async(e,t)=>{if(!iZ(e)||!t)return e;let r=(e,t)=>{let r=2,n=new DataView(e),o=n.byteLength;for(t(n.getUint8(0),0,2,o);r<o&&255==n.getUint8(r);){let e=n.getUint8(r+1),a=n.getUint16(r+2)+2;if(!1===t(e,r,a,o))break;r+=a}},n=e=>e>=224&&e<=237,o=(e=>{let t=[];return r(e,(r,o,a)=>{if(218===r)return!1;n(r)&&t.push(new Uint8Array(e,o,a))}),t})(t);return new Blob([((e,t)=>{let o=[];r(e,(r,a,l,s)=>{if(0===a){o.push(new Uint8Array(e,a,l)),o.push(...t);return}if(218===r)return o.push(new Uint8Array(e,a,s-a)),!1;n(r)||o.push(new Uint8Array(e,a,l))});let a=new Uint8Array(o.reduce((e,t)=>e+t.length,0)),l=0;return o.forEach(e=>{a.set(e,l),l+=e.length}),a})(await b(e),o)],{type:"image/jpeg"})},sS=(e="blob",t="copy",r="blob")=>[l7(sw,r=>[r[e],r[t]],(e,t)=>e[r]=t),"blob-write-image-head"],sk=({renameFile:e,srcBlob:t="blob",srcFile:r="src",destFile:n="dest",defaultFilename:o}={})=>[l7(ef,n=>[n[t],e?e(n[r]):n[r].name||`${o}.${ed(n[t].type)}`],(e,t)=>e[n]=t),"blob-to-file"],sC=({url:e="./",dataset:t=e=>[["dest",e.dest,e.dest.name],["imageState",e.imageState]],destStore:r="store",credentials:n,headers:o={}})=>[l7(async(t,r)=>await iK(e,t,{onprogress:r,beforeSend:e=>iO(e,{headers:o,credentials:n})}),(e,r,n)=>[t(e),n],(e,t)=>e[r]=t),"store"],sT=e=>[l7(t=>(e&&e.length&&Object.keys(t).forEach(r=>{e.includes(r)||delete t[r]}),t)),"prop-filter"],sM=(e={})=>{let{orientImage:t=!0,outputProps:r=["src","dest","size","duration"],preprocessImageFile:n,request:o={}}=e;return[l9({willRequest:()=>o}),se(),n&&[l7(n,(e,t,r)=>[e.dest,t,r],(e,t)=>e.dest=t),"preprocess-image-file"],st({srcProp:"dest"}),sr({srcProp:"dest"}),t&&so({srcProp:"dest"}),t&&sa(),t&&sn(),sT(r)].filter(Boolean)},sP=e=>e&&(P(e)?sC({url:e}):U(e)?[e,"store"]:sC(e)),sE=(e={})=>(t,r,n={})=>{let{canvasMemoryLimit:o=lX(),orientImage:a=!0,copyImageHead:l=!0,mimeType:s,quality:d,renameFile:c,targetSize:u,imageDataResizer:h,store:p,format:$="file",outputProps:m=["src","dest","imageState","store"],preprocessImageSource:f,preprocessImageState:g,postprocessImageData:y,postprocessImageBlob:x,testSrcSupport:b=!1}={...e,...n};if(!b||iC(t))return"blob"===$&&($="file"),[f&&[l7(f,(e,t,r)=>[e.src,t,r,e.imageState],(e,t)=>e.src=t),"preprocess-image-source"],(a||l)&&so(),a&&sa(),st(),g&&[l7(g,(e,t,r,n)=>[e.imageState,t,r,{size:e.size,orientation:e.orientation}],(e,t)=>e.imageState=t),"preprocess-image-state"],sd({canvasMemoryLimit:o}),a&&sn(),a&&sc(),ss(),sf(),sh(),s$({imageDataResizer:h,targetSize:u}),sg({imageDataResizer:h,canvasMemoryLimit:o,srcShapes:"manipulation"}),sm(),su(),sg({imageDataResizer:h,canvasMemoryLimit:o,srcShapes:"annotation",shapeFilter:e=>!e.aboveFrame}),sy({imageDataResizer:h,canvasMemoryLimit:o,shapeFilter:e=>!e.aboveFrame}),sx({imageDataResizer:h,canvasMemoryLimit:o}),sg({imageDataResizer:h,canvasMemoryLimit:o,srcShapes:"annotation",shapeFilter:e=>e.aboveFrame,shapeClip:!1}),sy({imageDataResizer:h,canvasMemoryLimit:o,shapeFilter:e=>e.aboveFrame}),y&&[l7(y,(e,t,r)=>[e.imageData,t,r],(e,t)=>e.imageData=t),"postprocess-image-data"],"file"===$?sb({mimeType:s,quality:d}):"canvas"===$?sv():[e=>(e.dest=e.imageData,e)],"file"===$&&a&&sl(),"file"===$&&l&&sS(),x&&[l7(x,({blob:e,imageData:t,src:r},n,o)=>[{blob:e,imageData:t,src:r},n,o],(e,t)=>e.blob=t),"postprocess-image-file"],"file"===$&&sk({defaultFilename:"image",renameFile:c}),"file"===$?sP(p):U(p)&&[p,"store"],sT(m)].filter(Boolean)};var sR=(e,t,r,n,o,a,l,s,d,c,u)=>{if(!e||!t||!r||!n||!s)return;s*=a;let h=tB(t6(tT(t))),p=tB(e),$=tB(tE(r)),m=tB(lx(r,n,d)),f=e1(eV($),m),g=e1(eV(p),h);f.x+=g.x,f.y+=g.y;let y=eU(eV(f));return y.x+=g.x,y.y+=g.y,e0(f,e1(tB(tO(tO(tT(o),l),e)),p)),{origin:y,translation:f,rotation:{x:u?Math.PI:0,y:c?Math.PI:0,z:d},scale:s}};let sI=null;var sA=()=>{if(null===sI){if("WebGL2RenderingContext"in window){let e;try{sI=!!(e=R("canvas")).getContext("webgl2")}catch(e){sI=!1}e&&L(e),e=void 0}else sI=!1}return sI},sL=e=>(e&e-1)==0,sF=(e,t={},r="",n="")=>Object.keys(t).filter(e=>!N(t[e])).reduce((e,o)=>e.replace(new RegExp(r+o+n),t[o]),e);let sz={head:"#version 300 es\n\nin vec4 aPosition;uniform mat4 uMatrix;",text:"\nin vec2 aTexCoord;out vec2 vTexCoord;",matrix:"\ngl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);"},sB={head:"#version 300 es\nprecision highp float;\n\nout vec4 fragColor;",mask:"\nuniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}",init:"\nfloat a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);",colorize:"\nif(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}",maskapply:"\nfloat m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);",maskfeatherapply:"\nfloat leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;",rectaa:"\nvec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,uEdgeFeather,uSize.x-scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,uSize.y-scaledPoint.y);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.x);a*=smoothstep(0.0,uEdgeFeather,scaledPoint.y);",cornerradius:"\nvec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);",fragcolor:"\nif(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));"},sO=(e,t,r)=>(t=sF(t,r===e.VERTEX_SHADER?sz:sB,"##").trim(),sA())?t:(t=(t=t.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),r===e.VERTEX_SHADER&&(t=t.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),r===e.FRAGMENT_SHADER&&(t=t.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),`${t}`),sD=(e,t,r)=>{let n=e.createShader(r),o=sO(e,t,r);return e.shaderSource(n,o),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)||console.error(e.getShaderInfoLog(n)),n},s_=(e,t,r,n,o)=>{let a=sD(e,t,e.VERTEX_SHADER),l=sD(e,r,e.FRAGMENT_SHADER),s=e.createProgram();e.attachShader(s,a),e.attachShader(s,l),e.linkProgram(s);let d={};return n.forEach(t=>{d[t]=e.getAttribLocation(s,t)}),o.forEach(t=>{d[t]=e.getUniformLocation(s,t)}),{program:s,locations:d,destroy(){e.detachShader(s,a),e.detachShader(s,l),e.deleteShader(a),e.deleteShader(l),e.deleteProgram(s)}}},sW=e=>"VIDEO"!==e.nodeName&&(!!sA()||sL(e.width)&&sL(e.height)),sN=(e,t,r)=>{e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,sW(t)?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r.filterParam),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r.wrapParam),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r.wrapParam),sW(t)&&e.generateMipmap(e.TEXTURE_2D)},sV=(e,t,r,n)=>(e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),sN(e,r,n),e.bindTexture(e.TEXTURE_2D,null),t),sj=(e,t=1)=>e?[e[0],e[1],e[2],ri(e[3])?t*e[3]:t]:[0,0,0,0],sU=()=>{let e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},sH=(e,t,r,n,o)=>{let a=1/Math.tan(t/2),l=1/(n-o);e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+n)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*n*l,e[15]=0},sG=(e,t,r,n,o,a,l)=>{let s=1/(t-r),d=1/(n-o),c=1/(a-l);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(o+n)*d,e[14]=(l+a)*c,e[15]=1},sX=(e,t,r,n)=>{e[12]=e[0]*t+e[4]*r+e[8]*n+e[12],e[13]=e[1]*t+e[5]*r+e[9]*n+e[13],e[14]=e[2]*t+e[6]*r+e[10]*n+e[14],e[15]=e[3]*t+e[7]*r+e[11]*n+e[15]},sZ=(e,t)=>{e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t,e[8]*=t,e[9]*=t,e[10]*=t,e[11]*=t},sY=(e,t)=>{e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t},sq=(e,t)=>{e[4]*=t,e[5]*=t,e[6]*=t,e[7]*=t},sK=(e,t)=>{let r=Math.sin(t),n=Math.cos(t),o=e[4],a=e[5],l=e[6],s=e[7],d=e[8],c=e[9],u=e[10],h=e[11];e[4]=o*n+d*r,e[5]=a*n+c*r,e[6]=l*n+u*r,e[7]=s*n+h*r,e[8]=d*n-o*r,e[9]=c*n-a*r,e[10]=u*n-l*r,e[11]=h*n-s*r},sJ=(e,t)=>{let r=Math.sin(t),n=Math.cos(t),o=e[0],a=e[1],l=e[2],s=e[3],d=e[8],c=e[9],u=e[10],h=e[11];e[0]=o*n-d*r,e[1]=a*n-c*r,e[2]=l*n-u*r,e[3]=s*n-h*r,e[8]=o*r+d*n,e[9]=a*r+c*n,e[10]=l*r+u*n,e[11]=s*r+h*n},sQ=(e,t)=>{let r=Math.sin(t),n=Math.cos(t),o=e[0],a=e[1],l=e[2],s=e[3],d=e[4],c=e[5],u=e[6],h=e[7];e[0]=o*n+d*r,e[1]=a*n+c*r,e[2]=l*n+u*r,e[3]=s*n+h*r,e[4]=d*n-o*r,e[5]=c*n-a*r,e[6]=u*n-l*r,e[7]=h*n-s*r};var s0=e=>e*Math.PI/180,s1=(e,t)=>sA()?e.getContext("webgl2",t):e.getContext("webgl",t)||e.getContext("experimental-webgl",t);let s2=(e,t)=>{let r=e.length;return t>=r?e[t%r]:t<0?e[t%r+r]:e[t]},s4=e=>{let t=0,r,n,o,a=e.length;for(r=0;r<a;r++)n=e[r],t+=((o=e[(r+1)%a]).x-n.x)*((o.y+n.y)/2);return t},s5=(e,t,r,n)=>{let o=eO(r.x-t.x,r.y-t.y),a=eO(n.x-r.x,n.y-r.y),l=eO(t.x-n.x,t.y-n.y),s=eO(e.x-t.x,e.y-t.y),d=eO(e.x-r.x,e.y-r.y),c=eO(e.x-n.x,e.y-n.y),u=e3(o,s),h=e3(a,d),p=e3(l,c);return u<=0&&h<=0&&p<=0},s3=e=>{let t=e.length;for(let r=0;r<t;r++)if(ie(tx(e[r],s2(e,r+1)),e,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0;return!1},s6=e=>{let t,r,n,o,a,l,s,d,c;if(e.length<3||s3(e))return[];0>s4(e)&&e.reverse();let u=e.length,h=[...Array(u).keys()],p=[],$=1024;for(;h.length>3;){if($<=0)return[];for($--,t=0;t<h.length;t++)if(n=h[t],o=s2(h,t-1),a=s2(h,t+1),l=e[n],s=e[o],d=e[a],!(0>e3(eO(s.x-l.x,s.y-l.y),eO(d.x-l.x,d.y-l.y)))){for(r=0,c=!0;r<u;r++)if(r!==n&&r!==o&&r!==a&&s5(e[r],s,l,d)){c=!1;break}if(c){p.push([s,l,d]),h.splice(t,1);break}}}return p.push([e[h[0]],e[h[1]],e[h[2]]]),p},s8=(e,t,r,n,o)=>{let a=eZ(eO(n.x-r.x,n.y-r.y)),l=eZ(eO(o.x-n.x,o.y-n.y)),s=eZ(eO(a.x+l.x,a.y+l.y)),d=eO(-s.y,s.x),c=Math.min(1/e5(d,eO(-a.y,a.x)),5);e[t]=n.x,e[t+1]=n.y,e[t+2]=d.x*c,e[t+3]=d.y*c,e[t+4]=-1,e[t+5]=n.x,e[t+6]=n.y,e[t+7]=d.x*c,e[t+8]=d.y*c,e[t+9]=1},s7=(e,t)=>{let r,n,o,a=0,l=e.length,s=new Float32Array((t?l+1:l)*10),d=e[0],c=e[l-1];for(a=0;a<l;a++)r=e[a-1],n=e[a],o=e[a+1],r||(r=t?c:eO(n.x+(n.x-o.x),n.y+(n.y-o.y))),o||(o=t?d:eO(n.x+(n.x-r.x),n.y+(n.y-r.y))),s8(s,10*a,r,n,o);return t&&s8(s,10*l,c,d,e[1]),s},s9=e=>{let t=new Float32Array(8);return t[0]=e[3].x,t[1]=e[3].y,t[2]=e[0].x,t[3]=e[0].y,t[4]=e[2].x,t[5]=e[2].y,t[6]=e[1].x,t[7]=e[1].y,t},de=(e,t=0,r,n)=>{let o=t4(e),a=e.x+.5*e.width,l=e.y+.5*e.height;return(r||n)&&te(o,r,n,a,l),0!==t&&tt(o,t,a,l),o},dt=(e,t,r,n,o,a,l)=>{let s=.5*Math.abs(r),d=.5*Math.abs(n),c=Math.max(20,Math.round((Math.abs(r)+Math.abs(n))/6));return ia(eO(e+s,t+d),s,d,o,a,l,c)},di=(e,t,r,n,o,a,l,s)=>{let d=[];if(a.every(e=>0===e))d.push(eO(e,t),eO(e+r,t),eO(e+r,t+n),eO(e,t+n));else{let[o,l,s,c]=a,u=e+r,h=t+n;d.push(eO(e+o,t)),dr(d,u-l,t+l,l,-1),d.push(eO(u,t+l)),dr(d,u-c,h-c,c,0),d.push(eO(u-c,h)),dr(d,e+s,h-s,s,1),d.push(eO(e,h-s)),dr(d,e+o,t+o,o,2)}return(l||s)&&te(d,l,s,e+.5*r,t+.5*n),o&&tt(d,o,e+.5*r,t+.5*n),d},dr=(e,t,r,n,o)=>{let a=Math.min(20,Math.max(4,Math.round(n/2))),l=0,s=0,d=0,c=0,u=0;for(;u<a;u++)d=n*Math.cos(s=o*eb+u/a*eb),c=n*Math.sin(s),e.push(eO(t+d,r+c))},dn=null;var da=()=>{if(null!==dn)return dn;let e=R("canvas"),t=s1(e);return dn=t?t.getParameter(t.MAX_TEXTURE_SIZE):void 0,L(e),e=void 0,dn},dl=()=>k()&&!!window.chrome;let ds=new Float32Array([0,1,0,0,1,1,1,0]),dd=new Float32Array([1,0,0,0,1,1,0,1]),dc=k()&&er(),du=[0,0,0,0,1,0,0,0,0],dh=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],dp=[0,0,0,0],d$=[0,0,0,0],dm=(e,t,r,n,o)=>{if(!r||!n)return ds;let a=n.x/r.width,l=n.y/r.height,s=e/r.width/o,d=t/r.height/o;s-=a;let c=d-=l;return new Float32Array([-a,c,-a,-l,s,d,s,-l])},df=(e,t)=>Math.floor(lb(e,0,Math.min((t.width-1)*.5,(t.height-1)*.5)));var dg=(e,t={})=>{let r,n,o,a,l,s,d,c,u,h,p,$;let{alpha:m=!1}=t,f={width:0,height:0},g={width:0,height:0},y=da()||1024,x=sU(),b=sU(),v=0,w=0,S=0,k=1,C=new Map([]),T=()=>{E.stencilOp(E.KEEP,E.KEEP,E.KEEP),E.stencilFunc(E.ALWAYS,1,255),E.stencilMask(255)},M=s0(30),P=Math.tan(M/2),E=s1(e,{alpha:m,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!E)return;E.getExtension("OES_standard_derivatives"),E.disable(E.DEPTH_TEST),E.enable(E.STENCIL_TEST),E.enable(E.BLEND),E.blendFunc(E.ONE,E.ONE_MINUS_SRC_ALPHA),E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!m&&er())),T();let R=E.createTexture();E.bindTexture(E.TEXTURE_2D,R),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array(dp)),C.set(0,R);let I=E.createTexture();C.set(2,I);let A=E.createFramebuffer(),F=E.createTexture();C.set(1,F);let z=E.createFramebuffer(),B=s_(E,"\n##head\n##text\nvoid main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}","\n##head\nin vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){vec4 res=(c*m)+(o*c.a);res=clamp(res,0.0,1.0);return res;}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}",["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),O=E.createBuffer(),D=E.createBuffer();E.bindBuffer(E.ARRAY_BUFFER,D),E.bufferData(E.ARRAY_BUFFER,ds,E.STATIC_DRAW);let _=E.createBuffer();E.bindBuffer(E.ARRAY_BUFFER,_),E.bufferData(E.ARRAY_BUFFER,dd,E.STATIC_DRAW);let W=(e,t,o,a,l,s,d,c,$,m,g=dh,y=1,x,b=1,v=0,w=p,S=d$,k=dp,T=!1,R=!1,I=!0)=>{let A;let L=t.width*n,F=t.height*n,z=-.5*L,W=.5*F,N=.5*L,V=-.5*F,j=new Float32Array([z,V,0,z,W,0,N,V,0,N,W,0]);E.bindBuffer(E.ARRAY_BUFFER,O),E.bufferData(E.ARRAY_BUFFER,j,E.STATIC_DRAW);let U=-(t.height/2/P*(f.height/t.height)*1);l*=n,s*=n,o*=n,a*=n;let{program:H,locations:G}=B,X=sU();sH(X,M,r,1,-(2*U)),sX(X,l,-s,U),sX(X,o,-a,0),sQ(X,-$),sZ(X,m),sX(X,-o,a,0),sJ(X,c),sK(X,d),E.useProgram(H),E.enableVertexAttribArray(G.aPosition),E.enableVertexAttribArray(G.aTexCoord),E.uniform1i(G.uTexture,3),E.uniform2f(G.uTextureSize,t.width,t.height),E.activeTexture(E.TEXTURE0+3),E.bindTexture(E.TEXTURE_2D,e);let Z=+!!R,Y=C.get(Z);E.uniform1i(G.uTextureBlend,Z),E.activeTexture(E.TEXTURE0+Z),E.bindTexture(E.TEXTURE_2D,Y);let q=2*!!T,K=C.get(q);E.uniform1i(G.uTextureOverlay,q),E.activeTexture(E.TEXTURE0+q),E.bindTexture(E.TEXTURE_2D,K),E.bindBuffer(E.ARRAY_BUFFER,O),E.vertexAttribPointer(G.aPosition,3,E.FLOAT,!1,0,0);let J=dc&&es(e);E.bindBuffer(E.ARRAY_BUFFER,J?_:D),E.vertexAttribPointer(G.aTexCoord,2,E.FLOAT,!1,0,0),E.uniformMatrix4fv(G.uMatrix,!1,X),E.uniform4fv(G.uOverlayColor,k),!x||lM(x,du)?(x=du,A=-1):A=(A=x.reduce((e,t)=>e+t,0))<=0?1:A,E.uniform1fv(G.uClarityKernel,x),E.uniform1f(G.uClarityKernelWeight,A),E.uniform1f(G.uColorGamma,1/b),E.uniform1f(G.uColorVignette,v),E.uniform1i(G.uAntialias,+!!I),E.uniform4f(G.uColorOffset,g[4],g[9],g[14],g[19]),E.uniformMatrix4fv(G.uColorMatrix,!1,[g[0],g[1],g[2],g[3],g[5],g[6],g[7],g[8],g[10],g[11],g[12],g[13],g[15],g[16],g[17],g[18]]),E.uniform1f(G.uOpacity,y),E.uniform1f(G.uMaskOpacity,u),E.uniform1fv(G.uMaskBounds,h),E.uniform1fv(G.uMaskCornerRadius,S.map(e=>e*n)),E.uniform1fv(G.uMaskFeather,w.map((e,t)=>t%2==0?e:e*n)),E.drawArrays(E.TRIANGLE_STRIP,0,4),E.disableVertexAttribArray(G.aPosition),E.disableVertexAttribArray(G.aTexCoord)},N=s_(E,"#version 300 es\n\nin vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}","\n##head\n##mask\nin vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),V=E.createBuffer();dl()&&(E.bindBuffer(E.ARRAY_BUFFER,V),E.bufferData(E.ARRAY_BUFFER,1,E.DYNAMIC_DRAW));let j=(e,t,r,n=!1)=>{let{program:l,locations:s}=N;E.useProgram(l),E.enableVertexAttribArray(s.aPosition),E.enableVertexAttribArray(s.aNormal),E.enableVertexAttribArray(s.aMiter);let d=s7(e,n),c=5*Float32Array.BYTES_PER_ELEMENT,p=2*Float32Array.BYTES_PER_ELEMENT,$=4*Float32Array.BYTES_PER_ELEMENT;E.uniform1f(s.uWidth,t),E.uniform1f(s.uSharpness,o),E.uniform4fv(s.uColor,r),E.uniformMatrix4fv(s.uMatrix,!1,a),E.uniform4f(s.uCanvasColor,v,w,S,k),E.uniform1fv(s.uMaskBounds,h),E.uniform1f(s.uMaskOpacity,u),E.bindBuffer(E.ARRAY_BUFFER,V),E.bufferData(E.ARRAY_BUFFER,d,E.STATIC_DRAW),E.vertexAttribPointer(s.aPosition,2,E.FLOAT,!1,c,0),E.vertexAttribPointer(s.aNormal,2,E.FLOAT,!1,c,p),E.vertexAttribPointer(s.aMiter,1,E.FLOAT,!1,c,$),E.drawArrays(E.TRIANGLE_STRIP,0,d.length/5),E.disableVertexAttribArray(s.aPosition),E.disableVertexAttribArray(s.aNormal),E.disableVertexAttribArray(s.aMiter)},U=s_(E,"\n##head\nvoid main(){\n##matrix\n}","\n##head\n##mask\nuniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;\n##maskapply\nfillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}",["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),H=E.createBuffer(),G=(e,t)=>{let{program:r,locations:n}=U;return E.useProgram(r),E.enableVertexAttribArray(n.aPosition),E.uniform4fv(n.uColor,t),E.uniformMatrix4fv(n.uMatrix,!1,a),E.uniform1fv(n.uMaskBounds,h),E.uniform1f(n.uMaskOpacity,u),E.uniform4f(n.uCanvasColor,v,w,S,k),E.bindBuffer(E.ARRAY_BUFFER,H),E.bufferData(E.ARRAY_BUFFER,e,E.STATIC_DRAW),E.vertexAttribPointer(n.aPosition,2,E.FLOAT,!1,0,0),E.drawArrays(E.TRIANGLES,0,e.length/2),E.disableVertexAttribArray(n.aPosition),e},X=s_(E,"\n##head\n##text\nin vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;uniform float uEdgeFeather;void main(){\n##init\n##colorize\n##rectaa\n##cornerradius\n##maskfeatherapply\nif(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted","uEdgeFeather"]),Z=E.createBuffer(),Y=E.createBuffer(),q=E.createBuffer(),K=(e,t,r,o,l,s=R,d,c=1,p=dp,m=ds,f=$,g=1,y)=>{let{program:x,locations:b}=X;return E.useProgram(x),E.enableVertexAttribArray(b.aPosition),E.enableVertexAttribArray(b.aTexCoord),E.enableVertexAttribArray(b.aRectCoord),E.uniform4fv(b.uColor,l),E.uniform2fv(b.uSize,[t,r]),E.uniform2fv(b.uPosition,[e[2],e[3]]),E.uniform2fv(b.uRepeat,d),E.uniform1i(b.uInverted,+!!y),E.uniform1fv(b.uCornerRadius,o),E.uniform4f(b.uCanvasColor,v,w,S,k),E.uniform1fv(b.uMaskFeather,f.map((e,t)=>t%2==0?e:e*n)),E.uniform1fv(b.uMaskBounds,h),E.uniform1f(b.uMaskOpacity,u),E.uniform1f(b.uEdgeFeather,Math.max(0,g)),E.uniformMatrix4fv(b.uMatrix,!1,a),E.uniform1i(b.uTexture,4),E.uniform4fv(b.uTextureColor,p),E.uniform1f(b.uTextureOpacity,c),E.activeTexture(E.TEXTURE0+4),E.bindTexture(E.TEXTURE_2D,s),E.bindBuffer(E.ARRAY_BUFFER,Y),E.bufferData(E.ARRAY_BUFFER,m,E.STATIC_DRAW),E.vertexAttribPointer(b.aTexCoord,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,q),E.bufferData(E.ARRAY_BUFFER,ds,E.STATIC_DRAW),E.vertexAttribPointer(b.aRectCoord,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,Z),E.bufferData(E.ARRAY_BUFFER,e,E.STATIC_DRAW),E.vertexAttribPointer(b.aPosition,2,E.FLOAT,!1,0,0),E.drawArrays(E.TRIANGLE_STRIP,0,e.length/2),E.disableVertexAttribArray(b.aPosition),E.disableVertexAttribArray(b.aTexCoord),E.disableVertexAttribArray(b.aRectCoord),e},J=s_(E,"\n##head\n##text\nout vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;\n##matrix\n}","\n##head\n##mask\nin vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uTextureAdjust;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){\n##init\nfloat ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uTextureAdjust.x*uRadius.x)*(vTexCoordDouble.x*uTextureAdjust.x*uRadius.x),(vTexCoordDouble.y*uTextureAdjust.y*uRadius.y)*(vTexCoordDouble.y*uTextureAdjust.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;\n##maskapply\n##fragcolor\n}",["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uTextureAdjust","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),Q=E.createBuffer(),ee=E.createBuffer(),et=(e,t,r,o,l=R,s,d=ds,c=1,p=!1)=>{let{program:$,locations:m}=J;E.useProgram($),E.enableVertexAttribArray(m.aPosition),E.enableVertexAttribArray(m.aTexCoord),E.uniformMatrix4fv(m.uMatrix,!1,a),E.uniform2fv(m.uRadius,[.5*t,.5*r]),E.uniform2fv(m.uTextureAdjust,[s.width/(t/n),s.height/(r/n)]),E.uniform1i(m.uInverted,+!!p),E.uniform4fv(m.uColor,o),E.uniform4f(m.uCanvasColor,v,w,S,k),E.uniform2fv(m.uRepeat,[1,1]),E.uniform1fv(m.uMaskBounds,h),E.uniform1f(m.uMaskOpacity,u),E.uniform1i(m.uTexture,4),E.uniform1f(m.uTextureOpacity,c),E.activeTexture(E.TEXTURE0+4),E.bindTexture(E.TEXTURE_2D,l),E.bindBuffer(E.ARRAY_BUFFER,ee),E.bufferData(E.ARRAY_BUFFER,d,E.STATIC_DRAW),E.vertexAttribPointer(m.aTexCoord,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,Q),E.bufferData(E.ARRAY_BUFFER,e,E.STATIC_DRAW),E.vertexAttribPointer(m.aPosition,2,E.FLOAT,!1,0,0),E.drawArrays(E.TRIANGLE_STRIP,0,e.length/2),E.disableVertexAttribArray(m.aPosition),E.disableVertexAttribArray(m.aTexCoord)},ei=(e,t=0,r=!1,o=!1,a,l,s,d,c,u=!1,h,p,$,m,f,g=1/n,y,x)=>{let b=tN(tT(e),n),v=a.map(t=>df(t||0,e)).map(e=>e*n);if(l||s){let e;let a=tT(b);a.x-=.5,a.y-=.5,a.width+=1,a.height+=1;let p=s9(de(a,t,r,o));y&&0===(e=sj(y))[3]&&(e[3]=.001);let $=d&&u?[a.width/d.width,a.height/d.height]:[1,1];K(p,a.width,a.height,v,sj(l,m),s,$,m,e,h?new Float32Array(h):dm(a.width,a.height,d,c,n),f,g*n,x)}p&&(p=Math.min(p,b.width,b.height),j(di(b.x,b.y,b.width,b.height,t,v,r,o),p*n,sj($,m),!0))},en=new Map,eo={};eo[2]={width:0,height:0},eo[1]={width:0,height:0};let ea=(e,t,r,o=1)=>{let l=Math.min(Math.min(4096,y)/r.width,Math.min(4096,y)/r.height,o),s=Math.floor(l*r.width),d=Math.floor(l*r.height);tc(r,eo[e])?E.bindFramebuffer(E.FRAMEBUFFER,t):(E.bindTexture(E.TEXTURE_2D,C.get(e)),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,s,d,0,E.RGBA,E.UNSIGNED_BYTE,null),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.bindFramebuffer(E.FRAMEBUFFER,t),E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,C.get(e),0),eo[e]=r);let c=r.width*n,u=r.height*n;sG(b,0,c,u,0,-1,1),sX(b,0,u,0),sY(b,1),sq(b,-1),a=b,E.viewport(0,0,s,d),E.colorMask(!0,!0,!0,!0),E.clearColor(0,0,0,0),E.clear(E.COLOR_BUFFER_BIT),$=[1,0,1,0,1,Math.max(f.width,r.width),1,Math.max(f.width,r.width)]},el=(e,t)=>{let{forceRelease:r=!1}=t||{},{src:n}=en.get(e);n instanceof HTMLCanvasElement&&!r&&!n.dataset.retain&&L(n),en.delete(e),E.deleteTexture(e)},es=e=>en.get(e).isRotatedVideo;return{drawPath:(e,t=0,r=!1,o=!1,a,l,s,d,c)=>{if(e.length<2)return;let u=e.map(e=>({x:e.x*n,y:e.y*n})),h=a*n;if(h>0&&j(u,h,sj(l,c),s),u.length<3||!d||0===d[3]||!s)return;let p=s6(u),$=new Float32Array(6*p.length);p.forEach(([e,t,r],n)=>{let o=6*n;$[o+0]=e.x,$[o+1]=e.y,$[o+2]=t.x,$[o+3]=t.y,$[o+4]=r.x,$[o+5]=r.y}),G($,sj(d,c))},drawRect:ei,drawEllipse:(e,t,r,o,a,l,s,d,c,u,h,p,$,m,f)=>{let g=tN(tz(e.x-t,e.y-r,2*t,2*r),n);if(s||d){let e=tT(g);f||(e.x-=.5,e.y-=.5,e.width+=1,e.height+=1),et(s9(de(e,o,a,l)),e.width,e.height,sj(s,m),d,c||td(e.width/n,e.height/n),h?new Float32Array(h):dm(e.width,e.height,c,u,n),m,f)}p&&j(dt(g.x,g.y,g.width,g.height,o,a,l),p*n,sj($,m),!0)},drawImage:W,textureFilterNearest:E.NEAREST,textureFilterLinear:E.LINEAR,textureClamp:E.CLAMP_TO_EDGE,textureRepeat:E.REPEAT,textureCreate:()=>E.createTexture(),textureUpdate:(e,t,r)=>(en.set(e,{src:t,options:r,isRotatedVideo:"VIDEO"===t.nodeName&&(t.dataset&&90==t.dataset.rotation||270==t.dataset.rotation)}),sV(E,e,t,r)),textureGetSize:e=>{let{src:t,options:r}=en.get(e),n=tn(t);return r.scalar?tf(n,e=>e/r.scalar):n},textureDelete:el,enablePreviewStencil:()=>{E.stencilOp(E.KEEP,E.KEEP,E.REPLACE),E.stencilFunc(E.ALWAYS,1,255),E.stencilMask(255)},applyPreviewStencil:()=>{E.stencilFunc(E.EQUAL,1,255),E.stencilMask(0)},disablePreviewStencil:T,setCanvasColor(e){v=e[0],w=e[1],S=e[2],k=m?e[3]:1,E.clear(E.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{sG(x,0,f.width,f.height,0,-1,1)},updateCanvasMatrix(e,t,r,o,a){let l=e.width,s=e.height,d=f.width*(.5/n),c=f.height*(.5/n),u={x:d+(r.x+t.x),y:c+(r.y+t.y)},h={x:u.x-t.x,y:u.y-t.y},p={x:.5*l,y:.5*s};eG(h,a.z,u),e7(h,o,u);let $={x:h.x-p.x,y:h.y-p.y};sX(x,$.x*n,$.y*n,0),sX(x,p.x*n,p.y*n,0),sQ(x,a.z),sK(x,a.x>Math.PI/2?Math.PI:0),sJ(x,a.y>Math.PI/2?Math.PI:0),sZ(x,o),sX(x,-p.x*n,-p.y*n,0)},drawToCanvas(){E.bindFramebuffer(E.FRAMEBUFFER,null),a=x,E.viewport(0,0,E.drawingBufferWidth,E.drawingBufferHeight),E.colorMask(!0,!0,!0,!0),E.clearColor(v,w,S,k),E.clear(E.COLOR_BUFFER_BIT),$=[1,0,1,0,1,f.width,1,f.width]},drawToImageBlendBuffer(e,t){ea(1,z,e,t)},drawToImageOverlayBuffer(e,t){ea(2,A,e,t)},enableMask(e,t){let r=e.x*n,o=e.y*n,a=e.width*n,p=e.height*n;s=(c=r)+a,l=f.height-o,d=f.height-(o+p),u=1-t,h=[l,s,d,c]},disableMask(){c=0,s=f.width,l=f.height,u=1,h=[l,s,d=0,c]},resize:(t,a,l)=>{n=Math.max(1,l),o=1===n?.75:1,g.width=t,g.height=a,f.width=t*n,f.height=a*n,r=eg(f.width,f.height),e.width=f.width,e.height=f.height,sG(x,0,f.width,f.height,0,-1,1),p=[1,0,1,0,1,g.width,1,g.width]},release(){Array.from(en.keys()).forEach(e=>el(e,{forceRelease:!0})),en.clear(),C.forEach(e=>{E.deleteTexture(e)}),C.clear(),B.destroy(),N.destroy(),U.destroy(),X.destroy(),J.destroy(),e.width=1,e.height=1,e=void 0}}},dy=(e,t)=>{let r,n;let{imageData:o,amount:a=1}=e,l=Math.round(2*Math.max(1,a)),s=Math.round(.5*l),d=o.width,c=o.height,u=new Uint8ClampedArray(d*c*4),h=o.data,p=0,$,m,f,g=0,y=0,x=d*c*4-4;for(m=0;m<c;m++)for($=0,r=crypto.getRandomValues(new Uint8ClampedArray(c));$<d;$++)f=r[m]/255,g=0,y=0,f<.5&&(g=(-s+Math.round(Math.random()*l))*4),f>.5&&(y=4*d*(-s+Math.round(Math.random()*l))),n=Math.min(Math.max(0,p+g+y),x),u[p]=h[n],u[p+1]=h[n+1],u[p+2]=h[n+2],u[p+3]=h[n+3],p+=4;t(null,{data:u,width:o.width,height:o.height})};let dx=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];var db=async(e,t={})=>{let r;if(!e)return;let{width:n,height:o}=e,{dataSize:a=96,dataSizeScalar:l=1,scrambleAmount:s=4,blurAmount:d=6,outputFormat:c="canvas",backgroundColor:u=[0,0,0]}=t,h=Math.round(a*l),p=Math.min(h/n,h/o),$=Math.floor(n*p),m=Math.floor(o*p),f=R("canvas",{width:$,height:m}),g=f.getContext("2d",{willReadFrequently:!0});if(u.length=3,g.fillStyle=rf(u),g.fillRect(0,0,$,m),F(e)){let t=R("canvas",{width:n,height:o});t.getContext("2d",{willReadFrequently:!0}).putImageData(e,0,0),g.drawImage(t,0,0,$,m),L(t)}else g.drawImage(e,0,0,$,m);let y=g.getImageData(0,0,$,m),x=[];if(s>0&&x.push([dy,{amount:s}]),d>0)for(let e=0;e<d;e++)x.push([i6,{matrix:dx}]);if(x.length){let e=(t,r)=>`(err, imageData) => {
(${t[r][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${r}]), 
${t[r+1]?e(t,r+1):"done"})
}`,t=`function (options, done) {
const filterInstructions = options.filterInstructions;
const imageData = options.imageData;
(${e(x,0)})(null, imageData)
}`;r=i4(await et(t,[{imageData:y,filterInstructions:x.map(e=>e[1])}],[y.data.buffer]))}else r=y;return"canvas"===c?(g.putImageData(r,0,0),f):r};function dv(e){return Math.sqrt(1- --e*e)}function dw(e){return"[object Date]"===Object.prototype.toString.call(e)}function dS(e,t={}){let r;let n=a7(e),o=e;function a(a,l){let s;if(null==e)return n.set(e=a),Promise.resolve();o=a;let d=r,c=!1,{delay:u=0,duration:h=400,easing:p=oO,interpolate:$=function e(t,r){if(t===r||t!=t)return()=>t;let n=typeof t;if(n!==typeof r||Array.isArray(t)!==Array.isArray(r))throw Error("Cannot interpolate values of different type");if(Array.isArray(t)){let n=r.map((r,n)=>e(t[n],r));return e=>n.map(t=>t(e))}if("object"===n){if(!t||!r)throw Error("Object cannot be null");if(dw(t)&&dw(r)){t=t.getTime();let e=(r=r.getTime())-t;return r=>new Date(t+r*e)}let n=Object.keys(r),o={};return n.forEach(n=>{o[n]=e(t[n],r[n])}),e=>{let t={};return n.forEach(r=>{t[r]=o[r](e)}),t}}if("number"===n){let e=r-t;return r=>t+r*e}throw Error(`Cannot interpolate ${n} values`)}}=oD(oD({},t),l);if(0===h)return d&&(d.abort(),d=null),n.set(e=o),Promise.resolve();let m=o5()+u;return(r=o7(t=>{if(t<m)return!0;c||(s=$(e,a),"function"==typeof h&&(h=h(e,a)),c=!0),d&&(d.abort(),d=null);let r=t-m;return r>h?(n.set(e=a),!1):(n.set(e=s(p(r/h))),!0)})).promise}return{set:a,update:(t,r)=>a(t(o,e),r),subscribe:n.subscribe}}function dk(e,t={}){let r,n,o;let a=a7(e),{stiffness:l=.15,damping:s=.8,precision:d=.01}=t,c=e,u=e,h=1,p=0,$=!1;function m(t,l={}){u=t;let s=o={};if(null==e||l.hard||f.stiffness>=1&&f.damping>=1)return $=!0,r=null,c=t,a.set(e=u),Promise.resolve();if(l.soft&&(p=1/(60*(!0===l.soft?.5:+l.soft)),h=0),!n){r=null,$=!1;let t={inv_mass:void 0,opts:f,settled:!0,dt:void 0};n=o7(o=>{if(null===r&&(r=o),$)return $=!1,n=null,!1;h=Math.min(h+p,1),t.inv_mass=h,t.opts=f,t.settled=!0,t.dt=(o-r)*60/1e3;let l=function e(t,r,n,o){if("number"==typeof n){let e=o-n,a=(n-r)/(t.dt||1/60),l=(t.opts.stiffness*e-t.opts.damping*a)*t.inv_mass,s=(a+l)*t.dt;return Math.abs(s)<t.opts.precision&&Math.abs(e)<t.opts.precision?o:(t.settled=!1,n+s)}if(ro(n))return n.map((a,l)=>e(t,r[l],n[l],o[l]));if("object"==typeof n){let a={};for(let l in n)a[l]=e(t,r[l],n[l],o[l]);return a}throw Error(`Cannot spring ${typeof n} values`)}(t,c,e,u);return r=o,c=e,a.set(e=l),t.settled&&(n=null),!t.settled})}return new Promise(e=>{n.promise.then(()=>{s===o&&e()})})}let f={set:m,update:(t,r)=>m(t(u,e),r),subscribe:a.subscribe,stiffness:l,damping:s,precision:d};return f}var dC=a8(!1,e=>{let t=window.matchMedia("(prefers-reduced-motion:reduce)"),r=()=>e(t.matches);return r(),t.addListener(r),()=>t.removeListener(r)}),dT=()=>"ResizeObserver"in window;let dM=tM(),dP=(e,t,r,n,o)=>{e.rect||(e.rect=tM());let a=e.rect;tX(dM,t,r,n,o),tH(a,dM)||(tZ(a,dM),e.dispatchEvent(new CustomEvent("measure",{detail:a})))},dE=Math.round,dR=e=>{let t=e.getBoundingClientRect();h&&dP(e,dE(t.x),dE(t.y),dE(t.width),dE(t.height))},dI=e=>{h&&dP(e,e.offsetLeft,e.offsetTop,e.offsetWidth,e.offsetHeight)},dA=[];function dL(){if(!dA.length){h=void 0;return}dA.forEach(e=>e.measure(e)),h=requestAnimationFrame(dL)}let dF=new Map([]),dz=0,dB=0;var dO=(e,t={})=>{let{observePosition:r=!1,observeViewRect:n=!1,once:o=!1,disabled:a=!1,isMeasureRoot:l=!1}=t;if(dT()&&l&&(c||(c=new ResizeObserver(e=>{e.forEach(e=>{dF.set(e.target,e.contentRect)});let t=Array.from(dF.values()).some(({width:e,height:t})=>e>0&&t>0);t?t&&!1===h&&dL():(h&&cancelAnimationFrame(h),h=!1)})),c.observe(e),dz++),!a)return!dT()||r||n?(e.measure=n?dR:dI,dA.push(e),void 0===h&&(h=requestAnimationFrame(dL)),e.measure(e),{destroy(){l&&c&&(dF.delete(e),c.unobserve(e),0==--dz&&(c.disconnect(),c=void 0));let t=dA.indexOf(e);dA.splice(t,1),delete e.measure}}):(d||(d=new ResizeObserver(e=>{e.forEach(e=>{h&&dI(e.target)})})),d.observe(e),dI(e),o?d.unobserve(e):dB++,{destroy(){l&&c&&(dF.delete(e),c.unobserve(e),0==--dz&&(c.disconnect(),c=void 0)),o||(d.unobserve(e),0!=--dB||(d.disconnect(),d=void 0))}})},dD=e=>{let t=!1,r={pointerdown:()=>{t=!1},keydown:()=>{t=!0},keyup:()=>{t=!1},focus:e=>{t&&(e.target.dataset.focusVisible="")},blur:e=>{delete e.target.dataset.focusVisible}};return Object.keys(r).forEach(t=>e.addEventListener(t,r[t],!0)),{destroy(){Object.keys(r).forEach(t=>e.removeEventListener(t,r[t],!0))}}};let d_=e=>/^http/.test(e),dW=e=>new Promise((t,r)=>"file"===e.kind?t(e.getAsFile()):"string"===e.kind?e.getAsString(t):void r()),dN=e=>new Promise((t,r)=>{let{items:n}=e.dataTransfer;if(!n)return t([]);let o=Array.from(n).some(e=>"text/uri-list"===e.type);Promise.all(Array.from(n).filter(e=>("file"===e.kind||"string"===e.kind)&&"text/x-moz-url"!==e.type).map(dW)).then(e=>{if(o)return t([e.find(d_)].filter(Boolean));t(e.filter(e=>r$(e)&&iC(e)||d_(e)))}).catch(r)});var dV=(e,t={})=>{let r=e=>{e.preventDefault()},n=async r=>{r.preventDefault(),r.stopPropagation();try{let n=await dN(r);e.dispatchEvent(new CustomEvent("dropfiles",{detail:{event:r,resources:n},...t}))}catch(e){}};return e.addEventListener("drop",n),e.addEventListener("dragover",r),{destroy(){e.removeEventListener("drop",n),e.removeEventListener("dragover",r)}}};let dj=null;var dU=()=>{if(null===dj){if(k()){let e=R("canvas");dj=!s1(e,{failIfMajorPerformanceCaveat:!0}),L(e)}else dj=!1}return dj},dH=e=>{let t=.5*e,r=R("canvas",{"data-retain":!0,width:e,height:e}),n=r.getContext("2d");return n.fillStyle="#f0f",n.fillRect(0,0,t,t),n.fillRect(t,t,t,t),r},dG=e=>{let t=parseFloat(e);return/^[0-9]+s$/.test(e)?1e3*t:t},dX=e=>e instanceof WebGLTexture,dZ=([e,t,r,n])=>[n.x,n.y,e.x,e.y,r.x,r.y,t.x,t.y],dY=e=>e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2,dq=(e,t,r)=>{let{selectionColor:n=[1,1,1],scalar:o=1}=r||{},a=!1;for(let r of t){let t="subtract"===r.drawMode;if(t&&!a)continue;e.globalCompositeOperation=t?"destination-out":"source-over",e.save(),e.beginPath();let l=os(r);i0(e,o,o),iJ(e,r.rotation,l),oM(e,r.flipX,r.flipY,l),r.width?ov(e,{...r,backgroundColor:n}):r.points?oT(e,Object.assign({},r,r.pathClose?{backgroundColor:n,strokeColor:[0,0,0,0]}:{strokeColor:n,strokeJoin:"round",strokeCap:"round"})):r.rx&&ow(e,{...r,backgroundColor:n,strokeColor:[0,0,0,0],strokeJoin:"round",strokeCap:"round"}),e.restore(),a=!0}};function dK(e){let t,r,n,o;return{c(){t=ar("div"),r=ar("canvas"),ad(t,"class","PinturaCanvas")},m(a,l){at(a,t,l),o9(t,r),e[37](r),n||(o=[as(r,"measure",e[38]),o2(dO.call(null,r))],n=!0)},p:oB,i:oB,o:oB,d(r){r&&ai(t),e[37](null),n=!1,oN(o)}}}function dJ(e,t,r){let n,o,a,l,s,d,c,u,h,p;let $=[0,0,0,0],m=eB(),f=k()&&dH(128),g=ak(),{isAnimated:y}=t,{isTransparent:b}=t,{maskRect:v}=t,{maskOpacity:w=1}=t,{maskFrameOpacity:S=.95}=t,{maskMarkupOpacity:C=1}=t,{clipAnnotationsToImage:T=!0}=t,{pixelRatio:M=1}=t,{textPixelRatio:E=M}=t,{backgroundColor:I}=t,{willRender:A=ey}=t,{didRender:z=ey}=t,{willRequest:B}=t,{csp:O}=t,{loadImageData:D=ey}=t,{enableGrid:_=!1}=t,{gridColors:W}=t,{gridSize:N}=t,{gridOpacity:V=0}=t,{images:j=[]}=t,{interfaceImages:U=[]}=t,{selectionColor:H}=t,G=null,X=null,Z=null,Y=(e,t)=>e.set(t,{hard:!y}),q={precision:10000000000000002e-22},K=0,J=dS(void 0,{duration:0});oX(e,J,e=>r(36,c=e));let Q=dk(1,q);oX(e,Q,e=>r(35,s=e));let ee=dk(1,q);oX(e,ee,e=>r(51,a=e));let et=a7();oX(e,et,e=>r(53,d=e));let ei=a7();oX(e,ei,e=>r(52,l=e));let en={},eo=(e,t)=>{if(e.total!==t.length)return!0;let r=e.last,n=t[t.length-1];return!!(r.drawMode!==n.drawMode||ni(r)&&(!ni(n)||!tH(r,n))||nr(r)&&(!nr(n)||r.x!==n.x||r.y!==n.y||r.rx!==n.rx||r.ry!==n.ry)||no(r)&&(!no(n)||n.points.length!==r.points.length))},ea=(e,t)=>{let r=en[e.id],n=Math.min(1,2048/t.width),o=r?r.element:R("canvas",{width:t.width*n,height:t.height*n,"data-retain":!0});if(!r||eo(r,e.actions)){dq((o=o.cloneNode()).getContext("2d"),e.actions,{selectionColor:[1,0,1],scalar:n});let t=e.actions.length;en[e.id]={total:t,last:{...e.actions[t-1]},element:o}}return{x:0,y:0,...t,fillColor:e.color||[1,1,1],backgroundImage:o}},el=()=>{cancelAnimationFrame(h),h=requestAnimationFrame(()=>{eL=!0,eU=0,o()})},es=new Map([]),ed=new Map([]),ec=e=>!P(e)&&(iN(e)||F(e)||oc(e)||iM(e)),eu=(e,t)=>({filterParam:"pixelated"===e?G.textureFilterNearest:G.textureFilterLinear,wrapParam:"repeat"===t?G.textureRepeat:G.textureClamp}),eh=(e,t,r)=>{if(!es.has(e)){es.set(e,e);let n=eu(t,r);if(ec(e)){let t=G.textureCreate();G.textureUpdate(t,e,n),es.set(e,t)}else D(e).then(t=>{if(!G||!t)return;let r=G.textureCreate();G.textureUpdate(r,t,n),es.set(e,r),el()}).catch(t=>{es.set(e,t)})}if(iM(e)&&(dY(e)||"true"===e.dataset.redraw)){let n=es.get(e),o=eu(t,r);return G.textureUpdate(n,e,o),e.dataset.redraw=!1,n}return es.get(e)},ep=(e,t={})=>{let r=t.id||e.id;if(e.width&&e.width<1||e.height&&e.height<1||!e.text.length){ed.delete(r);return}let{text:n,textAlign:o,fontFamily:a,fontSize:l=16,fontWeight:s,fontVariant:d,fontStyle:c,letterSpacing:u,lineHeight:h=l,width:p,height:$}=e,{outline:m=0,blur:f=0,paddingTop:g=0,paddingRight:y=0,paddingBottom:x=0,paddingLeft:b=0}=t;p=ri(p)?Math.floor(p):p,$=ri($)?Math.floor($):$;let{textSize:v,signature:w}=rA(n,{...e,width:p,height:void 0}),S=rg({text:n,textAlign:o,fontFamily:a,fontSize:l,fontWeight:s,fontVariant:d,fontStyle:c,lineHeight:h,letterSpacing:u,outline:m,blur:f,signature:w});if(!es.has(S)){es.set(S,n);let e=Math.ceil(v.width),t=Math.ceil(v.height);if(0===e||0===t)return;let w=da(),k=Math.min(1,(w-(b+y)*E)/(e*E),(w-(g+x)*E)/(t*E));r0(n,{fontSize:l,fontFamily:a,fontWeight:s,fontVariant:d,fontStyle:c,letterSpacing:u,textAlign:o,lineHeight:h,width:p,height:$,imageWidth:e,imageHeight:t,paddingLeft:b,paddingTop:g,paddingRight:y,paddingBottom:x,pixelRatio:E*k,willRequest:B,outline:m,blur:f,styleNonce:O.styleNonce,color:[1,0,1]}).then(e=>{if(!G)return;let t=G.textureCreate();G.textureUpdate(t,e,{filterParam:G.textureFilterLinear,wrapParam:G.textureClamp,scalar:k}),es.set(S,t),ed.set(r,t),el()}).catch(console.error)}let k=es.get(S);return dX(k)?k:ed.get(r)},e$=new Map,em=e=>{let{id:t,points:r,strokeWidth:n,strokeCap:o,strokeJoin:a,strokeColor:l,strokeDash:s}=e,d=es.get(t),c=e$.get(t),u=rg({points:r.map(e=>`${e.x},${e.y}`).join(","),strokeWidth:n,strokeCap:o,strokeJoin:a,strokeColor:l,strokeDash:(s||[]).join(",")});if(c){let{hash:e}=c;if(es.has(t)){if(u===e)return es.get(t)}else c=void 0}if(!c){let r=R("canvas",{width:1,height:1});c={canvas:r,hash:void 0},e$.set(e.id,c),d=G.textureCreate(),G.textureUpdate(d,r,{filterParam:G.textureFilterLinear,wrapParam:G.textureClamp}),es.set(t,d)}let{canvas:h}=c,p=Math.ceil(e.strokeWidth),$=tA(r),m=Math.floor($.x)-.5*p,f=Math.floor($.y)-.5*p,g=Math.ceil($.width+p),y=Math.ceil($.height+p);h.width=Math.max(g,1),h.height=Math.max(y,1);let x=h.getContext("2d");return x.clearRect(0,0,h.width,h.height),g>=1&&y>=1&&(x.translate(-m,-f),oT(x,e),x.resetTransform()),G.textureUpdate(d,h,{filterParam:G.textureFilterLinear,wrapParam:G.textureClamp}),e$.set(t,{canvas:h,hash:u}),es.get(t)},ef=e=>{let t;return e.backgroundImage?t=eh(e.backgroundImage,e.backgroundImageRendering,"repeat"===e.backgroundRepeat?"repeat":void 0):e.bitmap&&e.points&&(t=em(e)),t},ex=e=>{es.forEach((t,r)=>{!e.find(e=>e===t)&&dX(t)&&(Array.from(ed.values()).includes(t)||(es.delete(r),G.textureDelete(t)))})},eb=({texture:e,size:t,origin:r,translation:n,rotation:o,scale:a,colorMatrix:l,opacity:s,convolutionMatrix:d,gamma:c,vignette:u,maskFeather:h,maskCornerRadius:p,overlayColor:$,enableOverlay:m,enableManipulation:f,enableAntialiasing:g})=>{let y=0,x=0;if(1===M){let e=Math.abs(1-a)<Number.EPSILON;y=e&&X%2!=0?.5:0,x=e&&Z%2!=0?.5:0}return G.drawImage(e,t,r.x,r.y,n.x+y,n.y+x,o.x,o.y,o.z,a,l,lb(s,0,1),d,c,u,h,p,$,m,f,g),e},ev=(e,t,r)=>{let n=tB(t),o=tB(e),a={x:n.x-o.x,y:n.y-o.y},l=eG(n,r,o);return{x:l.x-o.x-a.x,y:l.y-o.y-a.y}},ew=(e,t)=>[e,e,e,e].map(e=>e*t),eS=(e,t,r)=>{let n,o;let a=eg(r.width,r.height);if("repeat"===e.backgroundRepeat&&(n={...r},o={x:0,y:0}),"contain"===e.backgroundSize)n=to(t1(t,a,t)),o=e.backgroundPosition?e.backgroundPosition:eO((t.width-n.width)*.5,(t.height-n.height)*.5);else if("cover"===e.backgroundSize){let r=tJ(t,a,t);n=to(r),e.backgroundPosition?o=e.backgroundPosition:(o=eO(r.x,r.y),o=eO((t.width-n.width)*.5,(t.height-n.height)*.5))}else e.backgroundSize?(n=e.backgroundSize,o=e.backgroundPosition||{x:0,y:0}):e.backgroundPosition&&(n={...r},o=e.backgroundPosition);return{backgroundSize:n,backgroundPosition:o}},ek=(e=[],t)=>{e.forEach(e=>{let r=ef(e),n="complete"!==e.status&&("loading"===e.status||e.backgroundImage&&r===e.backgroundImage);n&&el();let o="error"===e.status||e.backgroundImage&&r instanceof Error,a=dX(r)?r:void 0,l=e._scale||1,s=e._translate||m,d=e.strokeWidth&&e.strokeWidth*l,c=e.cornerRadius?ew(e.cornerRadius,l):$,u=!!e.width,h=P(e.text),p=ro(e.points),f=nr(e);if(p){let n=e.points.map(e=>eO(e.x*l+s.x,e.y*l+s.y));if(e.bitmap){r&&t.push(r);let o=tA(n),s=Math.ceil(e.strokeWidth*l);G.drawRect({x:Math.floor(o.x)-.5*s,y:Math.floor(o.y)-.5*s,width:Math.ceil(o.width+s),height:Math.ceil(o.height+s)},e.rotation,e.flipX,e.flipY,[0,0,0,0],void 0,a,void 0,void 0,void 0,void 0,void 0,void 0,e.opacity,void 0,void 0,!1,!1)}else G.drawPath(n,e.rotation,e.flipX,e.flipY,d,e.strokeColor,e.pathClose,e.backgroundColor,e.opacity)}else if(f){let c,u,h=e.x,p=e.y;h*=l,p*=l;let $=tL({x:h+=s.x,y:p+=s.y,rx:e.rx*l,ry:e.ry*l}),m=eO(h,p),f=a&&G.textureGetSize(a);if(f&&e.backgroundImage&&(e.backgroundSize||e.backgroundPosition||e.backgroundRepeat)){let t=eS(e,$,f);c=t.backgroundSize,u=t.backgroundPosition}G.drawEllipse(m,e.rx*l,e.ry*l,e.rotation,e.flipX,e.flipY,e.backgroundColor,a,c,u,e.backgroundCorners&&dZ(e.backgroundCorners),d,e.strokeColor,e.opacity,e.inverted),r&&t.push(r),(n||o)&&(e.backgroundColor||e.strokeColor&&e.strokeWidth||G.drawEllipse(m,e.rx*l,e.ry*l,e.rotation,e.flipX,e.flipY,o?[1,0,0,.25*e.opacity]:[0,0,0,.25*e.opacity]),o&&eR(m),n&&eE(m))}else if(h){let{fontSize:r=16}=e,n=r>1e3&&er()?r/1e3:1,o=Math.max(16,Math.ceil(r/n*.25)),a=Math.abs(e.rotation)>0,u=ri(e.width)?Math.floor(e.width):e.width,h=ri(e.height)?Math.floor(e.height):e.height,p=rz(e.text,{...e,width:u,height:h}),m=Math.ceil(p.width),f=Math.ceil(p.height),g={x:e.x*l+s.x,y:e.y*l+s.y,width:m*l,height:f*l},y=!!e.height;(e.backgroundColor||e.strokeColor)&&G.drawRect(g,e.rotation,e.flipX,e.flipY,c,e.backgroundColor,void 0,void 0,void 0,!1,void 0,d,e.strokeColor,e.opacity,void 0,void 0,void 0,e.inverted);let{textShadowX:x,textShadowY:b,textShadowBlur:v}=e;if(x||b||v){let r=Math.ceil(.5*v),d=Math.max(o,y?0:r),c=ep(e,{id:e.id+"shadow",blur:v,paddingTop:d,paddingRight:d,paddingBottom:d,paddingLeft:d});if(c&&!e._prerender){let r;t.push(c);let d=G.textureGetSize(c),u={x:0,y:0},h={width:d.width/E*l,height:d.height/E*l},p=o*l/n;if(y)r={...g},u.x=x-p,u.y=b-p;else if(r={x:e.x*l+s.x-p,y:e.y*l+s.y-p,width:h.width,height:h.height},a){let t=ev(g,r,e.rotation);r.x+=t.x,r.y+=t.y;let n=eG(eO(x,b),e.rotation);r.x+=n.x,r.y+=n.y}else r.x+=x,r.y+=b;G.drawRect(r,e.rotation,e.flipX,e.flipY,[0,0,0,0],void 0,c,h,u,!1,void 0,void 0,void 0,e.opacity,void 0,0,e.textShadowColor)}}if(e.textOutlineWidth){let r=Math.ceil(.5*e.textOutlineWidth),d=o+r,c=ep(e,{id:e.id+"outline",outline:e.textOutlineWidth,paddingTop:d,paddingRight:d,paddingBottom:d,paddingLeft:d});if(c&&!e._prerender){t.push(c);let d=G.textureGetSize(c),u={width:d.width/E*l,height:d.height/E*l},h=(o+r)*l/n,p={x:e.x*l+s.x-h,y:e.y*l+s.y-h,width:u.width,height:e.height?f+h:u.height};if(a){let t=ev(g,p,e.rotation);p.x+=t.x,p.y+=t.y}G.drawRect(p,e.rotation,e.flipX,e.flipY,[0,0,0,0],void 0,c,u,{x:0,y:0},!1,void 0,void 0,void 0,e.opacity,void 0,0,e.textOutlineColor)}}let w=ep(e,{id:e.id+"text",paddingTop:o,paddingRight:o,paddingBottom:o,paddingLeft:o});if(w&&!e._prerender){t.push(w);let r=G.textureGetSize(w),d={width:r.width/E*l,height:r.height/E*l},c=o*l/n,u={x:e.x*l+s.x-c,y:e.y*l+s.y-c,width:d.width,height:e.height?f+c:d.height};if(a){let t=ev(g,u,e.rotation);u.x+=t.x,u.y+=t.y}let h=e.color||[0,0,0];e._prerender&&(h[3]=0),G.drawRect(u,e.rotation,e.flipX,e.flipY,$,!1,w,d,{x:0,y:0},!1,!1,void 0,void 0,e.opacity,void 0,e.feather,h,e.inverted)}}else if(u){let u,h;r&&t.push(r);let p=tI(e);l&&s&&(p.x*=l,p.y*=l,p.x+=s.x,p.y+=s.y,p.width*=l,p.height*=l);let{backgroundRepeat:$="no-repeat"}=e,m=a&&G.textureGetSize(a);if(m&&e.backgroundImage&&(e.backgroundSize||e.backgroundPosition||e.backgroundRepeat)){let t=eS(e,p,m);u=t.backgroundSize,h=t.backgroundPosition}if(G.drawRect(p,e.rotation,e.flipX,e.flipY,c,e.backgroundColor,a,u,h,"repeat"===$,e.backgroundCorners&&dZ(e.backgroundCorners),d,e.strokeColor,e.opacity,void 0,e.feather,e.fillColor,e.inverted),n||o){e.backgroundColor&&0!==e.backgroundColor[3]||e.strokeColor&&e.strokeWidth||G.drawRect(p,e.rotation,e.flipX,e.flipY,c,o?[1,.2549,.2118,.25*e.opacity]:[0,0,0,.25*e.opacity]);let t=tB(p);o&&eR(t),n&&eE(t)}}else r&&t.push(r)})},eC=0,eT=[{x:-5,y:-5},{x:5,y:5}],eM=[{x:5,y:-5},{x:-5,y:5}],eP=ia({x:0,y:0},10,10,0,!1,!1,16);eP.length=9;let eE=e=>{eC=Date.now()/50,G.drawEllipse(e,15,15,0,!1,!1,[0,0,0,.5]);let t=tt(eP.map(t=>({x:t.x+e.x,y:t.y+e.y})),eC,e.x,e.y);G.drawPath(t,0,!1,!1,2,[1,1,1])},eR=e=>{G.drawEllipse(e,13,13,0,!1,!1,[1,.2549,.2118,.75]);let t=eT.map(t=>({x:t.x+e.x,y:t.y+e.y})),r=eM.map(t=>({x:t.x+e.x,y:t.y+e.y}));G.drawPath(t,0,!1,!1,3,[1,1,1]),G.drawPath(r,0,!1,!1,3,[1,1,1])},eI=(e,t,r,n,o,a)=>G.drawRect(t,0,!1,!1,$,$,e,n,r,!0,void 0,0,void 0,a,void 0,void 0,o),eA=(e,t,r,n,o)=>{let a=td(t,t),l=eh(f,"pixelated","repeat"),s=eO(-e.x%t,-e.y%t),d=eO(s.x+.5*a.width,s.y);eI(l,e,s,a,r,o),eI(l,e,d,a,n,o)},eL=!1,eF=!0,ez=!1,eD=[],e_=[],eW=[],eN=e=>!e.aboveFrame,eV=e=>e.aboveFrame,ej=()=>{eW.length=0;let e=j[0],{manipulationShapes:t,manipulationShapesDirty:r,annotationShapes:n,annotationShapesDirty:o,interfaceShapes:u,decorationShapes:h,frameShapes:p,selectionShapes:m}=A({opacity:e.opacity,rotation:e.rotation,scale:e.scale,images:j,size:td(X,Z),backgroundColor:[...c],selectionRect:d}),f=[...c],g=d,y=lb(s,0,1),x=l,w=Math.abs(-1+e.rotation.x/Math.PI*2),S=Math.abs(-1+e.rotation.y/Math.PI*2),k=w<.99||S<.99,M={...e.size},P=e.backgroundColor,R=e.backgroundImage,I=t.length>0,L=n.length>0,F=n.filter(eV).length>0,B=h.filter(eV).length>0,O=P[3]>0,D=!!T&&C>=1;if(y<1&&O){let e=f[0],t=f[1],r=f[2],n=1-y,o=P[0]*n,a=P[1]*n,l=P[2]*n,s=1-n;f[0]=o+e*s,f[1]=a+t*s,f[2]=l+r*s,f[3]=1}G.setCanvasColor(b?$:f),I&&(r||eL)?(G.disableMask(),G.drawToImageBlendBuffer(M),eD.length=0,ek(t,eD)):I||(eD.length=0),eW.push(...eD),eF&&(G.drawToImageOverlayBuffer(M,E),eF=!1);let Y=L&&(o||eL);if(k?(Y||!ez?(G.disableMask(),G.drawToImageOverlayBuffer(M,E),e_.length=0,ek(F?n.filter(eN):n,e_)):L||(e_.length=0),ez=!0):ez=!1,G.drawToCanvas(),G.enableMask(g,y),_&&N>=1&&2===W.length&&V&&eA(g,N,W[0],W[1],V),O&&G.drawRect(g,0,!1,!1,$,P),R){G.enableMask(g,1);let e=Math.max(v.width/R.width,v.height/R.height),t=R.width*e,r=R.height*e,n={x:v.x+.5*v.width-.5*t,y:v.y+.5*v.height-.5*r,width:t,height:r};G.drawRect(n,0,!1,!1,$,$,eh(R,"linear")),G.enableMask(g,y)}if(D&&G.enablePreviewStencil(),eW.push(...[...j].reverse().map(e=>eb({...e,texture:eh(e.data),enableOverlay:k&&L,enableManipulation:I,enableAntialiasing:!0,mask:g,maskOpacity:y,overlayColor:x}))),G.enableMask(g,C),!k&&(D&&G.applyPreviewStencil(),G.resetCanvasMatrix(),G.updateCanvasMatrix(M,e.origin,e.translation,e.scale,e.rotation),e_.length=0,ek(F?n.filter(eN):n,e_),D&&G.disablePreviewStencil()),eW.push(...e_),G.resetCanvasMatrix(),G.enableMask(g,C),ek(B?h.filter(eN):h,eW),p.length){G.enableMask(g,1);let e=p.filter(e=>!e.expandsCanvas),t=p.filter(e=>e.expandsCanvas);e.length&&ek(e,eW),t.length&&(G.enableMask({x:g.x+.5,y:g.y+.5,width:g.width-1,height:g.height-1},a),ek(t,eW))}if(F&&(G.resetCanvasMatrix(),G.updateCanvasMatrix(M,e.origin,e.translation,e.scale,e.rotation),ek(n.filter(eV),eW),G.resetCanvasMatrix()),B&&(G.resetCanvasMatrix(),ek(h.filter(eV),eW),G.resetCanvasMatrix()),H&&m.length&&!k){G.resetCanvasMatrix(),G.updateCanvasMatrix(M,e.origin,e.translation,e.scale,e.rotation);let t=[...H];t[3]=.5,ek([{id:"selection",color:t,actions:[...m]}].map(e=>ea(e,M)),eW),G.resetCanvasMatrix()}G.disableMask(),ek(u,eW),U.forEach(e=>{if(G.enableMask(e.mask,e.maskOpacity),e.backgroundColor){let t=R&&tJ({...e.mask},R.width/R.height),r=R&&eh(R,"linear");G.drawRect(e.mask,0,!1,!1,e.maskCornerRadius,e.backgroundColor,r,t,t,void 0,void 0,void 0,void 0,e.opacity,e.maskFeather),r&&eW.push(r)}let t=eb({...e,texture:eh(e.data),enableAntialiasing:!1,translation:{x:e.translation.x+e.offset.x-.5*X,y:e.translation.y+e.offset.y-.5*Z}});eW.push(t)}),G.disableMask(),ex(eW),z(),eL=!1},eU=0,eH=()=>{clearTimeout(p);let e=Date.now();if(e-eU<48){p=setTimeout(eH,48);return}eU=e,ej()},eX=()=>dU()?eH:ej;return aw(()=>o()),av(()=>r(31,G=dg(u,{alpha:b}))),aS(()=>{G&&(e$.forEach(({canvas:e})=>L(e)),e$.clear(),G.release(),r(31,G=void 0),r(0,u=void 0))}),e.$$set=e=>{"isAnimated"in e&&r(9,y=e.isAnimated),"isTransparent"in e&&r(10,b=e.isTransparent),"maskRect"in e&&r(11,v=e.maskRect),"maskOpacity"in e&&r(12,w=e.maskOpacity),"maskFrameOpacity"in e&&r(13,S=e.maskFrameOpacity),"maskMarkupOpacity"in e&&r(14,C=e.maskMarkupOpacity),"clipAnnotationsToImage"in e&&r(15,T=e.clipAnnotationsToImage),"pixelRatio"in e&&r(16,M=e.pixelRatio),"textPixelRatio"in e&&r(17,E=e.textPixelRatio),"backgroundColor"in e&&r(18,I=e.backgroundColor),"willRender"in e&&r(19,A=e.willRender),"didRender"in e&&r(20,z=e.didRender),"willRequest"in e&&r(21,B=e.willRequest),"csp"in e&&r(22,O=e.csp),"loadImageData"in e&&r(23,D=e.loadImageData),"enableGrid"in e&&r(24,_=e.enableGrid),"gridColors"in e&&r(25,W=e.gridColors),"gridSize"in e&&r(26,N=e.gridSize),"gridOpacity"in e&&r(27,V=e.gridOpacity),"images"in e&&r(28,j=e.images),"interfaceImages"in e&&r(29,U=e.interfaceImages),"selectionColor"in e&&r(30,H=e.selectionColor)},e.$$.update=()=>{1&e.$$.dirty[0]&&u&&r(32,K=dG(getComputedStyle(u).getPropertyValue("--color-transition-duration"))),262656&e.$$.dirty[0]|2&e.$$.dirty[1]&&I&&J.set(I,{duration:y?K:0}),4096&e.$$.dirty[0]&&Y(Q,ri(w)?w:1),8192&e.$$.dirty[0]&&Y(ee,ri(S)?S:1),2048&e.$$.dirty[0]&&v&&et.set(v),48&e.$$.dirty[1]&&c&&ei.set([c[0],c[1],c[2],lb(s,0,1)]),0x10000006&e.$$.dirty[0]|1&e.$$.dirty[1]&&r(34,n=!!(G&&X&&Z&&j.length)),65542&e.$$.dirty[0]|1&e.$$.dirty[1]&&X&&Z&&G&&(eU=0,G.resize(X,Z,M)),8&e.$$.dirty[1]&&r(33,o=n?eX():x),12&e.$$.dirty[1]&&n&&o&&o()},[u,X,Z,g,J,Q,ee,et,ei,y,b,v,w,S,C,T,M,E,I,A,z,B,O,D,_,W,N,V,j,U,H,G,K,o,n,s,c,function(e){aE[e?"unshift":"push"](()=>{r(0,u=e)})},e=>{r(1,X=e.detail.width),r(2,Z=e.detail.height),g("measure",{width:X,height:Z})}]}class dQ extends a3{constructor(e){super(),a5(this,e,dJ,dK,oj,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,csp:22,loadImageData:23,enableGrid:24,gridColors:25,gridSize:26,gridOpacity:27,images:28,interfaceImages:29,selectionColor:30},null,[-1,-1,-1])}}var d0=(e,t=Boolean,r=" ")=>e.filter(t).join(r);function d1(e,t,r){let n=e.slice();return n[17]=t[r],n}let d2=e=>({tab:4&e}),d4=e=>({tab:e[17]});function d5(e){let t,r,n;let o=[],a=new Map,l=e[2],s=e=>e[17].id;for(let t=0;t<l.length;t+=1){let r=d1(e,l,t),n=s(r);a.set(n,o[t]=d3(n,r))}return{c(){t=ar("ul");for(let e=0;e<o.length;e+=1)o[e].c();ad(t,"class",r=d0(["PinturaTabList",e[0]])),ad(t,"role","tablist"),ad(t,"data-layout",e[1])},m(r,a){at(r,t,a);for(let e=0;e<o.length;e+=1)o[e].m(t,null);e[14](t),n=!0},p(e,d){1124&d&&(l=e[2],aV(),o=aK(o,d,s,1,e,l,a,t,aq,d3,null,d1),aj()),(!n||1&d&&r!==(r=d0(["PinturaTabList",e[0]])))&&ad(t,"class",r),(!n||2&d)&&ad(t,"data-layout",e[1])},i(e){if(!n){for(let e=0;e<l.length;e+=1)aU(o[e]);n=!0}},o(e){for(let e=0;e<o.length;e+=1)aH(o[e]);n=!1},d(r){r&&ai(t);for(let e=0;e<o.length;e+=1)o[e].d();e[14](null)}}}function d3(e,t){let r,n,o,a,l,s,d,c,u,h,p;let $=t[11].default,m=oZ($,t,t[10],d4);function f(...e){return t[12](t[17],...e)}function g(...e){return t[13](t[17],...e)}return{key:e,first:null,c(){r=ar("li"),n=ar("button"),m&&m.c(),l=aa(),ad(n,"type","button"),ad(n,"title",o=t[17].label),n.disabled=a=t[17].disabled,ad(r,"role","tab"),ad(r,"aria-controls",s=t[17].href.substring(1)),ad(r,"id",d=t[17].tabId),ad(r,"aria-selected",c=t[17].selected),this.first=r},m(e,t){at(e,r,t),o9(r,n),m&&m.m(n,null),o9(r,l),u=!0,h||(p=[as(n,"keydown",f),as(n,"click",g)],h=!0)},p(e,l){t=e,m&&m.p&&(!u||1028&l)&&oK(m,$,t,t[10],u?oq($,t[10],l,d2):oJ(t[10]),d4),(!u||4&l&&o!==(o=t[17].label))&&ad(n,"title",o),(!u||4&l&&a!==(a=t[17].disabled))&&(n.disabled=a),(!u||4&l&&s!==(s=t[17].href.substring(1)))&&ad(r,"aria-controls",s),(!u||4&l&&d!==(d=t[17].tabId))&&ad(r,"id",d),(!u||4&l&&c!==(c=t[17].selected))&&ad(r,"aria-selected",c)},i(e){u||(aU(m,e),u=!0)},o(e){aH(m,e),u=!1},d(e){e&&ai(r),m&&m.d(e),h=!1,oN(p)}}}function d6(e){let t,r;let n=e[4]&&d5(e);return{c(){n&&n.c(),t=al()},m(e,o){n&&n.m(e,o),at(e,t,o),r=!0},p(e,[r]){e[4]?n?(n.p(e,r),16&r&&aU(n,1)):((n=d5(e)).c(),aU(n,1),n.m(t.parentNode,t)):n&&(aV(),aH(n,1,1,()=>{n=null}),aj())},i(e){r||(aU(n),r=!0)},o(e){aH(n),r=!1},d(e){n&&n.d(e),e&&ai(t)}}}function d8(e,t,r){let n,o,a;let{$$slots:l={},$$scope:s}=t,{class:d}=t,{name:c}=t,{selected:u}=t,{tabs:h=[]}=t,{layout:p}=t,$=ak(),m=e=>{let t=a.querySelectorAll('[role="tab"] button')[e];t&&t.focus()},f=(e,t)=>{e.preventDefault(),e.stopPropagation(),$("select",t)},g=({key:e},t)=>{if(!/arrow/i.test(e))return;let r=h.findIndex(e=>e.id===t);return/right|down/i.test(e)?m(r<h.length-1?r+1:0):/left|up/i.test(e)?m(r>0?r-1:h.length-1):void 0};return e.$$set=e=>{"class"in e&&r(0,d=e.class),"name"in e&&r(7,c=e.name),"selected"in e&&r(8,u=e.selected),"tabs"in e&&r(9,h=e.tabs),"layout"in e&&r(1,p=e.layout),"$$scope"in e&&r(10,s=e.$$scope)},e.$$.update=()=>{896&e.$$.dirty&&r(2,n=h.map(e=>{let t=e.id===u;return{...e,tabId:`tab-${c}-${e.id}`,href:`#panel-${c}-${e.id}`,selected:t}})),4&e.$$.dirty&&r(4,o=n.length>1)},[d,p,n,a,o,f,g,c,u,h,s,l,(e,t)=>g(t,e.id),(e,t)=>f(t,e.id),function(e){aE[e?"unshift":"push"](()=>{r(3,a=e)})}]}class d7 extends a3{constructor(e){super(),a5(this,e,d8,d6,oj,{class:0,name:7,selected:8,tabs:9,layout:1})}}var d9=(e,t)=>{if(!t)return;let r=t=>{E(e,t)};return r(t),{update:r}};let ce=e=>({panel:16&e}),ct=e=>({panel:e[4][0].id,panelIsActive:!0});function ci(e,t,r){let n=e.slice();return n[14]=t[r].id,n[15]=t[r].shouldDraw,n[16]=t[r].panelId,n[17]=t[r].tabindex,n[18]=t[r].labelledBy,n[19]=t[r].isActive,n[20]=t[r].hidden,n[3]=t[r].visible,n}let cr=e=>({panel:16&e,panelIsActive:16&e}),cn=e=>({panel:e[14],panelIsActive:e[19]});function co(e){let t,r,n,o,a,l,s;let d=e[11].default,c=oZ(d,e,e[10],ct);return{c(){t=ar("div"),r=ar("div"),c&&c.c(),ad(r,"class",n=d0([e[1]])),ad(t,"class",e[0])},m(n,d){at(n,t,d),o9(t,r),c&&c.m(r,null),a=!0,l||(s=[o2(o=d9.call(null,t,e[2])),as(t,"measure",e[13]),o2(dO.call(null,t))],l=!0)},p(e,l){c&&c.p&&(!a||1040&l)&&oK(c,d,e,e[10],a?oq(d,e[10],l,ce):oJ(e[10]),ct),(!a||2&l&&n!==(n=d0([e[1]])))&&ad(r,"class",n),(!a||1&l)&&ad(t,"class",e[0]),o&&oV(o.update)&&4&l&&o.update.call(null,e[2])},i(e){a||(aU(c,e),a=!0)},o(e){aH(c,e),a=!1},d(e){e&&ai(t),c&&c.d(e),l=!1,oN(s)}}}function ca(e){let t,r,n,o,a,l;let s=[],d=new Map,c=e[4],u=e=>e[14];for(let t=0;t<c.length;t+=1){let r=ci(e,c,t),n=u(r);d.set(n,s[t]=cs(n,r))}return{c(){t=ar("div");for(let e=0;e<s.length;e+=1)s[e].c();ad(t,"class",r=d0(["PinturaTabPanels",e[0]]))},m(r,d){at(r,t,d);for(let e=0;e<s.length;e+=1)s[e].m(t,null);o=!0,a||(l=[o2(n=d9.call(null,t,e[2])),as(t,"measure",e[12]),o2(dO.call(null,t,{observePosition:!0}))],a=!0)},p(e,a){1042&a&&(c=e[4],aV(),s=aK(s,a,u,1,e,c,d,t,aq,cs,null,ci),aj()),(!o||1&a&&r!==(r=d0(["PinturaTabPanels",e[0]])))&&ad(t,"class",r),n&&oV(n.update)&&4&a&&n.update.call(null,e[2])},i(e){if(!o){for(let e=0;e<c.length;e+=1)aU(s[e]);o=!0}},o(e){for(let e=0;e<s.length;e+=1)aH(s[e]);o=!1},d(e){e&&ai(t);for(let e=0;e<s.length;e+=1)s[e].d();a=!1,oN(l)}}}function cl(e){let t;let r=e[11].default,n=oZ(r,e,e[10],cn);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,o){n&&n.p&&(!t||1040&o)&&oK(n,r,e,e[10],t?oq(r,e[10],o,cr):oJ(e[10]),cn)},i(e){t||(aU(n,e),t=!0)},o(e){aH(n,e),t=!1},d(e){n&&n.d(e)}}}function cs(e,t){let r,n,o,a,l,s,d,c,u;let h=t[15]&&cl(t);return{key:e,first:null,c(){r=ar("div"),h&&h.c(),n=aa(),ad(r,"class",o=d0(["PinturaTabPanel",t[1]])),r.hidden=a=t[20],ad(r,"id",l=t[16]),ad(r,"tabindex",s=t[17]),ad(r,"aria-labelledby",d=t[18]),ad(r,"data-inert",c=!t[3]),this.first=r},m(e,t){at(e,r,t),h&&h.m(r,null),o9(r,n),u=!0},p(e,p){(t=e)[15]?h?(h.p(t,p),16&p&&aU(h,1)):((h=cl(t)).c(),aU(h,1),h.m(r,n)):h&&(aV(),aH(h,1,1,()=>{h=null}),aj()),(!u||2&p&&o!==(o=d0(["PinturaTabPanel",t[1]])))&&ad(r,"class",o),(!u||16&p&&a!==(a=t[20]))&&(r.hidden=a),(!u||16&p&&l!==(l=t[16]))&&ad(r,"id",l),(!u||16&p&&s!==(s=t[17]))&&ad(r,"tabindex",s),(!u||16&p&&d!==(d=t[18]))&&ad(r,"aria-labelledby",d),(!u||16&p&&c!==(c=!t[3]))&&ad(r,"data-inert",c)},i(e){u||(aU(h),u=!0)},o(e){aH(h),u=!1},d(e){e&&ai(r),h&&h.d()}}}function cd(e){var t;let r,n,o,a;let l=[ca,co],s=[];function d(e,t){return+!e[5]}return n=s[r=+!e[5]]=l[r](e),{c(){n.c(),o=al()},m(e,t){s[r].m(e,t),at(e,o,t),a=!0},p(e,[t]){var a;let d=r;(r=+!e[5])===d?s[r].p(e,t):(aV(),aH(s[d],1,1,()=>{s[d]=null}),aj(),(n=s[r])?n.p(e,t):(n=s[r]=l[r](e)).c(),aU(n,1),n.m(o.parentNode,o))},i(e){a||(aU(n),a=!0)},o(e){aH(n),a=!1},d(e){s[r].d(e),e&&ai(o)}}}function cc(e,t,r){let n,o;let{$$slots:a={},$$scope:l}=t,{class:s}=t,{name:d}=t,{selected:c}=t,{panelClass:u}=t,{panels:h=[]}=t,{visible:p}=t,{style:$}=t,m={};return e.$$set=e=>{"class"in e&&r(0,s=e.class),"name"in e&&r(6,d=e.name),"selected"in e&&r(7,c=e.selected),"panelClass"in e&&r(1,u=e.panelClass),"panels"in e&&r(8,h=e.panels),"visible"in e&&r(3,p=e.visible),"style"in e&&r(2,$=e.style),"$$scope"in e&&r(10,l=e.$$scope)},e.$$.update=()=>{968&e.$$.dirty&&r(4,n=h.map(e=>{let t=e===c;t&&r(9,m[e]=!0,m);let n=p?-1!==p.indexOf(e):t;return{id:e,panelId:`panel-${d}-${e}`,labelledBy:`tab-${d}-${e}`,isActive:t,hidden:!t,visible:n,tabindex:t?0:-1,shouldDraw:t||m[e]}})),16&e.$$.dirty&&r(5,o=n.length>1)},[s,u,$,p,n,o,d,c,h,m,l,a,function(t){aM.call(this,e,t)},function(t){aM.call(this,e,t)}]}class cu extends a3{constructor(e){super(),a5(this,e,cc,cd,oj,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var ch=e=>{let t=Object.getOwnPropertyDescriptors(e.prototype);return Object.keys(t).filter(e=>!!t[e].get)};function cp(e){let t,r,n,o;let a=[e[5],{locale:e[1]}];function l(t){e[22](t)}var s=e[10];function d(e){let t={};for(let e=0;e<a.length;e+=1)t=oD(t,a[e]);return void 0!==e[3]&&(t.name=e[3]),{props:t}}return s&&(t=new s(d(e)),aE.push(()=>a0(t,"name",l)),e[23](t),t.$on("measure",e[11])),{c(){t&&a1(t.$$.fragment),n=al()},m(e,r){t&&a2(t,e,r),at(e,n,r),o=!0},p(e,o){let c=34&o[0]?aJ(a,[32&o[0]&&aQ(e[5]),2&o[0]&&{locale:e[1]}]):{};if(!r&&8&o[0]&&(r=!0,c.name=e[3],aB(()=>r=!1)),s!==(s=e[10])){if(t){aV();let e=t;aH(e.$$.fragment,1,0,()=>{a4(e,1)}),aj()}s?(t=new s(d(e)),aE.push(()=>a0(t,"name",l)),e[23](t),t.$on("measure",e[11]),a1(t.$$.fragment),aU(t.$$.fragment,1),a2(t,n.parentNode,n)):t=null}else s&&t.$set(c)},i(e){o||(t&&aU(t.$$.fragment,e),o=!0)},o(e){t&&aH(t.$$.fragment,e),o=!1},d(r){e[23](null),r&&ai(n),t&&a4(t,r)}}}function c$(e){let t,r,n;let o=e[6]&&cp(e);return{c(){t=ar("div"),o&&o.c(),ad(t,"data-util",e[3]),ad(t,"class",r=d0(["PinturaUtilPanel",e[2]])),a$(t,"opacity",e[7])},m(r,a){at(r,t,a),o&&o.m(t,null),e[24](t),n=!0},p(e,a){e[6]?o?(o.p(e,a),64&a[0]&&aU(o,1)):((o=cp(e)).c(),aU(o,1),o.m(t,null)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj()),(!n||8&a[0])&&ad(t,"data-util",e[3]),(!n||4&a[0]&&r!==(r=d0(["PinturaUtilPanel",e[2]])))&&ad(t,"class",r),128&a[0]&&a$(t,"opacity",e[7])},i(e){n||(aU(o),n=!0)},o(e){aH(o),n=!1},d(r){r&&ai(t),o&&o.d(),e[24](null)}}}function cm(e,t,r){let n,o,a,l,s,d,c,u;let h=ak(),{isActive:p=!0}=t,{stores:$}=t,{view:m}=t,{props:f}=t,{component:g}=t,{locale:y}=t,{class:x}=t,b=aT("isAnimated");oX(e,b,e=>r(21,s=e));let v=dk(0),w=a9(v,e=>lb(e,0,1));oX(e,w,e=>r(20,l=e));let S=!p,k=a7(p),C=a9(k,async(e,t)=>{if(!e)return t(e);await (aF(),aA),t(e)},!1),T={isActive:C,isActiveFraction:a9(w,e=>e),isVisible:a9(w,e=>e>0)},M=m,P=ch(M),E=Object.keys(f||{}).reduce((e,t)=>(P.includes(t)&&(e[t]=f[t]),e),{}),R=Object.keys(T).reduce((e,t)=>(P.includes(t)&&(e[t]=T[t]),e),{}),I=e=>{r(17,d={...e.detail}),L&&p&&h("measure",{...d})};aC("measurable",dO);let A=ab().$$.context,L=!1;return av(()=>{if(r(19,L=!0),a)return;r(0,g=new M({target:u,props:{...o,locale:y},context:A})),r(3,c=g.name);let e=g.$on("measure",I);return()=>{e(),g.$destroy()}}),e.$$set=e=>{"isActive"in e&&r(12,p=e.isActive),"stores"in e&&r(13,$=e.stores),"view"in e&&r(14,m=e.view),"props"in e&&r(15,f=e.props),"component"in e&&r(0,g=e.component),"locale"in e&&r(1,y=e.locale),"class"in e&&r(2,x=e.class)},e.$$.update=()=>{135169&e.$$.dirty[0]&&d&&p&&g&&h("measure",d),2101248&e.$$.dirty[0]&&v.set(+!!p,{hard:!1===s}),1310720&e.$$.dirty[0]&&(l<=0&&!S?r(18,S=!0):l>0&&S&&r(18,S=!1)),786432&e.$$.dirty[0]&&L&&h(S?"hide":"show"),1048576&e.$$.dirty[0]&&h("fade",l),1048576&e.$$.dirty[0]&&r(7,n=l),4096&e.$$.dirty[0]&&k.set(p),8192&e.$$.dirty[0]&&r(5,o={...E,...R,stores:$})},r(6,a=!P.includes("external")),[g,y,x,c,u,o,a,n,b,w,M,I,p,$,m,f,v,d,S,L,l,s,function(e){r(3,c=e)},function(e){aE[e?"unshift":"push"](()=>{r(0,g=e)})},function(e){aE[e?"unshift":"push"](()=>{r(4,u=e)})}]}class cf extends a3{constructor(e){super(),a5(this,e,cm,c$,oj,{isActive:12,stores:13,view:14,props:15,component:0,locale:1,class:2,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function cg(e){let t,r,n,o,a,l;let s=e[5].default,d=oZ(s,e,e[4],null);return{c(){t=an("svg"),d&&d.c(),ad(t,"class",e[3]),ad(t,"width",e[0]),ad(t,"height",e[1]),ad(t,"viewBox",r="0 0 "+e[0]+"\n    "+e[1]),ad(t,"xmlns","http://www.w3.org/2000/svg"),ad(t,"aria-hidden","true"),ad(t,"focusable","false"),ad(t,"stroke-linecap","round"),ad(t,"stroke-linejoin","round")},m(r,s){at(r,t,s),d&&d.m(t,null),o=!0,a||(l=o2(n=d9.call(null,t,e[2])),a=!0)},p(e,[a]){d&&d.p&&(!o||16&a)&&oK(d,s,e,e[4],o?oq(s,e[4],a,null):oJ(e[4]),null),(!o||8&a)&&ad(t,"class",e[3]),(!o||1&a)&&ad(t,"width",e[0]),(!o||2&a)&&ad(t,"height",e[1]),(!o||3&a&&r!==(r="0 0 "+e[0]+"\n    "+e[1]))&&ad(t,"viewBox",r),n&&oV(n.update)&&4&a&&n.update.call(null,e[2])},i(e){o||(aU(d,e),o=!0)},o(e){aH(d,e),o=!1},d(e){e&&ai(t),d&&d.d(e),a=!1,l()}}}function cy(e,t,r){let{$$slots:n={},$$scope:o}=t,{width:a=24}=t,{height:l=24}=t,{style:s}=t,{class:d}=t;return e.$$set=e=>{"width"in e&&r(0,a=e.width),"height"in e&&r(1,l=e.height),"style"in e&&r(2,s=e.style),"class"in e&&r(3,d=e.class),"$$scope"in e&&r(4,o=e.$$scope)},[a,l,s,d,o,n]}class cx extends a3{constructor(e){super(),a5(this,e,cy,cg,oj,{width:0,height:1,style:2,class:3})}}var cb=(e,t)=>t===e.target||t.contains(e.target),cv=e=>e.map(e=>"CMD"===e?iU()?"⌘":"Ctrl":e).join("+"),cw=(e,t,r)=>{let n=P(t)?t:e;return r?`${n} (${cv(r)})`:n};let{document:cS}=aZ;function ck(e){let t,r,n,o;return{c(){t=aa(),ad(r=ar("button"),"class","PinturaImageButton"),ad(r,"type","button"),ad(r,"title",e[1]),r.disabled=e[2]},m(a,l){at(a,t,l),at(a,r,l),r.innerHTML=e[0],e[11](r),n||(o=[as(cS.body,"load",e[5],!0),as(cS.body,"error",e[6],!0),as(r,"pointerdown",e[4])],n=!0)},p(e,[t]){1&t&&(r.innerHTML=e[0]),2&t&&ad(r,"title",e[1]),4&t&&(r.disabled=e[2])},i:oB,o:oB,d(a){a&&ai(t),a&&ai(r),e[11](null),n=!1,oN(o)}}}function cC(e,t,r){let n,o,{html:a}=t,{title:l}=t,{onclick:s}=t,{disabled:d=!1}=t,{ongrab:c=x}=t,{ondrag:u=x}=t,{ondrop:h=x}=t,p=e=>256>e6(o,eO(e.pageX,e.pageY)),$=e=>{document.documentElement.removeEventListener("pointermove",m),document.documentElement.removeEventListener("pointerup",$);let t=eO(e.pageX,e.pageY);if(32>e6(o,t))return s(e);p(e)||h(e)},m=e=>{p(e)||u(e)},f=e=>n&&n.contains(e)&&"IMG"===e.nodeName;return e.$$set=e=>{"html"in e&&r(0,a=e.html),"title"in e&&r(1,l=e.title),"onclick"in e&&r(7,s=e.onclick),"disabled"in e&&r(2,d=e.disabled),"ongrab"in e&&r(8,c=e.ongrab),"ondrag"in e&&r(9,u=e.ondrag),"ondrop"in e&&r(10,h=e.ondrop)},e.$$.update=()=>{8&e.$$.dirty&&n&&n.querySelector("img")&&r(3,n.dataset.loader=!0,n)},[a,l,d,n,e=>{o=eO(e.pageX,e.pageY),c(e),document.documentElement.addEventListener("pointermove",m),document.documentElement.addEventListener("pointerup",$)},({target:e})=>{f(e)&&r(3,n.dataset.load=!0,n)},({target:e})=>{f(e)&&r(3,n.dataset.error=!0,n)},s,c,u,h,function(e){aE[e?"unshift":"push"](()=>{r(3,n=e)})}]}class cT extends a3{constructor(e){super(),a5(this,e,cC,ck,oj,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function cM(e,t,r){let n=e.slice();return n[13]=t[r],n}function cP(e,t){let r,n,o,a,l,s,d;function c(){return t[9](t[13])}function u(...e){return t[10](t[13],...e)}function h(...e){return t[11](t[13],...e)}function p(...e){return t[12](t[13],...e)}return n=new cT({props:{onclick:c,ongrab:u,ondrag:h,ondrop:p,disabled:t[1]||t[13].disabled,title:t[13].title,html:t[13].thumb}}),{key:e,first:null,c(){r=ar("li"),a1(n.$$.fragment),o=aa(),a$(r,"opacity",t[6]),this.first=r},m(e,c){at(e,r,c),a2(n,r,null),o9(r,o),l=!0,s||(d=o2(a=t[8].call(null,r,t[13])),s=!0)},p(e,o){t=e;let l={};5&o&&(l.onclick=c),9&o&&(l.ongrab=u),17&o&&(l.ondrag=h),33&o&&(l.ondrop=p),3&o&&(l.disabled=t[1]||t[13].disabled),1&o&&(l.title=t[13].title),1&o&&(l.html=t[13].thumb),n.$set(l),a&&oV(a.update)&&1&o&&a.update.call(null,t[13]),64&o&&a$(r,"opacity",t[6])},i(e){l||(aU(n.$$.fragment,e),l=!0)},o(e){aH(n.$$.fragment,e),l=!1},d(e){e&&ai(r),a4(n),s=!1,d()}}}function cE(e){let t,r;let n=[],o=new Map,a=e[0],l=e=>e[13].id;for(let t=0;t<a.length;t+=1){let r=cM(e,a,t),s=l(r);o.set(s,n[t]=cP(s,r))}return{c(){t=ar("ul");for(let e=0;e<n.length;e+=1)n[e].c();ad(t,"class","PinturaImageButtonList")},m(e,o){at(e,t,o);for(let e=0;e<n.length;e+=1)n[e].m(t,null);r=!0},p(e,[r]){127&r&&(a=e[0],aV(),n=aK(n,r,l,1,e,a,o,t,aq,cP,null,cM),aj())},i(e){if(!r){for(let e=0;e<a.length;e+=1)aU(n[e]);r=!0}},o(e){for(let e=0;e<n.length;e+=1)aH(n[e]);r=!1},d(e){e&&ai(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function cR(e,t,r){let n;let{items:o}=t,{disabled:a}=t,{onclickitem:l}=t,{ongrabitem:s}=t,{ondragitem:d}=t,{ondropitem:c}=t,u=dk(0,{stiffness:.25,damping:.9});return oX(e,u,e=>r(6,n=e)),av(()=>u.set(1)),e.$$set=e=>{"items"in e&&r(0,o=e.items),"disabled"in e&&r(1,a=e.disabled),"onclickitem"in e&&r(2,l=e.onclickitem),"ongrabitem"in e&&r(3,s=e.ongrabitem),"ondragitem"in e&&r(4,d=e.ondragitem),"ondropitem"in e&&r(5,c=e.ondropitem)},[o,a,l,s,d,c,n,u,(e,t)=>t.mount&&t.mount(e.firstChild,t),e=>l(e.id),(e,t)=>s&&s(e.id,t),(e,t)=>d&&d(e.id,t),(e,t)=>c&&c(e.id,t)]}class cI extends a3{constructor(e){super(),a5(this,e,cR,cE,oj,{items:0,disabled:1,onclickitem:2,ongrabitem:3,ondragitem:4,ondropitem:5})}}var cA=()=>k()&&window.devicePixelRatio||1;let cL=null;var cF=e=>(null===cL&&(cL=1===cA()?Math.round:e=>e),cL(e)),cz=(e,t={})=>{if(e){if(t.preventScroll&&iw()){let t=document.body.scrollTop;e.focus(),document.body.scrollTop=t;return}e.focus(t)}},cB=e=>/textarea/i.test(e.nodeName),cO=e=>/date|email|number|search|text|url/.test(e.type),cD=e=>cB(e)||cO(e)||e.isContentEditable;let c_=e=>({}),cW=e=>({}),cN=e=>({}),cV=e=>({});function cj(e){let t,r;let n=[e[7]],o={$$slots:{default:[cH]},$$scope:{ctx:e}};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return t=new h3({props:o}),e[53](t),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=128&r[0]?aJ(n,[aQ(e[7])]):{};0x4000000&r[1]&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(r){e[53](null),a4(t,r)}}}function cU(e){let t,r;let n=[e[7]],o={};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return t=new h3({props:o}),e[52](t),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=128&r[0]?aJ(n,[aQ(e[7])]):{};t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(r){e[52](null),a4(t,r)}}}function cH(e){let t;let r=e[51].label,n=oZ(r,e,e[57],cV);return{c(){n&&n.c()},m(e,r){n&&n.m(e,r),t=!0},p(e,o){n&&n.p&&(!t||0x4000000&o[1])&&oK(n,r,e,e[57],t?oq(r,e[57],o,cN):oJ(e[57]),cV)},i(e){t||(aU(n,e),t=!0)},o(e){aH(n,e),t=!1},d(e){n&&n.d(e)}}}function cG(e){let t,r,n,o,a,l,s;let d=e[51].details,c=oZ(d,e,e[57],cW);return{c(){t=ar("div"),c&&c.c(),r=aa(),ad(n=ar("span"),"class","PinturaPanelTip"),ad(n,"data-top",e[10]),a$(n,"opacity",e[14]),a$(n,"transform",e[13]),a$(n,"top",e[12]),a$(n,"left",e[11]),ad(t,"class",o=d0(["PinturaPanel","pintura-editor-panel",e[2]])),ad(t,"tabindex","-1"),a$(t,"opacity",e[18]),a$(t,"pointer-events",e[17]),a$(t,"transform",e[16]),a$(t,"max-height",e[15])},m(o,d){at(o,t,d),c&&c.m(t,null),o9(t,r),o9(t,n),e[54](t),a=!0,l||(s=[as(t,"close",e[55]),as(t,"keydown",e[25]),as(t,"measure",e[56]),o2(dO.call(null,t))],l=!0)},p(e,r){c&&c.p&&(!a||0x4000000&r[1])&&oK(c,d,e,e[57],a?oq(d,e[57],r,c_):oJ(e[57]),cW),(!a||1024&r[0])&&ad(n,"data-top",e[10]),16384&r[0]&&a$(n,"opacity",e[14]),8192&r[0]&&a$(n,"transform",e[13]),4096&r[0]&&a$(n,"top",e[12]),2048&r[0]&&a$(n,"left",e[11]),(!a||4&r[0]&&o!==(o=d0(["PinturaPanel","pintura-editor-panel",e[2]])))&&ad(t,"class",o),262144&r[0]&&a$(t,"opacity",e[18]),131072&r[0]&&a$(t,"pointer-events",e[17]),65536&r[0]&&a$(t,"transform",e[16]),32768&r[0]&&a$(t,"max-height",e[15])},i(e){a||(aU(c,e),a=!0)},o(e){aH(c,e),a=!1},d(r){r&&ai(t),c&&c.d(r),e[54](null),l=!1,oN(s)}}}function cX(e){var t;let r,n,o,a,l,s,d,c,u;let h=[cU,cj],p=[];function $(e,t){return+!e[1]}o=p[n=+!e[1]]=h[n](e);let m=e[6]&&cG(e);return{c(){r=aa(),o.c(),a=aa(),m&&m.c(),l=aa(),s=al()},m(t,o){at(t,r,o),p[n].m(t,o),at(t,a,o),m&&m.m(t,o),at(t,l,o),at(t,s,o),d=!0,c||(u=[as(document.body,"pointerdown",function(){oV(e[9])&&e[9].apply(this,arguments)}),as(document.body,"pointerup",function(){oV(e[8])&&e[8].apply(this,arguments)})],c=!0)},p(t,r){var s;let d=n;(n=+!(e=t)[1])===d?p[n].p(e,r):(aV(),aH(p[d],1,1,()=>{p[d]=null}),aj(),(o=p[n])?o.p(e,r):(o=p[n]=h[n](e)).c(),aU(o,1),o.m(a.parentNode,a)),e[6]?m?(m.p(e,r),64&r[0]&&aU(m,1)):((m=cG(e)).c(),aU(m,1),m.m(l.parentNode,l)):m&&(aV(),aH(m,1,1,()=>{m=null}),aj())},i(e){d||(aU(o),aU(m),aU(!1),d=!0)},o(e){aH(o),aH(m),aH(!1),d=!1},d(e){e&&ai(r),p[n].d(e),e&&ai(a),m&&m.d(e),e&&ai(l),e&&ai(s),c=!1,oN(u)}}}function cZ(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,b,v,w,S,k,C,T,M,P,E,R,I,A,L,F,z;let{$$slots:B={},$$scope:O}=t,{buttonClass:D}=t,{buttonLabel:_}=t,{buttonLabelClass:W}=t,{buttonHideLabel:N}=t,{buttonIcon:V}=t,{buttonTitle:j}=t,{panelClass:U}=t,{isActive:H=!1}=t,{onshow:G=({panel:e})=>cz(e,{preventScroll:!0})}=t,{onhide:X=x}=t,Z=aT("isAnimated");oX(e,Z,e=>r(50,R=e));let Y=aT("rootPortal");oX(e,Y,e=>r(45,C=e));let q=aT("rootRect");oX(e,q,e=>r(48,P=e));let K=()=>r(33,L=n&&n.getBoundingClientRect()),J=eB(),Q=dk(0);oX(e,Q,e=>r(47,M=e));let ee=eB(),et=a7({x:0,y:0});oX(e,et,e=>r(46,T=e));let ei=dk(-5,{stiffness:.1,damping:.35,precision:.001});oX(e,ei,e=>r(49,E=e));let er=!0,en=e=>cb(e,C)||A.isEventTarget(e),eo=!1,ea=e=>{cD(e.target)||(H||K(),r(38,z=e),r(0,H=!H))},el=e=>{/down/i.test(e.key)&&(r(0,H=!0),r(38,z=e))};return aS(()=>{if(!C||!F)return;let e=F;(aF(),aA).then(()=>{e.parentNode&&e.remove()})}),e.$$set=e=>{"buttonClass"in e&&r(26,D=e.buttonClass),"buttonLabel"in e&&r(1,_=e.buttonLabel),"buttonLabelClass"in e&&r(27,W=e.buttonLabelClass),"buttonHideLabel"in e&&r(28,N=e.buttonHideLabel),"buttonIcon"in e&&r(29,V=e.buttonIcon),"buttonTitle"in e&&r(30,j=e.buttonTitle),"panelClass"in e&&r(2,U=e.panelClass),"isActive"in e&&r(0,H=e.isActive),"onshow"in e&&r(31,G=e.onshow),"onhide"in e&&r(32,X=e.onhide),"$$scope"in e&&r(57,O=e.$$scope)},e.$$.update=()=>{if(16&e.$$.dirty[0]&&(n=A&&A.getElement()),1&e.$$.dirty[0]|64&e.$$.dirty[1]&&r(8,S=H?e=>{eo&&(r(37,eo=!1),en(e)||r(0,H=!1))}:void 0),1&e.$$.dirty[0]|524288&e.$$.dirty[1]&&Q.set(+!!H,{hard:!1===R}),1&e.$$.dirty[0]|524288&e.$$.dirty[1]&&ei.set(H?0:-5,{hard:!1===R}),262144&e.$$.dirty[1]&&r(42,o=1- -(E/5)),1&e.$$.dirty[0]|131072&e.$$.dirty[1]&&P&&H&&K(),9&e.$$.dirty[0]|131076&e.$$.dirty[1]&&P&&I&&L&&H){r(36,er=!0);let e=L.x-P.x+.5*L.width-.5*I.width,t=L.y-P.y+L.height,n=P.width-12,o=P.height-12,a=e,l=t,s=a+I.width,d=l+I.height;(a<12&&(r(35,ee.x=a-12,ee),e=12),s>n&&(r(35,ee.x=s-n,ee),e=n-I.width),d>o)?(r(34,J.y=-1,J),12<t-I.height-L.height?(r(35,ee.y=0,ee),t-=I.height+L.height):(r(35,ee.y=t-(d-o),ee),t-=d-o-12,r(36,er=!1))):r(34,J.y=1,J),o1(et,T=eJ(eO(e,t),cF),T)}65536&e.$$.dirty[1]&&r(6,a=M>0),294920&e.$$.dirty[1]&&r(44,l=`translateX(${Math.round(T.x)+12*J.x}px) translateY(${Math.round(T.y)+12*J.y+J.y*E}px)`),131072&e.$$.dirty[1]&&r(43,s=`--panel-max-height:${P.height-24}px`),65536&e.$$.dirty[1]&&r(18,d=M),65536&e.$$.dirty[1]&&r(17,c=M<1?"none":"all"),8192&e.$$.dirty[1]&&r(16,u=l),4096&e.$$.dirty[1]&&r(15,h=s),2048&e.$$.dirty[1]&&r(40,p=.5+.5*o),2048&e.$$.dirty[1]&&r(41,$=o),8&e.$$.dirty[0]|32768&e.$$.dirty[1]&&r(39,m=I&&T),1312&e.$$.dirty[1]&&r(14,f=m&&er?$:0),768&e.$$.dirty[1]&&r(13,g=m?`scaleX(${p})rotate(45deg)`:"none"),8&e.$$.dirty[0]|280&e.$$.dirty[1]&&r(12,y=m?`${J.y<0?ee.y+I.height:0}px`:"0"),8&e.$$.dirty[0]|272&e.$$.dirty[1]&&r(11,b=m?`${ee.x+.5*I.width}px`:"0"),8&e.$$.dirty[1]&&r(10,v=J.y>=0),1&e.$$.dirty[0]&&r(9,w=H?e=>{en(e)||r(37,eo=!0)}:void 0),96&e.$$.dirty[0]|16384&e.$$.dirty[1]&&a&&C&&F&&F.parentNode!==C&&C.append(F),1&e.$$.dirty[0]&&!H&&r(38,z=void 0),97&e.$$.dirty[0]|129&e.$$.dirty[1]&&H&&a&&F&&G({e:z,panel:F}),65&e.$$.dirty[0]|2&e.$$.dirty[1]&&a&&!H&&X(),0x7c000002&e.$$.dirty[0]&&r(7,k={label:_,icon:V,class:d0(["PinturaPanelButton",D]),onkeydown:el,onclick:ea,hideLabel:N,labelClass:W,title:j})},[H,_,U,I,A,F,a,k,S,w,v,b,y,g,f,h,u,c,d,Z,Y,q,Q,et,ei,e=>{/esc/i.test(e.key)&&(r(0,H=!1),n.focus())},D,W,N,V,j,G,X,L,J,ee,er,eo,z,m,p,$,o,s,l,C,T,M,P,E,R,B,function(e){aE[e?"unshift":"push"](()=>{r(4,A=e)})},function(e){aE[e?"unshift":"push"](()=>{r(4,A=e)})},function(e){aE[e?"unshift":"push"](()=>{r(5,F=e)})},e=>{e.stopPropagation(),r(0,H=!1)},e=>r(3,I=tn(e.detail)),O]}class cY extends a3{constructor(e){super(),a5(this,e,cZ,cX,oj,{buttonClass:26,buttonLabel:1,buttonLabelClass:27,buttonHideLabel:28,buttonIcon:29,buttonTitle:30,panelClass:2,isActive:0,onshow:31,onhide:32},null,[-1,-1,-1])}}var cq={Up:38,Down:40,Left:37,Right:39};function cK(e){let t,r,n,o,a,l,s,d;let c=e[15].default,u=oZ(c,e,e[14],null);return{c(){t=ar("li"),r=ar("input"),n=aa(),o=ar("label"),u&&u.c(),ad(r,"type","radio"),ad(r,"class","implicit"),ad(r,"id",e[7]),ad(r,"name",e[0]),r.value=e[3],r.disabled=e[6],r.hidden=e[5],r.checked=e[4],ad(o,"for",e[7]),ad(o,"title",e[2]),ad(t,"class",a=d0(["PinturaRadioGroupOption",e[1]])),ad(t,"data-hidden",e[5]),ad(t,"data-disabled",e[6]),ad(t,"data-selected",e[4])},m(a,c){if(at(a,t,c),o9(t,r),o9(t,n),o9(t,o),u&&u.m(o,null),l=!0,!s){var h;d=[as(r,"change",(h=e[16],function(e){return e.stopPropagation(),h.call(this,e)})),as(r,"keydown",e[9]),as(r,"click",e[10])],s=!0}},p(e,[n]){(!l||128&n)&&ad(r,"id",e[7]),(!l||1&n)&&ad(r,"name",e[0]),(!l||8&n)&&(r.value=e[3]),(!l||64&n)&&(r.disabled=e[6]),(!l||32&n)&&(r.hidden=e[5]),(!l||16&n)&&(r.checked=e[4]),u&&u.p&&(!l||16384&n)&&oK(u,c,e,e[14],l?oq(c,e[14],n,null):oJ(e[14]),null),(!l||128&n)&&ad(o,"for",e[7]),(!l||4&n)&&ad(o,"title",e[2]),(!l||2&n&&a!==(a=d0(["PinturaRadioGroupOption",e[1]])))&&ad(t,"class",a),(!l||32&n)&&ad(t,"data-hidden",e[5]),(!l||64&n)&&ad(t,"data-disabled",e[6]),(!l||16&n)&&ad(t,"data-selected",e[4])},i(e){l||(aU(u,e),l=!0)},o(e){aH(u,e),l=!1},d(e){e&&ai(t),u&&u.d(e),s=!1,oN(d)}}}function cJ(e,t,r){let n,o;let{$$slots:a={},$$scope:l}=t,{name:s}=t,{class:d}=t,{label:c}=t,{id:u}=t,{value:h}=t,{checked:p}=t,{onkeydown:$}=t,{onclick:m}=t,{hidden:f=!1}=t,{disabled:g=!1}=t,y=Object.values(cq),x=aT("keysPressed");return oX(e,x,e=>r(17,o=e)),e.$$set=e=>{"name"in e&&r(0,s=e.name),"class"in e&&r(1,d=e.class),"label"in e&&r(2,c=e.label),"id"in e&&r(11,u=e.id),"value"in e&&r(3,h=e.value),"checked"in e&&r(4,p=e.checked),"onkeydown"in e&&r(12,$=e.onkeydown),"onclick"in e&&r(13,m=e.onclick),"hidden"in e&&r(5,f=e.hidden),"disabled"in e&&r(6,g=e.disabled),"$$scope"in e&&r(14,l=e.$$scope)},e.$$.update=()=>{2049&e.$$.dirty&&r(7,n=`${s}-${u}`)},[s,d,c,h,p,f,g,n,x,e=>{$(e)},e=>{o.some(e=>y.includes(e))||m(e)},u,$,m,l,a,function(t){aM.call(this,e,t)}]}class cQ extends a3{constructor(e){super(),a5(this,e,cJ,cK,oj,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var c0=(e=[])=>e.reduce((e,t)=>(ro(t)?ro(t[1]):!!t.options)?e.concat(ro(t)?t[1]:t.options):(e.push(t),e),[]);let c1=(e,t,r)=>{let n;return ro(e)?n={id:t,value:e[0],label:e[1],...e[2]||{}}:(n=e).id=null!=n.id?n.id:t,r?r(n):n};var c2=(e=[],t)=>{let r=0;return e.map(e=>(r++,ro(e))?ro(e[1])?{id:r,label:e[0],options:e[1].map(e=>c1(e,++r,t))}:c1(e,r,t):e.options?{id:e.id||r,label:e.label,options:e.options.map(e=>c1(e,++r,t))}:c1(e,r,t))},c4=(e,...t)=>e&&e(...t),c5=(e,t,r)=>U(e)?e(t,r):e;let c3=(e,t)=>e.map(([e,r,n])=>{if(ro(r))return[c5(e,t),c3(r,t)];{let o=[e,c5(r,t)];if(n){let e={...n};n.icon&&(e.icon=c5(n.icon,t)),o.push(e)}return o}});var c6=(e,t)=>c3(e,t),c8=e=>/enter| /i.test(e),c7=(e,t)=>Array.isArray(e)&&Array.isArray(t)?lM(e,t):e===t;function c9(e,t,r){let n=e.slice();return n[27]=t[r],n}let ue=e=>({option:1024&e[0]}),ut=e=>({option:e[27]});function ui(e,t,r){let n=e.slice();return n[27]=t[r],n}let ur=e=>({option:1024&e[0]}),un=e=>({option:e[27]}),uo=e=>({option:1024&e[0]}),ua=e=>({option:e[27]});function ul(e){let t,r,n,o,a;let l=[],s=new Map,d=e[1]&&us(e),c=e[10],u=e=>e[27].id;for(let t=0;t<c.length;t+=1){let r=c9(e,c,t),n=u(r);s.set(n,l[t]=ub(n,r))}return{c(){t=ar("fieldset"),d&&d.c(),r=aa(),n=ar("ul");for(let e=0;e<l.length;e+=1)l[e].c();ad(n,"class","PinturaRadioGroupOptions"),ad(t,"class",o=d0(["PinturaRadioGroup",e[3]])),ad(t,"data-layout",e[5]),ad(t,"title",e[7])},m(e,o){at(e,t,o),d&&d.m(t,null),o9(t,r),o9(t,n);for(let e=0;e<l.length;e+=1)l[e].m(n,null);a=!0},p(e,h){e[1]?d?d.p(e,h):((d=us(e)).c(),d.m(t,r)):d&&(d.d(1),d=null),8419153&h[0]&&(c=e[10],aV(),l=aK(l,h,u,1,e,c,s,n,aq,ub,null,c9),aj()),(!a||8&h[0]&&o!==(o=d0(["PinturaRadioGroup",e[3]])))&&ad(t,"class",o),(!a||32&h[0])&&ad(t,"data-layout",e[5]),(!a||128&h[0])&&ad(t,"title",e[7])},i(e){if(!a){for(let e=0;e<c.length;e+=1)aU(l[e]);a=!0}},o(e){for(let e=0;e<l.length;e+=1)aH(l[e]);a=!1},d(e){e&&ai(t),d&&d.d();for(let e=0;e<l.length;e+=1)l[e].d()}}}function us(e){let t,r,n;return{c(){t=ar("legend"),r=ao(e[1]),ad(t,"class",n=e[2]&&"implicit")},m(e,n){at(e,t,n),o9(t,r)},p(e,o){2&o[0]&&ah(r,e[1]),4&o[0]&&n!==(n=e[2]&&"implicit")&&ad(t,"class",n)},d(e){e&&ai(t)}}}function ud(e){let t,r;return t=new cQ({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[u$]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16&r[0]&&(n.name=e[4]),1024&r[0]&&(n.label=e[27].label),1024&r[0]&&(n.id=e[27].id),1024&r[0]&&(n.value=e[27].value),1024&r[0]&&(n.disabled=e[27].disabled),1024&r[0]&&(n.hidden=e[27].hidden),256&r[0]&&(n.class=e[8]),1025&r[0]&&(n.checked=e[12](e[27])===e[0]),1024&r[0]&&(n.onkeydown=e[13](e[27])),1024&r[0]&&(n.onclick=e[14](e[27])),8389696&r[0]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function uc(e){let t,r,n,o,a,l,s,d,c;let u=[],h=new Map,p=e[22].group,$=oZ(p,e,e[23],ua),m=$||(c=e[27].label+"",{c(){s=ar("span"),d=ao(c),ad(s,"class","PinturaRadioGroupOptionGroupLabel")},m(e,t){at(e,s,t),o9(s,d)},p(e,t){1024&t[0]&&c!==(c=e[27].label+"")&&ah(d,c)},d(e){e&&ai(s)}}),f=e[27].options,g=e=>e[27].id;for(let t=0;t<f.length;t+=1){let r=ui(e,f,t),n=g(r);h.set(n,u[t]=ux(n,r))}return{c(){t=ar("li"),m&&m.c(),r=aa(),n=ar("ul");for(let e=0;e<u.length;e+=1)u[e].c();o=aa(),ad(n,"class","PinturaRadioGroupOptions"),ad(t,"class",a=d0(["PinturaRadioGroupOptionGroup",e[9]]))},m(e,a){at(e,t,a),m&&m.m(t,null),o9(t,r),o9(t,n);for(let e=0;e<u.length;e+=1)u[e].m(n,null);o9(t,o),l=!0},p(e,r){$?$.p&&(!l||8389632&r[0])&&oK($,p,e,e[23],l?oq(p,e[23],r,uo):oJ(e[23]),ua):m&&m.p&&(!l||1024&r[0])&&m.p(e,l?r:[-1,-1]),8418641&r[0]&&(f=e[27].options,aV(),u=aK(u,r,g,1,e,f,h,n,aq,ux,null,ui),aj()),(!l||512&r[0]&&a!==(a=d0(["PinturaRadioGroupOptionGroup",e[9]])))&&ad(t,"class",a)},i(e){if(!l){aU(m,e);for(let e=0;e<f.length;e+=1)aU(u[e]);l=!0}},o(e){aH(m,e);for(let e=0;e<u.length;e+=1)aH(u[e]);l=!1},d(e){e&&ai(t),m&&m.d(e);for(let e=0;e<u.length;e+=1)u[e].d()}}}function uu(e){let t,r;return t=new cx({props:{$$slots:{default:[uh]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};8389632&r[0]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function uh(e){let t;let r=e[27].icon+"";return{c(){t=an("g")},m(e,n){at(e,t,n),t.innerHTML=r},p(e,n){1024&n[0]&&r!==(r=e[27].icon+"")&&(t.innerHTML=r)},d(e){e&&ai(t)}}}function up(e){let t,r;let n=e[27].label+"";return{c(){t=ar("span"),r=ao(n),ad(t,"class",e[6])},m(e,n){at(e,t,n),o9(t,r)},p(e,o){1024&o[0]&&n!==(n=e[27].label+"")&&ah(r,n),64&o[0]&&ad(t,"class",e[6])},d(e){e&&ai(t)}}}function u$(e){let t,r,n,o,a,l;let s=e[22].option,d=oZ(s,e,e[23],ut),c=d||(a=e[27].icon&&uu(e),l=!e[27].hideLabel&&up(e),{c(){a&&a.c(),r=aa(),l&&l.c(),n=aa()},m(e,t){a&&a.m(e,t),at(e,r,t),l&&l.m(e,t),at(e,n,t),o=!0},p(e,t){e[27].icon?a?(a.p(e,t),1024&t[0]&&aU(a,1)):((a=uu(e)).c(),aU(a,1),a.m(r.parentNode,r)):a&&(aV(),aH(a,1,1,()=>{a=null}),aj()),e[27].hideLabel?l&&(l.d(1),l=null):l?l.p(e,t):((l=up(e)).c(),l.m(n.parentNode,n))},i(e){o||(aU(a),o=!0)},o(e){aH(a),o=!1},d(e){a&&a.d(e),e&&ai(r),l&&l.d(e),e&&ai(n)}});return{c(){c&&c.c()},m(e,r){c&&c.m(e,r),t=!0},p(e,r){d?d.p&&(!t||8389632&r[0])&&oK(d,s,e,e[23],t?oq(s,e[23],r,ue):oJ(e[23]),ut):c&&c.p&&(!t||1088&r[0])&&c.p(e,t?r:[-1,-1])},i(e){t||(aU(c,e),t=!0)},o(e){aH(c,e),t=!1},d(e){c&&c.d(e)}}}function um(e){let t,r;return t=new cx({props:{$$slots:{default:[uf]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};8389632&r[0]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function uf(e){let t;let r=e[27].icon+"";return{c(){t=an("g")},m(e,n){at(e,t,n),t.innerHTML=r},p(e,n){1024&n[0]&&r!==(r=e[27].icon+"")&&(t.innerHTML=r)},d(e){e&&ai(t)}}}function ug(e){let t,r;let n=e[27].label+"";return{c(){t=ar("span"),r=ao(n),ad(t,"class",e[6])},m(e,n){at(e,t,n),o9(t,r)},p(e,o){1024&o[0]&&n!==(n=e[27].label+"")&&ah(r,n),64&o[0]&&ad(t,"class",e[6])},d(e){e&&ai(t)}}}function uy(e){let t,r,n,o,a,l;let s=e[22].option,d=oZ(s,e,e[23],un),c=d||(a=e[27].icon&&um(e),l=!e[27].hideLabel&&ug(e),{c(){a&&a.c(),r=aa(),l&&l.c(),n=aa()},m(e,t){a&&a.m(e,t),at(e,r,t),l&&l.m(e,t),at(e,n,t),o=!0},p(e,t){e[27].icon?a?(a.p(e,t),1024&t[0]&&aU(a,1)):((a=um(e)).c(),aU(a,1),a.m(r.parentNode,r)):a&&(aV(),aH(a,1,1,()=>{a=null}),aj()),e[27].hideLabel?l&&(l.d(1),l=null):l?l.p(e,t):((l=ug(e)).c(),l.m(n.parentNode,n))},i(e){o||(aU(a),o=!0)},o(e){aH(a),o=!1},d(e){a&&a.d(e),e&&ai(r),l&&l.d(e),e&&ai(n)}});return{c(){c&&c.c()},m(e,r){c&&c.m(e,r),t=!0},p(e,r){d?d.p&&(!t||8389632&r[0])&&oK(d,s,e,e[23],t?oq(s,e[23],r,ur):oJ(e[23]),un):c&&c.p&&(!t||1088&r[0])&&c.p(e,t?r:[-1,-1])},i(e){t||(aU(c,e),t=!0)},o(e){aH(c,e),t=!1},d(e){c&&c.d(e)}}}function ux(e,t){let r,n,o;return n=new cQ({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[uy]},$$scope:{ctx:t}}}),{key:e,first:null,c(){r=al(),a1(n.$$.fragment),this.first=r},m(e,t){at(e,r,t),a2(n,e,t),o=!0},p(e,r){t=e;let o={};16&r[0]&&(o.name=t[4]),1024&r[0]&&(o.label=t[27].label),1024&r[0]&&(o.id=t[27].id),1024&r[0]&&(o.value=t[27].value),1024&r[0]&&(o.disabled=t[27].disabled),1024&r[0]&&(o.hidden=t[27].hidden),256&r[0]&&(o.class=t[8]),1025&r[0]&&(o.checked=t[12](t[27])===t[0]),1024&r[0]&&(o.onkeydown=t[13](t[27])),1024&r[0]&&(o.onclick=t[14](t[27])),8389696&r[0]&&(o.$$scope={dirty:r,ctx:t}),n.$set(o)},i(e){o||(aU(n.$$.fragment,e),o=!0)},o(e){aH(n.$$.fragment,e),o=!1},d(e){e&&ai(r),a4(n,e)}}}function ub(e,t){let r,n,o,a,l;let s=[uc,ud],d=[];function c(e,t){return+!e[27].options}return o=d[n=c(t)]=s[n](t),{key:e,first:null,c(){r=al(),o.c(),a=al(),this.first=r},m(e,t){at(e,r,t),d[n].m(e,t),at(e,a,t),l=!0},p(e,r){let l=n;(n=c(t=e))===l?d[n].p(t,r):(aV(),aH(d[l],1,1,()=>{d[l]=null}),aj(),(o=d[n])?o.p(t,r):(o=d[n]=s[n](t)).c(),aU(o,1),o.m(a.parentNode,a))},i(e){l||(aU(o),l=!0)},o(e){aH(o),l=!1},d(e){e&&ai(r),d[n].d(e),e&&ai(a)}}}function uv(e){let t,r,n;let o=e[11].length&&ul(e);return{c(){o&&o.c(),t=aa(),r=al()},m(e,a){o&&o.m(e,a),at(e,t,a),at(e,r,a),n=!0},p(e,r){e[11].length?o?(o.p(e,r),2048&r[0]&&aU(o,1)):((o=ul(e)).c(),aU(o,1),o.m(t.parentNode,t)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj())},i(e){n||(aU(o),aU(!1),n=!0)},o(e){aH(o),aH(!1),n=!1},d(e){o&&o.d(e),e&&ai(t),e&&ai(r)}}}function uw(e,t,r){let n,o,a;let{$$slots:l={},$$scope:s}=t,d=ak(),{label:c}=t,{hideLabel:u=!0}=t,{class:h}=t,{name:p=`radio-group-${K()}`}=t,{selectedIndex:$=-1}=t,{options:m=[]}=t,{onchange:f}=t,{layout:g}=t,{optionMapper:y}=t,{optionFilter:x}=t,{value:b}=t,{optionLabelClass:v}=t,{title:w}=t,{locale:S}=t,{optionClass:k}=t,{optionGroupClass:C}=t,T=e=>e.findIndex(e=>void 0===e[0]),M=e=>a.findIndex(t=>t.id===e.id),P=(e,t)=>{r(0,$=M(e));let n={index:$,...e};c4(f,n,t),d("change",n)};return e.$$set=e=>{"label"in e&&r(1,c=e.label),"hideLabel"in e&&r(2,u=e.hideLabel),"class"in e&&r(3,h=e.class),"name"in e&&r(4,p=e.name),"selectedIndex"in e&&r(0,$=e.selectedIndex),"options"in e&&r(15,m=e.options),"onchange"in e&&r(16,f=e.onchange),"layout"in e&&r(5,g=e.layout),"optionMapper"in e&&r(17,y=e.optionMapper),"optionFilter"in e&&r(18,x=e.optionFilter),"value"in e&&r(19,b=e.value),"optionLabelClass"in e&&r(6,v=e.optionLabelClass),"title"in e&&r(7,w=e.title),"locale"in e&&r(20,S=e.locale),"optionClass"in e&&r(8,k=e.optionClass),"optionGroupClass"in e&&r(9,C=e.optionGroupClass),"$$scope"in e&&r(23,s=e.$$scope)},e.$$.update=()=>{1343488&e.$$.dirty[0]&&r(11,n=c6(x?m.filter(x):m,S)),133120&e.$$.dirty[0]&&r(10,o=c2(n,y)),1024&e.$$.dirty[0]&&r(21,a=c0(o)),2654209&e.$$.dirty[0]&&$<0&&(r(0,$=a.findIndex(e=>c7(e.value,b))),$<0&&r(0,$=T(m)))},[$,c,u,h,p,g,v,w,k,C,o,n,M,e=>t=>{c8(t.key)&&P(e,t)},e=>t=>{P(e,t)},m,f,y,x,b,S,a,l,s]}class uS extends a3{constructor(e){super(),a5(this,e,uw,uv,oj,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function uk(e){let t,r,n,o,a,l,s,d,c,u;return{c(){t=ar("div"),r=ar("button"),n=ao("▲"),a=aa(),l=ar("button"),s=ao("▼"),ad(r,"type","button"),ad(r,"tabindex","-1"),ad(r,"aria-label",o=`increase ${e[7]}`),ad(l,"type","button"),ad(l,"tabindex","-1"),ad(l,"aria-label",d=`decrease ${e[7]}`),ad(t,"class","PinturaInputSpinners")},m(o,d){at(o,t,d),o9(t,r),o9(r,n),o9(t,a),o9(t,l),o9(l,s),c||(u=[as(r,"click",e[18]),as(l,"click",e[19])],c=!0)},p(e,t){128&t[0]&&o!==(o=`increase ${e[7]}`)&&ad(r,"aria-label",o),128&t[0]&&d!==(d=`decrease ${e[7]}`)&&ad(l,"aria-label",d)},d(e){e&&ai(t),c=!1,oN(u)}}}function uC(e){let t,r,n,o,a,l;let s=e[14]&&e[9]&&uk(e);return{c(){t=ar("div"),r=ar("input"),o=aa(),s&&s.c(),ad(r,"class","PinturaInputField"),ad(r,"title",e[7]),ad(r,"type",e[1]),ad(r,"min",e[4]),ad(r,"max",e[5]),ad(r,"step",e[6]),ad(r,"inputmode",e[3]),r.value=n=e[12]?e[15]:e[0],ad(r,"placeholder",e[8]),ad(r,"maxlength",e[13]),r.disabled=e[2],ad(r,"spellcheck","false"),ad(r,"autocorrect","off"),ad(r,"autocapitalize","off"),a$(r,"min-width",e[11]?`${e[11]}em`:void 0),ad(t,"class","PinturaInput")},m(n,d){at(n,t,d),o9(t,r),e[30](r),o9(t,o),s&&s.m(t,null),a||(l=[as(r,"input",e[17]),as(r,"blur",function(){oV(e[12]&&e[16])&&(e[12]&&e[16]).apply(this,arguments)}),as(r,"keydown",e[20]),as(r,"keyup",e[21])],a=!0)},p(o,a){e=o,128&a[0]&&ad(r,"title",e[7]),2&a[0]&&ad(r,"type",e[1]),16&a[0]&&ad(r,"min",e[4]),32&a[0]&&ad(r,"max",e[5]),64&a[0]&&ad(r,"step",e[6]),8&a[0]&&ad(r,"inputmode",e[3]),36865&a[0]&&n!==(n=e[12]?e[15]:e[0])&&r.value!==n&&(r.value=n),256&a[0]&&ad(r,"placeholder",e[8]),8192&a[0]&&ad(r,"maxlength",e[13]),4&a[0]&&(r.disabled=e[2]),2048&a[0]&&a$(r,"min-width",e[11]?`${e[11]}em`:void 0),e[14]&&e[9]?s?s.p(e,a):((s=uk(e)).c(),s.m(t,null)):s&&(s.d(1),s=null)},i:oB,o:oB,d(r){r&&ai(t),e[30](null),s&&s.d(),a=!1,oN(l)}}}function uT(e,t,r){let n,o,a,l,s,d,c,u,h;let{value:p}=t,{type:$="text"}=t,{disabled:m=!1}=t,{inputmode:f}=t,{min:g}=t,{max:y}=t,{step:b}=t,{onchange:v=x}=t,{onkeydown:w=x}=t,{onkeyup:S=x}=t,{title:k}=t,{stepMultiplier:C=10}=t,{placeholder:T}=t,{enableSpinButtons:M=!0}=t,{enableStopPropagation:P=!1}=t,E=()=>{let e=u.value;return"number"===$&&(!ri(e="numeric"===f?parseInt(e,10):parseFloat(e))||Number.isNaN(e)?e=g||0:o&&(e=lb(e,g,y))),e},R=p,I=()=>{let e=lb(E()+(h?b*C:b),g,y);e!==p&&(r(27,R=e),r(0,p=e),v(p))},A=()=>{let e=lb(E()-(h?b*C:b),g,y);e!==p&&(r(27,R=e),r(0,p=e),v(p))};return e.$$set=e=>{"value"in e&&r(0,p=e.value),"type"in e&&r(1,$=e.type),"disabled"in e&&r(2,m=e.disabled),"inputmode"in e&&r(3,f=e.inputmode),"min"in e&&r(4,g=e.min),"max"in e&&r(5,y=e.max),"step"in e&&r(6,b=e.step),"onchange"in e&&r(22,v=e.onchange),"onkeydown"in e&&r(23,w=e.onkeydown),"onkeyup"in e&&r(24,S=e.onkeyup),"title"in e&&r(7,k=e.title),"stepMultiplier"in e&&r(25,C=e.stepMultiplier),"placeholder"in e&&r(8,T=e.placeholder),"enableSpinButtons"in e&&r(9,M=e.enableSpinButtons),"enableStopPropagation"in e&&r(26,P=e.enableStopPropagation)},e.$$.update=()=>{2&e.$$.dirty[0]&&r(29,n="number"===$),48&e.$$.dirty[0]&&r(12,o=ri(g)&&ri(y)),64&e.$$.dirty[0]&&r(28,a=ri(b)),0x30001000&e.$$.dirty[0]&&r(14,l=n&&o&&a),0x8000401&e.$$.dirty[0]&&r(15,s=u===document.activeElement?R:p),32&e.$$.dirty[0]&&r(11,d=y?(y+"").length:void 0),2056&e.$$.dirty[0]&&r(13,c="numeric"===f&&d?d:void 0)},[p,$,m,f,g,y,b,k,T,M,u,d,o,c,l,s,()=>{r(27,R=E()),v(p)},()=>{r(27,R=u.value),v(E())},I,A,e=>{if(w(e),!l)return;h=e.shiftKey;let{key:t}=e;P&&e.stopPropagation(),/up|down/i.test(t)&&(/up/i.test(t)&&I(),/down/i.test(t)&&A(),e.preventDefault(),e.stopPropagation())},e=>{if(S(e),!l)return;let{key:t}=e;/up|down/i.test(t)&&(e.preventDefault(),e.stopPropagation())},v,w,S,C,P,R,a,n,function(e){aE[e?"unshift":"push"](()=>{r(10,u=e)})}]}class uM extends a3{constructor(e){super(),a5(this,e,uT,uC,oj,{value:0,type:1,disabled:2,inputmode:3,min:4,max:5,step:6,onchange:22,onkeydown:23,onkeyup:24,title:7,stepMultiplier:25,placeholder:8,enableSpinButtons:9,enableStopPropagation:26},null,[-1,-1])}}let uP=e=>({}),uE=e=>({});function uR(e){let t,r,n,o;let a=(e[2]||e[20])+"",l=e[6]&&uA(e);return{c(){l&&l.c(),t=aa(),ad(r=ar("span"),"class",n=d0(["PinturaButtonLabel",e[3],e[5]&&"implicit"]))},m(e,n){l&&l.m(e,n),at(e,t,n),at(e,r,n),r.innerHTML=a,o=!0},p(e,s){e[6]?l?(l.p(e,s),64&s[0]&&aU(l,1)):((l=uA(e)).c(),aU(l,1),l.m(t.parentNode,t)):l&&(aV(),aH(l,1,1,()=>{l=null}),aj()),(!o||1048580&s[0])&&a!==(a=(e[2]||e[20])+"")&&(r.innerHTML=a),(!o||40&s[0]&&n!==(n=d0(["PinturaButtonLabel",e[3],e[5]&&"implicit"])))&&ad(r,"class",n)},i(e){o||(aU(l),o=!0)},o(e){aH(l),o=!1},d(e){l&&l.d(e),e&&ai(t),e&&ai(r)}}}function uI(e){let t,r;return t=new uM({props:{value:e[10],onchange:e[16],enableStopPropagation:!0,type:"number",inputmode:"numeric",min:e[8].reduce(uj,1/0),max:e[8].reduce(uU,-1/0),enableSpinButtons:!1}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};1024&r[0]&&(n.value=e[10]),65536&r[0]&&(n.onchange=e[16]),256&r[0]&&(n.min=e[8].reduce(uj,1/0)),256&r[0]&&(n.max=e[8].reduce(uU,-1/0)),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function uA(e){let t,r;return t=new cx({props:{class:"PinturaButtonIcon",$$slots:{default:[uL]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};0x20000040&r[0]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function uL(e){let t;return{c(){t=an("g")},m(r,n){at(r,t,n),t.innerHTML=e[6]},p(e,r){64&r[0]&&(t.innerHTML=e[6])},d(e){e&&ai(t)}}}function uF(e){var t;let r,n,o,a,l;let s=[uI,uR],d=[];function c(e,t){return+!e[17]}return o=d[n=+!e[17]]=s[n](e),{c(){r=ar("span"),o.c(),ad(r,"slot","label"),ad(r,"class",a=d0(["PinturaButtonInner",e[17]&&"PinturaComboBox",e[4]]))},m(e,t){at(e,r,t),d[n].m(r,null),l=!0},p(e,t){var c;let u=n;(n=+!e[17])===u?d[n].p(e,t):(aV(),aH(d[u],1,1,()=>{d[u]=null}),aj(),(o=d[n])?o.p(e,t):(o=d[n]=s[n](e)).c(),aU(o,1),o.m(r,null)),(!l||131088&t[0]&&a!==(a=d0(["PinturaButtonInner",e[17]&&"PinturaComboBox",e[4]])))&&ad(r,"class",a)},i(e){l||(aU(o),l=!0)},o(e){aH(o),l=!1},d(e){e&&ai(r),d[n].d()}}}function uz(e){let t,r;let n=e[31].label+"";return{c(){t=ar("span"),r=ao(n),ad(t,"slot","group")},m(e,n){at(e,t,n),o9(t,r)},p(e,t){1&t[1]&&n!==(n=e[31].label+"")&&ah(r,n)},d(e){e&&ai(t)}}}function uB(e){let t,r;return t=new cx({props:{style:U(e[14])?e[14](e[31].value):e[14],$$slots:{default:[uO]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16384&r[0]|1&r[1]&&(n.style=U(e[14])?e[14](e[31].value):e[14]),0x20000000&r[0]|1&r[1]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function uO(e){let t;let r=e[31].icon+"";return{c(){t=an("g")},m(e,n){at(e,t,n),t.innerHTML=r},p(e,n){1&n[1]&&r!==(r=e[31].icon+"")&&(t.innerHTML=r)},d(e){e&&ai(t)}}}function uD(e){let t,r,n,o,a,l,s;let d=e[31].label+"",c=e[31].sublabel&&u_(e);return{c(){t=ar("span"),r=new af(!1),n=aa(),c&&c.c(),r.a=n,ad(t,"class",o=d0(["PinturaDropdownOptionLabel",e[11]]))},m(o,u){at(o,t,u),r.m(d,t),o9(t,n),c&&c.m(t,null),l||(s=o2(a=d9.call(null,t,U(e[15])?e[15](e[31].value):e[15])),l=!0)},p(e,n){1&n[1]&&d!==(d=e[31].label+"")&&r.p(d),e[31].sublabel?c?c.p(e,n):((c=u_(e)).c(),c.m(t,null)):c&&(c.d(1),c=null),2048&n[0]&&o!==(o=d0(["PinturaDropdownOptionLabel",e[11]]))&&ad(t,"class",o),a&&oV(a.update)&&32768&n[0]|1&n[1]&&a.update.call(null,U(e[15])?e[15](e[31].value):e[15])},d(e){e&&ai(t),c&&c.d(),l=!1,s()}}}function u_(e){let t;let r=e[31].sublabel+"";return{c(){ad(t=ar("span"),"class","PinturaDropdownOptionSublabel")},m(e,n){at(e,t,n),t.innerHTML=r},p(e,n){1&n[1]&&r!==(r=e[31].sublabel+"")&&(t.innerHTML=r)},d(e){e&&ai(t)}}}function uW(e){let t,r,n;let o=e[31].icon&&uB(e),a=!e[31].hideLabel&&uD(e);return{c(){t=ar("span"),o&&o.c(),r=aa(),a&&a.c(),ad(t,"slot","option")},m(e,l){at(e,t,l),o&&o.m(t,null),o9(t,r),a&&a.m(t,null),n=!0},p(e,n){e[31].icon?o?(o.p(e,n),1&n[1]&&aU(o,1)):((o=uB(e)).c(),aU(o,1),o.m(t,r)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj()),e[31].hideLabel?a&&(a.d(1),a=null):a?a.p(e,n):((a=uD(e)).c(),a.m(t,null))},i(e){n||(aU(o),n=!0)},o(e){aH(o),n=!1},d(e){e&&ai(t),o&&o.d(),a&&a.d()}}}function uN(e){let t,r,n,o,a,l;let s=e[27].controls,d=oZ(s,e,e[29],uE);return n=new uS({props:{class:"PinturaOptionsList PinturaScrollableContent",name:e[7],value:e[10],selectedIndex:e[9],optionFilter:e[12],optionMapper:e[13],optionLabelClass:d0(["PinturaDropdownOptionLabel",e[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:e[18],onchange:e[21],$$slots:{option:[uW,({option:e})=>({31:e}),({option:e})=>[0,+!!e]],group:[uz,({option:e})=>({31:e}),({option:e})=>[0,+!!e]]},$$scope:{ctx:e}}}),{c(){t=ar("div"),d&&d.c(),r=aa(),a1(n.$$.fragment),ad(t,"slot","details"),ad(t,"class","PinturaOptionsListWrapper")},m(s,c){at(s,t,c),d&&d.m(t,null),o9(t,r),a2(n,t,null),o=!0,a||(l=as(t,"keydown",e[23]),a=!0)},p(e,t){d&&d.p&&(!o||0x20000000&t[0])&&oK(d,s,e,e[29],o?oq(s,e[29],t,uP):oJ(e[29]),uE);let r={};128&t[0]&&(r.name=e[7]),1024&t[0]&&(r.value=e[10]),512&t[0]&&(r.selectedIndex=e[9]),4096&t[0]&&(r.optionFilter=e[12]),8192&t[0]&&(r.optionMapper=e[13]),2048&t[0]&&(r.optionLabelClass=d0(["PinturaDropdownOptionLabel",e[11]])),262144&t[0]&&(r.options=e[18]),0x2000c800&t[0]|1&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){o||(aU(d,e),aU(n.$$.fragment,e),o=!0)},o(e){aH(d,e),aH(n.$$.fragment,e),o=!1},d(e){e&&ai(t),d&&d.d(e),a4(n),a=!1,l()}}}function uV(e){let t,r,n;function o(t){e[28](t)}let a={onshow:e[22],buttonTitle:cw(e[2],e[1]),buttonClass:d0(["PinturaDropdownButton",e[0],e[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[uN],label:[uF]},$$scope:{ctx:e}};return void 0!==e[19]&&(a.isActive=e[19]),t=new cY({props:a}),aE.push(()=>a0(t,"isActive",o)),{c(){a1(t.$$.fragment)},m(e,r){a2(t,e,r),n=!0},p(e,n){let o={};6&n[0]&&(o.buttonTitle=cw(e[2],e[1])),33&n[0]&&(o.buttonClass=d0(["PinturaDropdownButton",e[0],e[5]&&"PinturaDropdownIconOnly"])),0x2017fffc&n[0]&&(o.$$scope={dirty:n,ctx:e}),!r&&524288&n[0]&&(r=!0,o.isActive=e[19],aB(()=>r=!1)),t.$set(o)},i(e){n||(aU(t.$$.fragment,e),n=!0)},o(e){aH(t.$$.fragment,e),n=!1},d(e){a4(t,e)}}}let uj=(e,[t])=>t<e?t:e,uU=(e,[t])=>t>e?t:e;function uH(e,t,r){let n,o,a;let{$$slots:l={},$$scope:s}=t,{class:d}=t,{title:c}=t,{label:u}=t,{labelClass:h}=t,{innerClass:p}=t,{hideLabel:$=!1}=t,{icon:m}=t,{name:f}=t,{options:g=[]}=t,{selectedIndex:y=-1}=t,{value:b}=t,{optionLabelClass:v}=t,{optionFilter:w}=t,{optionMapper:S}=t,{optionIconStyle:k}=t,{optionLabelStyle:C}=t,{locale:T}=t,{onchange:M=x}=t,{onload:P=x}=t,{ondestroy:E=x}=t,{enableInput:R=!1}=t,I=e=>{let t=e.find(e=>void 0===e[0]);if(t)return t[1]};return av(()=>P({options:g})),aS(()=>E({options:g})),e.$$set=e=>{"class"in e&&r(0,d=e.class),"title"in e&&r(1,c=e.title),"label"in e&&r(2,u=e.label),"labelClass"in e&&r(3,h=e.labelClass),"innerClass"in e&&r(4,p=e.innerClass),"hideLabel"in e&&r(5,$=e.hideLabel),"icon"in e&&r(6,m=e.icon),"name"in e&&r(7,f=e.name),"options"in e&&r(8,g=e.options),"selectedIndex"in e&&r(9,y=e.selectedIndex),"value"in e&&r(10,b=e.value),"optionLabelClass"in e&&r(11,v=e.optionLabelClass),"optionFilter"in e&&r(12,w=e.optionFilter),"optionMapper"in e&&r(13,S=e.optionMapper),"optionIconStyle"in e&&r(14,k=e.optionIconStyle),"optionLabelStyle"in e&&r(15,C=e.optionLabelStyle),"locale"in e&&r(24,T=e.locale),"onchange"in e&&r(16,M=e.onchange),"onload"in e&&r(25,P=e.onload),"ondestroy"in e&&r(26,E=e.ondestroy),"enableInput"in e&&r(17,R=e.enableInput),"$$scope"in e&&r(29,s=e.$$scope)},e.$$.update=()=>{0x1000100&e.$$.dirty[0]&&r(18,n=T?c6(g,T):g),263168&e.$$.dirty[0]&&r(20,o=n.reduce((e,t)=>{if(e)return e;let[r,n]=Array.isArray(t)?t:[t,t];if(c7(r,b))return n},void 0)||I(n)||b)},[d,c,u,h,p,$,m,f,g,y,b,v,w,S,k,C,M,R,n,a,o,e=>{r(20,o=e.value),M(e),r(19,a=!1)},({e,panel:t})=>{if(e&&e.key&&/up|down/i.test(e.key))return cz(t.querySelector("input:not([disabled])"));cz(t.querySelector("fieldset"))},e=>{/tab/i.test(e.key)&&e.preventDefault()},T,P,E,l,function(e){r(19,a=e)},s]}class uG extends a3{constructor(e){super(),a5(this,e,uH,uV,oj,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:24,onchange:16,onload:25,ondestroy:26,enableInput:17},null,[-1,-1])}}function uX(e){let t;return{c(){ad(t=ar("div"),"slot","details")},m(r,n){at(r,t,n),e[14](t)},p:oB,d(r){r&&ai(t),e[14](null)}}}function uZ(e){let t,r,n;function o(t){e[15](t)}let a={buttonLabel:e[0],buttonClass:e[1],buttonIcon:e[2],buttonHideLabel:e[3],buttonTitle:e[4],buttonLabelClass:e[5],onshow:e[6],onhide:e[7],$$slots:{details:[uX]},$$scope:{ctx:e}};return void 0!==e[9]&&(a.isActive=e[9]),t=new cY({props:a}),aE.push(()=>a0(t,"isActive",o)),{c(){a1(t.$$.fragment)},m(e,r){a2(t,e,r),n=!0},p(e,[n]){let o={};1&n&&(o.buttonLabel=e[0]),2&n&&(o.buttonClass=e[1]),4&n&&(o.buttonIcon=e[2]),8&n&&(o.buttonHideLabel=e[3]),16&n&&(o.buttonTitle=e[4]),32&n&&(o.buttonLabelClass=e[5]),64&n&&(o.onshow=e[6]),128&n&&(o.onhide=e[7]),65792&n&&(o.$$scope={dirty:n,ctx:e}),!r&&512&n&&(r=!0,o.isActive=e[9],aB(()=>r=!1)),t.$set(o)},i(e){n||(aU(t.$$.fragment,e),n=!0)},o(e){aH(t.$$.fragment,e),n=!1},d(e){a4(t,e)}}}function uY(e,t,r){let n,{buttonLabel:o}=t,{buttonClass:a}=t,{buttonIcon:l}=t,{buttonHideLabel:s}=t,{buttonTitle:d}=t,{buttonLabelClass:c}=t,{root:u}=t,{ondestroy:h=x}=t,{onshow:p=x}=t,{onhide:$=x}=t,m=!1;return aS(h),e.$$set=e=>{"buttonLabel"in e&&r(0,o=e.buttonLabel),"buttonClass"in e&&r(1,a=e.buttonClass),"buttonIcon"in e&&r(2,l=e.buttonIcon),"buttonHideLabel"in e&&r(3,s=e.buttonHideLabel),"buttonTitle"in e&&r(4,d=e.buttonTitle),"buttonLabelClass"in e&&r(5,c=e.buttonLabelClass),"root"in e&&r(10,u=e.root),"ondestroy"in e&&r(11,h=e.ondestroy),"onshow"in e&&r(6,p=e.onshow),"onhide"in e&&r(7,$=e.onhide)},e.$$.update=()=>{1280&e.$$.dirty&&n&&u&&n.firstChild!==u&&(n.hasChildNodes()?n.replaceChild(u,n.firstChild):n.append(u))},[o,a,l,s,d,c,p,$,n,m,u,h,()=>r(9,m=!1),()=>r(9,m=!0),function(e){aE[e?"unshift":"push"](()=>{r(8,n=e)})},function(e){r(9,m=e)}]}class uq extends a3{constructor(e){super(),a5(this,e,uY,uZ,oj,{buttonLabel:0,buttonClass:1,buttonIcon:2,buttonHideLabel:3,buttonTitle:4,buttonLabelClass:5,root:10,ondestroy:11,onshow:6,onhide:7,hide:12,show:13})}get hide(){return this.$$.ctx[12]}get show(){return this.$$.ctx[13]}}var uK=(e,t={})=>{let{direction:r,shiftMultiplier:n=10,bubbles:o=!1,preventDefault:a=!1,stopKeydownPropagation:l=!0}=t,s="horizontal"===r,d="vertical"===r,c=t=>{let{key:r}=t,c=t.shiftKey,u=/up|down/i.test(r),h=/left|right/i.test(r);if(!h&&!u||s&&u||d&&h)return;let p=c?n:1;l&&t.stopPropagation(),a&&t.preventDefault(),e.dispatchEvent(new CustomEvent("nudge",{bubbles:o,detail:eO((/left/i.test(r)?-1:+!!/right/i.test(r))*p,(/up/i.test(r)?-1:+!!/down/i.test(r))*p)}))};return e.addEventListener("keydown",c),{destroy(){e.removeEventListener("keydown",c)}}},uJ=(e,t)=>Math.round(e*(t=1/t))/t,uQ=(e,t,r)=>(e-t)/(r-t);let u0=e=>({}),u1=e=>({});function u2(e){let t,r,n,o,a,l,s,d;return r=new cx({props:{$$slots:{default:[u4]},$$scope:{ctx:e}}}),a=new cx({props:{$$slots:{default:[u5]},$$scope:{ctx:e}}}),{c(){t=ar("button"),a1(r.$$.fragment),n=aa(),o=ar("button"),a1(a.$$.fragment),ad(t,"type","button"),ad(t,"aria-label","Increase"),ad(o,"type","button"),ad(o,"aria-label","Decrease")},m(c,u){at(c,t,u),a2(r,t,null),at(c,n,u),at(c,o,u),a2(a,o,null),l=!0,s||(d=[as(t,"pointerdown",e[18](1)),as(o,"pointerdown",e[18](-1))],s=!0)},p(e,t){let n={};32&t[1]&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);let o={};32&t[1]&&(o.$$scope={dirty:t,ctx:e}),a.$set(o)},i(e){l||(aU(r.$$.fragment,e),aU(a.$$.fragment,e),l=!0)},o(e){aH(r.$$.fragment,e),aH(a.$$.fragment,e),l=!1},d(e){e&&ai(t),a4(r),e&&ai(n),e&&ai(o),a4(a),s=!1,oN(d)}}}function u4(e){let t;return{c(){ad(t=an("path"),"d","M8 12 h8 M12 8 v8")},m(e,r){at(e,t,r)},p:oB,d(e){e&&ai(t)}}}function u5(e){let t;return{c(){ad(t=an("path"),"d","M9 12 h6")},m(e,r){at(e,t,r)},p:oB,d(e){e&&ai(t)}}}function u3(e){let t,r,n,o,a,l,s,d,c,u,h,p,$,m,f;let g=e[34].default,y=oZ(g,e,e[36],null),x=e[34].knob,b=oZ(x,e,e[36],u1),v=e[7]&&u2(e);return{c(){t=ar("div"),r=ar("div"),n=ar("input"),o=aa(),a=ar("div"),y&&y.c(),s=aa(),d=ar("div"),c=ar("div"),b&&b.c(),h=aa(),v&&v.c(),ad(n,"type","range"),ad(n,"id",e[3]),ad(n,"min",e[0]),ad(n,"max",e[1]),ad(n,"step",e[2]),n.value=e[12],a$(n,"pointer-events",e[8]?"none":void 0),ad(a,"class",l=d0(["PinturaSliderTrack",e[4]])),ad(c,"class",u=d0(["PinturaSliderKnob",e[5]])),ad(d,"class","PinturaSliderKnobController"),a$(d,"transform",e[15]),ad(r,"class","PinturaSliderControl"),a$(r,"--slider-position",Math.round(e[13])),ad(t,"class",p=d0(["PinturaSlider",e[10]])),ad(t,"data-direction",e[6])},m(l,u){at(l,t,u),o9(t,r),o9(r,n),e[35](n),o9(r,o),o9(r,a),y&&y.m(a,null),o9(r,s),o9(r,d),o9(d,c),b&&b.m(c,null),o9(t,h),v&&v.m(t,null),$=!0,m||(f=[as(n,"input",e[16]),as(n,"nudge",e[17]),o2(uK.call(null,n)),as(r,"pointerdown",function(){oV(e[9]&&e[11])&&(e[9]&&e[11]).apply(this,arguments)})],m=!0)},p(o,s){e=o,(!$||8&s[0])&&ad(n,"id",e[3]),(!$||1&s[0])&&ad(n,"min",e[0]),(!$||2&s[0])&&ad(n,"max",e[1]),(!$||4&s[0])&&ad(n,"step",e[2]),(!$||4096&s[0])&&(n.value=e[12]),256&s[0]&&a$(n,"pointer-events",e[8]?"none":void 0),y&&y.p&&(!$||32&s[1])&&oK(y,g,e,e[36],$?oq(g,e[36],s,null):oJ(e[36]),null),(!$||16&s[0]&&l!==(l=d0(["PinturaSliderTrack",e[4]])))&&ad(a,"class",l),b&&b.p&&(!$||32&s[1])&&oK(b,x,e,e[36],$?oq(x,e[36],s,u0):oJ(e[36]),u1),(!$||32&s[0]&&u!==(u=d0(["PinturaSliderKnob",e[5]])))&&ad(c,"class",u),32768&s[0]&&a$(d,"transform",e[15]),8192&s[0]&&a$(r,"--slider-position",Math.round(e[13])),e[7]?v?(v.p(e,s),128&s[0]&&aU(v,1)):((v=u2(e)).c(),aU(v,1),v.m(t,null)):v&&(aV(),aH(v,1,1,()=>{v=null}),aj()),(!$||1024&s[0]&&p!==(p=d0(["PinturaSlider",e[10]])))&&ad(t,"class",p),(!$||64&s[0])&&ad(t,"data-direction",e[6])},i(e){$||(aU(y,e),aU(b,e),aU(v),$=!0)},o(e){aH(y,e),aH(b,e),aH(v),$=!1},d(r){r&&ai(t),e[35](null),y&&y.d(r),b&&b.d(r),v&&v.d(),m=!1,oN(f)}}}function u6(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,b,v,w;let{$$slots:S={},$$scope:k}=t,{min:C=0}=t,{max:T=100}=t,{step:M=1}=t,{id:E}=t,{value:R=0}=t,{valueMin:I}=t,{valueMax:A}=t,{trackClass:L}=t,{knobClass:F}=t,{ongrab:z=x}=t,{onchange:B=x}=t,{onrelease:O=x}=t,{onexceed:D=x}=t,{direction:_="x"}=t,{getValue:W=ey}=t,{setValue:N=ey}=t,{enableSpinButtons:V=!0}=t,{enableForceUseKnob:j=!1}=t,{enableStopPropagation:U=!0}=t,{enablePointerdownListener:H=!0}=t,{maxInteractionDistance:G=6}=t,{class:X}=t,Z=e=>N(uJ(lb(e,C,T),M),R),Y=(e,t,n={})=>{let{grabbed:a=!1,released:l=!1}=n,s=Z(C+e/t*o),d=I||C,c=A||T;if(r(19,R=P(s)?s:lb(s,d,c)),y!==s){if(y=s,!P(s)&&(s<d||s>c)&&D(R,s),R===g)return;g=R,a&&z(R),B(R),l&&O(R)}},q=e=>{let t=e[u]-f;Y(m+t,$)},K=e=>{v=setTimeout(()=>{$=void 0},50),document.documentElement.removeEventListener("pointermove",q),document.documentElement.removeEventListener("pointerup",K),B(R),O(R)},J=()=>{r(19,R=Z(n+Q*M)),B(R)},Q=1,ee=!1,et=e=>{clearTimeout(w),ee||J(),O(R),document.removeEventListener("pointerup",et)};return e.$$set=e=>{"min"in e&&r(0,C=e.min),"max"in e&&r(1,T=e.max),"step"in e&&r(2,M=e.step),"id"in e&&r(3,E=e.id),"value"in e&&r(19,R=e.value),"valueMin"in e&&r(20,I=e.valueMin),"valueMax"in e&&r(21,A=e.valueMax),"trackClass"in e&&r(4,L=e.trackClass),"knobClass"in e&&r(5,F=e.knobClass),"ongrab"in e&&r(22,z=e.ongrab),"onchange"in e&&r(23,B=e.onchange),"onrelease"in e&&r(24,O=e.onrelease),"onexceed"in e&&r(25,D=e.onexceed),"direction"in e&&r(6,_=e.direction),"getValue"in e&&r(26,W=e.getValue),"setValue"in e&&r(27,N=e.setValue),"enableSpinButtons"in e&&r(7,V=e.enableSpinButtons),"enableForceUseKnob"in e&&r(8,j=e.enableForceUseKnob),"enableStopPropagation"in e&&r(28,U=e.enableStopPropagation),"enablePointerdownListener"in e&&r(9,H=e.enablePointerdownListener),"maxInteractionDistance"in e&&r(29,G=e.maxInteractionDistance),"class"in e&&r(10,X=e.class),"$$scope"in e&&r(36,k=e.$$scope)},e.$$.update=()=>{0x4080000&e.$$.dirty[0]&&r(12,n=void 0!==R?W(R):0),3&e.$$.dirty[0]&&(o=T-C),4099&e.$$.dirty[0]&&r(31,a=uQ(n,C,T)),1&e.$$.dirty[1]&&r(13,l=100*a),64&e.$$.dirty[0]&&r(32,s=_.toUpperCase()),64&e.$$.dirty[0]&&r(33,d="x"===_?"Width":"Height"),4&e.$$.dirty[1]&&(c=`offset${d}`),2&e.$$.dirty[1]&&(u=`page${s}`),8192&e.$$.dirty[0]|2&e.$$.dirty[1]&&r(15,h=`translate${s}(${l}%)`)},[C,T,M,E,L,F,_,V,j,H,X,e=>{clearTimeout(v);let t=!1;U&&e.stopPropagation(),clearTimeout(b);let r=p.getBoundingClientRect();if($=p[c],m=(f=e[u])-r[_],j){if(Math.abs(m-a*$)>G)return;t=!0,e.stopPropagation()}return document.activeElement!==p&&p.focus(),Y(m,$,{grabbed:!0}),document.documentElement.addEventListener("pointermove",q),document.documentElement.addEventListener("pointerup",K),t},n,l,p,h,e=>{!$&&(r(19,R=N(parseFloat(e.target.value))),R!==g&&(g=R,B(R)))},e=>{let t=p[c];Y(n/o*t+e.detail[_],t),clearTimeout(b),b=setTimeout(()=>{O(R)},250)},e=>t=>{clearTimeout(b),Q=e,ee=!1,w=setInterval(()=>{ee=!0,J()},100),document.addEventListener("pointercancel",et),document.addEventListener("pointerup",et)},R,I,A,z,B,O,D,W,N,U,G,e=>{let t=p.getBoundingClientRect(),r=e[u]-t[_],n=p[c];return Math.abs(r-a*n)},a,s,d,S,function(e){aE[e?"unshift":"push"](()=>{r(14,p=e)})},k]}class u8 extends a3{constructor(e){super(),a5(this,e,u6,u3,oj,{min:0,max:1,step:2,id:3,value:19,valueMin:20,valueMax:21,trackClass:4,knobClass:5,ongrab:22,onchange:23,onrelease:24,onexceed:25,direction:6,getValue:26,setValue:27,enableSpinButtons:7,enableForceUseKnob:8,enableStopPropagation:28,enablePointerdownListener:9,maxInteractionDistance:29,class:10,eventDistanceToKnob:30,handlePointerDown:11},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[30]}get handlePointerDown(){return this.$$.ctx[11]}}function u7(e){let t,r;return t=new cx({props:{class:"PinturaButtonIcon",$$slots:{default:[u9]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};1048580&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function u9(e){let t;return{c(){t=an("g")},m(r,n){at(r,t,n),t.innerHTML=e[2]},p(e,r){4&r&&(t.innerHTML=e[2])},d(e){e&&ai(t)}}}function he(e){let t,r;let n=c5(e[8],e[6])+"";return{c(){t=ar("span"),r=ao(n),ad(t,"class","PinturaButtonLabelPrefix")},m(e,n){at(e,t,n),o9(t,r)},p(e,t){320&t&&n!==(n=c5(e[8],e[6])+"")&&ah(r,n)},d(e){e&&ai(t)}}}function ht(e){let t,r,n,o,a,l,s,d,c;let u=e[2]&&u7(e),h=e[8]&&he(e);return{c(){t=ar("span"),u&&u.c(),r=aa(),h&&h.c(),n=aa(),o=ar("span"),a=ao(e[9]),ad(o,"class",l=d0(["PinturaButtonLabel",e[3],e[5]&&"implicit"])),ad(t,"slot","label"),ad(t,"title",s=c5(e[1],e[6])),ad(t,"class",d=d0(["PinturaButtonInner",e[4]]))},m(e,l){at(e,t,l),u&&u.m(t,null),o9(t,r),h&&h.m(t,null),o9(t,n),o9(t,o),o9(o,a),c=!0},p(e,p){e[2]?u?(u.p(e,p),4&p&&aU(u,1)):((u=u7(e)).c(),aU(u,1),u.m(t,r)):u&&(aV(),aH(u,1,1,()=>{u=null}),aj()),e[8]?h?h.p(e,p):((h=he(e)).c(),h.m(t,n)):h&&(h.d(1),h=null),(!c||512&p)&&ah(a,e[9]),(!c||40&p&&l!==(l=d0(["PinturaButtonLabel",e[3],e[5]&&"implicit"])))&&ad(o,"class",l),(!c||66&p&&s!==(s=c5(e[1],e[6])))&&ad(t,"title",s),(!c||16&p&&d!==(d=d0(["PinturaButtonInner",e[4]])))&&ad(t,"class",d)},i(e){c||(aU(u),c=!0)},o(e){aH(u),c=!1},d(e){e&&ai(t),u&&u.d(),h&&h.d()}}}function hi(e){let t,r,n,o,a;let l=[e[12],{value:e[7]},{onchange:e[11]}],s={};for(let e=0;e<l.length;e+=1)s=oD(s,l[e]);return r=new u8({props:s}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"slot","details")},m(l,s){at(l,t,s),a2(r,t,null),n=!0,o||(a=as(t,"keydown",e[10]),o=!0)},p(e,t){let n=6272&t?aJ(l,[4096&t&&aQ(e[12]),128&t&&{value:e[7]},2048&t&&{onchange:e[11]}]):{};r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r),o=!1,a()}}}function hr(e){let t,r;return t=new cY({props:{panelClass:"PinturaSliderPanel",buttonClass:d0(["PinturaSliderButton",e[0],e[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[hi],label:[ht]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,[r]){let n={};33&r&&(n.buttonClass=d0(["PinturaSliderButton",e[0],e[5]&&"PinturaSliderIconOnly"])),1053694&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function hn(e,t,r){let n;let o=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange","labelPrefix"],a=o0(t,o),{class:l}=t,{title:s}=t,{label:d=Math.round}=t,{icon:c}=t,{labelClass:u}=t,{innerClass:h}=t,{hideLabel:p=!1}=t,{locale:$}=t,{value:m}=t,{onchange:f=x}=t,{labelPrefix:g}=t,{min:y,max:b,getValue:v=ey}=a,w=e=>U(d)?d(v(e),y,b,e):d,S=e=>r(9,n=w(e));return e.$$set=e=>{r(12,a=o0(t=oD(oD({},t),oQ(e)),o)),"class"in e&&r(0,l=e.class),"title"in e&&r(1,s=e.title),"label"in e&&r(13,d=e.label),"icon"in e&&r(2,c=e.icon),"labelClass"in e&&r(3,u=e.labelClass),"innerClass"in e&&r(4,h=e.innerClass),"hideLabel"in e&&r(5,p=e.hideLabel),"locale"in e&&r(6,$=e.locale),"value"in e&&r(7,m=e.value),"onchange"in e&&r(14,f=e.onchange),"labelPrefix"in e&&r(8,g=e.labelPrefix)},e.$$.update=()=>{8320&e.$$.dirty&&S(m)},[l,s,c,u,h,p,$,m,g,n,e=>{/tab/i.test(e.key)&&e.preventDefault()},e=>{S(e),f(e)},a,d,f]}class ho extends a3{constructor(e){super(),a5(this,e,hn,hr,oj,{class:0,title:1,label:13,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:14,labelPrefix:8})}}function ha(e){let t,r,n,o,a,l,s,d;return{c(){t=ar("span"),r=an("svg"),n=an("g"),o=an("circle"),a=an("circle"),l=aa(),s=ar("span"),d=ao(e[3]),ad(o,"class","PinturaProgressIndicatorBar"),ad(o,"r","8.5"),ad(o,"cx","10"),ad(o,"cy","10"),ad(o,"stroke-linecap","round"),ad(o,"opacity",".25"),ad(a,"class","PinturaProgressIndicatorFill"),ad(a,"r","8.5"),ad(a,"stroke-dasharray",e[2]),ad(a,"cx","10"),ad(a,"cy","10"),ad(a,"transform","rotate(-90) translate(-20)"),ad(n,"fill","none"),ad(n,"stroke","currentColor"),ad(n,"stroke-width","2.5"),ad(n,"stroke-linecap","round"),ad(n,"opacity",e[1]),ad(r,"width","20"),ad(r,"height","20"),ad(r,"viewBox","0 0 20 20"),ad(r,"xmlns","http://www.w3.org/2000/svg"),ad(r,"aria-hidden","true"),ad(r,"focusable","false"),ad(s,"class","implicit"),ad(t,"class","PinturaProgressIndicator"),ad(t,"data-status",e[0]),a$(t,"opacity",e[4])},m(e,c){at(e,t,c),o9(t,r),o9(r,n),o9(n,o),o9(n,a),o9(t,l),o9(t,s),o9(s,d)},p(e,[r]){4&r&&ad(a,"stroke-dasharray",e[2]),2&r&&ad(n,"opacity",e[1]),8&r&&ah(d,e[3]),1&r&&ad(t,"data-status",e[0]),16&r&&a$(t,"opacity",e[4])},i:oB,o:oB,d(e){e&&ai(t)}}}function hl(e,t,r){let n,o,a,l,s,d,c,u;let h=ak(),{progress:p}=t,{min:$=0}=t,{max:m=100}=t,{labelBusy:f="Busy"}=t,{opacity:g}=t,y=aT("isAnimated");oX(e,y,e=>r(14,s=e));let x=dk(g,{precision:.01});oX(e,x,e=>r(4,u=e));let b=dk(0,{precision:.01}),v=dk(0,{precision:.01});oX(e,v,e=>r(15,d=e));let w=a9([b],e=>lb(e,$,m));oX(e,w,e=>r(16,c=e));let S=w.subscribe(e=>{1===p&&Math.round(e)>=100&&h("complete")});return av(()=>{v.set(1,{hard:!s})}),aS(()=>{S()}),e.$$set=e=>{"progress"in e&&r(9,p=e.progress),"min"in e&&r(10,$=e.min),"max"in e&&r(11,m=e.max),"labelBusy"in e&&r(12,f=e.labelBusy),"opacity"in e&&r(13,g=e.opacity)},e.$$.update=()=>{24576&e.$$.dirty&&ri(g)&&x.set(g,{hard:!s}),16896&e.$$.dirty&&p&&p!==1/0&&b.set(100*p,{hard:!s}),70144&e.$$.dirty&&r(3,n=p===1/0?f:`${Math.round(c)}%`),66048&e.$$.dirty&&r(2,o=p===1/0?"26.5 53":`${c/100*53} 53`),32768&e.$$.dirty&&r(1,a=d),512&e.$$.dirty&&r(0,l=p===1/0?"busy":"loading")},[l,a,o,n,u,y,x,v,w,p,$,m,f,g,s,d,c]}class hs extends a3{constructor(e){super(),a5(this,e,hl,ha,oj,{progress:9,min:10,max:11,labelBusy:12,opacity:13})}}function hd(e){let t,r;let n=c5(e[0],e[1])+"";return{c(){t=ar("span"),r=ao(n),ad(t,"class",e[3])},m(e,n){at(e,t,n),o9(t,r)},p(e,o){3&o&&n!==(n=c5(e[0],e[1])+"")&&ah(r,n),8&o&&ad(t,"class",e[3])},d(e){e&&ai(t)}}}function hc(e){let t,r,n,o;let a=e[0]&&hd(e);return n=new hJ({props:{items:e[2]}}),{c(){t=ar("li"),a&&a.c(),r=aa(),a1(n.$$.fragment),ad(t,"class","PinturaShapeStyle")},m(e,l){at(e,t,l),a&&a.m(t,null),o9(t,r),a2(n,t,null),o=!0},p(e,[o]){e[0]?a?a.p(e,o):((a=hd(e)).c(),a.m(t,r)):a&&(a.d(1),a=null);let l={};4&o&&(l.items=e[2]),n.$set(l)},i(e){o||(aU(n.$$.fragment,e),o=!0)},o(e){aH(n.$$.fragment,e),o=!1},d(e){e&&ai(t),a&&a.d(),a4(n)}}}function hu(e,t,r){let n;let{title:o}=t,{locale:a}=t,{items:l}=t,{hideTitle:s=!1}=t;return e.$$set=e=>{"title"in e&&r(0,o=e.title),"locale"in e&&r(1,a=e.locale),"items"in e&&r(2,l=e.items),"hideTitle"in e&&r(4,s=e.hideTitle)},e.$$.update=()=>{16&e.$$.dirty&&r(3,n="PinturaShapeStyleLabel"+(s?" implicit":""))},[o,a,l,n,s]}class hh extends a3{constructor(e){super(),a5(this,e,hu,hc,oj,{title:0,locale:1,items:2,hideTitle:4})}}var hp=(e,t,r)=>{let n=Math.max(e,t,r),o=n-Math.min(e,t,r),a=o&&(n==e?(t-r)/o:n==t?2+(r-e)/o:4+(e-t)/o);return[60*(a<0?a+6:a)/360,n&&o/n,n]},h$=(e,t,r)=>{let n,o,a;let l=Math.floor(6*e),s=6*e-l,d=r*(1-t),c=r*(1-s*t),u=r*(1-(1-s)*t);switch(l%6){case 0:n=r,o=u,a=d;break;case 1:n=c,o=r,a=d;break;case 2:n=d,o=r,a=u;break;case 3:n=d,o=c,a=r;break;case 4:n=u,o=d,a=r;break;case 5:n=r,o=d,a=c}return[n,o,a]};function hm(e){let t,r;return{c(){t=ar("div"),r=ar("span"),ad(t,"class","PinturaColorPreview"),ad(t,"title",e[0]),a$(t,"--color",e[1])},m(e,n){at(e,t,n),o9(t,r)},p(e,[r]){1&r&&ad(t,"title",e[0]),2&r&&a$(t,"--color",e[1])},i:oB,o:oB,d(e){e&&ai(t)}}}function hf(e,t,r){let n;let{color:o}=t,{title:a}=t;return e.$$set=e=>{"color"in e&&r(2,o=e.color),"title"in e&&r(0,a=e.title)},e.$$.update=()=>{4&e.$$.dirty&&r(1,n=o?rf(o):"transparent")},[a,n,o]}class hg extends a3{constructor(e){super(),a5(this,e,hf,hm,oj,{color:2,title:0})}}var hy=e=>{let[,t,r,n,o]=e.split("");e=e.length>=4&&e.length<=5?`#${t}${t}${r}${r}${n}${n}${o?`${o}${o}`:""}`:e;let[a,l,s,d,c]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(a)return[l,s,d,c].filter(e=>void 0!==e).map(e=>parseInt(e,16)/255)},hx=e=>(e=e.trim(),/^rgba/.test(e))?e.substring(5).split(",").map(parseFloat).map((e,t)=>e/(3===t?1:255)):/^rgb/.test(e)?e.substring(4).split(",").map(parseFloat).map(e=>e/255):/^#/.test(e)?hy(e):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(e)?e.split(",").map(e=>parseInt(e,10)).map(e=>e/255):void 0;let hb=null;var hv=()=>(null===hb&&(hb=k()&&"EyeDropper"in window),hb);function hw(e){let t,r;return{c(){t=ar("span"),r=ao(e[0])},m(e,n){at(e,t,n),o9(t,r)},p(e,t){1&t[0]&&ah(r,e[0])},d(e){e&&ai(t)}}}function hS(e){let t,r,n,o;r=new hg({props:{color:e[4],title:c5(e[8],e[10])}});let a=!e[9]&&hw(e);return{c(){t=ar("span"),a1(r.$$.fragment),n=aa(),a&&a.c(),ad(t,"slot","label"),ad(t,"class","PinturaButtonLabel")},m(e,l){at(e,t,l),a2(r,t,null),o9(t,n),a&&a.m(t,null),o=!0},p(e,n){let o={};16&n[0]&&(o.color=e[4]),1280&n[0]&&(o.title=c5(e[8],e[10])),r.$set(o),e[9]?a&&(a.d(1),a=null):a?a.p(e,n):((a=hw(e)).c(),a.m(t,null))},i(e){o||(aU(r.$$.fragment,e),o=!0)},o(e){aH(r.$$.fragment,e),o=!1},d(e){e&&ai(t),a4(r),a&&a.d()}}}function hk(e){let t,r,n,o,a,l,s,d,c,u,h,p;s=new u8({props:{class:"PinturaHuePicker",onchange:e[27],value:e[16],min:0,max:1,step:.01}});let $=e[11]&&hC(e),m=(e[14]||e[15])&&hT(e);return{c(){t=ar("div"),r=ar("div"),n=ar("div"),o=ar("div"),a=aa(),l=ar("div"),a1(s.$$.fragment),d=aa(),$&&$.c(),c=aa(),m&&m.c(),ad(o,"role","button"),ad(o,"aria-label","Saturation slider"),ad(o,"class","PinturaPickerKnob"),ad(o,"tabindex","0"),a$(o,"background-color",e[20]),ad(n,"class","PinturaPickerKnobController"),a$(n,"transform",`translate(${e[25]}%,${e[24]}%)`),ad(r,"class","PinturaSaturationPicker"),a$(r,"background-color",e[21]),a$(l,"--knob-background",e[21]),ad(t,"class","PinturaPicker")},m(f,g){at(f,t,g),o9(t,r),o9(r,n),o9(n,o),e[41](r),o9(t,a),o9(t,l),a2(s,l,null),o9(t,d),$&&$.m(t,null),o9(t,c),m&&m.m(t,null),u=!0,h||(p=[as(o,"nudge",e[30]),o2(uK.call(null,o,{preventDefault:!0})),as(r,"pointerdown",e[29])],h=!0)},p(e,a){1048576&a[0]&&a$(o,"background-color",e[20]),0x3000000&a[0]&&a$(n,"transform",`translate(${e[25]}%,${e[24]}%)`),2097152&a[0]&&a$(r,"background-color",e[21]);let d={};65536&a[0]&&(d.value=e[16]),s.$set(d),2097152&a[0]&&a$(l,"--knob-background",e[21]),e[11]?$?($.p(e,a),2048&a[0]&&aU($,1)):(($=hC(e)).c(),aU($,1),$.m(t,c)):$&&(aV(),aH($,1,1,()=>{$=null}),aj()),e[14]||e[15]?m?(m.p(e,a),49152&a[0]&&aU(m,1)):((m=hT(e)).c(),aU(m,1),m.m(t,null)):m&&(aV(),aH(m,1,1,()=>{m=null}),aj())},i(e){u||(aU(s.$$.fragment,e),aU($),aU(m),u=!0)},o(e){aH(s.$$.fragment,e),aH($),aH(m),u=!1},d(r){r&&ai(t),e[41](null),a4(s),$&&$.d(),m&&m.d(),h=!1,oN(p)}}}function hC(e){let t,r,n;return r=new u8({props:{class:"PinturaOpacityPicker",onchange:e[28],value:e[17],min:0,max:1,step:.01}}),{c(){t=ar("div"),a1(r.$$.fragment),a$(t,"--knob-background",e[18]),a$(t,"--track-background",`linear-gradient(to right,${e[19]},${e[20]})`)},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,n){let o={};131072&n[0]&&(o.value=e[17]),r.$set(o),262144&n[0]&&a$(t,"--knob-background",e[18]),1572864&n[0]&&a$(t,"--track-background",`linear-gradient(to right,${e[19]},${e[20]})`)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function hT(e){let t,r,n,o,a,l,s;let d=e[15]&&hM(e);return{c(){t=ar("div"),r=ar("input"),o=aa(),d&&d.c(),ad(r,"class","PinturaColorPickerInput"),ad(r,"type","text"),r.disabled=n=!e[14],r.value=e[23],ad(t,"class","PinturColorPickerInputGroup")},m(n,c){at(n,t,c),o9(t,r),o9(t,o),d&&d.m(t,null),a=!0,l||(s=[as(r,"keydown",e[32]),as(r,"input",e[31])],l=!0)},p(e,o){(!a||16384&o[0]&&n!==(n=!e[14]))&&(r.disabled=n),(!a||8388608&o[0]&&r.value!==e[23])&&(r.value=e[23]),e[15]?d?(d.p(e,o),32768&o[0]&&aU(d,1)):((d=hM(e)).c(),aU(d,1),d.m(t,null)):d&&(aV(),aH(d,1,1,()=>{d=null}),aj())},i(e){a||(aU(d),a=!0)},o(e){aH(d),a=!1},d(e){e&&ai(t),d&&d.d(),l=!1,oN(s)}}}function hM(e){let t,r;return t=new h3({props:{icon:'<path stroke="currentColor" stroke-linecap="square" d="m13 14-7 7a2.704 2.704 0 0 1-3 0 2.704 2.704 0 0 1 0-3l7-7"/><path fill="currentColor" d="M9.475 9.475 14.5 14.5c.263.263.69.265.955.005l.783-.767a4.209 4.209 0 0 0 1.262-3.006V10l4-4c.5-.5.375-2.125-.5-3s-2.5-1-3-.5l-4 4h-.732a4.329 4.329 0 0 0-3.03 1.238l-.758.742a.7.7 0 0 0-.005.995Z"/>',hideLabel:!0,label:"Pick a color",class:"PinturaEyeDropper",onclick:e[33]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p:oB,i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function hP(e){let t,r;return t=new uS({props:{label:c5(e[10].labelColorPalette,e[10]),class:d0(["PinturaColorPresets",e[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:e[1],value:e[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:e[2].map(e[42]),selectedIndex:e[3],optionMapper:e[7],optionLabelClass:e[6],onchange:e[43],$$slots:{option:[hI,({option:e})=>({59:e}),({option:e})=>[0,0x10000000*!!e]],group:[hE,({option:e})=>({59:e}),({option:e})=>[0,0x10000000*!!e]]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};1024&r[0]&&(n.label=c5(e[10].labelColorPalette,e[10])),512&r[0]&&(n.class=d0(["PinturaColorPresets",e[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&r[0]&&(n.name=e[1]),16&r[0]&&(n.value=e[4]),1028&r[0]&&(n.options=e[2].map(e[42])),8&r[0]&&(n.selectedIndex=e[3]),128&r[0]&&(n.optionMapper=e[7]),64&r[0]&&(n.optionLabelClass=e[6]),512&r[0]|0x30000000&r[1]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function hE(e){let t,r;let n=e[59].label+"";return{c(){t=ar("span"),r=ao(n),ad(t,"slot","group")},m(e,n){at(e,t,n),o9(t,r)},p(e,t){0x10000000&t[1]&&n!==(n=e[59].label+"")&&ah(r,n)},d(e){e&&ai(t)}}}function hR(e){let t,r;let n=e[59].label+"";return{c(){t=ar("span"),r=ao(n),ad(t,"class","PinturaButtonLabel")},m(e,n){at(e,t,n),o9(t,r)},p(e,t){0x10000000&t[1]&&n!==(n=e[59].label+"")&&ah(r,n)},d(e){e&&ai(t)}}}function hI(e){let t,r,n,o;r=new hg({props:{title:e[59].label,color:e[59].value}});let a=!e[9]&&hR(e);return{c(){t=ar("span"),a1(r.$$.fragment),n=aa(),a&&a.c(),ad(t,"slot","option")},m(e,l){at(e,t,l),a2(r,t,null),o9(t,n),a&&a.m(t,null),o=!0},p(e,n){let o={};0x10000000&n[1]&&(o.title=e[59].label),0x10000000&n[1]&&(o.color=e[59].value),r.$set(o),e[9]?a&&(a.d(1),a=null):a?a.p(e,n):((a=hR(e)).c(),a.m(t,null))},i(e){o||(aU(r.$$.fragment,e),o=!0)},o(e){aH(r.$$.fragment,e),o=!1},d(e){e&&ai(t),a4(r),a&&a.d()}}}function hA(e){let t,r,n;let o=e[13]&&hk(e),a=e[12]&&hP(e);return{c(){t=ar("div"),o&&o.c(),r=aa(),a&&a.c(),ad(t,"slot","details"),ad(t,"class","PinturaColorPickerPanel")},m(e,l){at(e,t,l),o&&o.m(t,null),o9(t,r),a&&a.m(t,null),n=!0},p(e,n){e[13]?o?(o.p(e,n),8192&n[0]&&aU(o,1)):((o=hk(e)).c(),aU(o,1),o.m(t,r)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj()),e[12]?a?(a.p(e,n),4096&n[0]&&aU(a,1)):((a=hP(e)).c(),aU(a,1),a.m(t,null)):a&&(aV(),aH(a,1,1,()=>{a=null}),aj())},i(e){n||(aU(o),aU(a),n=!0)},o(e){aH(o),aH(a),n=!1},d(e){e&&ai(t),o&&o.d(),a&&a.d()}}}function hL(e){let t,r;return t=new cY({props:{buttonClass:d0(["PinturaColorPickerButton",e[5]]),$$slots:{details:[hA],label:[hS]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};32&r[0]&&(n.buttonClass=d0(["PinturaColorPickerButton",e[5]])),0x3ffffdf&r[0]|0x20000000&r[1]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function hF(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,x,b,v,w,S,k;let{label:C}=t,{name:T}=t,{options:M=[]}=t,{selectedIndex:P=-1}=t,{value:E}=t,{buttonClass:R}=t,{optionLabelClass:I}=t,{optionMapper:A}=t,{onchange:L}=t,{title:F}=t,{hidePresetLabel:z=!0}=t,{locale:B}=t,{enableOpacity:O=!0}=t,{enablePresets:D=!0}=t,{enablePicker:_=!0}=t,{enableInput:W=!1}=t,{enableEyeDropper:N=!1}=t,V="transparent",j="transparent",H=(e,t)=>{if(p=[e[0],e[1],e[2]],t){let t=hp(...p),n=t[0],o=t[1],a=t[2];ri(x)&&(n=x),ri(g)&&(o=g),ri(y)&&(a=y),r(16,d=n),r(36,c=o),r(37,u=a),r(17,h=ri(e[3])?e[3]:1)}r(18,$=rf(e)),r(19,m=rf([...p,0])),r(20,V=rf([...p,1])),r(21,j=rf(h$(d,1,1)))},G=()=>{let e=[...h$(d,c,u),h];H(e),L(e)},X=e=>{let t=3===e.length?[...e,1]:e;Z(),H(t,!0),L(t)},Z=()=>{g=void 0,y=void 0,x=void 0},Y=(e,t)=>{r(36,c=e),r(37,u=t),g=e,y=t,G()},q=(e,t)=>{Y(lb(e.x/t.width,0,1),1-lb(e.y/t.height,0,1))},K=e=>{let t=e1(eW(e),S);q(e0(eV(w),t),v)},J=e=>{v=void 0,document.documentElement.removeEventListener("pointermove",K),document.documentElement.removeEventListener("pointerup",J)},Q=(e,t,r)=>{let n=e.map(e=>Math.round(255*e).toString(16).toLowerCase().padStart(2,"0"));return(!t&&n.length>3||"ff"===n[3])&&n.pop(),r&&(n=n.map(e=>e.substring(0,1))),`#${n.join("")}`};return e.$$set=e=>{"label"in e&&r(0,C=e.label),"name"in e&&r(1,T=e.name),"options"in e&&r(2,M=e.options),"selectedIndex"in e&&r(3,P=e.selectedIndex),"value"in e&&r(4,E=e.value),"buttonClass"in e&&r(5,R=e.buttonClass),"optionLabelClass"in e&&r(6,I=e.optionLabelClass),"optionMapper"in e&&r(7,A=e.optionMapper),"onchange"in e&&r(34,L=e.onchange),"title"in e&&r(8,F=e.title),"hidePresetLabel"in e&&r(9,z=e.hidePresetLabel),"locale"in e&&r(10,B=e.locale),"enableOpacity"in e&&r(11,O=e.enableOpacity),"enablePresets"in e&&r(12,D=e.enablePresets),"enablePicker"in e&&r(13,_=e.enablePicker),"enableInput"in e&&r(14,W=e.enableInput),"enableEyeDropper"in e&&r(35,N=e.enableEyeDropper)},e.$$.update=()=>{16&e.$$.dirty[1]&&r(15,n=N&&hv()),16&e.$$.dirty[0]|128&e.$$.dirty[1]&&E&&(!f||!lM(E,f))&&(r(38,f=[...E]),H(E,!0)),32&e.$$.dirty[1]&&r(25,o=100*c),64&e.$$.dirty[1]&&r(24,a=100-100*u),256&e.$$.dirty[1]&&r(40,l=!!k&&k.length>=4&&k.length<=5),51216&e.$$.dirty[0]|512&e.$$.dirty[1]&&r(23,s=(W||n)&&E?Q(E,O,l):void 0)},[C,T,M,P,E,R,I,A,F,z,B,O,D,_,W,n,d,h,$,m,V,j,b,s,a,o,X,e=>{r(16,d=e),x=e,G()},e=>{r(17,h=e),G()},e=>{e.stopPropagation(),v=td(b.offsetWidth,b.offsetHeight),w=eN(e),S=eW(e),q(w,v),document.documentElement.addEventListener("pointermove",K),document.documentElement.addEventListener("pointerup",J)},e=>{v=td(b.offsetWidth,b.offsetHeight);let t=o/100*v.width,r=a/100*v.height;q({x:t+e.detail.x,y:r+e.detail.y},v)},e=>{let{value:t}=e.target,n=t.length;if(!t.startsWith("#")||n<4||6===n||8===n||n>9||!O&&n>7)return;let o=hx(t);o&&(r(39,k=t),Z(),H(o),L(o))},e=>{e.stopPropagation()},e=>{new EyeDropper().open().then(({sRGBHex:e})=>{let t=hx(e);t&&(t[3]=1,r(39,k=E),Z(),H(t),L(t))}).catch(e=>{})},L,N,c,u,f,k,l,function(e){aE[e?"unshift":"push"](()=>{r(22,b=e)})},([e,t])=>[e,U(t)?t(B):t],e=>X(e.value)]}class hz extends a3{constructor(e){super(),a5(this,e,hF,hL,oj,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:34,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14,enableEyeDropper:35},null,[-1,-1])}}function hB(e){let t,r,n;return r=new hJ({props:{items:e[0]}}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"class","PinturaShorthandControl PinturaShapeStyle")},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,[t]){let n={};1&t&&(n.items=e[0]),r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function hO(e,t,r){let n,o;let{value:a}=t,{onchange:l}=t,{controls:s=[]}=t,d=e=>{let{controls:t,...r}=e;return r};return e.$$set=e=>{r(6,t=oD(oD({},t),oQ(e))),"value"in e&&r(1,a=e.value),"onchange"in e&&r(2,l=e.onchange),"controls"in e&&r(3,s=e.controls)},e.$$.update=()=>{r(4,n=d(t)),30&e.$$.dirty&&r(0,o=s.map((e,t)=>{let[r,o,s]=e;return[r,o,{...n,...s,value:a[t],onchange:e=>{let r=[...a];r[t]=e,l(r)}}]}))},t=oQ(t),[o,a,l,s,n]}class hD extends a3{constructor(e){super(),a5(this,e,hO,hB,oj,{value:1,onchange:2,controls:3})}}function h_(e){let t,r;return t=new uG({props:{label:e[4],options:e[1],title:e[2],selectedIndex:e[5],onchange:e[10]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,[r]){let n={};16&r&&(n.label=e[4]),2&r&&(n.options=e[1]),4&r&&(n.title=e[2]),32&r&&(n.selectedIndex=e[5]),9&r&&(n.onchange=e[10]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function hW(e,t,r){let n,o,a,l;let{options:s}=t,{title:d}=t,{onchange:c}=t,{selectedIndex:u=-1}=t,{value:h}=t,{label:p}=t,$=(e,t,r)=>{if(e)return t>-1?e[t]:void 0!==r?e.find(e=>e[0]===r):e[0]};return e.$$set=e=>{"options"in e&&r(1,s=e.options),"title"in e&&r(2,d=e.title),"onchange"in e&&r(3,c=e.onchange),"selectedIndex"in e&&r(0,u=e.selectedIndex),"value"in e&&r(6,h=e.value),"label"in e&&r(7,p=e.label)},e.$$.update=()=>{67&e.$$.dirty&&r(9,n=$(s,u,h)),514&e.$$.dirty&&r(5,o=s&&s.findIndex(e=>e===n)),512&e.$$.dirty&&r(8,a=n&&n[1]),384&e.$$.dirty&&r(4,l=p||a)},[u,s,d,c,l,o,h,p,a,n,e=>{r(0,u=e.index),c&&c(e)}]}class hN extends a3{constructor(e){super(),a5(this,e,hW,h_,oj,{options:1,title:2,onchange:3,selectedIndex:0,value:6,label:7})}}function hV(e,t,r){let n=e.slice();return n[9]=t[r][0],n[0]=t[r][1],n[10]=t[r][2],n[2]=t[r][3],n}function hj(e){let t,r,n;let o=[e[10]];var a=e[3][e[9]]||e[9];function l(e){let t={};for(let e=0;e<o.length;e+=1)t=oD(t,o[e]);return{props:t}}return a&&(t=new a(l())),{c(){t&&a1(t.$$.fragment),r=al()},m(e,o){t&&a2(t,e,o),at(e,r,o),n=!0},p(e,n){let s=4&n?aJ(o,[aQ(e[10])]):{};if(a!==(a=e[3][e[9]]||e[9])){if(t){aV();let e=t;aH(e.$$.fragment,1,0,()=>{a4(e,1)}),aj()}a?(a1((t=new a(l())).$$.fragment),aU(t.$$.fragment,1),a2(t,r.parentNode,r)):t=null}else a&&t.$set(s)},i(e){n||(t&&aU(t.$$.fragment,e),n=!0)},o(e){t&&aH(t.$$.fragment,e),n=!1},d(e){e&&ai(r),t&&a4(t,e)}}}function hU(e){let t,r=e[9],n=e[9]&&hZ(e);return{c(){n&&n.c(),t=al()},m(e,r){n&&n.m(e,r),at(e,t,r)},p(e,o){e[9]?r?oj(r,e[9])?(n.d(1),(n=hZ(e)).c(),n.m(t.parentNode,t)):n.p(e,o):((n=hZ(e)).c(),n.m(t.parentNode,t)):r&&(n.d(1),n=null),r=e[9]},i:oB,o(e){aH(n)},d(e){e&&ai(t),n&&n.d(e)}}}function hH(e){let t,r;let n=e[10].innerHTML+"";return{c(){t=new af(!1),r=al(),t.a=r},m(e,o){t.m(n,e,o),at(e,r,o)},p(e,r){4&r&&n!==(n=e[10].innerHTML+"")&&t.p(n)},i:oB,o:oB,d(e){e&&ai(r),e&&t.d()}}}function hG(e){let t,r=e[10].textContent+"";return{c(){t=ao(r)},m(e,r){at(e,t,r)},p(e,n){4&n&&r!==(r=e[10].textContent+"")&&ah(t,r)},i:oB,o:oB,d(e){e&&ai(t)}}}function hX(e){let t,r;return t=new hJ({props:{items:e[2],discardEmptyItems:!0}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};4&r&&(n.items=e[2]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function hZ(e){let t,r,n,o,a;let l=[hX,hG,hH],s=[];function d(e,t){return e[2]&&e[2].length?0:e[10].textContent?1:e[10].innerHTML?2:-1}~(r=d(e))&&(n=s[r]=l[r](e));let c=[e[4](e[10])],u={};for(let e=0;e<c.length;e+=1)u=oD(u,c[e]);return{c(){t=ar(e[9]),n&&n.c(),o=aa(),/-/.test(e[9])?au(t,u):ac(t,u)},m(e,n){at(e,t,n),~r&&s[r].m(t,null),o9(t,o),a=!0},p(e,a){let h=r;(r=d(e))===h?~r&&s[r].p(e,a):(n&&(aV(),aH(s[h],1,1,()=>{s[h]=null}),aj()),~r?((n=s[r])?n.p(e,a):(n=s[r]=l[r](e)).c(),aU(n,1),n.m(t,o)):n=null),u=aJ(c,[4&a&&e[4](e[10])]),/-/.test(e[9])?au(t,u):ac(t,u)},i(e){a||(aU(n),a=!0)},o(e){aH(n),a=!1},d(e){e&&ai(t),~r&&s[r].d()}}}function hY(e,t){let r,n,o,a,l,s;let d=[hU,hj],c=[];function u(e,t){return+(4&t&&(n=null),null==n&&(n=!e[5](e[9])),!n)}return a=c[o=u(t,-1)]=d[o](t),{key:e,first:null,c(){r=al(),a.c(),l=al(),this.first=r},m(e,t){at(e,r,t),c[o].m(e,t),at(e,l,t),s=!0},p(e,r){let n=o;(o=u(t=e,r))===n?c[o].p(t,r):(aV(),aH(c[n],1,1,()=>{c[n]=null}),aj(),(a=c[o])?a.p(t,r):(a=c[o]=d[o](t)).c(),aU(a,1),a.m(l.parentNode,l))},i(e){s||(aU(a),s=!0)},o(e){aH(a),s=!1},d(e){e&&ai(r),c[o].d(e),e&&ai(l)}}}function hq(e){let t,r,n=[],o=new Map,a=e[2],l=e=>e[0]+e[1];for(let t=0;t<a.length;t+=1){let r=hV(e,a,t),s=l(r);o.set(s,n[t]=hY(s,r))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=al()},m(e,o){for(let t=0;t<n.length;t+=1)n[t].m(e,o);at(e,t,o),r=!0},p(e,[r]){62&r&&(a=e[2],aV(),n=aK(n,r,l,1,e,a,o,t.parentNode,aq,hY,t,hV),aj())},i(e){if(!r){for(let e=0;e<a.length;e+=1)aU(n[e]);r=!0}},o(e){for(let e=0;e<n.length;e+=1)aH(n[e]);r=!1},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&ai(t)}}}function hK(e,t,r){let n,o;let{items:a}=t,{discardEmptyItems:l=!0}=t,{key:s=""}=t,d={Button:h3,ImageButton:cT,ImageButtonList:cI,Dropdown:uG,Select:hN,RadioGroup:uS,Input:uM,Panel:uq,ProgressIndicator:hs,ShapeStyle:hh,ToggleSlider:ho,ColorPicker:hz,ShorthandControl:hD},c=e=>!P(e)||!!d[e],u=e=>{if(!e)return!1;let[t,,r,n=[]]=e;return!!c(t)||n.some(u)||r.textContent||r.innerHTML};return e.$$set=e=>{"items"in e&&r(6,a=e.items),"discardEmptyItems"in e&&r(7,l=e.discardEmptyItems),"key"in e&&r(0,s=e.key)},e.$$.update=()=>{1&e.$$.dirty&&r(1,n=s),192&e.$$.dirty&&r(2,o=(a&&l?a.filter(u):a)||[])},[s,n,o,d,(e={})=>{let{textContent:t,innerHTML:r,...n}=e;return n},c,a,l]}class hJ extends a3{constructor(e){super(),a5(this,e,hK,hq,oj,{items:6,discardEmptyItems:7,key:0})}get items(){return this.$$.ctx[6]}set items(e){this.$$set({items:e}),a_()}get discardEmptyItems(){return this.$$.ctx[7]}set discardEmptyItems(e){this.$$set({discardEmptyItems:e}),a_()}get key(){return this.$$.ctx[0]}set key(e){this.$$set({key:e}),a_()}}function hQ(e){let t,r;return t=new cx({props:{class:"PinturaButtonIcon",$$slots:{default:[h0]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};0x20000008&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function h0(e){let t;return{c(){t=an("g")},m(r,n){at(r,t,n),t.innerHTML=e[3]},p(e,r){8&r&&(t.innerHTML=e[3])},d(e){e&&ai(t)}}}function h1(e){let t;return{c(){ad(t=ar("span"),"class",e[11])},m(r,n){at(r,t,n),t.innerHTML=e[0]},p(e,r){1&r&&(t.innerHTML=e[0]),2048&r&&ad(t,"class",e[11])},i:oB,o:oB,d(e){e&&ai(t)}}}function h2(e){let t,r,n;return r=new hJ({props:{items:e[0]}}),{c(){t=ar("span"),a1(r.$$.fragment),ad(t,"class",e[11])},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,o){let a={};1&o&&(a.items=e[0]),r.$set(a),(!n||2048&o)&&ad(t,"class",e[11])},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function h4(e){let t,r,n,o,a,l;let s=e[27].default,d=oZ(s,e,e[29],null),c=d||function(e){let t,r,n,o,a,l;let s=e[3]&&hQ(e),d=[h2,h1],c=[];function u(e,t){return+(1&t&&(n=null),null==n&&(n=!!ro(e[0])),!n)}return a=c[o=u(e,-1)]=d[o](e),{c(){t=ar("span"),s&&s.c(),r=aa(),a.c(),ad(t,"class",e[13])},m(e,n){at(e,t,n),s&&s.m(t,null),o9(t,r),c[o].m(t,null),l=!0},p(e,n){e[3]?s?(s.p(e,n),8&n&&aU(s,1)):((s=hQ(e)).c(),aU(s,1),s.m(t,r)):s&&(aV(),aH(s,1,1,()=>{s=null}),aj());let h=o;(o=u(e,n))===h?c[o].p(e,n):(aV(),aH(c[h],1,1,()=>{c[h]=null}),aj(),(a=c[o])?a.p(e,n):(a=c[o]=d[o](e)).c(),aU(a,1),a.m(t,null)),(!l||8192&n)&&ad(t,"class",e[13])},i(e){l||(aU(s),aU(a),l=!0)},o(e){aH(s),aH(a),l=!1},d(e){e&&ai(t),s&&s.d(),c[o].d()}}}(e);return{c(){t=ar("button"),c&&c.c(),ad(t,"type",e[6]),t.disabled=e[5],ad(t,"class",e[12]),ad(t,"title",r=cw(e[0],e[1],e[2]))},m(r,s){at(r,t,s),c&&c.m(t,null),e[28](t),o=!0,a||(l=[as(t,"keydown",function(){oV(e[8])&&e[8].apply(this,arguments)}),as(t,"click",function(){oV(e[7])&&e[7].apply(this,arguments)}),as(t,"pointerdown",function(){oV(e[14])&&e[14].apply(this,arguments)}),o2(n=d9.call(null,t,e[4])),o2(e[9].call(null,t))],a=!0)},p(a,[l]){e=a,d?d.p&&(!o||0x20000000&l)&&oK(d,s,e,e[29],o?oq(s,e[29],l,null):oJ(e[29]),null):c&&c.p&&(!o||10249&l)&&c.p(e,o?l:-1),(!o||64&l)&&ad(t,"type",e[6]),(!o||32&l)&&(t.disabled=e[5]),(!o||4096&l)&&ad(t,"class",e[12]),(!o||7&l&&r!==(r=cw(e[0],e[1],e[2])))&&ad(t,"title",r),n&&oV(n.update)&&16&l&&n.update.call(null,e[4])},i(e){o||(aU(c,e),o=!0)},o(e){aH(c,e),o=!1},d(r){r&&ai(t),c&&c.d(r),e[28](null),a=!1,oN(l)}}}function h5(e,t,r){let n,o,a,l,s,d,c;let{$$slots:u={},$$scope:h}=t,{class:p}=t,{label:$}=t,{title:m}=t,{shortcut:f}=t,{labelClass:g}=t,{innerClass:y}=t,{hideLabel:b=!1}=t,{icon:v}=t,{style:w}=t,{disabled:S}=t,{type:k="button"}=t,{onclick:C}=t,{onkeydown:T}=t,{onhold:M}=t,{action:P=()=>{}}=t,{holdThreshold:E=500}=t,{holdSpeedUpFactor:R=.5}=t,{holdSpeedMin:I=20}=t,A=e=>{r(25,d=setTimeout(()=>{M(),A(Math.max(e*R,I))},e))};return e.$$set=e=>{"class"in e&&r(15,p=e.class),"label"in e&&r(0,$=e.label),"title"in e&&r(1,m=e.title),"shortcut"in e&&r(2,f=e.shortcut),"labelClass"in e&&r(16,g=e.labelClass),"innerClass"in e&&r(17,y=e.innerClass),"hideLabel"in e&&r(18,b=e.hideLabel),"icon"in e&&r(3,v=e.icon),"style"in e&&r(4,w=e.style),"disabled"in e&&r(5,S=e.disabled),"type"in e&&r(6,k=e.type),"onclick"in e&&r(7,C=e.onclick),"onkeydown"in e&&r(8,T=e.onkeydown),"onhold"in e&&r(19,M=e.onhold),"action"in e&&r(9,P=e.action),"holdThreshold"in e&&r(20,E=e.holdThreshold),"holdSpeedUpFactor"in e&&r(21,R=e.holdSpeedUpFactor),"holdSpeedMin"in e&&r(22,I=e.holdSpeedMin),"$$scope"in e&&r(29,h=e.$$scope)},e.$$.update=()=>{0x6080000&e.$$.dirty&&r(26,o=M?()=>{d&&(clearTimeout(d),r(25,d=void 0),document.documentElement.removeEventListener("pointerup",o))}:x),0x4180000&e.$$.dirty&&r(14,n=M?()=>{document.documentElement.addEventListener("pointerup",o),A(E)}:x),131072&e.$$.dirty&&r(13,a=d0(["PinturaButtonInner",y])),294912&e.$$.dirty&&r(12,l=d0(["PinturaButton",b&&"PinturaButtonIconOnly",p])),327680&e.$$.dirty&&r(11,s=d0([b?"implicit":"PinturaButtonLabel",g]))},[$,m,f,v,w,S,k,C,T,P,c,s,l,a,n,p,g,y,b,M,E,R,I,e=>cb(e,c),()=>c,d,o,u,function(e){aE[e?"unshift":"push"](()=>{r(10,c=e)})},h]}class h3 extends a3{constructor(e){super(),a5(this,e,h5,h4,oj,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var h6=(e,t)=>{let r=e.findIndex(t);if(r>=0)return e.splice(r,1)};let h8=e=>ri(e.button)&&0!==e.button;var h7=(e,t={})=>{let r,n,o,a,l,s,d,c,u;let{inertia:h=!1,inertiaDurationMultiplier:p=80,shouldStartInteraction:$=()=>!0,pinch:m=!1,multiTouch:f,getEventPosition:g=e=>eO(e.clientX,e.clientY),observeKeys:y=!1}=t;function x(t,r){e.dispatchEvent(new CustomEvent(t,{detail:r}))}function b(){a&&a(),a=void 0}let v=[],w=e=>0===e.timeStamp?Date.now():e.timeStamp,S=e=>{let t=w(e),r={timeStamp:t,timeStampInitial:t,position:g(e),origin:g(e),velocity:eB(),velocityHistory:[],velocityAverage:eB(),translation:eB(),interactionState:void 0,event:e};v.push(r),r.interactionState=F(v)},k=e=>{let t=h6(v,t=>t.event.pointerId===e.pointerId);if(t)return t[0]},C=()=>{v.length=0},T=e=>v.findIndex(t=>t.event.pointerId===e.pointerId),M=()=>{let e=eV(v[0].position);if(v[1]){let t=(v[1].position.x-e.x)*.5,r=(v[1].position.y-e.y)*.5;e.x+=t,e.y+=r}return e},P=e=>{e.origin.x=e.position.x,e.origin.y=e.position.y,e.translation.x=0,e.translation.y=0},E=e=>{let t=R(e);if(!t)return;let r=w(e),n=g(e),o=Math.max(1,r-t.timeStamp);t.velocity.x=(n.x-t.position.x)/o,t.velocity.y=(n.y-t.position.y)/o,t.velocityHistory.push(eV(t.velocity)),t.velocityHistory=t.velocityHistory.slice(-3),t.velocityAverage=t.velocityHistory.reduce((e,t,r,n)=>(e.x+=t.x/n.length,e.y+=t.y/n.length,e),eB()),t.translation.x=n.x-t.origin.x,t.translation.y=n.y-t.origin.y,t.timeStamp=r,t.position.x=n.x,t.position.y=n.y,t.event=e},R=e=>{let t=T(e);if(!(t<0))return v[t]},I=()=>1===v.length,A=()=>2===v.length,L=(e,t)=>e.reduce((e,r)=>e+=e8(t,r.position),0)/e.length,F=e=>{let t=e9(e.map(e=>e.position)),r=L(e,t);return{center:t,distance:r,velocity:e9(e.map(e=>e.velocity)),translation:e9(e.map(e=>e.translation))}},z=0;e.addEventListener("pointerdown",W);let B=["Meta","Control","Alt","Shift"];function O(e){if(!B.includes(e.key))return;let{metaKey:t,ctrlKey:r,altKey:n,shiftKey:o}=e;_({metaKey:t,ctrlKey:r,altKey:n,shiftKey:o})}let D=Date.now(),_=e=>{let t=eV(v[0].translation),r=d;m&&A()&&(r*=e8(v[0].position,v[1].position)/l,e0(t,v[1].translation)),e0(t,s);let n=Date.now();n-D<16||(D=n,x("interactionupdate",{position:M(),translation:t,scalar:m?r:void 0,isMultiTouching:A(),...e}))};function W(t){if(!(A()||h8(t))&&$(t,e)){if(b(),S(t),y&&(window.addEventListener("keydown",O),window.addEventListener("keyup",O)),I())document.documentElement.addEventListener("pointermove",N),document.documentElement.addEventListener("pointerup",V),document.documentElement.addEventListener("pointercancel",V),document.addEventListener("visibilitychange",U),c=!1,d=1,s=eB(),l=void 0,x("interactionstart",{origin:eV(R(t).origin)});else if(m)c=!0,l=e8(v[0].position,v[1].position),s.x+=v[0].translation.x,s.y+=v[0].translation.y,P(v[0]);else if(!1===f)return C(),G(),x("interactioncancel")}}function N(e){e.preventDefault(),E(e);let{metaKey:t=!1,ctrlKey:r=!1,altKey:n=!1,shiftKey:o=!1}=y?e:{};_({metaKey:t,ctrlKey:r,altKey:n,shiftKey:o})}function V(e){if(!R(e))return;let t=M(),$=k(e);if(m&&I()){let e=e8(v[0].position,$.position);d*=e/l,s.x+=v[0].translation.x+$.translation.x,s.y+=v[0].translation.y+$.translation.y,P(v[0])}let f=!1,g=!1;if(!c&&$){let e=performance.now(),t=e-$.timeStampInitial;f=64>e6($.translation)&&t<300,g=!!(u&&f&&e-z<700&&128>e6(u,$.position)),f&&(u=eV($.position),z=e)}if(v.length>0)return;G();let y=eV($.translation),b=eV($.velocityAverage),w=!1;x("interactionrelease",{isTap:f,isDoubleTap:g,position:t,translation:y,scalar:d,preventInertia:()=>w=!0});let S=e8(b);if(w||!h||S<.25)return H(y,{isTap:f,isDoubleTap:g});n=eV(t),o=eV(y),(r=dS(eV(y),{easing:dv,duration:S*p})).set({x:y.x+50*b.x,y:y.y+50*b.y}).then(()=>{a&&H(oG(r),{isTap:f,isDoubleTap:g})}),a=r.subscribe(j)}function j(e){e&&x("interactionupdate",{position:eO(n.x+(e.x-o.x),n.y+(e.y-o.y)),translation:e,scalar:m?d:void 0})}function U(e){if("visible"===document.visibilityState||!v.length)return;let t=F(v);b(),x("interactionend",{...t}),v.length=0,G()}function H(e,t){b(),x("interactionend",{...t,translation:e,scalar:m?d:void 0})}function G(){y&&window.removeEventListener("keydown",O),y&&window.removeEventListener("keyup",O),document.documentElement.removeEventListener("pointermove",N),document.documentElement.removeEventListener("pointerup",V),document.documentElement.removeEventListener("pointercancel",V),document.addEventListener("visibilitychange",U)}return{destroy(){b(),e.removeEventListener("pointerdown",W)}}};function h9(e,t){return t?t*Math.sign(e)*Math.log10(1+Math.abs(e)/t):e}let pe=(e,t,r)=>{if(!t||!r)return{...e};let n=e.x+h9(t.x-e.x,r),o=e.x+e.width+h9(t.x+t.width-(e.x+e.width),r),a=e.y+h9(t.y-e.y,r);return{x:n,y:a,width:o-n,height:e.y+e.height+h9(t.y+t.height-(e.y+e.height),r)-a}},pt=(e,t,r)=>t&&r?eO(e.x+h9(t.x-e.x,r),e.y+h9(t.y-e.y,r)):{...e};var pi=(e,t)=>{if(e){if(/em/.test(e))return 16*parseInt(e,10);if(/px/.test(e))return parseInt(e,10)}},pr=(e,t)=>{let r=e.detail||0,{deltaX:n,deltaY:o,wheelDelta:a,wheelDeltaX:l,wheelDeltaY:s}=e,{fixScrollDirection:d=!1}=t||{};return ri(l)&&Math.abs(l)>Math.abs(s)?r=-(l/120):ri(n)&&Math.abs(n)>Math.abs(o)?r=n/20:(a||s)&&(r=-((a||s)/120)),r||(r=o/20),(er()||iw())&&(r*=2),d&&iU()&&(r*=-1),r};function pn(e){let t,r,n,o,a,l,s;let d=e[38].default,c=oZ(d,e,e[37],null);return{c(){t=ar("div"),r=ar("div"),c&&c.c(),a$(r,"transform",e[6]),ad(t,"class",n=d0(["PinturaScrollable",e[0]])),ad(t,"data-direction",e[1]),ad(t,"data-state",e[7]),a$(t,"--scrollable-feather-start-opacity",e[4]),a$(t,"--scrollable-feather-end-opacity",e[5])},m(n,d){at(n,t,d),o9(t,r),c&&c.m(r,null),e[40](t),a=!0,l||(s=[as(r,"interactionstart",e[10]),as(r,"interactionupdate",e[12]),as(r,"interactionend",e[13]),as(r,"interactionrelease",e[11]),o2(h7.call(null,r,{inertia:!0})),as(r,"measure",e[39]),o2(dO.call(null,r)),as(t,"wheel",e[15],{passive:!1}),as(t,"scroll",e[17]),as(t,"focusin",e[16]),as(t,"nudge",e[18]),as(t,"measure",e[14]),o2(dO.call(null,t,{observePosition:!0})),o2(o=uK.call(null,t,{direction:"x"===e[1]?"horizontal":"vertical",stopKeydownPropagation:!1}))],l=!0)},p(e,l){c&&c.p&&(!a||64&l[1])&&oK(c,d,e,e[37],a?oq(d,e[37],l,null):oJ(e[37]),null),64&l[0]&&a$(r,"transform",e[6]),(!a||1&l[0]&&n!==(n=d0(["PinturaScrollable",e[0]])))&&ad(t,"class",n),(!a||2&l[0])&&ad(t,"data-direction",e[1]),(!a||128&l[0])&&ad(t,"data-state",e[7]),o&&oV(o.update)&&2&l[0]&&o.update.call(null,{direction:"x"===e[1]?"horizontal":"vertical",stopKeydownPropagation:!1}),16&l[0]&&a$(t,"--scrollable-feather-start-opacity",e[4]),32&l[0]&&a$(t,"--scrollable-feather-end-opacity",e[5])},i(e){a||(aU(c,e),a=!0)},o(e){aH(c,e),a=!1},d(r){r&&ai(t),c&&c.d(r),e[40](null),l=!1,oN(s)}}}function po(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,b,v,w,S;let{$$slots:k={},$$scope:C}=t,T=ak(),M="idle",P=dk(0);oX(e,P,e=>r(36,u=e));let{class:E}=t,{scrollBlockInteractionDist:R=5}=t,{scrollStep:I=10}=t,{scrollFocusMargin:A=64}=t,{scrollDirection:L="x"}=t,{scrollAutoCancel:F=!1}=t,{elasticity:z=0}=t,{onscroll:B=x}=t,{maskFeatherSize:O}=t,{maskFeatherStartOpacity:D}=t,{maskFeatherEndOpacity:_}=t,{scroll:W}=t,N=aT("fixScrollDirection");oX(e,N,e=>r(47,h=e));let V=!0,j=P.subscribe(e=>{let t=eB();t[L]=e,B(t)}),U=e=>Math.max(Math.min(0,e),m[n]-$[n]),H=e=>{let t=eJ(eO(e.x-v.x,e.y-v.y),Math.abs);v=eV(e);let r=e6(t),n=t.x-t.y;return!(r>1&&n<-.5)},G=(e,t={})=>{let{elastic:n=!1,animate:o=!1,preventScrollState:a=!1}=t;!(Math.abs(e-p)>R)||"idle"!==M||f||a||r(29,M="scrolling");let l=U(e),s=n&&z&&!f?l+h9(e-l,z):l,d=!0;o?d=!1:V||(d=!f),V=!1,P.set(s,{hard:d}).then(e=>{f&&(V=!0)})};return aS(()=>{j()}),e.$$set=e=>{"class"in e&&r(0,E=e.class),"scrollBlockInteractionDist"in e&&r(22,R=e.scrollBlockInteractionDist),"scrollStep"in e&&r(23,I=e.scrollStep),"scrollFocusMargin"in e&&r(24,A=e.scrollFocusMargin),"scrollDirection"in e&&r(1,L=e.scrollDirection),"scrollAutoCancel"in e&&r(25,F=e.scrollAutoCancel),"elasticity"in e&&r(26,z=e.elasticity),"onscroll"in e&&r(27,B=e.onscroll),"maskFeatherSize"in e&&r(21,O=e.maskFeatherSize),"maskFeatherStartOpacity"in e&&r(19,D=e.maskFeatherStartOpacity),"maskFeatherEndOpacity"in e&&r(20,_=e.maskFeatherEndOpacity),"scroll"in e&&r(28,W=e.scroll),"$$scope"in e&&r(37,C=e.$$scope)},e.$$.update=()=>{if(2&e.$$.dirty[0]&&r(33,n="x"===L?"width":"height"),2&e.$$.dirty[0]&&r(31,o=L.toUpperCase()),8&e.$$.dirty[0]&&r(35,a=g&&getComputedStyle(g)),8&e.$$.dirty[0]|16&e.$$.dirty[1]&&r(34,l=a&&pi(a.getPropertyValue("--scrollable-feather-size"))),0x40180004&e.$$.dirty[0]|44&e.$$.dirty[1]&&null!=u&&m&&null!=l&&$){let e=-1*u/l,t=-(m[n]-$[n]-u)/l;r(19,D=lb(1-e,0,1)),r(20,_=lb(1-t,0,1)),r(21,O=l),r(4,w=D),r(5,S=_)}0x10000008&e.$$.dirty[0]&&g&&void 0!==W&&(ri(W)?G(W):G(W.scrollOffset,W)),0x40000004&e.$$.dirty[0]|4&e.$$.dirty[1]&&r(32,s=m&&$?$[n]>m[n]:void 0),0x20000000&e.$$.dirty[0]|2&e.$$.dirty[1]&&r(7,d=d0([M,s?"overflows":void 0])),35&e.$$.dirty[1]&&r(6,c=s?`translate${o}(${u}px)`:"none")},[E,L,$,g,w,S,c,d,P,N,()=>{s&&(b=!1,y=!0,v=eO(0,0),f=!1,r(29,M="idle"),p=oG(P))},({detail:e})=>{s&&(f=!0,r(29,M="idle"))},({detail:e})=>{if(s&&!b){if(!(y&&(y=!1,.1>e6(e.translation)))){if(F&&"x"===L&&!H(e.translation)){b=!0;return}G(p+e.translation[L],{elastic:!0})}}},({detail:e})=>{if(!s||b)return;let t=U(p+e.translation[L]);V=!1,P.set(t).then(e=>{f&&(V=!0)})},({detail:e})=>{r(30,m=e),T("measure",{x:e.x,y:e.y,width:e.width,height:e.height})},e=>{if(!s)return;e.preventDefault(),e.stopPropagation();let t=e.shiftKey,r=pr(e,{fixScrollDirection:h})*(t?-1:1);G(oG(P)+r*I,{animate:!0})},e=>{if(!s||!f)return;let t=e.target;e.target.classList.contains("implicit")&&(t=t.parentNode);let r=t["x"===L?"offsetLeft":"offsetTop"],o=r+t["x"===L?"offsetWidth":"offsetHeight"],a=oG(P),l=A+O;a+r<l?G(-r+l):a+o>m[n]-l&&G(m[n]-o-l,{animate:!0})},()=>{r(3,g["x"===L?"scrollLeft":"scrollTop"]=0,g)},({detail:e})=>{if(g.querySelector("[data-focus-visible]"))return;let t=-2*e[L];G(oG(P)+t*I,{animate:!0,preventScrollState:!0})},D,_,O,R,I,A,F,z,B,W,M,m,o,s,n,l,a,u,C,k,e=>r(2,$=e.detail),function(e){aE[e?"unshift":"push"](()=>{r(3,g=e)})}]}class pa extends a3{constructor(e){super(),a5(this,e,po,pn,oj,{class:0,scrollBlockInteractionDist:22,scrollStep:23,scrollFocusMargin:24,scrollDirection:1,scrollAutoCancel:25,elasticity:26,onscroll:27,maskFeatherSize:21,maskFeatherStartOpacity:19,maskFeatherEndOpacity:20,scroll:28},null,[-1,-1])}}function pl(e){let t,r,n,o,a;return{c(){ad(t=ar("span"),"class","PinturaStatusMessage")},m(r,l){at(r,t,l),t.innerHTML=e[0],n=!0,o||(a=[as(t,"measure",function(){oV(e[1])&&e[1].apply(this,arguments)}),o2(dO.call(null,t))],o=!0)},p(r,[o]){e=r,(!n||1&o)&&(t.innerHTML=e[0])},i(o){n||(az(()=>{r||(r=aX(t,e[4],{duration:e[2]},!0)),r.run(1)}),n=!0)},o(o){r||(r=aX(t,e[4],{duration:e[2]},!1)),r.run(0),n=!1},d(e){e&&ai(t),e&&r&&r.end(),o=!1,oN(a)}}}function ps(e,t,r){let n,o;let{text:a}=t,{onmeasure:l=x}=t,s=aT("isAnimated");return oX(e,s,e=>r(5,o=e)),e.$$set=e=>{"text"in e&&r(0,a=e.text),"onmeasure"in e&&r(1,l=e.onmeasure)},e.$$.update=()=>{32&e.$$.dirty&&r(2,n=500*!!o)},[a,l,n,s,function(e,{duration:t}){return{duration:t,tick:t=>{e.style.opacity=t}}},o]}class pd extends a3{constructor(e){super(),a5(this,e,ps,pl,oj,{text:0,onmeasure:1})}}function pc(e){let t,r,n;let o=e[5].default,a=oZ(o,e,e[4],null);return{c(){t=ar("span"),a&&a.c(),ad(t,"class",r=`PinturaStatusAside ${e[1]}`),a$(t,"transform",e[2]),a$(t,"opacity",e[0])},m(e,r){at(e,t,r),a&&a.m(t,null),n=!0},p(e,[l]){a&&a.p&&(!n||16&l)&&oK(a,o,e,e[4],n?oq(o,e[4],l,null):oJ(e[4]),null),(!n||2&l&&r!==(r=`PinturaStatusAside ${e[1]}`))&&ad(t,"class",r),4&l&&a$(t,"transform",e[2]),1&l&&a$(t,"opacity",e[0])},i(e){n||(aU(a,e),n=!0)},o(e){aH(a,e),n=!1},d(e){e&&ai(t),a&&a.d(e)}}}function pu(e,t,r){let n;let{$$slots:o={},$$scope:a}=t,{offset:l=0}=t,{opacity:s=0}=t,{class:d}=t;return e.$$set=e=>{"offset"in e&&r(3,l=e.offset),"opacity"in e&&r(0,s=e.opacity),"class"in e&&r(1,d=e.class),"$$scope"in e&&r(4,a=e.$$scope)},e.$$.update=()=>{8&e.$$.dirty&&r(2,n=`translateX(${l}px)`)},[s,d,n,l,a,o]}class ph extends a3{constructor(e){super(),a5(this,e,pu,pc,oj,{offset:3,opacity:0,class:1})}}var pp=e=>e.selectionStart=e.selectionEnd=e.value.length;let p$=null;var pm=()=>(null===p$&&(p$=k()&&"visualViewport"in window),p$),pf=e=>{if(!pm())return!1;let t=visualViewport.height,r=()=>{e(visualViewport.height<t?"visible":"hidden")};return visualViewport.addEventListener("resize",r),()=>visualViewport.removeEventListener("resize",r)};function pg(e){let t,r;let n=[{onclick:e[1]},e[3]],o={};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return t=new h3({props:o}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=10&r[0]?aJ(n,[2&r[0]&&{onclick:e[1]},8&r[0]&&aQ(e[3])]):{};t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function py(e){let t,r;let n=[{onclick:e[0]},{class:"PinturaInputFormButtonConfirm"},e[2]],o={};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return t=new h3({props:o}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=5&r[0]?aJ(n,[1&r[0]&&{onclick:e[0]},n[1],4&r[0]&&aQ(e[2])]):{};t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function px(e){let t,r,n,o,a,l,s,d;let c=e[3]&&pg(e),u=e[28].default,h=oZ(u,e,e[27],null),p=e[2]&&py(e);return{c(){t=ar("div"),r=ar("div"),c&&c.c(),n=aa(),o=ar("div"),h&&h.c(),a=aa(),p&&p.c(),ad(o,"class","PinturaInputFormFields"),ad(r,"class","PinturaInputFormInner"),ad(t,"class","PinturaInputForm"),ad(t,"data-layout",e[4]),a$(t,"opacity",e[6]),a$(t,"left",e[7]),a$(t,"top",e[8]),a$(t,"right",e[9]),a$(t,"bottom",e[10])},m(u,$){at(u,t,$),o9(t,r),c&&c.m(r,null),o9(r,n),o9(r,o),h&&h.m(o,null),o9(r,a),p&&p.m(r,null),e[29](t),l=!0,s||(d=[as(o,"keydown",e[14]),as(t,"focusin",e[11]),as(t,"focusout",e[12]),as(t,"measure",e[13]),o2(dO.call(null,t))],s=!0)},p(e,o){e[3]?c?(c.p(e,o),8&o[0]&&aU(c,1)):((c=pg(e)).c(),aU(c,1),c.m(r,n)):c&&(aV(),aH(c,1,1,()=>{c=null}),aj()),h&&h.p&&(!l||0x8000000&o[0])&&oK(h,u,e,e[27],l?oq(u,e[27],o,null):oJ(e[27]),null),e[2]?p?(p.p(e,o),4&o[0]&&aU(p,1)):((p=py(e)).c(),aU(p,1),p.m(r,null)):p&&(aV(),aH(p,1,1,()=>{p=null}),aj()),(!l||16&o[0])&&ad(t,"data-layout",e[4]),64&o[0]&&a$(t,"opacity",e[6]),128&o[0]&&a$(t,"left",e[7]),256&o[0]&&a$(t,"top",e[8]),512&o[0]&&a$(t,"right",e[9]),1024&o[0]&&a$(t,"bottom",e[10])},i(e){l||(aU(c),aU(h,e),aU(p),l=!0)},o(e){aH(c),aH(h,e),aH(p),l=!1},d(r){r&&ai(t),c&&c.d(),h&&h.d(r),p&&p.d(),e[29](null),s=!1,oN(d)}}}function pb(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m;let{$$slots:f={},$$scope:g}=t,{onconfirm:y}=t,{oncancel:x}=t,{autoFocus:b=!0}=t,{autoPositionCursor:v=!0}=t,{buttonConfirm:w}=t,{buttonCancel:S}=t,{layout:k="stack"}=t,{parentRect:C}=t,{align:T}=t,{justify:M}=t,{parentMargin:P=16}=t,{panelOffset:E=eB()}=t,R=!1,I={top:void 0,bottom:void 0},A=0,L=(e,t,r,n,o)=>{let a,l;return a="center"===n?e.x+.5*e.width-.5*t.width:"right"===n?e.x+e.width-t.width-o:e.x+o,l="center"===r?e.y+.5*e.height-.5*t.height:"bottom"===r?e.y+e.height-t.height-o:e.y+o,{top:`${l}px`,right:"auto",bottom:"auto",left:`${a}px`}},F=e=>/textarea/i.test(e),z=e=>{let t;let r=e=>t=e.touches[0].screenY,n=e=>{let r=e.touches[0].screenY,n=e.target;/textarea/i.test(n.nodeName)?(r>t?0==n.scrollTop&&e.preventDefault():r<t?n.scrollTop+n.offsetHeight==n.scrollHeight&&e.preventDefault():e.preventDefault(),t=r):e.preventDefault()};return e.addEventListener("touchstart",r),e.addEventListener("touchmove",n),()=>{e.removeEventListener("touchstart",r),e.removeEventListener("touchmove",n)}},B=()=>{let e=s.querySelector("input, textarea");e.focus(),A>=1||e.select()},D=()=>{R=!0,!W&&(iG()||O())&&r(23,I={top:"1em",bottom:"auto"}),iG()&&z(s),r(6,A=1)},_=()=>{R=!1,r(6,A=0)},W=pf(e=>{if(!l){r(23,I={top:"4.5em",bottom:"auto"});return}if("hidden"===e&&!R){B();return}clearTimeout(u),u=void 0,r(23,I={top:`${visualViewport.height-c.height-E.y}px`}),"visible"===e?(r(5,s.dataset.stick=!0,s),B(),D()):_()});return av(()=>{b&&B()}),aS(()=>{W&&W()}),e.$$set=e=>{"onconfirm"in e&&r(0,y=e.onconfirm),"oncancel"in e&&r(1,x=e.oncancel),"autoFocus"in e&&r(15,b=e.autoFocus),"autoPositionCursor"in e&&r(16,v=e.autoPositionCursor),"buttonConfirm"in e&&r(2,w=e.buttonConfirm),"buttonCancel"in e&&r(3,S=e.buttonCancel),"layout"in e&&r(4,k=e.layout),"parentRect"in e&&r(17,C=e.parentRect),"align"in e&&r(18,T=e.align),"justify"in e&&r(19,M=e.justify),"parentMargin"in e&&r(20,P=e.parentMargin),"panelOffset"in e&&r(21,E=e.panelOffset),"$$scope"in e&&r(27,g=e.$$scope)},e.$$.update=()=>{4325376&e.$$.dirty[0]&&r(26,n=C&&c),0x45e0000&e.$$.dirty[0]&&r(25,o=n?L(C,c,T,M,P):void 0),0x6000000&e.$$.dirty[0]&&r(7,h=n?o.left:void 0),0x6800000&e.$$.dirty[0]&&r(8,p=n?o.top:I.top),0x6000000&e.$$.dirty[0]&&r(9,$=n?o.right:void 0),0x6800000&e.$$.dirty[0]&&r(10,m=n?o.bottom:I.bottom),32&e.$$.dirty[0]&&r(24,a=s&&getComputedStyle(s)),0x1000000&e.$$.dirty[0]&&(l=a&&"1"===a.getPropertyValue("--editor-modal"))},[y,x,w,S,k,s,A,h,p,$,m,e=>{(F(e.target)||cO(e.target))&&(d=Date.now(),v&&pp(e.target),clearTimeout(u),u=setTimeout(D,200))},e=>{Date.now()-d>50||(e.stopPropagation(),B())},({detail:e})=>{r(22,c={width:e.width,height:e.height})},e=>"Enter"===e.key?y():"Escape"===e.key?x():void 0,b,v,C,T,M,P,E,c,I,a,o,n,g,f,function(e){aE[e?"unshift":"push"](()=>{r(5,s=e)})}]}class pv extends a3{constructor(e){super(),a5(this,e,pb,px,oj,{onconfirm:0,oncancel:1,autoFocus:15,autoPositionCursor:16,buttonConfirm:2,buttonCancel:3,layout:4,parentRect:17,align:18,justify:19,parentMargin:20,panelOffset:21},null,[-1,-1])}}var pw=(e,t)=>{e.fastSeek&&e.fastSeek(t),e.currentTime=t};let pS=["aspectRatio","isRotatedSideways","flip","cropSize"],pk=lz.map(([e])=>e).filter(e=>!pS.includes(e)),pC=function(e,t,r){let n=[];return{set:t,update:r,publish:e=>{n.forEach(t=>t(e))},subscribe:t=>(n.push(t),e(t),()=>{n=n.filter(e=>e!==t)})}};var pT=()=>{let e,t;let r=pk.reduce((e,r)=>(e[r]=pC(e=>{if(!t)return e();t.stores[r].subscribe(e)()},e=>{t&&t.stores[r].set(e)},e=>{t&&t.stores[r].update(e)}),e),{});return{update:n=>{if(t=n,e&&(e.forEach(e=>e()),e=void 0),!n){r.file.publish(void 0),r.loadState.publish(void 0);return}e=pk.map(e=>n.stores[e].subscribe(t=>{r[e].publish(t)}))},stores:r,destroy:()=>{e&&e.forEach(e=>e())}}},pM=(e,t=!0)=>r=>{"ping"===r.type&&(t&&r.stopPropagation(),e(r.detail.type,r.detail.data))},pP=(e,t)=>new CustomEvent("ping",{detail:{type:e,data:t},cancelable:!0,bubbles:!0}),pE=(e,t)=>(t?sF(e,t):e).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),pR=(e,t)=>{let r=matchMedia(e);return r.addListener(t),t(r),{get matches(){return r.matches},destroy:()=>r.removeListener(t)}},pI=(e,t=ey)=>{let{subscribe:r,set:n}=a7(void 0);return{subscribe:r,destroy:pR(e,({matches:e})=>n(t(e))).destroy}},pA=()=>{if(!iG())return!1;let[,e,t]=(navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[]).map(e=>parseInt(e,10)||0);return e>13||13===e&&t>=4},pL=(e,t,r)=>{let{sub:n,pub:o}=rk(),{willUndo:a=()=>!0}=r||{},l=[],s=a7(0),d=[],c=()=>d.forEach(e=>e({index:oG(s),length:l.length})),u={get index(){return oG(s)},set index(i){i=lb(i=Number.isInteger(i)?i:0,0,l.length-1),s.set(i),t(l[u.index]),c()},get state(){return l[l.length-1]},length:()=>l.length,undo(){if(!1===a())return;let e=u.index--;return o("undo",e),e},redo(){let e=u.index++;return o("redo",u.index),e},revert(){l.length=1,u.index=0,o("revert")},write(r){r&&t({...e(),...r});let n=e(),a=l[l.length-1];JSON.stringify(n)!==JSON.stringify(a)&&(l.length=u.index+1,l.push(n),s.set(l.length-1),c(),o("writehistory"))},set(e={}){l.length=0,u.index=0;let t=Array.isArray(e)?e:[e];l.push(...t),u.index=l.length-1},get:()=>[...l],subscribe:e=>(d.push(e),e({index:u.index,length:l.length}),()=>d.splice(d.indexOf(e),1)),on:n};return u},pF=async e=>M(await _(e)),pz=(e,t,r)=>new Promise((n,o)=>{(async()=>{let a;l6(e)&&n(await l3(e));let l=await t.read(e),s=e=>eo(e,r).then(e=>t.apply(e,l)).then(n).catch(o);if(q(e)||!Z()||iw()||iG())return s(e);try{a=await et((e,t)=>createImageBitmap(e).then(e=>t(null,e)).catch(t),[e])}catch(e){}return a&&a.width?await T()?dl()&&l>1?n(await pF(a)):void n(a):n(t.apply(a,l)):s(e)})()}),pB=(e,t)=>new Promise(async r=>{if(e.width<t.width&&e.height<t.height)return r(e);let n=Math.min(t.width/e.width,t.height/e.height),o=n*e.width,a=n*e.height,l=R("canvas",{width:o,height:a}),s=l.getContext("2d",{willReadFrequently:!0}),d=F(e)?await _(e):e;s.drawImage(d,0,0,o,a),r(M(l))});let pO=null;var pD=()=>{if(null===pO){let e=R("canvas");pO=!!s1(e),L(e),e=void 0}return pO},p_=e=>/^image/.test(e.type)&&!/svg/.test(e.type);let pW=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],pN={precision:1e-4},pV={precision:.01*pN.precision};var pj=(e,t,r={})=>{let n;let{resize:o=1,opacity:a=0}=r,l={opacity:[dk(a,{...pN,stiffness:.1}),ey],resize:[dk(o,{...pN,stiffness:.1}),ey],translation:[dk(void 0,pN),ey],rotation:[dk(void 0,pV),ey],origin:[dk(void 0,pN),ey],scale:[dk(void 0,pV),ey],gamma:[dk(void 0,pV),e=>e||1],vignette:[dk(void 0,pV),e=>e||0],colorMatrix:[dk([...pW],pN),e=>e||[...pW]],convolutionMatrix:[a7(void 0),e=>e&&e.clarity||void 0],backgroundColor:[dk(void 0,pN),(e,t,r)=>{if(Array.isArray(e)){if(Array.isArray(t)){let n=[...e];0===t[3]?(n[3]=0,r(n)):0===n[3]&&((e=[...t])[3]=0)}return e}}],backgroundImage:[a7(void 0),ey]},s=Object.entries(l).map(([e,t])=>[e,t[0]]),d=s.map(([,e])=>e),c=Object.entries(l).reduce((e,[t,r])=>{let[o,a]=r;return e[t]=(e,r)=>o.set(a(e,n[t],e=>{o.set(e,{hard:!0})}),r),e},{}),u=a9(d,r=>((n=r.reduce((e,t,r)=>(e[s[r][0]]=t,e),{})).data=e,n.size=t,n.scale*=r[1],n));return u.get=()=>n,u.set=(e,t)=>{let r={hard:!t};Object.entries(e).forEach(([e,t])=>{c[e]&&c[e](t,r)})},u},pU=()=>{let e=[],t=[],r=[],n=(t,n)=>{let a=e.indexOf(t);a<0||(r[a]=n,o())},o=()=>{t.forEach(e=>e(r))},a=e=>{e.unsub=e.subscribe(t=>n(e,t)),o()};return{get length(){return e.length},clear:()=>{e.forEach(e=>e.unsub()),e.length=0,r.length=0},unshift:t=>{e.unshift(t),a(t)},get:t=>e[t],push:t=>{e.push(t),a(t)},remove:t=>{t.unsub();let n=e.indexOf(t);e.splice(n,1),r.splice(n,1)},forEach:t=>e.forEach(t),filter:t=>e.filter(t),subscribe:e=>(t.push(e),e(r),()=>{t.splice(t.indexOf(e),1)})}},pH=e=>e[0]<.25&&e[1]<.25&&e[2]<.25,pG=(e={})=>new Promise(t=>{let{accept:r="image/*"}=e,n=R("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:r}),o=()=>{let[e]=n.files;n.parentNode&&n.remove(),n.removeEventListener("change",o),t(e)};n.addEventListener("change",o),iG()&&document.body.append(n),n.click()}),pX=e=>{try{return e()}catch(e){console.error(e)}},pZ=([e,t])=>e+(t-e)*.5,pY=e=>Math.round(100*e),pq=e=>eO(e.clientX,e.clientY),pK=(e,t,r)=>e1(e1(pq(e),t),r);function pJ(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,x,b,v,w,S,k,C,T,M,P,E,R,I,A,L,F,z,B;let{root:O}=t,{locale:D}=t,{stores:_}=t,{allowPan:W=!0}=t,{allowZoom:N=!0}=t,{enablePan:V=!0}=t,{enableZoom:j=!0}=t,{enableZoomControls:U=j}=t,{enableZoomInput:H=!0}=t,{enablePanInput:G=!0}=t,{enablePanLimit:X=!0}=t,{panLimitGutterScalar:Z=0}=t,{zoomOptions:Y=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=t,{zoomAdjustStep:q=.25}=t,{zoomAdjustFactor:K=.1}=t,{zoomAdjustWheelFactor:J=1}=t,{elasticity:Q=5}=t,{imageSelectionRectCentered:ee}=t,{imageSelectionRectScalar:et}=t,{zoomLevel:ei=null}=t,{zoomControls:er}=t,{zoomMultiTouching:en=!1}=t,{isAnimated:eo,isInteracting:ea,rootRect:el,stageRect:es,stageScalar:ed,imageSelectionPan:ec,imageSelectionZoom:eu,imageSelectionStageFitScalar:eh,imageSelectionRect:ep,imageSelectionStoredState:e$,imagePreviewUpscale:em}=_;oX(e,eo,e=>r(70,S=e)),oX(e,ea,e=>r(69,v=e)),oX(e,el,e=>r(66,y=e)),oX(e,es,e=>r(65,g=e)),oX(e,ed,e=>r(46,w=e)),oX(e,ec,e=>r(64,$=e)),oX(e,eu,e=>r(43,p=e)),oX(e,eh,e=>r(44,m=e)),oX(e,ep,e=>r(67,x=e)),oX(e,e$,e=>r(71,k=e)),oX(e,em,e=>r(45,f=e));let ef=aT("fixScrollDirection");oX(e,ef,e=>r(68,b=e));let eg=!1,ey=e=>{let t=O.querySelector(".PinturaMain > .PinturaUtilMain")||O.querySelector('div[tabindex="0"] .PinturaUtilMain');return!(!t||!t.contains(e.target)||cD(e.target))},ex=(e={})=>{let{pan:t=$,zoom:r=p}=e;o1(e$,k={translation:t,zoom:r},k)},eb=()=>$&&0===$.x&&0===$.y,ev=()=>{eb()||o1(ec,$=eB(),$)},ew=()=>{o1(eu,p=j?k.zoom:void 0,p),o1(ec,$=V?eV(k.translation):eb()?$:eB(),$),eC.set(p)},eS=()=>{o1(eu,p=void 0,p),ev(),eC.set(void 0,{hard:!0})},ek=()=>{eS(),ex()},eC=dk(void 0,{precision:.01});eC.subscribe(e=>{if(void 0===e){o1(eu,p=void 0,p),eb()||o1(ec,$=eB(),$);return}let t=p;e<=1?eb()||o1(ec,$=eB(),$):e<=t&&o1(ec,$=e4($,.8),$),o1(eu,p=e,p)});let eT=e=>{eC.update(t=>{let r=e(t||m);return ex({zoom:r}),r})},eM=e=>{e?eC.set(e,{hard:!1===S}):(e=void 0,eC.set(void 0,{hard:!0})),o1(eu,p=e,p),ex({zoom:e})},eP=(e,t)=>e.findIndex(e=>e===t),eE=(e,t)=>{let r=et*t,n={...ee},o=1-lb(Z,0,1);tD(n,r<o?r:o);let a={...ee};tD(a,r),tO(a,e);let l={...a};return a.x>n.x&&(l.x=n.x),a.y>n.y&&(l.y=n.y),a.x+a.width<n.x+n.width&&(l.x=n.x+n.width-a.width),a.y+a.height<n.y+n.height&&(l.y=n.y+n.height-a.height),e1(tB(l),tB(n))},eR=({translation:e,zoom:t=1,elastify:r=!0})=>{if(!L)return;let n=eO(L.x+e.x,L.y+e.y);if(!X)return n;let o=eE(n,t);return r?pt(o,n,Q):o},eI=()=>{T=void 0,o1(ea,v=!0,v),r(34,eg=G),C=!1,z=!1,L={...$},F=f?p||m:a?p||1:p||m},eA=e=>{let{scalar:t,translation:o,isMultiTouching:a}=e.detail;if(!L||!(a||G))return;a&&e4(o,.5),(G||a)&&(C=!0),en||r(13,en=a);let l=n?lb(F*t,s,d):1,c=eR({translation:o,zoom:l,elastify:!0});z=eX(c)<(B=eX($)),n&&eu.set(l),ec.set(c),T=en&&{translation:e.detail.translation,scalar:t}},eL=e=>{o1(ea,v=!1,v),r(34,eg=!1),r(13,en=!1),z&&B<50&&(L=void 0,F=void 0,ec.set(eB()))},eF=e=>{o1(ea,v=!1,v),r(34,eg=!1),r(13,en=!1),Promise.resolve().then(()=>{if(C&&L){let t=T||e.detail,r=n?lb(F*t.scalar,s,d):1,o=eR({elastify:!1,translation:t.translation,zoom:r});ec.set(o)}L=void 0,F=void 0,G&&e.detail.isDoubleTap&&ek(),ex()})},ez=Date.now(),eD=0,e_=!1,eW=!1,eN=e=>{if(!ey(e)||(e.preventDefault(),e.stopPropagation(),eW))return;clearTimeout(M);let t=pr(e,{fixScrollDirection:b}),r=Date.now(),n=r-ez;ez=r;let o=Math.abs(t/n)>.2;eD=o?eD+1:0;let a=-1*t*J;eU(pK(e,y,g),1+a/(o?50:100),{isZoomingFast:o})},eU=(e,t,{isZoomingFast:r})=>{let n=f?p||m:a?p||1:p||m,o=n*t,l=eB(),c=$,u=f?m:a?1:m,h=Math.abs(o-u),g=n>u,y=n<u,b=o>n,v=o<n,w=g&&v||y&&b,S=eD>=5;if(r||(e_=!1),eD>0&&!e_&&(e_=w),S&&e_){ek(),eW=!0,setTimeout(()=>{eW=!1},100);return}if(S)return;!r&&w&&h<=.05&&(M=setTimeout(()=>{ek()},250)),o1(eu,p=lb(o,s,d),p);let k=tT(x);tD(k,n),tO(k,c);let C=tB(k),T=tT(k);tD(T,1+(p-n),e);let P=e2(e1(tB(T),C),n);ej(l,c.x+P.x,c.y+P.y),v&&r?o1(ec,$=e4(eV($),.85),$):o1(ec,$=eE(l,n),$),ex()},eH=e=>(e?"add":"remove")+"EventListener",eG=e=>{e.preventDefault(),E={...$},I=tT(x),R=pK(e,y,g),P=f?p||m:a?p||1:p||m},eZ=e=>{e.preventDefault(),o1(eu,p=lb(e.scale*P,s,d),p);let t=tT(I);tD(t,P),tO(t,E);let r=tB(t),n=tT(t);tD(n,1+(p-P),R);let o=e2(e1(tB(n),r),P);o1(ec,$=eE({x:E.x+o.x,y:E.y+o.y},p),$)},eY=e=>{e.preventDefault()},eq=e=>{O[eH(e)]("wheel",eN),iG()||(O[eH(e)]("gesturestart",eG),O[eH(e)]("gesturechange",eZ),O[eH(e)]("gestureend",eY))},eK=e=>{let t=eH(e);O[t]("interactionstart",eI),O[t]("interactionupdate",eA),O[t]("interactionrelease",eL),O[t]("interactionend",eF)};return av(()=>{A=h7(O,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:ey})}),aS(()=>{eq(!1),eK(!1),A.destroy(),A=void 0}),e.$$set=e=>{"root"in e&&r(14,O=e.root),"locale"in e&&r(15,D=e.locale),"stores"in e&&r(16,_=e.stores),"allowPan"in e&&r(17,W=e.allowPan),"allowZoom"in e&&r(18,N=e.allowZoom),"enablePan"in e&&r(19,V=e.enablePan),"enableZoom"in e&&r(20,j=e.enableZoom),"enableZoomControls"in e&&r(21,U=e.enableZoomControls),"enableZoomInput"in e&&r(22,H=e.enableZoomInput),"enablePanInput"in e&&r(23,G=e.enablePanInput),"enablePanLimit"in e&&r(24,X=e.enablePanLimit),"panLimitGutterScalar"in e&&r(25,Z=e.panLimitGutterScalar),"zoomOptions"in e&&r(26,Y=e.zoomOptions),"zoomAdjustStep"in e&&r(27,q=e.zoomAdjustStep),"zoomAdjustFactor"in e&&r(28,K=e.zoomAdjustFactor),"zoomAdjustWheelFactor"in e&&r(29,J=e.zoomAdjustWheelFactor),"elasticity"in e&&r(30,Q=e.elasticity),"imageSelectionRectCentered"in e&&r(31,ee=e.imageSelectionRectCentered),"imageSelectionRectScalar"in e&&r(32,et=e.imageSelectionRectScalar),"zoomLevel"in e&&r(33,ei=e.zoomLevel),"zoomControls"in e&&r(12,er=e.zoomControls),"zoomMultiTouching"in e&&r(13,en=e.zoomMultiTouching)},e.$$.update=()=>{5505024&e.$$.dirty[0]&&r(36,n=N&&j&&H),655360&e.$$.dirty[0]&&r(35,o=W&&V),393216&e.$$.dirty[0]&&(W||N?ew():eS()),32768&e.$$.dirty[1]&&(a=w>=1),0x4008000&e.$$.dirty[0]|57344&e.$$.dirty[1]&&r(40,l=[(f||w<1)&&[m,pY(m)+"%",{sublabel:D.labelZoomFit}],...Y.map(e=>[e,pY(e)+"%"])].filter(Boolean).map(e=>(1===e[0]&&(e[2]={sublabel:D.labelZoomActual}),e)).sort((e,t)=>{let r=e[0]||m,n=t[0]||m;return r<n?-1:+(n<r)})),8704&e.$$.dirty[1]&&r(38,s=Math.min(l.reduce((e,[t])=>t<e?t:e,Number.MAX_SAFE_INTEGER),m)),512&e.$$.dirty[1]&&r(37,d=l.reduce((e,[t])=>t>e?t:e,Number.MIN_SAFE_INTEGER)),4&e.$$.dirty[1]&&null!==ei&&eM(ei),61440&e.$$.dirty[1]&&r(42,u=p||(f||w<1?m:1)),2560&e.$$.dirty[1]&&r(39,c=eP(l.map(([e])=>e),u)),2048&e.$$.dirty[1]&&r(41,h=pY(u)+"%"),0x18248000&e.$$.dirty[0]|6080&e.$$.dirty[1]&&r(12,er=(N||N)&&U?[["Button","zoom-out",{hideLabel:!0,label:D.labelZoomOut,icon:D.iconZoomOut,disabled:p===s,onclick:()=>eT(e=>Math.max(s,e-q)),onhold:()=>eT(e=>Math.max(s,e*(1-K)))}],["Dropdown","zoom-level",{label:h,title:D.labelZoom,labelClass:"PinturaFixedWidthCharacters",options:l,selectedIndex:c,onchange:e=>eM(e.value)}],["Button","zoom-in",{hideLabel:!0,label:D.labelZoomIn,icon:D.iconZoomIn,disabled:p===d,onclick:()=>eT(e=>Math.min(d,e+q)),onhold:()=>eT(e=>Math.min(d,e*(1+K)))}]]:[]),16384&e.$$.dirty[0]|32&e.$$.dirty[1]&&O&&eq(n),16384&e.$$.dirty[0]|16&e.$$.dirty[1]&&O&&eK(o),8404992&e.$$.dirty[0]|24&e.$$.dirty[1]&&O&&O.style.setProperty("--cursor",o&&G?eg?"grabbing":"grab":"")},[eo,ea,el,es,ed,ec,eu,eh,ep,e$,em,ef,er,en,O,D,_,W,N,V,j,U,H,G,X,Z,Y,q,K,J,Q,ee,et,ei,eg,o,n,d,s,c,l,h,u,p,m,f,w]}class pQ extends a3{constructor(e){super(),a5(this,e,pJ,null,oj,{root:14,locale:15,stores:16,allowPan:17,allowZoom:18,enablePan:19,enableZoom:20,enableZoomControls:21,enableZoomInput:22,enablePanInput:23,enablePanLimit:24,panLimitGutterScalar:25,zoomOptions:26,zoomAdjustStep:27,zoomAdjustFactor:28,zoomAdjustWheelFactor:29,elasticity:30,imageSelectionRectCentered:31,imageSelectionRectScalar:32,zoomLevel:33,zoomControls:12,zoomMultiTouching:13},null,[-1,-1,-1,-1])}}let{window:p0}=aZ;function p1(e){let t,r,n;let o=e[41]&&p2(e),a=e[38]&&$t(e);return{c(){o&&o.c(),t=aa(),a&&a.c(),r=al()},m(e,l){o&&o.m(e,l),at(e,t,l),a&&a.m(e,l),at(e,r,l),n=!0},p(e,n){e[41]?o?(o.p(e,n),1024&n[1]&&aU(o,1)):((o=p2(e)).c(),aU(o,1),o.m(t.parentNode,t)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj()),e[38]?a?(a.p(e,n),128&n[1]&&aU(a,1)):((a=$t(e)).c(),aU(a,1),a.m(r.parentNode,r)):a&&(aV(),aH(a,1,1,()=>{a=null}),aj())},i(e){n||(aU(o),aU(a),n=!0)},o(e){aH(o),aH(a),n=!1},d(e){o&&o.d(e),e&&ai(t),a&&a.d(e),e&&ai(r)}}}function p2(e){let t,r,n,o,a;let l=[p5,p4],s=[];function d(e,t){return e[39]?0:e[35]?1:-1}return~(n=d(e))&&(o=s[n]=l[n](e)),{c(){t=ar("div"),r=ar("p"),o&&o.c(),a$(r,"transform",e[72]),ad(t,"class","PinturaStatus"),a$(t,"opacity",e[54])},m(e,o){at(e,t,o),o9(t,r),~n&&s[n].m(r,null),a=!0},p(e,a){let c=n;(n=d(e))===c?~n&&s[n].p(e,a):(o&&(aV(),aH(s[c],1,1,()=>{s[c]=null}),aj()),~n?((o=s[n])?o.p(e,a):(o=s[n]=l[n](e)).c(),aU(o,1),o.m(r,null)):o=null),1024&a[2]&&a$(r,"transform",e[72]),8388608&a[1]&&a$(t,"opacity",e[54])},i(e){a||(aU(o),a=!0)},o(e){aH(o),a=!1},d(e){e&&ai(t),~n&&s[n].d()}}}function p4(e){let t,r,n,o;t=new pd({props:{text:e[35].text||"",onmeasure:e[221]}});let a=e[35].aside&&p3(e);return{c(){a1(t.$$.fragment),r=aa(),a&&a.c(),n=al()},m(e,l){a2(t,e,l),at(e,r,l),a&&a.m(e,l),at(e,n,l),o=!0},p(e,r){let o={};16&r[1]&&(o.text=e[35].text||""),t.$set(o),e[35].aside?a?(a.p(e,r),16&r[1]&&aU(a,1)):((a=p3(e)).c(),aU(a,1),a.m(n.parentNode,n)):a&&(aV(),aH(a,1,1,()=>{a=null}),aj())},i(e){o||(aU(t.$$.fragment,e),aU(a),o=!0)},o(e){aH(t.$$.fragment,e),aH(a),o=!1},d(e){a4(t,e),e&&ai(r),a&&a.d(e),e&&ai(n)}}}function p5(e){let t,r,n,o;return t=new pd({props:{text:e[39],onmeasure:e[221]}}),n=new ph({props:{class:"PinturaStatusIcon",offset:e[82],opacity:e[83],$$slots:{default:[$e]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment),r=aa(),a1(n.$$.fragment)},m(e,a){a2(t,e,a),at(e,r,a),a2(n,e,a),o=!0},p(e,r){let o={};256&r[1]&&(o.text=e[39]),t.$set(o);let a={};1048576&r[2]&&(a.offset=e[82]),2097152&r[2]&&(a.opacity=e[83]),8&r[0]|0x1000000&r[19]&&(a.$$scope={dirty:r,ctx:e}),n.$set(a)},i(e){o||(aU(t.$$.fragment,e),aU(n.$$.fragment,e),o=!0)},o(e){aH(t.$$.fragment,e),aH(n.$$.fragment,e),o=!1},d(e){a4(t,e),e&&ai(r),a4(n,e)}}}function p3(e){let t,r;return t=new ph({props:{class:"PinturaStatusButton",offset:e[82],opacity:e[83],$$slots:{default:[p7]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};1048576&r[2]&&(n.offset=e[82]),2097152&r[2]&&(n.opacity=e[83]),16&r[1]|0x1000000&r[19]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function p6(e){let t,r;return t=new hs({props:{progress:e[35].progressIndicator.progress}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16&r[1]&&(n.progress=e[35].progressIndicator.progress),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function p8(e){let t,r;let n=[e[35].closeButton,{hideLabel:!0}],o={};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return t=new h3({props:o}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=16&r[1]?aJ(n,[aQ(e[35].closeButton),n[1]]):{};t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function p7(e){let t,r,n;let o=e[35].progressIndicator.visible&&p6(e),a=e[35].closeButton&&e[35].text&&p8(e);return{c(){o&&o.c(),t=aa(),a&&a.c(),r=al()},m(e,l){o&&o.m(e,l),at(e,t,l),a&&a.m(e,l),at(e,r,l),n=!0},p(e,n){e[35].progressIndicator.visible?o?(o.p(e,n),16&n[1]&&aU(o,1)):((o=p6(e)).c(),aU(o,1),o.m(t.parentNode,t)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj()),e[35].closeButton&&e[35].text?a?(a.p(e,n),16&n[1]&&aU(a,1)):((a=p8(e)).c(),aU(a,1),a.m(r.parentNode,r)):a&&(aV(),aH(a,1,1,()=>{a=null}),aj())},i(e){n||(aU(o),aU(a),n=!0)},o(e){aH(o),aH(a),n=!1},d(e){o&&o.d(e),e&&ai(t),a&&a.d(e),e&&ai(r)}}}function p9(e){let t;let r=e[3].iconSupportError+"";return{c(){t=an("g")},m(e,n){at(e,t,n),t.innerHTML=r},p(e,n){8&n[0]&&r!==(r=e[3].iconSupportError+"")&&(t.innerHTML=r)},d(e){e&&ai(t)}}}function $e(e){let t,r;return t=new cx({props:{$$slots:{default:[p9]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};8&r[0]|0x1000000&r[19]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function $t(e){var t;let r,n,o,a,l,s,d,c,u,h,p,$,m,f;let g=e[10]&&$i(e),y=e[46]&&e[45]&&$r(e),x=[$c,$d],b=[];function v(e,t){return+!e[46]}function w(t){e[444](t)}function S(t){e[445](t)}function k(t){e[446](t)}a=b[o=+!e[46]]=x[o](e),s=new dQ({props:{isAnimated:e[53],isTransparent:e[20],pixelRatio:e[57],textPixelRatio:e[6],backgroundColor:e[56],maskRect:e[58],maskOpacity:e[73]?e[73].maskOpacity:1,maskMarkupOpacity:e[7],maskFrameOpacity:e[5],clipAnnotationsToImage:e[85],images:e[55],interfaceImages:e[86],loadImageData:e[28],enableGrid:e[11],gridSize:e[87],gridColors:[e[88],e[89]],gridOpacity:e[90],selectionColor:e[91],csp:e[92]||{},willRequest:e[81]||e[93],willRender:e[441],didRender:e[442]}});let C={root:e[2],locale:e[3],stores:e[202],allowPan:e[95],enablePan:e[17],enablePanLimit:e[21],panLimitGutterScalar:e[22],enablePanInput:e[96],allowZoom:e[97],enableZoom:e[18],enableZoomInput:void 0!==e[19]?e[19]:e[98],enableZoomControls:e[99],zoomOptions:e[13]||e[23],zoomAdjustStep:e[14]||e[24],zoomAdjustFactor:e[15]||e[25],zoomAdjustWheelFactor:e[16]||e[26],imageSelectionRectCentered:e[100],imageSelectionRectScalar:e[101],elasticity:$f*e[8]};return void 0!==e[0]&&(C.zoomLevel=e[0]),void 0!==e[33]&&(C.zoomControls=e[33]),void 0!==e[34]&&(C.zoomMultiTouching=e[34]),h=new pQ({props:C}),aE.push(()=>a0(h,"zoomLevel",w)),aE.push(()=>a0(h,"zoomControls",S)),aE.push(()=>a0(h,"zoomMultiTouching",k)),{c(){g&&g.c(),r=aa(),y&&y.c(),n=aa(),a.c(),l=aa(),a1(s.$$.fragment),d=aa(),c=ar("div"),u=aa(),a1(h.$$.fragment),ad(c,"class","PinturaRootPortal")},m(t,a){g&&g.m(t,a),at(t,r,a),y&&y.m(t,a),at(t,n,a),b[o].m(t,a),at(t,l,a),a2(s,t,a),at(t,d,a),at(t,c,a),e[443](c),at(t,u,a),a2(h,t,a),f=!0},p(e,t){var d;e[10]?g?(g.p(e,t),1024&t[0]&&aU(g,1)):((g=$i(e)).c(),aU(g,1),g.m(r.parentNode,r)):g&&(aV(),aH(g,1,1,()=>{g=null}),aj()),e[46]&&e[45]?y?(y.p(e,t),49152&t[1]&&aU(y,1)):((y=$r(e)).c(),aU(y,1),y.m(n.parentNode,n)):y&&(aV(),aH(y,1,1,()=>{y=null}),aj());let c=o;(o=+!e[46])===c?b[o].p(e,t):(aV(),aH(b[c],1,1,()=>{b[c]=null}),aj(),(a=b[o])?a.p(e,t):(a=b[o]=x[o](e)).c(),aU(a,1),a.m(l.parentNode,l));let u={};4194304&t[1]&&(u.isAnimated=e[53]),1048576&t[0]&&(u.isTransparent=e[20]),0x4000000&t[1]&&(u.pixelRatio=e[57]),64&t[0]&&(u.textPixelRatio=e[6]),0x2000000&t[1]&&(u.backgroundColor=e[56]),0x8000000&t[1]&&(u.maskRect=e[58]),2048&t[2]&&(u.maskOpacity=e[73]?e[73].maskOpacity:1),128&t[0]&&(u.maskMarkupOpacity=e[7]),32&t[0]&&(u.maskFrameOpacity=e[5]),8388608&t[2]&&(u.clipAnnotationsToImage=e[85]),0x1000000&t[1]&&(u.images=e[55]),0x1000000&t[2]&&(u.interfaceImages=e[86]),0x10000000&t[0]&&(u.loadImageData=e[28]),2048&t[0]&&(u.enableGrid=e[11]),0x2000000&t[2]&&(u.gridSize=e[87]),0xc000000&t[2]&&(u.gridColors=[e[88],e[89]]),0x10000000&t[2]&&(u.gridOpacity=e[90]),0x20000000&t[2]&&(u.selectionColor=e[91]),0x40000000&t[2]&&(u.csp=e[92]||{}),524288&t[2]|1&t[3]&&(u.willRequest=e[81]||e[93]),512&t[0]|0x10270040&t[1]|2&t[3]&&(u.willRender=e[441]),62&t[2]&&(u.didRender=e[442]),s.$set(u);let f={};4&t[0]&&(f.root=e[2]),8&t[0]&&(f.locale=e[3]),4&t[3]&&(f.allowPan=e[95]),131072&t[0]&&(f.enablePan=e[17]),2097152&t[0]&&(f.enablePanLimit=e[21]),4194304&t[0]&&(f.panLimitGutterScalar=e[22]),8&t[3]&&(f.enablePanInput=e[96]),16&t[3]&&(f.allowZoom=e[97]),262144&t[0]&&(f.enableZoom=e[18]),524288&t[0]|32&t[3]&&(f.enableZoomInput=void 0!==e[19]?e[19]:e[98]),64&t[3]&&(f.enableZoomControls=e[99]),8396800&t[0]&&(f.zoomOptions=e[13]||e[23]),0x1004000&t[0]&&(f.zoomAdjustStep=e[14]||e[24]),0x2008000&t[0]&&(f.zoomAdjustFactor=e[15]||e[25]),0x4010000&t[0]&&(f.zoomAdjustWheelFactor=e[16]||e[26]),128&t[3]&&(f.imageSelectionRectCentered=e[100]),256&t[3]&&(f.imageSelectionRectScalar=e[101]),256&t[0]&&(f.elasticity=$f*e[8]),!p&&1&t[0]&&(p=!0,f.zoomLevel=e[0],aB(()=>p=!1)),!$&&4&t[1]&&($=!0,f.zoomControls=e[33],aB(()=>$=!1)),!m&&8&t[1]&&(m=!0,f.zoomMultiTouching=e[34],aB(()=>m=!1)),h.$set(f)},i(e){f||(aU(g),aU(y),aU(a),aU(s.$$.fragment,e),aU(h.$$.fragment,e),f=!0)},o(e){aH(g),aH(y),aH(a),aH(s.$$.fragment,e),aH(h.$$.fragment,e),f=!1},d(t){g&&g.d(t),t&&ai(r),y&&y.d(t),t&&ai(n),b[o].d(t),t&&ai(l),a4(s,t),t&&ai(d),t&&ai(c),e[443](null),t&&ai(u),a4(h,t)}}}function $i(e){let t,r,n,o,a;return r=new hJ({props:{items:e[69]}}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"class","PinturaNav PinturaNavTools")},m(l,s){at(l,t,s),a2(r,t,null),n=!0,o||(a=[as(t,"measure",e[430]),o2(dO.call(null,t))],o=!0)},p(e,t){let n={};128&t[2]&&(n.items=e[69]),r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r),o=!1,oN(a)}}}function $r(e){let t,r,n;return r=new pa({props:{elasticity:e[8]*$y,scrollDirection:e[76]?"y":"x",$$slots:{default:[$s]},$$scope:{ctx:e}}}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"class","PinturaNav PinturaNavMain")},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,t){let n={};256&t[0]&&(n.elasticity=e[8]*$y),16384&t[2]&&(n.scrollDirection=e[76]?"y":"x"),12288&t[1]|135168&t[2]|0x1000000&t[19]&&(n.$$scope={dirty:t,ctx:e}),r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function $n(e){let t,r;let n=[e[79],{tabs:e[44]}],o={$$slots:{default:[$l,({tab:e})=>({612:e}),({tab:e})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8388608*!!e]]},$$scope:{ctx:e}};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return(t=new d7({props:o})).$on("select",e[431]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=8192&r[1]|131072&r[2]?aJ(n,[131072&r[2]&&aQ(e[79]),8192&r[1]&&{tabs:e[44]}]):{};0x1800000&r[19]&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function $o(e){let t,r;return t=new hJ({props:{items:e[44]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};8192&r[1]&&(n.items=e[44]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function $a(e){let t;let r=e[612].icon+"";return{c(){t=an("g")},m(e,n){at(e,t,n),t.innerHTML=r},p(e,n){8388608&n[19]&&r!==(r=e[612].icon+"")&&(t.innerHTML=r)},d(e){e&&ai(t)}}}function $l(e){let t,r,n,o,a;let l=e[612].label+"";return t=new cx({props:{$$slots:{default:[$a]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment),r=aa(),n=ar("span"),o=ao(l)},m(e,l){a2(t,e,l),at(e,r,l),at(e,n,l),o9(n,o),a=!0},p(e,r){let n={};0x1800000&r[19]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n),(!a||8388608&r[19])&&l!==(l=e[612].label+"")&&ah(o,l)},i(e){a||(aU(t.$$.fragment,e),a=!0)},o(e){aH(t.$$.fragment,e),a=!1},d(e){a4(t,e),e&&ai(r),e&&ai(n)}}}function $s(e){var t;let r,n,o,a;let l=[$o,$n],s=[];function d(e,t){return+!e[74]}return n=s[r=+!e[74]]=l[r](e),{c(){n.c(),o=al()},m(e,t){s[r].m(e,t),at(e,o,t),a=!0},p(e,t){var a;let d=r;(r=+!e[74])===d?s[r].p(e,t):(aV(),aH(s[d],1,1,()=>{s[d]=null}),aj(),(n=s[r])?n.p(e,t):(n=s[r]=l[r](e)).c(),aU(n,1),n.m(o.parentNode,o))},i(e){a||(aU(n),a=!0)},o(e){aH(n),a=!1},d(e){s[r].d(e),e&&ai(o)}}}function $d(e){let t,r,n;function o(t){e[437](t)}let a={locale:e[3],class:"PinturaMain",view:e[207](e[43]),props:e[206](e[43],e[27]),stores:e[202]};return void 0!==e[1][e[43]]&&(a.component=e[1][e[43]]),t=new cf({props:a}),aE.push(()=>a0(t,"component",o)),t.$on("measure",e[233]),t.$on("show",e[438]),t.$on("hide",e[439]),t.$on("fade",e[440]),{c(){a1(t.$$.fragment)},m(e,r){a2(t,e,r),n=!0},p(e,n){let o={};8&n[0]&&(o.locale=e[3]),4096&n[1]&&(o.view=e[207](e[43])),0x8000000&n[0]|4096&n[1]&&(o.props=e[206](e[43],e[27])),!r&&2&n[0]|4096&n[1]&&(r=!0,o.component=e[1][e[43]],aB(()=>r=!1)),t.$set(o)},i(e){n||(aU(t.$$.fragment,e),n=!0)},o(e){aH(t.$$.fragment,e),n=!1},d(e){a4(t,e)}}}function $c(e){let t,r;let n=[{class:"PinturaMain"},{visible:e[62]},e[79],{panels:e[78]}],o={$$slots:{default:[$u,({panel:e,panelIsActive:t})=>({610:e,611:t}),({panel:e,panelIsActive:t})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2097152*!!e|4194304*!!t]]},$$scope:{ctx:e}};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return(t=new cu({props:o})).$on("measure",e[436]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=196609&r[2]?aJ(n,[n[0],1&r[2]&&{visible:e[62]},131072&r[2]&&aQ(e[79]),65536&r[2]&&{panels:e[78]}]):{};0x800000a&r[0]|0x1600000&r[19]&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function $u(e){let t,r,n;function o(t){e[432](t,e[610])}let a={locale:e[3],view:e[207](e[610]),props:e[206](e[610],e[27]),isActive:e[611],stores:e[202]};return void 0!==e[1][e[610]]&&(a.component=e[1][e[610]]),t=new cf({props:a}),aE.push(()=>a0(t,"component",o)),t.$on("measure",e[233]),t.$on("show",function(){return e[433](e[610])}),t.$on("hide",function(){return e[434](e[610])}),t.$on("fade",function(...t){return e[435](e[610],...t)}),{c(){a1(t.$$.fragment)},m(e,r){a2(t,e,r),n=!0},p(n,o){e=n;let a={};8&o[0]&&(a.locale=e[3]),2097152&o[19]&&(a.view=e[207](e[610])),0x8000000&o[0]|2097152&o[19]&&(a.props=e[206](e[610],e[27])),4194304&o[19]&&(a.isActive=e[611]),!r&&2&o[0]|2097152&o[19]&&(r=!0,a.component=e[1][e[610]],aB(()=>r=!1)),t.$set(a)},i(e){n||(aU(t.$$.fragment,e),n=!0)},o(e){aH(t.$$.fragment,e),n=!1},d(e){a4(t,e)}}}function $h(e){let t;return{c(){ad(t=ar("span"),"class","PinturaEditorOverlay"),a$(t,"opacity",e[102])},m(e,r){at(e,t,r)},p(e,r){512&r[3]&&a$(t,"opacity",e[102])},d(e){e&&ai(t)}}}function $p(e){let t,r;let n=[{layout:"row"},{parentRect:e[50]},e[60]],o={$$slots:{default:[$$]},$$scope:{ctx:e}};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return t=new pv({props:o}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=0x20080000&r[1]?aJ(n,[n[0],524288&r[1]&&{parentRect:e[50]},0x20000000&r[1]&&aQ(e[60])]):{};0x60000000&r[1]|0x1000000&r[19]&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function $$(e){let t,r,n;return{c(){(t=ar("input")).value=r=e[60].text,ad(t,"placeholder",n=e[60].placeholder),ad(t,"type","text"),ad(t,"spellcheck","false"),ad(t,"autocorrect","off"),ad(t,"autocapitalize","off")},m(r,n){at(r,t,n),e[447](t)},p(e,o){0x20000000&o[1]&&r!==(r=e[60].text)&&t.value!==r&&(t.value=r),0x20000000&o[1]&&n!==(n=e[60].placeholder)&&ad(t,"placeholder",n)},d(r){r&&ai(t),e[447](null)}}}function $m(e){let t,r,n,o,a,l;az(e[429]);let s=e[40]&&p1(e),d=e[102]>0&&$h(e),c=e[60]&&$p(e);return{c(){t=ar("div"),s&&s.c(),r=aa(),d&&d.c(),n=aa(),c&&c.c(),ad(t,"id",e[4]),ad(t,"class",e[77]),ad(t,"data-env",e[75]),ad(t,"dir",e[12])},m(u,h){at(u,t,h),s&&s.m(t,null),o9(t,r),d&&d.m(t,null),o9(t,n),c&&c.m(t,null),e[448](t),o=!0,a||(l=[as(p0,"keydown",e[224]),as(p0,"keyup",e[225]),as(p0,"blur",e[226]),as(p0,"paste",e[230]),as(p0,"resize",e[429]),as(t,"ping",function(){oV(e[68])&&e[68].apply(this,arguments)}),as(t,"contextmenu",e[227]),as(t,"touchstart",e[222],{passive:!1}),as(t,"touchmove",function(){oV(e[71])&&e[71].apply(this,arguments)}),as(t,"pointermove",function(){oV(e[70])&&e[70].apply(this,arguments)}),as(t,"transitionend",e[212]),as(t,"dropfiles",e[228]),as(t,"measure",e[449]),as(t,"click",function(){oV(e[42]?e[229]:x)&&(e[42]?e[229]:x).apply(this,arguments)}),o2(dO.call(null,t,{observeViewRect:!0,isMeasureRoot:!0})),o2(dD.call(null,t)),o2(dV.call(null,t))],a=!0)},p(a,l){(e=a)[40]?s?(s.p(e,l),512&l[1]&&aU(s,1)):((s=p1(e)).c(),aU(s,1),s.m(t,r)):s&&(aV(),aH(s,1,1,()=>{s=null}),aj()),e[102]>0?d?d.p(e,l):((d=$h(e)).c(),d.m(t,n)):d&&(d.d(1),d=null),e[60]?c?(c.p(e,l),0x20000000&l[1]&&aU(c,1)):((c=$p(e)).c(),aU(c,1),c.m(t,null)):c&&(aV(),aH(c,1,1,()=>{c=null}),aj()),(!o||16&l[0])&&ad(t,"id",e[4]),(!o||32768&l[2])&&ad(t,"class",e[77]),(!o||8192&l[2])&&ad(t,"data-env",e[75]),(!o||4096&l[0])&&ad(t,"dir",e[12])},i(e){o||(aU(s),aU(c),o=!0)},o(e){aH(s),aH(c),o=!1},d(r){r&&ai(t),s&&s.d(),d&&d.d(),c&&c.d(),e[448](null),a=!1,oN(l)}}}let $f=1,$g="stage-overlay",$y=10;function $x(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,b,v,w,S,k,C,T,E,R,I,A,F,z,B,_,W,N,V,j,H,G,X,Z,Y,q,J,Q,ee,et,ei,en,eo,ea,el,es,ed,ec,eu,eh,ep,e$,em,ef,eg,ex,eb,ev,ew,eS,ek,eC,eT,eM,eP,eE,eR,eI,eA,eF,ez,eD,eW,eN,eV,ej,eU,eH,eG,eX,eZ,eY,eq,eK,eQ,e0,e1,e2,e4,e5,e3,e6,e8,e7,e9,te,tt,ti,tr,tn,to,ta,tl,ts,tc,tu,th,tp,t$,tm,tf,tg,tx,tb,tv,tw,tS,tk,tC,tP,tR,tI,tL,tF,tB,t_,tW,tX,tZ,tK,tJ,tQ,t2,t4,t3,t8,t7,t9,ie,it,ii,ir,io,ia,il,is,id,ic,iu,ih,im,ig,iy,ix,ib,iv,iS,ik,iC,iT,iM,iP,iE,iR,iI,iA,iL,iF,iz,iB,iO,iD,i_,iN,iV,ij,iU,iH,iX,iZ,iY,iq,iK,iJ,iQ,i0,i1,i2,i4,i5,i3,i6,i8,i7,i9,re,rt,rr,rn,ro,ra,rl,rs,rd,rc,ru,rh,rp,rm,rf,rg,ry,rx,rb,rv,rw,rS,rC,rT,rM,rP,rE,rR,rI,rA,rL,rF,rz,rB,rO,rD,r_,rW;let rN,rV=oB,rj,rU=oB;oX(e,dC,e=>r(417,iB=e)),e.$$.on_destroy.push(()=>rV()),e.$$.on_destroy.push(()=>rU());let rH=rk(),rG=ak(),{class:rX}=t,{layout:rZ}=t,{stores:rY}=t,{locale:rq}=t,{id:rK}=t,{util:rJ}=t,{utils:rQ}=t,{animations:r0="auto"}=t,{disabled:r1=!1}=t,{previewUpscale:r4=!1}=t,{previewPad:r5=!1}=t,{previewMaskOpacity:r3=.95}=t,{previewImageDataMaxSize:r6}=t,{previewImageTextPixelRatio:r8}=t,{markupMaskOpacity:r7=1}=t,{zoomMaskOpacity:r9=.85}=t,{elasticityMultiplier:nt=10}=t,{willRevert:ni=()=>Promise.resolve(!0)}=t,{willProcessImage:nr=()=>Promise.resolve(!0)}=t,{willRenderCanvas:no=ey}=t,{willRenderToolbar:nl=ey}=t,{willRenderUtilTabs:nd=ey}=t,{willSetHistoryInitialState:nc=ey}=t,{enableButtonExport:nh=!0}=t,{enableButtonRevert:np=!0}=t,{enableNavigateHistory:n$=!0}=t,{enableToolbar:nm=!0}=t,{enableUtils:nf=!0}=t,{enableButtonClose:ng=!1}=t,{enableDropImage:ny=!1}=t,{enablePasteImage:nx=!1}=t,{enableBrowseImage:nb=!1}=t,{enableTransparencyGrid:nv=!1}=t,{layoutDirectionPreference:nw="auto"}=t,{layoutHorizontalUtilsPreference:nS="left"}=t,{layoutVerticalUtilsPreference:nk="bottom"}=t,{layoutVerticalToolbarPreference:nC="top"}=t,{layoutVerticalControlGroupsPreference:nT="bottom"}=t,{layoutVerticalControlTabsPreference:nM="bottom"}=t,{status:nP}=t,{formatStatusImageLoading:nE=function(e,t){let{state:r}=e;if(!r||!r.task)return t.statusImageLoadNone;if(r.error){if("IMAGE_TOO_SMALL"===r.error.code)return t.statusImageLoadMinSize;if("VIDEO_TOO_SHORT"===r.error.code){let e=Array.isArray(t.unitSeconds)?1===r.error.metadata.minDuration?t.unitSeconds[0]:t.unitSeconds[1]:t.unitSeconds;return sF(t.statusImageLoadMinDuration,{seconds:e},"{","}")}return t.statusImageLoadError}return"blob-to-bitmap"===r.task?t.statusImageLoadPrepare:t.statusImageLoadBusy}}=t,{formatStatusImageProcessing:nR=function(e,t){let{state:r}=e;if(r&&r.task)return"store"===r.task?r.error?t.statusImageUploadError:t.statusImageUploadBusy:r.error?t.statusImageProcessError:t.statusImageProcessBusy}}=t,{formatStatusSupportError:nI=function(e,t){let{features:r}=e;return{features:r.join(", ")}}}=t,{textDirection:nA}=t,{markupEditorZoomLevel:nL=null}=t,{markupEditorZoomLevels:nF}=t,{markupEditorZoomAdjustStep:nz}=t,{markupEditorZoomAdjustFactor:nB}=t,{markupEditorZoomAdjustWheelFactor:nO}=t,{markupEditorInteractionMode:nD=!1}=t,{muteAudio:n_=!0}=t,{willSetMediaInitialTimeOffset:nW=(e,t)=>e*pZ(t[0])}=t,{enablePan:nN=!0}=t,{enableZoom:nV=!0}=t,{enableZoomControls:nj=!0}=t,{enableZoomInput:nU}=t,{enablePanInput:nH}=t,{enableCanvasAlpha:nG=!1}=t,{enablePanLimit:nX}=t,{panLimitGutterScalar:nZ}=t,{pan:nY=null}=t,{zoomPresetOptions:nq=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=t,{zoomAdjustStep:nK=.25}=t,{zoomAdjustFactor:nJ=.1}=t,{zoomAdjustWheelFactor:nQ=1}=t,{zoomLevel:n0=null}=t,{fixScrollDirection:n1=!1}=t,n2=a7(n1);aC("fixScrollDirection",n2);let{imagePreviewSrc:n4}=t,{imageOrienter:n5={read:()=>1,apply:e=>e}}=t,{pluginComponents:n3}=t,{pluginOptions:n6={}}=t,n7=rH.sub,n9={},{root:oe}=t,ot=()=>{rN.setAttribute("data-redraw","true"),oC.set({})},oi=a7(!0);oX(e,oi,e=>r(483,tS=e));let or=a7(void 0);oX(e,or,e=>r(427,i1=e));let oa=a7(0);oX(e,oa,e=>r(424,iJ=e));let ol=a7(!1),os=()=>oa.set(ow()/ov()),od=e=>{ol.set("play"===e.type),rH.pub(e.type)},ou=e=>{if(!om())return;let t=Date.now();if(rx&&t-rx<16)return;rx=t;let r=iQ*e;if(r.toFixed(1)===ry)return;ry=r.toFixed(1);let n=rN,o=()=>{n.removeEventListener("seeked",o),ot()};n.addEventListener("seeked",o),pw(n,r)},oh=!1,op=()=>{if(!a||!om())return;rv=h,o1(or,i1=void 0,i1);let e=rN;oh=!1;let t=1/24,r=ov(),n=Math.abs(c*r-iJ*r)<=t,o=r-r*iJ<=t;(n||o)&&o1(oa,iJ=d,iJ),oS(iJ*ov()),e.play().catch(()=>{});let l=ow(),u=()=>{if(om())return;rb=requestAnimationFrame(u);let e=ow();e-l<=0&&(e=l+.01),l=e,o1(oa,iJ=e/ov(),iJ),rv>=0&&iJ>=c&&(o1(oa,iJ=c,iJ),o$()),h>-1&&(oh=!0),oh&&-1===h&&p>0&&(o1(oa,iJ=s[p][0],iJ),oS(iJ*ov())),o1(oN,iZ=iJ*ov(),iZ),ot()};u()},o$=()=>{!a||om()||(o1(or,i1=void 0,i1),rv=void 0,rN.pause(),cancelAnimationFrame(rb),ot())},om=()=>rN&&rN.paused,of=()=>{if(a)return om()?op():o$()},og=()=>{a&&(rN.muted=!0)},oy=()=>{a&&(rN.muted=!1)},ox=()=>{a&&o1(ob,i0=!i0,i0)},ob=a7(n_);oX(e,ob,e=>r(426,i0=e));let ov=()=>{if(a)return rN.duration},ow=()=>{if(a)return rN.currentTime},oS=e=>{a&&(pw(rN,e),o1(oa,iJ=e/iQ,iJ))},ok=e=>{a&&(rN.volume=Math.min(1,e))},oC=a7({});oX(e,oC,e=>r(52,tP=e)),aC("redrawTrigger",oC);let oT=a7(nt);oX(e,oT,e=>r(500,iq=e)),aC("elasticityMultiplier",oT);let oM=[],oP=dk();oX(e,oP,e=>r(102,rm=e));let oE=da()||1024,oR=td(oE,oE),oI=lX(),oA=e=>Promise.resolve(iY&&iY(e,{resourceType:"image"})).then(t=>{if(!1===t)return;let{headers:r,credentials:n}=t||{};return fetch(e,{headers:r,credentials:n}).then(e=>{if(200!==e.status)throw`${e.status} (${e.statusText})`;return e.blob()}).then(e=>pz(e,n5,oI)).then(e=>pB(e,f))}),{imageSourceToImageData:oF=e=>P(e)?oA(e):ip(e)?new Promise(t=>t(M(e))):iW(e)||i$(e)?pz(e,n5,oI).then(e=>pB(e,f)):void 0}=t,oO=pT(),{file:oD,size:o_,duration:oW,currentTime:oN,trim:oV,volume:oj,minDuration:oU,maxDuration:oG,loadState:oZ,processState:oY,cropAspectRatio:oq,cropLimitToImage:oK,crop:oJ,cropMinSize:oQ,cropMaxSize:o0,cropRange:o2,cropOrigin:o4,cropRectAspectRatio:o5,rotation:o3,rotationRange:o6,targetSize:o8,flipX:o7,flipY:o9,backgroundColor:ae,backgroundImage:at,colorMatrix:ai,convolutionMatrix:ar,gamma:an,vignette:ao,noise:aa,decoration:al,annotation:as,manipulation:ad,redaction:ac,frame:au,selection:ah,state:ap}=oO.stores;oX(e,oD,e=>r(401,it=e)),oX(e,o_,e=>r(375,to=e)),oX(e,oW,e=>r(425,iQ=e)),oX(e,oN,e=>r(499,iZ=e)),oX(e,oV,e=>r(422,iX=e)),oX(e,oj,e=>r(423,iK=e)),oX(e,oG,e=>r(428,i2=e)),oX(e,oZ,e=>r(393,tK=e)),oX(e,oY,e=>r(392,tZ=e)),oX(e,oq,e=>r(496,iD=e)),oX(e,oK,e=>r(85,i6=e)),oX(e,oJ,e=>r(412,iS=e)),oX(e,o3,e=>r(378,ts=e)),oX(e,o7,e=>r(377,tl=e)),oX(e,o9,e=>r(376,ta=e)),oX(e,ae,e=>r(383,tb=e)),oX(e,al,e=>r(48,tn=e)),oX(e,as,e=>r(49,tc=e)),oX(e,ad,e=>r(380,tf=e)),oX(e,ac,e=>r(381,tg=e)),oX(e,au,e=>r(47,tr=e)),oX(e,ah,e=>r(59,ij=e)),oX(e,ap,e=>r(485,ir=e)),aC("components",{DynamicComponentTree:hJ}),aC("previewcontrols",{play:op,pause:o$,togglePlayPause:of,mute:og,unmute:oy,toggleMute:ox,setCurrentTime:oS,getCurrentTime:ow,getDuration:ov,frameOffset:oa,framePeekOffset:or,isPlaying:ol,isMuted:ob});let a$=(e,t,r=0)=>new Promise((n,o)=>{let a;if(l6(e)){l4(e).then(e=>{let t=ri(iZ)?iZ:nW(e.duration,iX||[[0,1]]);l5(e,t).then(n)});return}let l=!1;t.cancel=()=>l=!0;let s=Date.now();oF(e).then(e=>{let t=Date.now()-s;clearTimeout(a),a=setTimeout(()=>{l||n(e)},Math.max(0,r-t))}).catch(o)}),{images:am,shapePreprocessor:af,imageScrambler:ag,imageRedactionRendering:ay,willRequest:ax,willRequestResource:ab,csp:av}=rY;oX(e,am,e=>r(421,iH=e)),oX(e,af,e=>r(420,iU=e)),oX(e,ag,e=>r(384,tv=e)),oX(e,ay,e=>r(382,tx=e)),oX(e,ax,e=>r(81,iY=e)),oX(e,ab,e=>r(93,ro=e)),oX(e,av,e=>r(92,rn=e));let aw=a9(at,(e,t)=>{if(!e)return t(void 0);rw&&(rw.cancel(),rw=void 0),a$(e,rw={cancel:x}).then(t).catch(e=>{})}),aT=ap.subscribe(e=>rH.pub("update",e)),aM=a7();aC("ui",a7({})),aC("selection",ah);let aP=a7(!0);oX(e,aP,e=>r(95,rl=e));let aR=a7(!0);oX(e,aR,e=>r(97,rd=e));let aI=a7(!0);oX(e,aI,e=>r(419,iV=e));let aA=a7(!0);oX(e,aA,e=>r(497,i_=e));let aL=a7(!0);oX(e,aL,e=>r(98,rc=e));let aF=a7();oX(e,aF,e=>r(99,ru=e));let az=a7();oX(e,az,e=>r(498,iN=e));let aB=a9([az,aA],()=>void 0!==iN?iN:i_);oX(e,aB,e=>r(96,rs=e));let aO=a7([0,0,0]);oX(e,aO,e=>r(56,id=e));let aD=a7([1,1,1]);oX(e,aD,e=>r(481,tm=e));let a_=dk([1,1,1]);oX(e,a_,e=>r(480,t$=e));let aW=a7();oX(e,aW,e=>r(91,rr=e));let aN=a7(),aV=a7();oX(e,aV,e=>r(51,tk=e));let aj=a7();oX(e,aj,e=>r(373,tt=e));let aU=()=>{let e=iD,t=tG(tt);e&&e===t||(oq.set(tG(tt)),sl())},aH=a7(tM());oX(e,aH,e=>r(80,io=e));let aG=a7(0);oX(e,aG,e=>r(418,iO=e));let aX=a7(tM());oX(e,aX,e=>r(84,i3=e));let aZ=a7();oX(e,aZ,e=>r(478,ti=e));let aY=pI("(pointer: fine)",e=>e?"pointer-fine":"pointer-coarse");oX(e,aY,e=>r(399,t9=e));let aq=pI("(hover: hover)",e=>e?"pointer-hover":"pointer-no-hover");oX(e,aq,e=>r(398,t7=e));let aK=a7(!1),aJ=a7(!1);oX(e,aJ,e=>r(379,tp=e));let aQ=a8(void 0,e=>{let t=dk(0),r=[aJ.subscribe(e=>{t.set(+!!e,{hard:!tI})}),t.subscribe(e)];return()=>r.forEach(e=>e())});oX(e,aQ,e=>r(479,th=e));let a0=a7();oX(e,a0,e=>r(484,t4=e));let a1=a7();oX(e,a1,e=>r(53,tI=e)),aC("isAnimated",a1);let a2=a7(r4);oX(e,a2,e=>r(402,ii=e));let a4=a7(!1);oX(e,a4,e=>r(490,iT=e)),aC("imageIsStatic",a4);let a5=a7();oX(e,a5,e=>r(491,iM=e));let a3=a7();oX(e,a3,e=>r(488,ik=e));let a6=a8(void 0,e=>{let t=a7(void 0),r=[oJ.subscribe(()=>{if(!iS)return;if(iT)return t.set(tT(iS));let e=pe(iS,ik,5*nt);t.set(e)}),t.subscribe(e)];return()=>r.forEach(e=>e())}),le=a7();oX(e,le,e=>r(487,iv=e));let lt=a7();oX(e,lt,e=>r(489,iC=e));let li=a7(void 0);oX(e,li,e=>r(494,iL=e));let lr=a7(eB());oX(e,lr,e=>r(495,iF=e));let ln=(e,t)=>{if(!t||!e)return{top:0,right:0,bottom:0,left:0};let r=on(oo(t,e,g),e);return{top:Math.abs(r.top),right:Math.abs(r.right),bottom:Math.abs(r.bottom),left:Math.abs(r.left)}},lo=a7({}),la=a9([aZ,aH,aX,lo],([e,t,r,n],o)=>{if(!e)return o(void 0);let a=0;1!==_.length||$||"bottom"===nC||(a=r.y+r.height),o(tz(e.x+t.x,e.y+t.y+a,e.width,e.height))}),ll={left:0,right:0,top:0,bottom:0},ls=a7(!1),ld=a9([ls,au,la,aJ],([e,t,r,n],o)=>{if(!r)return o({left:0,right:0,top:0,bottom:0});if(!e)return;let a=Math.min(r.width,r.height),l=ln({width:a,height:a},t);(eL(ll.top,4)!==eL(l.top,4)||eL(ll.bottom,4)!==eL(l.bottom,4)||eL(ll.right,4)!==eL(l.right,4)||eL(ll.left,4)!==eL(l.left,4))&&(ll=l,o(l))});oX(e,ld,e=>r(410,iy=e));let lc=a9([ls,ld],([e,t],r)=>{if(!e)return r(!1);r(Object.values(t).some(e=>e>0))});oX(e,lc,e=>r(411,ix=e));let lu=a9([ls,aZ,lc,ld],([e,t,r,n],o)=>{if(t){if(!e||!r)return o({...t});o(tz(t.x+n.left,t.y+n.top,t.width-n.left-n.right,t.height-n.top-n.bottom))}}),lh=a9([la,lc,ld],([e,t,r],n)=>e?t?void n(tz(e.x+r.left,e.y+r.top,e.width-r.left-r.right,e.height-r.top-r.bottom)):n(e):n(void 0));oX(e,lh,e=>r(50,tu=e));let lp=a9([a4,o_,o3],([e,t,r],n)=>{if(!e||!t)return n(void 0);n(tY(tE(t),r))}),l$=a9([lp],([e],t)=>{if(!e)return t(void 0);t(t6(tA(e)))});oX(e,l$,e=>r(414,iR=e));let lm=a9([lh,oJ,l$,a2],([e,t,r,n],o)=>{let a=!!(iM||ik);if(!e||!t||a)return;let{width:l,height:s}=r||t,d=Math.min(e.width/l,e.height/s);o(n?d:Math.min(1,d))});oX(e,lm,e=>r(413,iE=e)),aC("imageStaticVisualCorners",a9([a4,o_,o3,lh,aZ,lm],([e,t,r,n,o,a],l)=>{if(!e||!n||!o||!t)return l(void 0);let s=t6(tD(tE(t),a)),d=tq(n,s);s.x=d.x,s.y=d.y,l(tY(s,r))}));let lf=a7(void 0);oX(e,lf,e=>r(416,iz=e));let lg=a9([oJ,lh],([e,t])=>{if(t&&e)return Math.min(t.width/e.width,t.height/e.height)}),ly=a9([oJ,le],([e,t])=>e&&t?Math.min(e.width/t.width,e.height/t.height):1);oX(e,ly,e=>r(101,rp=e));let lx=a9([lf,ly],([e,t])=>e&&t?t*e:1);oX(e,lx,e=>r(493,iI=e));let lv=a7(eB());oX(e,lv,e=>r(415,iA=e));let lw=a7({scalar:iI,translation:iA}),lS=()=>{lw.set({scalar:void 0,translation:eB()})},lk=a8(void 0,e=>{let t=dk(void 0,{precision:1e-4}),r=1===cA()?e=>t5(e,Math.round):ey,n=()=>{if(!iv)return;let e=tp||!t4;if(iT){let r=tT(iv);return tO(r,iF),tO(r,tu),t.set(r,{hard:e})}let n=pe(iv,iL,$f*nt);n.width<0&&(n.width=0,n.x=iv.x),n.height<0&&(n.height=0,n.y=iv.y),tO(n,tu),tO(n,iA),tD(n,iI),e||r(n),t.set(n,{hard:e})},o=[lh.subscribe(n),le.subscribe(n),lx.subscribe(n),lv.subscribe(n),au.subscribe(n),t.subscribe(e)];return()=>o.forEach(e=>e())});oX(e,lk,e=>r(58,ig=e));let lC=a7(1);oX(e,lC,e=>r(486,ib=e));let lT=()=>{if(!iS||!tu)return;let e=tN(tT(iS),iE||1);tO(e,tq(tu,tN(tT(iR),iE)));let t=Math.min(1,ti.width/e.width,ti.height/e.height);lC.set(t),tD(e,t),t0(e,{...ti,x:0,y:0}),le.set(e)},lP=a9([lh,lm,oJ,o_],([e,t,r,n],o)=>{e&&(r||n)&&o(lE(e,t||1,r||n))});oX(e,lP,e=>r(100,rh=e));let lE=(e,t,r)=>r.width<=e.width&&r.height<=e.height?tq(e,tN(tT(r),t)):t1(e,tG(r)),lR=e=>{if($&&rC&&tH(rC,e)&&rT===iE)return;if(iT)return lT();rC=e,rT=iE;let t=lE(e,iE,iS||to);le.set(t)},lI=!1,lA=lm.subscribe(e=>{!lI&&void 0!==e&&iS&&(lR(tu),lI=!0)}),lL=lh.subscribe(e=>{e&&void 0!==iE&&iS&&lR(e)}),lF=a4.subscribe(e=>{!e&&tu&&lR(tu)}),lz=lt.subscribe(e=>{if(!e){rM=void 0,o1(a5,iM=void 0,iM);return}rM=iP;let t=tT(iS);a5.set(t)}),lB=le.subscribe(e=>{if(!e||!iC)return;let t=tj(tT(e),iC);tV(t,rM);let r=tU(tT(iM),t);oJ.set(r)}),lO=oJ.subscribe(e=>{if(!e||!iv)return;if(iT){iC||lT();return}if(tp||iC||ik)return;let t=tG(iv),r=tG(e);if(eL(t,6)===eL(r,6))return;let{width:n,height:o}=iS,a=Math.min(tu.width/n,tu.height/o),l=td(e.width*a,e.height*a),s=(iv.width-l.width)*.5,d=(iv.height-l.height)*.5,c=tz(Math.max(0,Math.min(tu.width-l.width,iv.x+s)),Math.max(0,Math.min(tu.height-l.height,iv.y+d)),l.width,l.height);le.set(c)}),l_=a9([lm,oJ,le,a4],([e,t,r,n],o)=>{if(e&&t&&r){if(n)return o(ib);o(Math.max(r.width/t.width,r.height/t.height)/e)}}),lW=a9([lm,l_],([e,t],r)=>{t&&r(e*t)});oX(e,lW,e=>r(492,iP=e));let lN={left:0,right:0,top:0,bottom:0},lV=a9([au,le],([e,t],r)=>{if(!t)return r(lN);let n=ln(t,e);(eL(lN.top,4)!==eL(n.top,4)||eL(lN.bottom,4)!==eL(n.bottom,4)||eL(lN.right,4)!==eL(n.right,4)||eL(lN.left,4)!==eL(n.left,4))&&(lN=n,r(n))}),lj=a9([lV],([e],t)=>{t(Object.values(e).some(e=>e>0))}),lU=dk(.075,{stiffness:.03,damping:.4,precision:.001}),lH=a9([a_,aO,lU,lk,lx,au,lj,lV,lc],([e,t,r,n,o,a,l,s,d],c)=>{if(!n||$)return c([]);let{x:u,y:h,width:p,height:m}=n;u+=.5,h+=.5,p-=.5,m-=.5;let f=[];if(a){if(l){let{left:e,right:r,top:n,bottom:a}=s;e*=o,r*=o,n*=o,a*=o;let l=pH(t);f.push({x:u-e-.5,y:h-n-.5,width:p+e+r+1,height:m+n+a+1,strokeWidth:1,strokeColor:l?[1,1,1,.125]:[0,0,0,.075],opacity:d?1:.5})}let n=pH(e);a&&a.frameColor&&pH(a.frameColor)||n||(f.push({x:u-1,y:h-1,width:p+2,height:m+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:r}),f.push({x:u+1,y:h+1,width:p-2,height:m-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:r}))}c([...f,{x:u,y:h,width:p,height:m,strokeWidth:1,strokeColor:e,opacity:r}])}),lG=a7([]);oX(e,lG,e=>r(404,ia=e));let lZ=a9([lH,lG],([e,t],r)=>{r([...e,...t])});oX(e,lZ,e=>r(94,ra=e));let lY=dk(0,{precision:.001});oX(e,lY,e=>r(406,is=e));let lq=dk();oX(e,lq,e=>r(409,ih=e));let lK=dk();oX(e,lK,e=>r(408,iu=e));let lJ=dk();oX(e,lJ,e=>r(407,ic=e));let lQ=dk();oX(e,lQ,e=>r(405,il=e));let l0=a7(!1);oX(e,l0,e=>r(391,tX=e));let l1=a7();oX(e,l1,e=>r(394,tJ=e));let l2=a9([l0,l1],([e,t],n)=>{if(!e||!t){n(void 0);return}if(rP&&(rP.cancel(),r(295,rP=void 0)),oc(t))return n(D(t));let o=sf.length?0:250*!!tI;r(295,rP={cancel:x}),a$(t,rP,o).then(n).catch(e=>{o1(oZ,tK.error=e,tK)}).finally(()=>{r(295,rP=void 0)})});rV(),rV=oH(l2,e=>r(374,rN=e));let{imagePreviewCurrent:l3}=t,l8=a7({});oX(e,l8,e=>r(396,t3=e));let l7=a7([]);oX(e,l7,e=>r(86,i8=e));let l9=()=>{lv.set(eB()),lf.set(void 0),lS(),l7.set([])},se=a9([lh,aj,o_,a6,le,lW,o3,o7,o9,lx,lv,aK],([e,t,r,n,o,a,l,s,d,c,u,h],p)=>{if(!e||!o)return;let $=sR(e,t,r,n,o,c,u,a,l,s,d);h||A($),p($)});oX(e,se,e=>r(397,t8=e));let st=a9([ai,ar,an,ao,aa],([e,t,r,n,o],a)=>{let l=e&&Object.keys(e).map(t=>e[t]).filter(Boolean);a({gamma:r||void 0,vignette:n||void 0,noise:o||void 0,convolutionMatrix:t||void 0,colorMatrix:l&&l.length&&oL(l)})}),si=pA(),sr=a7({});oX(e,sr,e=>r(385,tC=e)),aC("env",sr);let sn=cA(),so=a8(sn,e=>{let t=()=>e(cA()),r=matchMedia(`(resolution: ${sn}dppx)`);return r.addListener(t),()=>r.removeListener(t)});oX(e,so,e=>r(57,im=e));let sa=pL(()=>ir,e=>{o1(ap,ir=e,ir),aH.set(io)},{willUndo:()=>!sh()||(su(),!1)});rU(),rU=oH(sa,e=>r(403,rj=e));let sl=()=>{let e=t5(t1({x:0,y:0,...to},ir.cropAspectRatio),Math.round),t=nc({...ir,rotation:0,crop:e},ir),r=[t];JSON.stringify(t)!==JSON.stringify(ir)&&r.push({...ir}),sa.set(r)},ss=oZ.subscribe(e=>{e&&e.complete&&sl()}),sd=()=>ni().then(e=>e&&sa.revert()),sc=[as,al,ac,ad],su=()=>{sc.forEach(e=>{e.update(e=>e.length&&nu(e[e.length-1])?e.slice(0,-1):e)})},sh=()=>B.filter(e=>e.length).some(e=>nu(e[e.length-1])),sp=a7(!1);oX(e,sp,e=>r(386,tR=e));let s$=()=>{o1(sp,tR=!0,tR),nr().then(e=>{let t;if(!e){o1(sp,tR=!1,tR);return}t=sZ.subscribe(e=>{1===e&&(t&&t(),rG("processImage"))})})},sm=oY.subscribe(e=>{if(!e){o1(sp,tR=!1,tR);return}o1(sp,tR=!0,tR);let{complete:t,abort:r}=e;(t||r)&&o1(sp,tR=!1,tR)}),sf=pU();oX(e,sf,e=>r(55,tQ=e));let sg=a9([sf],([e],t)=>{if(!e.length)return t();let{origin:r,translation:n,rotation:o,scale:a}=e[0];t({origin:r,translation:n,rotation:o,scale:a})}),sy=a7();oX(e,sy,e=>r(400,ie=e));let sx=[],sb=a7(),sv=a7(),sw=a9([lf,sv,lm,lg],([e,t,r,n])=>e||(t||r<1?n:1)),sS={...rY,imageFile:oD,imageSize:o_,mediaDuration:oW,mediaMinDuration:oU,mediaMaxDuration:oG,mediaTrim:oV,imageBackgroundColor:ae,imageBackgroundImage:at,imageCropAspectRatio:oq,imageCropMinSize:oQ,imageCropMaxSize:o0,imageCropLimitToImage:oK,imageCropRect:oJ,imageCropRectOrigin:o4,imageCropRectSnapshot:a5,imageCropRectAspectRatio:o5,imageCropRange:o2,imageRotation:o3,imageRotationRange:o6,imageFlipX:o7,imageFlipY:o9,imageOutputSize:o8,imageColorMatrix:ai,imageConvolutionMatrix:ar,imageGamma:an,imageVignette:ao,imageNoise:aa,imageManipulation:ad,imageDecoration:al,imageAnnotation:as,imageRedaction:ac,imageFrame:au,imagePreview:l2,imagePreviewSource:l1,imageTransforms:se,imagePreviewModifiers:l8,history:sa,animation:a0,pixelRatio:so,elasticityMultiplier:nt,scrollElasticity:$y,rangeInputElasticity:5,redrawTrigger:oC,pointerAccuracy:aY,pointerHoverable:aq,env:sr,rootRect:aj,stageRect:lh,stageRectBase:la,stageRecenter:lo,stageScalar:lm,stagePadding:ld,stagePadded:lc,presentationScalar:lW,imagePreviewUpscale:sv,utilRect:aZ,utilRectPadded:lu,allowPlayPause:oi,allowPan:aP,allowZoom:aR,allowZoomControls:aI,enableZoomInput:aL,enablePanInput:aA,enablePanInputStatus:aB,imageSelectionMultiTouching:sb,rootBackgroundColor:aO,rootForegroundColor:aD,rootLineColor:a_,rootColorSecondary:aN,imageOutlineOpacity:lU,utilTools:sy,imageSelectionPan:lv,imageSelectionZoom:lf,imageSelectionZoomCurrent:sw,imageSelectionStageFitScalar:lg,imageSelectionStoredState:lw,imageOverlayMarkup:lG,interfaceImages:l7,isInteracting:aJ,isTransformingImage:aK,isInteractingFraction:aQ,imageCropRectIntent:a3,imageCropRectPresentation:a6,imageSelectionRect:le,imageSelectionRectIntent:li,imageSelectionRectPresentation:lk,imageSelectionRectSnapshot:lt,imageScalar:l_,imageTransformsInterpolated:sg,imageEffects:st};delete sS.image;let sk=`util-${K()}`,sC=[],sT=(e,t,r,n)=>{let o=t.filter(([t])=>e.includes(t)).filter(([e,{isSupported:t}])=>t({...n,...r[e]})).map(([e,t])=>[e,t.Component]);return lM(o,sC,(e,t)=>e[0]===t[0]&&e[1]===t[1])?sC:(sC=o,o)},sM=e=>W.find(([t])=>e===t),sP=()=>W[0][0],sE=[],sI=e=>{r(62,sE=sE.concat(e))},sA=e=>{r(62,sE=sE.filter(t=>t!==e))},sL=(e,t)=>{r(304,H[e]=t,H)},sz=iG(),sB=(e,t)=>tt?"auto"===t?e.width>e.height?"landscape":"portrait":"horizontal"===t?e.width<500?"portrait":"landscape":"vertical"===t?e.height<400?"landscape":"portrait":void 0:"landscape",sO=e=>hx(eb.getPropertyValue(e)),sD=(e,t,r)=>{let n=eb.getPropertyValue(e);n=r?r(n):/^[0-9]+$/.test(n)?parseFloat(n):void 0,t.set(n,{hard:!tI})},s_=(e,t,r=!1)=>{let n=sO(e);n&&0!==n[3]&&(r||(n.length=3),t.set(n,{hard:!tI}))},sW=a7();oX(e,sW,e=>r(87,i7=e));let sN=a7();oX(e,sN,e=>r(88,i9=e));let sV=a7();oX(e,sV,e=>r(89,re=e));let sj=dk(0,{damping:.9});oX(e,sj,e=>r(90,rt=e));let sU=()=>{s_("color",aD),nG?s_("--color-background",aO):s_("background-color",aO),s_("outline-color",a_),s_("--color-primary",aW),s_("--color-secondary",aN),s_("--grid-color-even",sN,!0),s_("--grid-color-odd",sV,!0),sD("--grid-size",sW),sD("--editor-inset-top",aG,e=>parseInt(e,10))},sH=a9([se,st,ae,aw],([e,t,r,n])=>e&&{...e,...t,backgroundColor:r,backgroundImage:n});oX(e,sH,e=>r(395,t2=e));let sG=()=>{let e=sf.length?void 0:{resize:1.05},t=pj(rN,to,e);sf.unshift(t),sX(t2)},sX=e=>{sf.forEach((t,r)=>{t.set({...e,opacity:+(0===r),resize:1},t4)})},sZ=dS(void 0,{duration:500});oX(e,sZ,e=>r(54,t_=e));let sY=a7(!1);oX(e,sY,e=>r(390,tW=e));let sq=dk(void 0,{stiffness:.1,damping:.7,precision:.25});oX(e,sq,e=>r(82,i4=e));let sK=dk(0,{stiffness:.1,precision:.05});oX(e,sK,e=>r(83,i5=e));let sJ=dk(0,{stiffness:.02,damping:.5,precision:.25});oX(e,sJ,e=>r(388,tF=e));let sQ=dk(void 0,{stiffness:.02,damping:.5,precision:.25});oX(e,sQ,e=>r(389,tB=e));let s0=dk(void 0,{stiffness:.02,damping:.5,precision:.25});oX(e,s0,e=>r(387,tL=e));let s1=()=>{rG("abortLoadImage")},s2=()=>{rG("abortProcessImage"),o1(sp,tR=!1,tR)},s4=e=>{e.target&&"true"===e.target.dataset.touchScroll||e.preventDefault()},s5=si?e=>{let t=e.touches?e.touches[0]:e;t.pageX>20&&t.pageX<window.innerWidth-20||s4(e)}:x,s3=a7([]);oX(e,s3,e=>r(482,tw=e)),aC("keysPressed",s3);let s6=e=>{!(!e||r$(e)&&!p_(e))&&(r$(e)||/^http/.test(e))&&rG("loadImage",e)},s8=e=>{e&&s6(e)},s7=(e,t,n,o)=>{if(!t||rW===t)return;rW=t;let a={dataSizeScalar:n};o&&o[3]>0&&(a.backgroundColor=[...o]),t(e,a).then(e=>{r_&&L(r_),r(299,r_=e)})},s9=[],de=a7();aC("rootPortal",de),aC("rootRect",aj);let dt=()=>({foregroundColor:[...tm],lineColor:[...t$],utilVisibility:{...H},isInteracting:tp,isInteractingFraction:th,rootRect:tT(tt),stageRect:tT(tu),manipulationShapesDirty:dM,annotationShapesDirty:df,decorationShapesDirty:db,frameShapesDirty:dw}),di=(e,t,r)=>n8(e,td(Math.round(t.width/r),Math.round(t.height/r))),dr=(e,t,r)=>(e._translate=e_(t),e._scale=r,e),dn=e=>{let t=[];return e.forEach(e=>t.push(ds(e))),t.filter(Boolean)},ds=e=>(nn(e)?e.points=[eO(e.x1,e.y1),eO(e.x2,e.y2)]:na(e)&&(!e.backgroundColor||0===e.backgroundColor[3])&&(ne(e)&&(e.width=5,e.height=e.lineHeight),e.strokeWidth=1,e.strokeColor=[1,1,1,.5],e.backgroundColor=[0,0,0,.1]),e),dd=[],dc=[],du=[],dh=[],dp=[],d$={},dm=(e,t,r,n,o,a,l)=>{let{manipulationShapesDirty:s,annotationShapesDirty:d,decorationShapesDirty:c,frameShapesDirty:u,selectionRect:h,scale:p}=e,$=rO!==p,m=$||!tH(d$,h);m&&(rO=p,d$=h),s&&(du=t.filter(ns).map(r2).map(e=>n8(e,to))),(d||r!==tc)&&(dd=r.filter(ns).map(r2).sort((e,t)=>e.alwaysOnTop?1:t.alwaysOnTop?-1:0).map(e=>n8(e,to))),($||dy||d||r!==tc)&&(dc=dn(dd.map(e=>g(e,{flipX:tl,flipY:ta,rotation:ts,scale:p,context:tE(to)})).flat())),(c||n!==tn||m)&&(dh=dn(n.filter(ns).map(r2).sort((e,t)=>e.alwaysOnTop?1:t.alwaysOnTop?-1:0).map(e=>di(e,h,p)).map(e=>g(e,{context:h})).flat().map(e=>dr(e,h,p)))),(u||a!==tr||m)&&(dp=a?dn([a].map(r2).map(e=>di(e,h,p)).map(g).flat().map(e=>dr(e,h,p))):[]);let f=dn(o.filter(ns));return{manipulationShapesDirty:s,manipulationShapes:du,annotationShapesDirty:d,annotationShapes:dc,decorationShapesDirty:c,decorationShapes:dh,frameShapesDirty:u,frameShapes:dp,interfaceShapes:f,selectionShapes:l.map(r2).map(e=>n8(e,to))}},df=!0,dg=()=>r(63,df=!0),dy=!0,dx=()=>r(64,dy=!0),db=!0,dv=()=>r(65,db=!0),dw=!0,dT=()=>r(66,dw=!0),dM=!0,dP=()=>r(67,dM=!0);return aS(()=>{o$(),rN&&P(rN.src)&&/^blob:/.test(rN.src)&&URL.revokeObjectURL(rN.src),aT(),lL(),lA(),lF(),lz(),lB(),lO(),ss(),sm(),aY.destroy(),aq.destroy(),oO.destroy(),sf.clear(),dd.length=0,dc.length=0,du.length=0,dh.length=0,dp.length=0;try{r(235,l3=void 0),r(296,rA=void 0)}catch(e){}}),e.$$set=e=>{"class"in e&&r(236,rX=e.class),"layout"in e&&r(237,rZ=e.layout),"stores"in e&&r(238,rY=e.stores),"locale"in e&&r(3,rq=e.locale),"id"in e&&r(4,rK=e.id),"util"in e&&r(239,rJ=e.util),"utils"in e&&r(240,rQ=e.utils),"animations"in e&&r(241,r0=e.animations),"disabled"in e&&r(242,r1=e.disabled),"previewUpscale"in e&&r(243,r4=e.previewUpscale),"previewPad"in e&&r(244,r5=e.previewPad),"previewMaskOpacity"in e&&r(5,r3=e.previewMaskOpacity),"previewImageDataMaxSize"in e&&r(245,r6=e.previewImageDataMaxSize),"previewImageTextPixelRatio"in e&&r(6,r8=e.previewImageTextPixelRatio),"markupMaskOpacity"in e&&r(7,r7=e.markupMaskOpacity),"zoomMaskOpacity"in e&&r(246,r9=e.zoomMaskOpacity),"elasticityMultiplier"in e&&r(8,nt=e.elasticityMultiplier),"willRevert"in e&&r(247,ni=e.willRevert),"willProcessImage"in e&&r(248,nr=e.willProcessImage),"willRenderCanvas"in e&&r(9,no=e.willRenderCanvas),"willRenderToolbar"in e&&r(249,nl=e.willRenderToolbar),"willRenderUtilTabs"in e&&r(250,nd=e.willRenderUtilTabs),"willSetHistoryInitialState"in e&&r(251,nc=e.willSetHistoryInitialState),"enableButtonExport"in e&&r(252,nh=e.enableButtonExport),"enableButtonRevert"in e&&r(253,np=e.enableButtonRevert),"enableNavigateHistory"in e&&r(254,n$=e.enableNavigateHistory),"enableToolbar"in e&&r(10,nm=e.enableToolbar),"enableUtils"in e&&r(255,nf=e.enableUtils),"enableButtonClose"in e&&r(256,ng=e.enableButtonClose),"enableDropImage"in e&&r(257,ny=e.enableDropImage),"enablePasteImage"in e&&r(258,nx=e.enablePasteImage),"enableBrowseImage"in e&&r(259,nb=e.enableBrowseImage),"enableTransparencyGrid"in e&&r(11,nv=e.enableTransparencyGrid),"layoutDirectionPreference"in e&&r(260,nw=e.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in e&&r(261,nS=e.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in e&&r(262,nk=e.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in e&&r(263,nC=e.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in e&&r(264,nT=e.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in e&&r(265,nM=e.layoutVerticalControlTabsPreference),"status"in e&&r(234,nP=e.status),"formatStatusImageLoading"in e&&r(266,nE=e.formatStatusImageLoading),"formatStatusImageProcessing"in e&&r(267,nR=e.formatStatusImageProcessing),"formatStatusSupportError"in e&&r(268,nI=e.formatStatusSupportError),"textDirection"in e&&r(12,nA=e.textDirection),"markupEditorZoomLevel"in e&&r(269,nL=e.markupEditorZoomLevel),"markupEditorZoomLevels"in e&&r(13,nF=e.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in e&&r(14,nz=e.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in e&&r(15,nB=e.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in e&&r(16,nO=e.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in e&&r(270,nD=e.markupEditorInteractionMode),"muteAudio"in e&&r(271,n_=e.muteAudio),"willSetMediaInitialTimeOffset"in e&&r(272,nW=e.willSetMediaInitialTimeOffset),"enablePan"in e&&r(17,nN=e.enablePan),"enableZoom"in e&&r(18,nV=e.enableZoom),"enableZoomControls"in e&&r(273,nj=e.enableZoomControls),"enableZoomInput"in e&&r(19,nU=e.enableZoomInput),"enablePanInput"in e&&r(274,nH=e.enablePanInput),"enableCanvasAlpha"in e&&r(20,nG=e.enableCanvasAlpha),"enablePanLimit"in e&&r(21,nX=e.enablePanLimit),"panLimitGutterScalar"in e&&r(22,nZ=e.panLimitGutterScalar),"pan"in e&&r(275,nY=e.pan),"zoomPresetOptions"in e&&r(23,nq=e.zoomPresetOptions),"zoomAdjustStep"in e&&r(24,nK=e.zoomAdjustStep),"zoomAdjustFactor"in e&&r(25,nJ=e.zoomAdjustFactor),"zoomAdjustWheelFactor"in e&&r(26,nQ=e.zoomAdjustWheelFactor),"zoomLevel"in e&&r(0,n0=e.zoomLevel),"fixScrollDirection"in e&&r(276,n1=e.fixScrollDirection),"imagePreviewSrc"in e&&r(279,n4=e.imagePreviewSrc),"imageOrienter"in e&&r(280,n5=e.imageOrienter),"pluginComponents"in e&&r(281,n3=e.pluginComponents),"pluginOptions"in e&&r(27,n6=e.pluginOptions),"root"in e&&r(2,oe=e.root),"imageSourceToImageData"in e&&r(28,oF=e.imageSourceToImageData),"imagePreviewCurrent"in e&&r(235,l3=e.imagePreviewCurrent)},e.$$.update=()=>{if(0x10000000&e.$$.dirty[8]&&n2.set(n1),8&e.$$.dirty[0]&&r(302,n=!!rq),1&e.$$.dirty[0]|2097152&e.$$.dirty[8]&&r(0,n0=null===n0?nL:n0),2&e.$$.dirty[0]|4&e.$$.dirty[9]){let e=!1;n3.forEach(([t])=>{n9[t]||(r(1,n9[t]={},n9),e=!0)}),e&&r(293,oM=[...n3])}if(8388608&e.$$.dirty[7]|8404992&e.$$.dirty[9]&&r(354,_=n&&oM.length?rQ||oM.map(([e])=>e):[]),0x8000000&e.$$.dirty[0]|16384&e.$$.dirty[9]|8192&e.$$.dirty[11]|0x20000000&e.$$.dirty[12]&&r(355,W=sT(_,oM,n6,{src:it})),16384&e.$$.dirty[11]&&r(308,N=W.length),8&e.$$.dirty[0]|0x20000000&e.$$.dirty[9]|8192&e.$$.dirty[11]&&r(353,V=N&&_.map(e=>{let t=sM(e);if(t)return{id:e,view:t[1],tabIcon:rq[`${e}Icon`],tabLabel:rq[`${e}Label`]}}).filter(Boolean)||[]),4096&e.$$.dirty[11]&&r(372,o=!!V.find(e=>"trim"===e.id)),5&e.$$.dirty[12]|4194304&e.$$.dirty[13]&&r(307,a=!!(iQ&&rN&&o)),4194304&e.$$.dirty[7]|0x20000000&e.$$.dirty[9]&&r(43,j=N&&rJ&&"string"==typeof rJ&&sM(rJ)?rJ:N>0?sP():void 0),4096&e.$$.dirty[1]|0x10000000&e.$$.dirty[9]&&a&&j&&o$(),0x10000000&e.$$.dirty[9]|4&e.$$.dirty[12]&&(a?(rN.addEventListener("play",od),rN.addEventListener("pause",od)):rN&&"video"===rN.nodeName&&(rN.removeEventListener("play",od),rN.removeEventListener("pause",od))),0x10000000&e.$$.dirty[9]&&a&&os(),0x1200000&e.$$.dirty[13]&&ou(i1||iJ),2097152&e.$$.dirty[13]&&r(370,l=iJ&&eL(iJ,6)),0x2480000&e.$$.dirty[13]&&r(368,s=iX||[[0,Math.min(iQ,i2)/iQ]]),0x8000000&e.$$.dirty[11]&&(d=s[0][0]),0x8000000&e.$$.dirty[11]&&(c=s[s.length-1][1]),0x8000000&e.$$.dirty[11]&&r(371,u=s.map(([e,t])=>[eL(e,6),eL(t,6)])),0x60000000&e.$$.dirty[11]&&r(369,h=u.findIndex(([e,t])=>l>=e&&l<=t)),0x70000000&e.$$.dirty[11]&&(p=-1===h&&u.findIndex((e,t,r)=>{let n=r[t-1];return n?l<=e[0]&&l>=n[1]:l<=e[0]})),8388608&e.$$.dirty[8]&&ob.set(n_),4&e.$$.dirty[12]|8388608&e.$$.dirty[13]&&(rN&&i0?og():oy()),0x10000000&e.$$.dirty[9]|2097152&e.$$.dirty[13]&&a&&oN.set(ov()*iJ),4&e.$$.dirty[12]|1048576&e.$$.dirty[13]&&rN&&ok(iK),256&e.$$.dirty[0]&&o1(oT,iq=nt,iq),1048576&e.$$.dirty[7]&&r(364,$="overlay"===rZ),128&e.$$.dirty[8]|8388608&e.$$.dirty[11]&&r(45,m=nf&&!$),0x8000002&e.$$.dirty[0]&&n6&&Object.entries(n6).forEach(([e,t])=>{Object.entries(t).forEach(([t,n])=>{n9[e]&&r(1,n9[e][t]=n,n9)})}),16384&e.$$.dirty[13]&&r(365,v=!iB),0x1000000&e.$$.dirty[7]|0x3000000&e.$$.dirty[11]&&o1(a1,tI="always"===r0?y:"never"!==r0&&y&&v,tI),4194304&e.$$.dirty[1]|0x2000000&e.$$.dirty[7]&&oP.set(+!!r1,{hard:!tI}),0x10000000&e.$$.dirty[7]&&(f=r6?ty(r6,oR):oR),262144&e.$$.dirty[13]&&oO.update(iH[0]),131072&e.$$.dirty[13]&&(g=iU?(e,t)=>iU(e,{flipX:void 0,flipY:void 0,rotation:void 0,...t,isPreview:!0}):ey),0x10000000&e.$$.dirty[1]&&Array.isArray(ij)&&rG("selectionchange",[...ij]),0x2000000&e.$$.dirty[8]|65536&e.$$.dirty[13]&&aF.set(iV&&nj),0x4400000&e.$$.dirty[8]&&az.set("pan"===nD||nH),1048576&e.$$.dirty[1]&&tk&&aj.set(tz(tk.x,tk.y,tk.width,tk.height)),8388608&e.$$.dirty[11]|2097154&e.$$.dirty[12]&&tt&&$&&tK&&tK.complete&&aU(),8192&e.$$.dirty[11]&&r(46,Y=_.length>1),32768&e.$$.dirty[1]&&!Y&&aH.set(tM()),1024&e.$$.dirty[0]|32768&e.$$.dirty[13]&&!nm&&aX.set(tz(0,iO,0,0)),0x2000000&e.$$.dirty[11]|128&e.$$.dirty[12]&&r(367,b=!tp&&y),1048576&e.$$.dirty[1]&&r(309,e4=tk&&tk.width>0&&tk.height>0),8&e.$$.dirty[0]|0x60000000&e.$$.dirty[9]&&r(40,e5=e4&&rq&&!!N),512&e.$$.dirty[1]&&setTimeout(()=>r(294,rS=e5),1),0x1000000&e.$$.dirty[7]|32768&e.$$.dirty[9]|0x5000000&e.$$.dirty[11]&&o1(a0,t4="always"===r0?b:"never"!==r0&&b&&rS&&v,t4),0x4000000&e.$$.dirty[7]|8388608&e.$$.dirty[11]&&a2.set(r4||$),0x8000000&e.$$.dirty[7]&&ls.set(r5),0x8000000&e.$$.dirty[8]&&nY&&lv.set(nY),4&e.$$.dirty[0]|9216&e.$$.dirty[13]&&oe&&(oe.dispatchEvent(pP("markupzoom",iz)),oe.dispatchEvent(pP("zoom",ri(iz)?iz:iE))),4&e.$$.dirty[0]|4096&e.$$.dirty[13]&&oe&&(oe.dispatchEvent(pP("markuppan",iA)),oe.dispatchEvent(pP("pan",iA))),512&e.$$.dirty[13]&&iS&&lS(),2048&e.$$.dirty[13]&&iR&&lT(),4198400&e.$$.dirty[1]&&j&&lU.set(.075,{hard:!tI}),0x20000000&e.$$.dirty[7]&&r(362,w=r9),384&e.$$.dirty[13]&&r(363,S=ix?-Math.max(...Object.values(iy)):0),0x8480000&e.$$.dirty[1]|6291456&e.$$.dirty[11]&&ig){let e=ig.x-tu.x,t=tu.x+tu.width-(ig.x+ig.width),r=Math.min(e,ig.y-tu.y,t,tu.y+tu.height-(ig.y+ig.height));lY.set(r>S?0:Math.min(w,Math.abs(r/64)),{hard:!tI})}if(0x4000000&e.$$.dirty[1]&&r(361,k=.55/im),4718592&e.$$.dirty[1]|1048576&e.$$.dirty[11]&&tu&&lq.set({x:0,y:tu.y,width:tu.x<64?0:tu.x,height:tu.height+k},{hard:!tI}),4718592&e.$$.dirty[1]|1048576&e.$$.dirty[11]|2&e.$$.dirty[12]&&tu&&lK.set({x:0,y:0,width:tt.width,height:tu.y+k},{hard:!tI}),4718592&e.$$.dirty[1]|1048576&e.$$.dirty[11]|2&e.$$.dirty[12]&&tu){let e=tu.x+tu.width,t=tt.width-(tu.x+tu.width);t<64&&(e+=t,t=0),lJ.set({x:e,y:tu.y,width:t,height:tu.height+k},{hard:!tI})}if(4718592&e.$$.dirty[1]|2&e.$$.dirty[12]&&tu&&lQ.set({x:0,y:tu.y+tu.height,width:tt.width,height:tt.height-(tu.y+tu.height)},{hard:!tI}),0x2000000&e.$$.dirty[1]|72&e.$$.dirty[13]&&r(357,C=ih&&{id:$g,backgroundColor:id,opacity:is,...ih}),0x2000000&e.$$.dirty[1]|40&e.$$.dirty[13]&&r(360,T=iu&&{id:$g,backgroundColor:id,opacity:is,...iu}),0x2000000&e.$$.dirty[1]|24&e.$$.dirty[13]&&r(359,E=ic&&{id:$g,backgroundColor:id,opacity:is,...ic}),0x2000000&e.$$.dirty[1]|12&e.$$.dirty[13]&&r(358,R=il&&{id:$g,backgroundColor:id,opacity:is,...il}),983040&e.$$.dirty[11]&&r(356,I=[T,E,R,C].filter(Boolean)),32768&e.$$.dirty[11]|2&e.$$.dirty[13]&&I&&ia&&lG.update(e=>[...e.filter(e=>e.id!==$g),...I]),1&e.$$.dirty[9]|0x20000000&e.$$.dirty[12]&&l1.set(n4||it||void 0),4&e.$$.dirty[0]|262144&e.$$.dirty[7]|4&e.$$.dirty[12]&&(r(235,l3=rN),rN&&oe.dispatchEvent(pP("loadpreview",l3))),4194304&e.$$.dirty[12]&&tJ&&l9(),1&e.$$.dirty[13]&&r(313,F=rj.index>0),1&e.$$.dirty[13]&&r(312,z=rj.index<rj.length-1),393216&e.$$.dirty[1]|768&e.$$.dirty[12]&&(B=[tc,tn,tg,tf]),8&e.$$.dirty[1]&&sb.set(rI),0x40000000&e.$$.dirty[12]&&sv.set(ii),4096&e.$$.dirty[1]&&aM.set(j),0x2000000&e.$$.dirty[9]|4096&e.$$.dirty[11]&&r(304,H=V.reduce((e,t)=>(e[t.id]=H&&H[t.id]||0,e),{})),4096&e.$$.dirty[1]&&r(79,G={name:sk,selected:j}),4096&e.$$.dirty[11]&&r(335,X=V.map(e=>({id:e.id,icon:e.tabIcon,label:e.tabLabel}))),4096&e.$$.dirty[11]&&r(78,Z=V.map(e=>e.id)),524288&e.$$.dirty[7]&&r(77,q=d0(["PinturaRoot","PinturaRootComponent",rX])),2&e.$$.dirty[12]&&r(349,J=tt&&(tt.width>1e3?"wide":tt.width<600?"narrow":void 0)),2&e.$$.dirty[12]&&r(336,Q=tt&&(tt.width<=320||tt.height<=460)),2&e.$$.dirty[12]&&r(348,ee=tt&&(tt.height>1e3?"tall":tt.height<600?"short":void 0)),4&e.$$.dirty[0]&&r(315,et=oe&&oe.parentNode&&oe.parentNode.classList.contains("PinturaModal")),1&e.$$.dirty[1]|32&e.$$.dirty[10]|2&e.$$.dirty[12]&&r(341,ei=et&&tt&&rE>tt.width),2&e.$$.dirty[1]|32&e.$$.dirty[10]|2&e.$$.dirty[12]&&r(340,en=et&&tt&&rR>tt.height),0x40000000&e.$$.dirty[10]|1&e.$$.dirty[11]&&r(342,eo=ei&&en),1048576&e.$$.dirty[0]&&r(339,ea=nG),256&e.$$.dirty[11]&&r(310,el="narrow"===J),4096&e.$$.dirty[8]|2&e.$$.dirty[12]&&r(350,es=sB(tt,nw)),512&e.$$.dirty[11]&&r(76,ed="landscape"===es),1&e.$$.dirty[10]|128&e.$$.dirty[11]&&r(338,ec=el||"short"===ee),1&e.$$.dirty[1]|2&e.$$.dirty[12]&&r(337,eu=sz&&tt&&rE===tt.width&&!si),4&e.$$.dirty[1]|0x10000000&e.$$.dirty[12]&&r(311,eh=[...ie||[],...sx].filter(Boolean)),8192&e.$$.dirty[8]&&r(347,ep=`has-navigation-preference-${nS}`),16384&e.$$.dirty[8]&&r(346,e$=`has-navigation-preference-${nk}`),32768&e.$$.dirty[8]&&r(343,em=`has-toolbar-preference-${nC}`),65536&e.$$.dirty[8]&&r(345,ef=`has-controlgroups-preference-${nT}`),131072&e.$$.dirty[8]&&r(344,eg=`has-controltabs-preference-${nM}`),2&e.$$.dirty[12]&&r(352,ex=void 0!==tt&&tt.width>0&&tt.height>0),4&e.$$.dirty[0]|2048&e.$$.dirty[11]&&r(351,eb=ex&&oe&&getComputedStyle(oe)),1024&e.$$.dirty[11]&&eb&&sU(),1024&e.$$.dirty[0]|4243456&e.$$.dirty[1]|0x2100000&e.$$.dirty[7]|0x7c000020&e.$$.dirty[10]|1023&e.$$.dirty[11]|0xc002000&e.$$.dirty[12]&&sr.set({...tC,layoutMode:rZ,orientation:es,horizontalSpace:J,verticalSpace:ee,navigationHorizontalPreference:ep,navigationVerticalPreference:e$,controlGroupsVerticalPreference:ef,controlTabsVerticalpreference:eg,toolbarVerticalPreference:em,isModal:et,isDisabled:r1,isCentered:eo,isCenteredHorizontally:ei,isCenteredVertically:en,isAnimated:tI,isTransparent:ea,pointerAccuracy:t9,pointerHoverable:t7,isCompact:ec,hasSwipeNavigation:eu,hasLimitedSpace:Q,hasToolbar:nm,hasNavigation:Y&&m,isIOS:sz,browserVersion:dl()?`chrome-${(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]}`:void 0}),8192&e.$$.dirty[12]&&r(75,ev=Object.entries(tC).map(([e,t])=>/^is|has/.test(e)?t?pE(e):void 0:t).filter(Boolean).join(" ")),4096&e.$$.dirty[1]&&j&&sy.set([]),4096&e.$$.dirty[1]|4&e.$$.dirty[8]|0x2000000&e.$$.dirty[10]|8192&e.$$.dirty[12]&&r(44,ew=nd(X.map(e=>({...e,selected:j===e.id})),{...tC},()=>oC.set({}))),8192&e.$$.dirty[1]&&r(74,eS=!!ew.find(e=>Array.isArray(e))),0x3000000&e.$$.dirty[12]&&r(73,ek=t8&&Object.entries(t3).filter(([,e])=>null!=e).reduce((e,[,t])=>e={...e,...t},{})),2097152&e.$$.dirty[12]&&r(332,eP=tK&&"any-to-file"===tK.task),4194304&e.$$.dirty[10]&&eP&&sf&&sf.clear(),8388608&e.$$.dirty[12]&&r(334,eC=!!t2&&!!t2.translation),131072&e.$$.dirty[9]|0x1000000&e.$$.dirty[10]|4&e.$$.dirty[12]&&eC&&rN&&rN!==rA&&(r(296,rA=rN),sG()),0x1000000&e.$$.dirty[10]|8388608&e.$$.dirty[12]&&eC&&sX(t2),0x1000000&e.$$.dirty[1]&&tQ&&tQ.length>1){let e=[];sf.forEach((t,r)=>{0!==r&&t.get().opacity<=0&&e.push(t)}),e.forEach(e=>sf.remove(e))}if(8&e.$$.dirty[0]|8388608&e.$$.dirty[10]&&r(39,eM=rq&&eT.length&&function(e,t){if(U(t.labelSupportError))return t.labelSupportError(e);let r=nI({features:e},t);return sF(t.labelSupportError,r,"{","}")}(eT,rq)),2097152&e.$$.dirty[12]&&r(324,eE=tK&&!!tK.error),2097152&e.$$.dirty[12]&&r(42,eR=!tK||!tK.complete&&void 0===tK.task),2097152&e.$$.dirty[12]&&r(325,eI=tK&&(tK.taskLengthComputable?tK.taskProgress:1/0)),4194304&e.$$.dirty[10]&&eP&&o1(l0,tX=!1,tX),4194304&e.$$.dirty[1]|262144&e.$$.dirty[9]|2097152&e.$$.dirty[12]&&tK&&tK.complete){let e=250*!!tI;clearTimeout(rL),r(297,rL=setTimeout(()=>{o1(l0,tX=!0,tX)},e))}if(2048&e.$$.dirty[1]|16384&e.$$.dirty[10]|2621440&e.$$.dirty[12]&&r(329,eA=tK&&!eE&&!eR&&!tX),65536&e.$$.dirty[9]|4194308&e.$$.dirty[12]&&r(328,eF=!!tJ&&(!rN||!!rP)),4194304&e.$$.dirty[1]|524288&e.$$.dirty[12]&&(tX?setTimeout(()=>sj.set(1,{hard:!tI}),500*!!tI):sj.set(0,{hard:!tI})),1064960&e.$$.dirty[12]&&r(323,ez=!!(tR||tZ&&void 0!==tZ.progress&&!tZ.complete)),8192&e.$$.dirty[10]&&ez&&o$(),2048&e.$$.dirty[1]|2097152&e.$$.dirty[12]&&r(326,eD=tK&&!(tK.error||eR)),8&e.$$.dirty[0]|2097152&e.$$.dirty[12]&&r(327,eW=rq&&function(e,t){let r=e?!e.complete||e.error?e:{task:"blob-to-bitmap",progress:1/0}:void 0,n=U(t.statusLabelLoadImage)?t.statusLabelLoadImage(r):nE({state:r},t);return e&&e.error&&e.error.metadata&&(n=sF(n,e.error.metadata,"{","}")),n}(tK,rq)),8&e.$$.dirty[0]|1048576&e.$$.dirty[12]){var t,M;r(322,eN=tZ&&rq&&(t=tZ,U((M=rq).statusLabelProcessImage)?M.statusLabelProcessImage(t):nR({state:t},M)))}if(1048576&e.$$.dirty[12]&&r(320,eV=tZ&&(tZ.taskLengthComputable?tZ.taskProgress:1/0)),1048576&e.$$.dirty[12]&&r(321,ej=tZ&&!tZ.error),1048576&e.$$.dirty[12]&&r(319,eU=!!(tZ&&tZ.error)),8&e.$$.dirty[0]|2048&e.$$.dirty[1]|131072&e.$$.dirty[7]|1048064&e.$$.dirty[10]){if(nP){let e,t,n,o,a;P(nP)&&(e=nP),ri(nP)?t=nP:Array.isArray(nP)&&([e,t,a]=nP,!1===t&&(o=!0),ri(t)&&(n=!0)),r(35,rF=(e||t)&&{text:e,aside:o||n,progressIndicator:{visible:n,progress:t},closeButton:o&&{label:rq.statusLabelButtonClose,icon:rq.statusIconButtonClose,onclick:a||(()=>r(234,nP=void 0))}})}else rq&&eR||eE||eA||eF?r(35,rF={text:eW,aside:eE||eD,progressIndicator:{visible:eD,progress:eI},closeButton:eE&&{label:rq.statusLabelButtonClose,icon:rq.statusIconButtonClose,onclick:s1}}):rq&&ez&&eN?r(35,rF={text:eN,aside:eU||ej,progressIndicator:{visible:ej,progress:eV},closeButton:eU&&{label:rq.statusLabelButtonClose,icon:rq.statusIconButtonClose,onclick:s2}}):r(35,rF=void 0)}if(131072&e.$$.dirty[7]&&r(331,eH=void 0!==nP),4194304&e.$$.dirty[1]|32&e.$$.dirty[10]|1048576&e.$$.dirty[12]&&et&&tZ&&tZ.complete&&(sY.set(!0),setTimeout(()=>sY.set(!1),100*!!tI)),4&e.$$.dirty[0]|4096&e.$$.dirty[1]|524288&e.$$.dirty[12]&&tX&&oe&&oe.dispatchEvent(pP("selectutil",j)),2304&e.$$.dirty[1]|2908160&e.$$.dirty[10]|262144&e.$$.dirty[12]&&r(330,eG=tW||eM||eR||eE||eA||eF||ez||eH),1048576&e.$$.dirty[10]&&o1(sZ,t_=+!!eG,t_),4194304&e.$$.dirty[1]|1048576&e.$$.dirty[10]&&sZ.set(+!!eG,{duration:tI?500:1}),8388608&e.$$.dirty[1]&&r(41,eX=t_>0),16&e.$$.dirty[1]&&r(318,eZ=!!(rF&&rF.aside)),4195344&e.$$.dirty[1]|524288&e.$$.dirty[9]|256&e.$$.dirty[10]|131072&e.$$.dirty[12]&&eX&&rF){clearTimeout(rz);let e={hard:!1===tI};if(eZ){let t=!!rF.error||!tI;sK.set(1,e),sq.set(tB,{hard:t}),r(298,rz=setTimeout(()=>{sJ.set(16,e)},1))}else sK.set(0,e),r(298,rz=setTimeout(()=>{sJ.set(0,e)},1))}if(1024&e.$$.dirty[1]&&!eX&&(s0.set(void 0,{hard:!0}),sq.set(void 0,{hard:!0}),sJ.set(0,{hard:!0})),65536&e.$$.dirty[12]&&r(317,eY=.5*tF),128&e.$$.dirty[10]|32768&e.$$.dirty[12]&&r(72,eq=`translateX(${tL-eY}px)`),256&e.$$.dirty[1]|12&e.$$.dirty[12]&&r(38,e9=rN&&to&&!eM),128&e.$$.dirty[1]|96&e.$$.dirty[10]&&r(314,eQ=eK&&(e9||et)?s4:x),16&e.$$.dirty[10]&&r(71,e0=eQ),16&e.$$.dirty[10]&&r(70,e1=eQ),8&e.$$.dirty[0]|2097152&e.$$.dirty[1]|370&e.$$.dirty[8]|15&e.$$.dirty[10]|8192&e.$$.dirty[12]&&r(69,e2=rq&&tP&&pX(()=>nl([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[ng&&["Button","close",{label:rq.labelClose,icon:rq.iconButtonClose,onclick:()=>rG("close"),hideLabel:!0}],np&&["Button","revert",{label:rq.labelButtonRevert,icon:rq.iconButtonRevert,disabled:!F,onclick:sd,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[n$&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:rq.labelButtonUndo,icon:rq.iconButtonUndo,disabled:!F,onclick:sa.undo,hideLabel:!0}],["Button","redo",{label:rq.labelButtonRedo,icon:rq.iconButtonRedo,disabled:!z,onclick:sa.redo,hideLabel:!0}]]],eh.length&&["div","plugin-tools",{class:"PinturaNavSet"},eh.filter(Boolean).map(([e,t,r])=>[e,t,{...r}])]]],["div","gamma",{class:"PinturaNavGroup"},[nh&&["Button","export",{label:rq.labelButtonExport,icon:el&&rq.iconButtonExport,class:"PinturaButtonExport",onclick:s$,hideLabel:el}]]]],{...tC},()=>oC.set({})))),512&e.$$.dirty[12]&&r(306,e3=tg&&!!tg.length),0x8000000&e.$$.dirty[9]|520&e.$$.dirty[12]&&r(305,e6=e3&&oz(to,tg)),0xc000000&e.$$.dirty[9]|6148&e.$$.dirty[12]&&e3&&s7(rN,tv,e6,tb),1048576&e.$$.dirty[9]|1544&e.$$.dirty[12]&&tg&&r_&&to){let{width:e,height:t}=to,n=iw()?"pixelated":"auto"===tx?"auto":"pixelated";r(300,s9=tg.map(r=>{let o=tY(tT(tz(r.x,r.y,r.width,r.height)),r.rotation).map(r=>eO(r.x/e,r.y/t));return{...r,id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:r_,backgroundImageRendering:n,backgroundCorners:o}}))}2097152&e.$$.dirty[9]|256&e.$$.dirty[12]&&r(37,e8=[...s9,...tf||[]]),32&e.$$.dirty[1]&&rB&&de.set(rB),4&e.$$.dirty[0]|128&e.$$.dirty[1]&&e9&&oe&&oe.dispatchEvent(pP("ready")),262144&e.$$.dirty[1]&&dg(),120&e.$$.dirty[12]&&dx(),131072&e.$$.dirty[1]&&dv(),65536&e.$$.dirty[1]&&dT(),64&e.$$.dirty[1]&&dP(),2&e.$$.dirty[12]&&r(303,te=!!tt&&tt.height>0),0x1c00000&e.$$.dirty[9]&&!n&&te&&(clearTimeout(rD),r(301,rD=setTimeout(()=>{n||lD("locale")},32)))},r(366,y=!dU()),A=1===cA()?e=>{e&&(eJ(e.origin,Math.round),eJ(e.translation,Math.round))}:ey,r(333,eT=[!pD()&&"WebGL"].filter(Boolean)),r(316,eK=iG()||O()&&er()),r(68,e7=pM(rH.pub)),[n0,n9,oe,rq,rK,r3,r8,r7,nt,no,nm,nv,nA,nF,nz,nB,nO,nN,nV,nU,nG,nX,nZ,nq,nK,nJ,nQ,n6,oF,l2,sa,rE,rR,sx,rI,rF,rB,e8,e9,eM,e5,eX,eR,j,ew,m,Y,tr,tn,tc,tu,tk,tP,tI,t_,tQ,id,im,ig,ij,rf,rg,sE,df,dy,db,dw,dM,e7,e2,e1,e0,eq,ek,eS,ev,ed,q,Z,G,io,iY,i4,i5,i3,i6,i8,i7,i9,re,rt,rr,rn,ro,ra,rl,rs,rd,rc,ru,rh,rp,rm,oi,or,oa,ob,oC,oT,oP,oD,o_,oW,oN,oV,oj,oG,oZ,oY,oq,oK,oJ,o3,o7,o9,ae,al,as,ad,ac,au,ah,ap,am,af,ag,ay,ax,ab,av,aP,aR,aI,aA,aL,aF,az,aB,aO,aD,a_,aW,aV,aj,aH,aG,aX,aZ,aY,aq,aJ,aQ,a0,a1,a2,a4,a5,a3,le,lt,li,lr,ld,lc,lh,l$,lm,lf,ly,lx,lv,lk,lC,lP,lW,lG,lZ,lY,lq,lK,lJ,lQ,l0,l1,l8,l7,se,sr,so,sp,sf,sy,sS,sI,sA,sL,(e,t)=>t[e],e=>V.find(t=>t.id===e).view,sW,sN,sV,sj,({target:e,propertyName:t})=>{e===oe&&/background|outline/.test(t)&&eb&&sU()},sH,sZ,sY,sq,sK,sJ,sQ,s0,e=>{let t=!!(rF&&rF.closeButton)||!tI;sQ.set(e.detail.width,{hard:t}),s0.set(Math.round(-(.5*e.detail.width)),{hard:t})},s5,s3,e=>{let{keyCode:t,metaKey:r,ctrlKey:n,shiftKey:o}=e;if(9===t&&r1){e.preventDefault();return}if(e.target&&32===t&&oe.contains(e.target)&&!cD(e.target)&&(tS&&a&&of(),e.preventDefault()),90===t&&(r||n)){o&&r?sa.redo():sa.undo();return}if(89===t&&n){sa.redo();return}if(229===t)return;let l=new Set([...tw,t]);s3.set(Array.from(l))},({key:e,keyCode:t})=>{if("Meta"===e)return s3.set([]);s3.set(tw.filter(e=>e!==t))},()=>{s3.set([])},e=>{cD(e.target)||e.preventDefault()},e=>{ny&&s6(e.detail.resources[0])},()=>{nb&&pG().then(s8)},e=>{if(!nx)return;let t=lb((window.innerWidth-Math.abs(tt.x))/tt.width,0,1),r=lb((window.innerHeight-Math.abs(tt.y))/tt.height,0,1);t<.75&&r<.75||s6((e.clipboardData||window.clipboardData).files[0])},dt,dm,e=>{ti&&tH(e.detail,ti)||o1(aZ,ti=e.detail,ti)},nP,l3,rX,rZ,rY,rJ,rQ,r0,r1,r4,r5,r6,r9,ni,nr,nl,nd,nc,nh,np,n$,nf,ng,ny,nx,nb,nw,nS,nk,nC,nT,nM,nE,nR,nI,nL,nD,n_,nW,nj,nH,nY,n1,()=>r(60,rf=void 0),(e,t,n)=>{let{text:o="",placeholder:a="",autoClose:l=!0,align:s="top",justify:d="center",buttonConfirm:c,buttonCancel:u}=n;r(60,rf={align:s,justify:d,text:o,placeholder:a,buttonConfirm:c,buttonCancel:u,onconfirm:()=>{e(rg.value),l&&r(60,rf=void 0)},oncancel:()=>{t(void 0),r(60,rf=void 0)}})},n4,n5,n3,n7,op,o$,om,of,og,oy,ox,ov,ow,oS,oM,rS,rP,rA,rL,rz,r_,s9,rD,n,te,H,e6,e3,a,N,e4,el,eh,z,F,eQ,et,eK,eY,eZ,eU,eV,ej,eN,ez,eE,eI,eD,eW,eF,eA,eG,eH,eP,eT,eC,X,Q,eu,ec,ea,en,ei,eo,em,eg,ef,e$,ep,ee,J,es,eb,ex,V,_,W,I,C,R,E,T,k,w,S,$,v,y,b,s,h,l,u,o,tt,rN,to,ta,tl,ts,tp,tf,tg,tx,tb,tv,tC,tR,tL,tF,tB,tW,tX,tZ,tK,tJ,t2,t3,t8,t7,t9,ie,it,ii,rj,ia,il,is,ic,iu,ih,iy,ix,iS,iE,iR,iA,iz,iB,iO,iV,iU,iH,iX,iK,iJ,iQ,i0,i1,i2,function(){r(31,rE=p0.innerWidth),r(32,rR=p0.innerHeight)},e=>o1(aX,i3=e.detail,i3),({detail:e})=>r(43,j=e),function(t,n){e.$$.not_equal(n9[n],t)&&(n9[n]=t,r(1,n9),r(281,n3),r(27,n6))},e=>sI(e),e=>sA(e),(e,{detail:t})=>sL(e,t),e=>o1(aH,io=e.detail,io),function(t){e.$$.not_equal(n9[j],t)&&(n9[j]=t,r(1,n9),r(281,n3),r(27,n6))},()=>sI(j),()=>sA(j),({detail:e})=>sL(j,e),e=>{let t={...e,...dt()},{annotationShapes:r,decorationShapes:n,interfaceShapes:o,frameShapes:a,selectionShapes:l}=no({annotationShapes:tc,decorationShapes:tn,interfaceShapes:ra,frameShapes:tr,selectionShapes:ij},t);return dm(t,e8,r,n,o,a,l)},()=>{r(63,df=!1),r(64,dy=!1),r(65,db=!1),r(66,dw=!1),r(67,dM=!1)},function(e){aE[e?"unshift":"push"](()=>{r(36,rB=e)})},function(e){r(0,n0=e),r(269,nL)},function(e){r(33,sx=e)},function(e){r(34,rI=e)},function(e){aE[e?"unshift":"push"](()=>{r(61,rg=e)})},function(e){aE[e?"unshift":"push"](()=>{r(2,oe=e)})},e=>o1(aV,tk=e.detail,tk)]}class $b extends a3{constructor(e){super(),a5(this,e,$x,$m,oj,{class:236,layout:237,stores:238,locale:3,id:4,util:239,utils:240,animations:241,disabled:242,previewUpscale:243,previewPad:244,previewMaskOpacity:5,previewImageDataMaxSize:245,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:246,elasticityMultiplier:8,willRevert:247,willProcessImage:248,willRenderCanvas:9,willRenderToolbar:249,willRenderUtilTabs:250,willSetHistoryInitialState:251,enableButtonExport:252,enableButtonRevert:253,enableNavigateHistory:254,enableToolbar:10,enableUtils:255,enableButtonClose:256,enableDropImage:257,enablePasteImage:258,enableBrowseImage:259,enableTransparencyGrid:11,layoutDirectionPreference:260,layoutHorizontalUtilsPreference:261,layoutVerticalUtilsPreference:262,layoutVerticalToolbarPreference:263,layoutVerticalControlGroupsPreference:264,layoutVerticalControlTabsPreference:265,status:234,formatStatusImageLoading:266,formatStatusImageProcessing:267,formatStatusSupportError:268,textDirection:12,markupEditorZoomLevel:269,markupEditorZoomLevels:13,markupEditorZoomAdjustStep:14,markupEditorZoomAdjustFactor:15,markupEditorZoomAdjustWheelFactor:16,markupEditorInteractionMode:270,muteAudio:271,willSetMediaInitialTimeOffset:272,enablePan:17,enableZoom:18,enableZoomControls:273,enableZoomInput:19,enablePanInput:274,enableCanvasAlpha:20,enablePanLimit:21,panLimitGutterScalar:22,pan:275,zoomPresetOptions:23,zoomAdjustStep:24,zoomAdjustFactor:25,zoomAdjustWheelFactor:26,zoomLevel:0,fixScrollDirection:276,hideTextInput:277,showTextInput:278,imagePreviewSrc:279,imageOrienter:280,pluginComponents:281,pluginOptions:27,sub:282,pluginInterface:1,root:2,play:283,pause:284,isPaused:285,togglePlayPause:286,mute:287,unmute:288,toggleMute:289,getDuration:290,getCurrentTime:291,setCurrentTime:292,imageSourceToImageData:28,imagePreview:29,imagePreviewCurrent:235,history:30},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[236]}set class(e){this.$$set({class:e}),a_()}get layout(){return this.$$.ctx[237]}set layout(e){this.$$set({layout:e}),a_()}get stores(){return this.$$.ctx[238]}set stores(e){this.$$set({stores:e}),a_()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),a_()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),a_()}get util(){return this.$$.ctx[239]}set util(e){this.$$set({util:e}),a_()}get utils(){return this.$$.ctx[240]}set utils(e){this.$$set({utils:e}),a_()}get animations(){return this.$$.ctx[241]}set animations(e){this.$$set({animations:e}),a_()}get disabled(){return this.$$.ctx[242]}set disabled(e){this.$$set({disabled:e}),a_()}get previewUpscale(){return this.$$.ctx[243]}set previewUpscale(e){this.$$set({previewUpscale:e}),a_()}get previewPad(){return this.$$.ctx[244]}set previewPad(e){this.$$set({previewPad:e}),a_()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),a_()}get previewImageDataMaxSize(){return this.$$.ctx[245]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),a_()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),a_()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),a_()}get zoomMaskOpacity(){return this.$$.ctx[246]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),a_()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),a_()}get willRevert(){return this.$$.ctx[247]}set willRevert(e){this.$$set({willRevert:e}),a_()}get willProcessImage(){return this.$$.ctx[248]}set willProcessImage(e){this.$$set({willProcessImage:e}),a_()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),a_()}get willRenderToolbar(){return this.$$.ctx[249]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),a_()}get willRenderUtilTabs(){return this.$$.ctx[250]}set willRenderUtilTabs(e){this.$$set({willRenderUtilTabs:e}),a_()}get willSetHistoryInitialState(){return this.$$.ctx[251]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),a_()}get enableButtonExport(){return this.$$.ctx[252]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),a_()}get enableButtonRevert(){return this.$$.ctx[253]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),a_()}get enableNavigateHistory(){return this.$$.ctx[254]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),a_()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),a_()}get enableUtils(){return this.$$.ctx[255]}set enableUtils(e){this.$$set({enableUtils:e}),a_()}get enableButtonClose(){return this.$$.ctx[256]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),a_()}get enableDropImage(){return this.$$.ctx[257]}set enableDropImage(e){this.$$set({enableDropImage:e}),a_()}get enablePasteImage(){return this.$$.ctx[258]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),a_()}get enableBrowseImage(){return this.$$.ctx[259]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),a_()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),a_()}get layoutDirectionPreference(){return this.$$.ctx[260]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),a_()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[261]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),a_()}get layoutVerticalUtilsPreference(){return this.$$.ctx[262]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),a_()}get layoutVerticalToolbarPreference(){return this.$$.ctx[263]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),a_()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[264]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),a_()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[265]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),a_()}get status(){return this.$$.ctx[234]}set status(e){this.$$set({status:e}),a_()}get formatStatusImageLoading(){return this.$$.ctx[266]}set formatStatusImageLoading(e){this.$$set({formatStatusImageLoading:e}),a_()}get formatStatusImageProcessing(){return this.$$.ctx[267]}set formatStatusImageProcessing(e){this.$$set({formatStatusImageProcessing:e}),a_()}get formatStatusSupportError(){return this.$$.ctx[268]}set formatStatusSupportError(e){this.$$set({formatStatusSupportError:e}),a_()}get textDirection(){return this.$$.ctx[12]}set textDirection(e){this.$$set({textDirection:e}),a_()}get markupEditorZoomLevel(){return this.$$.ctx[269]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),a_()}get markupEditorZoomLevels(){return this.$$.ctx[13]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),a_()}get markupEditorZoomAdjustStep(){return this.$$.ctx[14]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),a_()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),a_()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[16]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),a_()}get markupEditorInteractionMode(){return this.$$.ctx[270]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),a_()}get muteAudio(){return this.$$.ctx[271]}set muteAudio(e){this.$$set({muteAudio:e}),a_()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[272]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),a_()}get enablePan(){return this.$$.ctx[17]}set enablePan(e){this.$$set({enablePan:e}),a_()}get enableZoom(){return this.$$.ctx[18]}set enableZoom(e){this.$$set({enableZoom:e}),a_()}get enableZoomControls(){return this.$$.ctx[273]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),a_()}get enableZoomInput(){return this.$$.ctx[19]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),a_()}get enablePanInput(){return this.$$.ctx[274]}set enablePanInput(e){this.$$set({enablePanInput:e}),a_()}get enableCanvasAlpha(){return this.$$.ctx[20]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),a_()}get enablePanLimit(){return this.$$.ctx[21]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),a_()}get panLimitGutterScalar(){return this.$$.ctx[22]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),a_()}get pan(){return this.$$.ctx[275]}set pan(e){this.$$set({pan:e}),a_()}get zoomPresetOptions(){return this.$$.ctx[23]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),a_()}get zoomAdjustStep(){return this.$$.ctx[24]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),a_()}get zoomAdjustFactor(){return this.$$.ctx[25]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),a_()}get zoomAdjustWheelFactor(){return this.$$.ctx[26]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),a_()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),a_()}get fixScrollDirection(){return this.$$.ctx[276]}set fixScrollDirection(e){this.$$set({fixScrollDirection:e}),a_()}get hideTextInput(){return this.$$.ctx[277]}get showTextInput(){return this.$$.ctx[278]}get imagePreviewSrc(){return this.$$.ctx[279]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),a_()}get imageOrienter(){return this.$$.ctx[280]}set imageOrienter(e){this.$$set({imageOrienter:e}),a_()}get pluginComponents(){return this.$$.ctx[281]}set pluginComponents(e){this.$$set({pluginComponents:e}),a_()}get pluginOptions(){return this.$$.ctx[27]}set pluginOptions(e){this.$$set({pluginOptions:e}),a_()}get sub(){return this.$$.ctx[282]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),a_()}get play(){return this.$$.ctx[283]}get pause(){return this.$$.ctx[284]}get isPaused(){return this.$$.ctx[285]}get togglePlayPause(){return this.$$.ctx[286]}get mute(){return this.$$.ctx[287]}get unmute(){return this.$$.ctx[288]}get toggleMute(){return this.$$.ctx[289]}get getDuration(){return this.$$.ctx[290]}get getCurrentTime(){return this.$$.ctx[291]}get setCurrentTime(){return this.$$.ctx[292]}get imageSourceToImageData(){return this.$$.ctx[28]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),a_()}get imagePreview(){return this.$$.ctx[29]}get imagePreviewCurrent(){return this.$$.ctx[235]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),a_()}get history(){return this.$$.ctx[30]}}let $v=["klass","stores","isVisible","isActive","isActiveFraction","locale"],$w=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],$S=["locale"],$k=new Set([]),$C={},$T=new Map,$M=(...e)=>{e.filter(e=>!!e.util).forEach(e=>{let[t,r,n=()=>!0]=e.util;$T.has(t)||($T.set(t,{Component:r,isSupported:n}),ch(r).filter(e=>!$v.includes(e)).forEach(e=>{if($k.add(e),$C[e]){$C[e].push(t);return}$C[e]=[t]}))})},$P=(e,t)=>{let r={},n=new Map,o=new $b({target:e,props:{stores:t,pluginComponents:Array.from($T)}}),a=!1,l=()=>{!a&&(k()&&window.removeEventListener("pagehide",l),o&&(a=!0,o.$destroy()))};function s(e,t){return n.get(e)===t||(n.set(e,t),!1)}u||(u=new Set(ch($b).filter(e=>!$w.includes(e)))),u.forEach(e=>{Object.defineProperty(r,e,{get:()=>o[e],set:$S.includes(e)?t=>{s(e,t)||(o[e]={...o[e],...t})}:t=>{s(e,t)||(o[e]=t)}})}),Object.defineProperty(r,"previewImageData",{get:()=>o.imagePreviewCurrent}),$k.forEach(e=>{let t=$C[e],n=t[0];Object.defineProperty(r,e,{get:()=>o.pluginInterface[n][e],set:r=>{if(s(e,r))return;let n=t.reduce((t,n)=>(t[n]={...o.pluginOptions[n],[e]:r},t),{});o.pluginOptions={...o.pluginOptions,...n}}})}),Object.defineProperty(r,"element",{get:()=>o.root,set:()=>void 0});let d=o.history;return lu(r,{on:(e,t)=>{if(a)return()=>{};if(/undo|redo|revert|writehistory/.test(e))return d.on(e,t);let r=[o.sub(e,t),o.$on(e,e=>t(e instanceof CustomEvent&&!e.detail?void 0:e))].filter(Boolean);return()=>r.forEach(e=>e())},updateImagePreview:e=>{o.imagePreviewSrc=e},close:()=>!a&&o.pub("close"),destroy:l}),Object.defineProperty(r,"history",{get:()=>({undo:()=>d.undo(),redo:()=>d.redo(),revert:()=>d.revert(),get:()=>d.get(),getCollapsed:()=>d.get().splice(0,d.index+1),set:e=>d.set(e),write:e=>d.write(e),get length(){return d.length()},get index(){return d.index},set index(index){d.index=index}})}),k()&&window.addEventListener("pagehide",l),r};var $E=[...l_,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","blurshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol","selectiondown","selectionup","selectionchange"];let $R=(e,t,r)=>e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,cancelable:!0})),$I=e=>P(e[0]),$A=e=>!$I(e),$L=e=>e[1],$F=e=>e[3]||[],$z=(e,t)=>{let r=$B(e,t);return h6(r,t=>$L(t)===e),r},$B=(e,t)=>{if($A(t)){if(t.find(t=>$L(t)===e))return t;let r=t.find(t=>$B(e,$F(t)));return r&&r[3]}return $B(e,$F(t))},$O=[["Default",[[void 0,e=>e.labelDefault]]],["Classic",[["chrome",e=>e.filterLabelChrome],["fade",e=>e.filterLabelFade],["cold",e=>e.filterLabelCold],["warm",e=>e.filterLabelWarm],["pastel",e=>e.filterLabelPastel]]],["Monochrome",[["monoDefault",e=>e.filterLabelMonoDefault],["monoNoir",e=>e.filterLabelMonoNoir],["monoStark",e=>e.filterLabelMonoStark],["monoWash",e=>e.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",e=>e.filterLabelSepiaDefault],["sepiaRust",e=>e.filterLabelSepiaRust],["sepiaBlues",e=>e.filterLabelSepiaBlues],["sepiaColor",e=>e.filterLabelSepiaColor]]]],$D=[["brightness",e=>e.finetuneLabelBrightness],["contrast",e=>e.finetuneLabelContrast],["saturation",e=>e.finetuneLabelSaturation],["exposure",e=>e.finetuneLabelExposure],["temperature",e=>e.finetuneLabelTemperature],["gamma",e=>e.finetuneLabelGamma],!dU()&&["clarity",e=>e.finetuneLabelClarity],["vignette",e=>e.finetuneLabelVignette]].filter(Boolean),$_=(e,t="thumb")=>["div",t,{style:e,textContent:" "}],$W={shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:[$_("top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor")]},$N={shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:[$_("top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double")]},$V={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:[$_("top:.75em;left:.5em;bottom:.75em;border-left:1px solid","a"),$_("top:.75em;right:.5em;bottom:.75em;border-right:1px solid","b"),$_("top:.5em;left:.75em;right:.75em;border-top:1px solid","c"),$_("bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid","d")]},$j={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:[$_("top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor","a"),$_("top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor","b")]},$U={shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:[$_("top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid","a"),$_("top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid","b"),$_("top:.5em;left:.3125em;right:.3125em;border-top:1px solid","c"),$_("bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid","d")]},$H={shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:[$_("top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid","a"),$_("top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid","b"),$_("bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid","c"),$_("bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid","d")]},$G=[[void 0,e=>e.labelNone],["solidSharp",e=>e.frameLabelMatSharp],["solidRound",e=>e.frameLabelMatRound],["lineSingle",e=>e.frameLabelLineSingle],["lineMultiple",e=>e.frameLabelLineMultiple],["edgeCross",e=>e.frameLabelEdgeCross],["edgeSeparate",e=>e.frameLabelEdgeSeparate],["edgeOverlap",e=>e.frameLabelEdgeOverlap],["hook",e=>e.frameLabelCornerHooks],["polaroid",e=>e.frameLabelPolaroid]];var $X=e=>e.charAt(0).toUpperCase()+e.slice(1);let $Z=null;var $Y=()=>{if(null===$Z){if(k())try{$Z=!1===document.fonts.check("16px TestNonExistingFont")}catch(e){$Z=!1}else $Z=!1}return $Z};let $q=(e,t)=>r=>r[t?`${t}${$X(e)}`:e],$K=e=>[e,`${e}`],$J=(e,t)=>r=>[e[r],$q(r,t)],$Q=e=>e.map($K),$0=e=>Array.isArray(e)&&e.every(ri)?$Q(e):e,$1=[1,.2549,.2118],$2="0.5%",$4=[1,1,1,0],$5={eraser:()=>({eraseRadius:8,cursorStyle:"ellipse",cursorSize:"eraseRadius"}),path:()=>({points:[],disableAddPoints:!1}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},$3=(e,t={},r)=>{if(!$5[e])return;let{position:n="relative",inputMode:o="drag",isSelection:a=!1}=r||{};return[{...$5[e](),...t},{position:n,inputMode:o,isSelection:a}]},$6=e=>{let t={sharpie:$3("path",{bitmap:!0,strokeJoin:"round",strokeCap:"round",strokeWidth:$2,strokeColor:[...$1],cursorStyle:"ellipse",cursorSize:"strokeWidth",disableErase:!1,disableResize:!0,disableMove:!0}),eraser:$3("eraser"),path:$3("path",{pathClose:void 0,strokeWidth:$2,strokeColor:[...$1],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:$3("line",{strokeColor:[...$1],strokeWidth:$2}),arrow:$3("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...$1],strokeWidth:$2}),rectangle:$3("rectangle",{strokeColor:[...$4],backgroundColor:[...$1]}),ellipse:$3("ellipse",{strokeColor:[...$4],backgroundColor:[...$1]}),text:$3("text",{color:[...$1],fontSize:"2%"})};return e&&Object.entries(e).forEach(([e,r])=>{Array.isArray(r)?t[e]=r:N(r)&&t[e]&&(t[e]=[{...t[e][0],...r},t[e][1]])}),t},$8=(e,t,r)=>[e,t||$q(e,"shapeLabelTool"),{icon:$q(e,"shapeIconTool"),...r}],$7=(e=["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"])=>e.map(e=>P(e)?$8(e):Array.isArray(e)?N(e[1])?$8(e[0],void 0,e[1]):$8(e[0],e[1],e[2]):void 0).filter(Boolean),$9=()=>({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),me=()=>({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),mt=()=>({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"}),mi=()=>({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),mr=()=>["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"],mn=()=>[["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]],mo=()=>["left","center","right"],ma=()=>[["normal","bold"],["italic","normal"],["italic","bold"]],ml=e=>Object.keys(e).map($J(e,"shapeTitleColor")),ms=e=>Object.keys(e).map($J(e,"labelSize")),md=e=>Object.keys(e).map($J(e,"labelSize")),mc=e=>Object.keys(e).map($J(e,"labelSize")),mu=e=>[...e],mh=e=>e.map(e=>[e,t=>t[`shapeLabelFontStyle${e.filter(e=>"normal"!==e).map($X).join("")}`]]),mp=e=>e.map(e=>[pE(e),t=>t[`shapeTitleLineDecoration${$X(e)}`],{icon:t=>t[`shapeIconLineDecoration${$X(e)}`]}]),m$=e=>e.map(e=>[e,t=>t[`shapeTitleTextAlign${$X(e)}`],{hideLabel:!0,icon:t=>t[`shapeIconTextAlign${$X(e)}`]}]),mm=(e,t)=>{let{defaultKey:r,defaultValue:n,defaultOptions:o}=t||{},a=[];return r&&(a[0]=[n,e=>e[r],{...o}]),[...a,...e]},mf=e=>e.split(",").map(e=>e.trim()).some(e=>document.fonts.check(`16px ${e}`)),mg=(e={})=>["ToggleSlider",{...e}],my="PinturaFontTest",mx=(e,t={})=>["ColorPicker",{options:mm(e),...t}],mb=e=>(t,r={})=>mx(t,{title:t=>t[e],...r}),mv=mb("shapeTitleBackgroundColor"),mw=mb("shapeTitleTextColor"),mS=(e,t)=>{let{title:r,optionHideLabel:n=!1,layout:o,optionIcon:a=!1}=t||{},l=$0(e),s=e.map(([e])=>P(e)?parseFloat(e):e),d=Math.max(...s),c=Math.min(...s),u=d-c;return["radio"===o?"RadioGroup":"Dropdown",{title:!1===r?void 0:r||(e=>e.shapeTitleStrokeWidth),options:e=>{let r=t?l.map(e=>{let t;let[r,o,l={}]=e,s=P(r)?parseFloat(r):r,d=(s-c)/u;return"line"===a?t=`<path stroke="currentColor" stroke-linecap="square" stroke-width="${.1+.875*d}em" d="M3,12 H20"/>`:"dot"===a?t=`<circle fill="currentColor" cx="12" cy="12" r="${2+8*d}"/>`:P(a)?t=a:U(a)&&(t=a(s,d)),[r,o,{icon:t,hideLabel:n,...l}]}):l;return rn(e,"backgroundColor")?mm(r,{defaultKey:"shapeLabelStrokeNone"}):mm(r)},onchange:(e,t)=>{if(!e)return;let r=t.strokeColor||[];if(r[3])return;let n=[...r];n[3]=1,t.strokeColor=n}}]},mk=(e,t)=>{let{title:r,layout:n}=t||{};return["radio"===n?"RadioGroup":"Dropdown",{title:r,options:mm(e)}]},mC=(e,t,r)=>["Dropdown",{title:e=>e[t],options:mm(e,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:r}],mT=e=>["ShorthandControl",e],mM=(e,t,r,n)=>(n||e.find(([e])=>e===r)||(n={defaultKey:"labelAuto",defaultValue:r}),["Dropdown",{title:t,options:mm($0(e),n),...n}]),mP={colorOptions:()=>ml($9()),lineEndStyleOptions:()=>mp(mr()),fontFamilyOptions:()=>mu(mn()),fontStyleOptions:()=>mh(ma()),textAlignOptions:()=>m$(mo()),strokeWidthOptions:()=>mc(mi()),brushSizeOptions:()=>mc(Object.entries(mi()).reduce((e,[t,r])=>(e[t]=`${2*parseFloat(r)}%`,e),{})),fontSizeOptions:()=>ms(me()),lineHeightOptions:()=>md(mt())},mE=new Intl.NumberFormat("default",{minimumFractionDigits:1,maximumFractionDigits:1}),mR=(e,t)=>P(t)?`${e}%`:e,mI=(e,t,r,n)=>P(n)?`${Math.round(e/r*100)}%`:`${mE.format(e)}`,mA={getValue:e=>parseFloat(e),setValue:mR,label:mI,step:.05,labelClass:"PinturaPercentageLabel"},mL={defaultColor:{factory:(e,t={})=>mx(e,{title:e=>e.labelColor,...t}),items:"colorOptions"},defaultNumber:{factory:mg},defaultPercentage:{factory:mg,options:{getValue:e=>parseFloat(e),setValue:e=>`${e}%`,step:.05,label:(e,t,r)=>`${Math.round(e/r*100)}%`,labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:mv},strokeColor:{items:"colorOptions",factory:(e,t={})=>mx(e,{title:e=>e.shapeTitleStrokeColor,options:mm(e),buttonClass:"PinturaColorPickerButtonStroke",onchange:(e,r)=>{let n=r.strokeWidth;(ri(n)||P(n)?parseFloat(n):0)>0||(r.strokeWidth=t&&t.defaultStrokeWidth||"0.5%")},...t})},strokeWidth:{items:"strokeWidthOptions",factory:mS},brushSize:{items:"brushSizeOptions",factory:e=>mS(e,{title:e=>e.shapeTitleBrushSize,layout:"radio",optionHideLabel:!0,optionIcon:(e,t)=>`<circle fill="currentColor" stroke-width=".05em" stroke="currentColor" fill-opacity=".25" cx="12" cy="12" r="${2+8*t}"/>`})},drawMode:{factory:e=>{let{hideLabel:t=!0}=e||{};return mk(["new","add","subtract"].map(e=>[e,$q(e,"shapeLabelSelectionMode"),{icon:$q(e,"shapeIconSelectionMode"),hideLabel:t}]),{title:e=>e.shapeTitleSelectionMode,layout:"radio"})}},lineStart:{items:"lineEndStyleOptions",factory:e=>mC(e,"shapeTitleLineStart","transform: scaleX(-1)")},lineEnd:{items:"lineEndStyleOptions",factory:e=>mC(e,"shapeTitleLineEnd")},color:{items:"colorOptions",factory:mw},fontFamily:{items:"fontFamilyOptions",factory:(e,t={defaultKey:"labelDefault"})=>["Dropdown",{title:e=>e.shapeTitleFontFamily,onload:({options:e=[]})=>{$Y()&&e.map(([e])=>e).filter(Boolean).filter(e=>!mf(e)).forEach(e=>{let t=`${my}-${e.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase()}`;document.getElementById(t)||document.body.append(R("span",{textContent:" ",id:t,class:my,style:`font-family:${e};font-size:0;color:transparent;`}))})},ondestroy:()=>{$Y()&&document.querySelectorAll(".PinturaFontTest").forEach(e=>e.remove())},optionLabelStyle:e=>`font-family: ${e}`,options:mm(e,t),optionFilter:e=>{if(!$Y())return!0;let[t]=e;return!t||mf(t)}}]},fontStyle_fontWeight:{items:"fontStyleOptions",factory:e=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&`font-style:${e[0]};font-weight:${e[1]}`,options:mm(e,{defaultKey:"shapeLabelFontStyleNormal"})}]},fontSize:{items:"fontSizeOptions",factory:(e,t)=>mM(e,e=>e.shapeTitleFontSize,"4%",t)},lineHeight:{items:"lineHeightOptions",factory:(e,t)=>mM(e,e=>e.shapeTitleLineHeight,"120%",t)},textAlign:{items:"textAlignOptions",factory:e=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:mm(e)}]},textShadowX_textShadowY_textShadowBlur_textShadowColor:{factory:mT,options:{title:"Text shadow",controls:[["ToggleSlider","x",{...mA,min:-100,max:100,labelPrefix:"X"}],["ToggleSlider","y",{...mA,min:-100,max:100,labelPrefix:"Y"}],["ToggleSlider","blur",{...mA,min:0,max:25,labelPrefix:e=>e.shapeTitleTextShadowBlur}],["ColorPicker","color",{enablePresets:!1}]]}},textOutlineWidth_textOutlineColor:{factory:mT,options:{title:"Text outline",controls:[["ToggleSlider","width",{getValue:e=>parseFloat(e),setValue:mR,label:mI,min:0,max:15,step:.05,labelClass:"PinturaPercentageLabel",labelPrefix:e=>e.shapeTitleTextOutlineWidth}],["ColorPicker","color",{enablePresets:!1}]]}},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:e=>e.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:e=>e.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:e=>e.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:e=>e.labelAmount}}},mF=(e={})=>{let t={...mL,...e},r={};return Object.entries(t).forEach(([e,n])=>{if(!/Options$/.test(e)){if(mL[e]&&N(n)&&!ro(n)){let{component:n,factory:o,items:a,options:l={}}=t[e];if(P(o))r[e]=[o,l];else{let s=mL[e].items,d=P(s)?t[s]||mP[s]():void 0;P(a)&&mP[a]?d=t[a]?t[a].every(e=>!Array.isArray(e))?t[a].map(e=>[e,e]):t[a]:mP[a]():(a||l.items)&&(d=a||l.items);let c=o||mL[e].factory;U(c)?r[e]=d?c(d,l):c(l):n&&(r[e]=[n,{...l,items:a}])}}else r[e]=n}}),r};function mz(e){let t,r,n,o,a;let l=e[7].default,s=oZ(l,e,e[6],null);return{c(){t=ar("div"),r=ar("div"),s&&s.c(),ad(r,"class","PinturaToolbarInner"),ad(t,"class","PinturaToolbar"),ad(t,"data-layout",e[1]),ad(t,"data-overflow",e[0])},m(l,d){at(l,t,d),o9(t,r),s&&s.m(r,null),n=!0,o||(a=[as(r,"measure",e[3]),o2(dO.call(null,r)),as(t,"measure",e[2]),o2(dO.call(null,t))],o=!0)},p(e,[r]){s&&s.p&&(!n||64&r)&&oK(s,l,e,e[6],n?oq(l,e[6],r,null):oJ(e[6]),null),(!n||2&r)&&ad(t,"data-layout",e[1]),(!n||1&r)&&ad(t,"data-overflow",e[0])},i(e){n||(aU(s,e),n=!0)},o(e){aH(s,e),n=!1},d(e){e&&ai(t),s&&s.d(e),o=!1,oN(a)}}}function mB(e,t,r){let n,o;let{$$slots:a={},$$scope:l}=t,s=0,d=0,c=0,u=()=>{r(0,o="compact"===n&&s>c?"overflow":void 0)};return e.$$set=e=>{"$$scope"in e&&r(6,l=e.$$scope)},e.$$.update=()=>{48&e.$$.dirty&&r(1,n=d>c?"compact":"default")},[o,n,({detail:e})=>{let{width:t}=e;r(5,c=t),u()},({detail:e})=>{let{width:t}=e;t>d&&r(4,d=t),s=t,o||u()},d,c,l,a]}class mO extends a3{constructor(e){super(),a5(this,e,mB,mz,oj,{})}}function mD(e){let t,r,n,o;let a=e[5].default,l=oZ(a,e,e[4],null);return{c(){t=ar("div"),l&&l.c(),ad(t,"class",e[0])},m(a,s){at(a,t,s),l&&l.m(t,null),r=!0,n||(o=[as(t,"measure",function(){oV(e[1]&&e[3])&&(e[1]&&e[3]).apply(this,arguments)}),o2(e[2].call(null,t))],n=!0)},p(n,[o]){e=n,l&&l.p&&(!r||16&o)&&oK(l,a,e,e[4],r?oq(a,e[4],o,null):oJ(e[4]),null),(!r||1&o)&&ad(t,"class",e[0])},i(e){r||(aU(l,e),r=!0)},o(e){aH(l,e),r=!1},d(e){e&&ai(t),l&&l.d(e),n=!1,oN(o)}}}function m_(e,t,r){let{$$slots:n={},$$scope:o}=t,a=ak(),{class:l=null}=t,s=aT("measurable"),d=!1;return av(()=>r(1,d=!0)),e.$$set=e=>{"class"in e&&r(0,l=e.class),"$$scope"in e&&r(4,o=e.$$scope)},[l,d,s,({detail:e})=>a("measure",e),o,n]}class mW extends a3{constructor(e){super(),a5(this,e,m_,mD,oj,{class:0})}}let mN=e=>({}),mV=e=>({}),mj=e=>({}),mU=e=>({}),mH=e=>({}),mG=e=>({});function mX(e){let t,r;let n=e[4].header,o=oZ(n,e,e[3],mG);return{c(){t=ar("div"),o&&o.c(),ad(t,"class","PinturaUtilHeader")},m(e,n){at(e,t,n),o&&o.m(t,null),r=!0},p(e,t){o&&o.p&&(!r||8&t)&&oK(o,n,e,e[3],r?oq(n,e[3],t,mH):oJ(e[3]),mG)},i(e){r||(aU(o,e),r=!0)},o(e){aH(o,e),r=!1},d(e){e&&ai(t),o&&o.d(e)}}}function mZ(e){let t,r;let n=e[4].footer,o=oZ(n,e,e[3],mV);return{c(){t=ar("div"),o&&o.c(),ad(t,"class","PinturaUtilFooter")},m(e,n){at(e,t,n),o&&o.m(t,null),r=!0},p(e,t){o&&o.p&&(!r||8&t)&&oK(o,n,e,e[3],r?oq(n,e[3],t,mN):oJ(e[3]),mV)},i(e){r||(aU(o,e),r=!0)},o(e){aH(o,e),r=!1},d(e){e&&ai(t),o&&o.d(e)}}}function mY(e){let t,r,n,o,a,l,s,d;let c=e[1]&&mX(e),u=e[4].main,h=oZ(u,e,e[3],mU),p=h||((s=new mW({props:{class:"PinturaStage"}})).$on("measure",e[5]),{c(){a1(s.$$.fragment)},m(e,t){a2(s,e,t),d=!0},p:oB,i(e){d||(aU(s.$$.fragment,e),d=!0)},o(e){aH(s.$$.fragment,e),d=!1},d(e){a4(s,e)}}),$=e[2]&&mZ(e);return{c(){c&&c.c(),t=aa(),r=ar("div"),p&&p.c(),n=aa(),$&&$.c(),o=aa(),a=al(),ad(r,"class","PinturaUtilMain")},m(s,d){c&&c.m(s,d),at(s,t,d),at(s,r,d),p&&p.m(r,null),e[6](r),at(s,n,d),$&&$.m(s,d),at(s,o,d),at(s,a,d),l=!0},p(e,[r]){e[1]?c?(c.p(e,r),2&r&&aU(c,1)):((c=mX(e)).c(),aU(c,1),c.m(t.parentNode,t)):c&&(aV(),aH(c,1,1,()=>{c=null}),aj()),h&&h.p&&(!l||8&r)&&oK(h,u,e,e[3],l?oq(u,e[3],r,mj):oJ(e[3]),mU),e[2]?$?($.p(e,r),4&r&&aU($,1)):(($=mZ(e)).c(),aU($,1),$.m(o.parentNode,o)):$&&(aV(),aH($,1,1,()=>{$=null}),aj())},i(e){l||(aU(c),aU(p,e),aU($),aU(!1),l=!0)},o(e){aH(c),aH(p,e),aH($),aH(!1),l=!1},d(l){c&&c.d(l),l&&ai(t),l&&ai(r),p&&p.d(l),e[6](null),l&&ai(n),$&&$.d(l),l&&ai(o),l&&ai(a)}}}function mq(e,t,r){let{$$slots:n={},$$scope:o}=t,{hasHeader:a=!!t.$$slots.header}=t,{hasFooter:l=!!t.$$slots.footer}=t,{root:s}=t;return e.$$set=e=>{r(7,t=oD(oD({},t),oQ(e))),"hasHeader"in e&&r(1,a=e.hasHeader),"hasFooter"in e&&r(2,l=e.hasFooter),"root"in e&&r(0,s=e.root),"$$scope"in e&&r(3,o=e.$$scope)},t=oQ(t),[s,a,l,o,n,function(t){aM.call(this,e,t)},function(e){aE[e?"unshift":"push"](()=>{r(0,s=e)})}]}class mK extends a3{constructor(e){super(),a5(this,e,mq,mY,oj,{hasHeader:1,hasFooter:2,root:0})}}function mJ(e){let t;return{c(){ad(t=ar("div"),"class","PinturaRangeInputMeter"),a$(t,"transform",`translateX(${e[10].x-e[13].x}px) translateY(${e[10].y-e[13].y}px)`)},m(r,n){at(r,t,n),t.innerHTML=e[7]},p(e,r){128&r[0]&&(t.innerHTML=e[7]),1024&r[0]&&a$(t,"transform",`translateX(${e[10].x-e[13].x}px) translateY(${e[10].y-e[13].y}px)`)},d(e){e&&ai(t)}}}function mQ(e){let t,r,n,o,a,l,s,d,c,u,h;let p=e[10]&&mJ(e);return{c(){t=ar("div"),r=ar("span"),n=aa(),o=ar("button"),a=ao(e[1]),s=aa(),d=ar("div"),p&&p.c(),ad(r,"class","PinturaRangeInputValue"),ad(o,"class","PinturaRangeInputReset"),ad(o,"type","button"),o.disabled=l=e[0]===e[2],ad(d,"class","PinturaRangeInputInner"),ad(d,"data-value-limited",e[5]),a$(d,"--range-mask-from",e[9]),a$(d,"--range-mask-to",e[8]),ad(t,"class","PinturaRangeInput"),ad(t,"tabindex","0")},m(l,$){at(l,t,$),o9(t,r),r.innerHTML=e[3],o9(t,n),o9(t,o),o9(o,a),o9(t,s),o9(t,d),p&&p.m(d,null),u||(h=[as(o,"click",e[18]),as(d,"interactionstart",e[14]),as(d,"interactionupdate",e[16]),as(d,"interactionend",e[17]),as(d,"interactionrelease",e[15]),o2(c=h7.call(null,d,{inertia:e[6]})),as(d,"measure",e[39]),o2(dO.call(null,d)),as(t,"wheel",e[20],{passive:!1}),as(t,"nudge",e[21]),o2(uK.call(null,t,{direction:"horizontal",preventDefault:!0}))],u=!0)},p(e,t){8&t[0]&&(r.innerHTML=e[3]),2&t[0]&&ah(a,e[1]),5&t[0]&&l!==(l=e[0]===e[2])&&(o.disabled=l),e[10]?p?p.p(e,t):((p=mJ(e)).c(),p.m(d,null)):p&&(p.d(1),p=null),32&t[0]&&ad(d,"data-value-limited",e[5]),c&&oV(c.update)&&64&t[0]&&c.update.call(null,{inertia:e[6]}),512&t[0]&&a$(d,"--range-mask-from",e[9]),256&t[0]&&a$(d,"--range-mask-to",e[8])},i:oB,o:oB,d(e){e&&ai(t),p&&p.d(),u=!1,oN(h)}}}function m0(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,b,v;let{labelReset:w="Reset"}=t,{direction:S="x"}=t,{min:k=0}=t,{max:C=1}=t,{base:T=k}=t,{value:M=0}=t,{valueLabel:P=0}=t,{valueMin:E}=t,{valueMax:R}=t,{oninputstart:I=x}=t,{oninputmove:A=x}=t,{oninputend:L=x}=t,{elasticity:F=0}=t,{nudgeMultiplier:z}=t,{step:B=8}=t,O=aT("isAnimated");oX(e,O,e=>r(6,p=e));let D=aT("fixScrollDirection");oX(e,D,e=>r(45,$=e));let _=(e,t,r)=>Math.ceil((e-r)/t)*t+r,W={x:2,y:0},N=(e,t,r)=>`M ${e-r} ${t} a ${r} ${r} 0 1 0 0 -1`,V=!1,j={snap:!1,elastic:!1},U=(e,t,r)=>{let n=e[S]+t[S],o=lb(n,b[1][S],b[0][S]),a=F?o+h9(n-o,F):o,l=r.elastic?a:o,s=eO(0,0);return s[S]=l,H.set(s,{hard:r.snap}),lb(X(s,S),k,C)},H=dk();oX(e,H,e=>r(10,m=e));let G=(e,t)=>{let r=(f[t]-l[t])*.5-(uQ(e,k,C)*l[t]-.5*l[t]);return{x:"x"===t?r:0,y:"y"===t?r:0}},X=(e,t)=>{let r=-((e[t]-.5*f[t])/l[t]);return k+r*n},Z=H.subscribe(e=>{e&&v&&A(lb(X(e,S),k,C))}),Y=e=>{let t=[G(null!=E?E:k,S),G(null!=R?R:C,S)],r=lb({x:"x"===S?m.x+e:0,y:"y"===S?m.y+e:0}[S],t[1][S],t[0][S]),n={...m,[S]:r};o1(H,m=n,m);let o=lb(X(n,S),k,C);I(),A(o),L(o)};return aS(()=>{Z()}),e.$$set=e=>{"labelReset"in e&&r(1,w=e.labelReset),"direction"in e&&r(22,S=e.direction),"min"in e&&r(23,k=e.min),"max"in e&&r(24,C=e.max),"base"in e&&r(2,T=e.base),"value"in e&&r(0,M=e.value),"valueLabel"in e&&r(3,P=e.valueLabel),"valueMin"in e&&r(25,E=e.valueMin),"valueMax"in e&&r(26,R=e.valueMax),"oninputstart"in e&&r(27,I=e.oninputstart),"oninputmove"in e&&r(28,A=e.oninputmove),"oninputend"in e&&r(29,L=e.oninputend),"elasticity"in e&&r(30,F=e.elasticity),"nudgeMultiplier"in e&&r(31,z=e.nudgeMultiplier),"step"in e&&r(32,B=e.step)},e.$$.update=()=>{if(0x1800000&e.$$.dirty[0]&&r(34,n=C-k),0x2800000&e.$$.dirty[0]&&r(36,o=null!=E?Math.max(E,k):k),0x5000000&e.$$.dirty[0]&&r(35,a=null!=R?Math.min(R,C):C),0x1800004&e.$$.dirty[0]&&r(38,s=uQ(T,k,C)),16&e.$$.dirty[0]|128&e.$$.dirty[1]&&f){let e;let t=.5*f.y,n=40*s,o="",a=f.y,l="";for(let r=0;r<=40;r++){let a=W.x+10*r;o+=N(a,t,r%5==0?2:.75)+" ",e=a+W.x,r===n&&(l=`<path d="M${a} ${t-4} l2 3 l-2 -1 l-2 1 z"/>`)}r(7,g=`<svg width="${e}" height="${a}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${e} ${a}" aria-hidden="true" focusable="false">
        ${l}
        <rect rx="4" ry="4" y="${t-4}"" height="8"/>
        <path fill-rule="evenodd" d="${o.trim()}"/></svg>`),r(33,y={x:e-2*W.x,y:a})}16&e.$$.dirty[0]|4&e.$$.dirty[1]&&(l=f&&y),0x1800000&e.$$.dirty[0]|48&e.$$.dirty[1]&&r(5,d=o!==k||a!==C),32&e.$$.dirty[0]|48&e.$$.dirty[1]&&r(37,c=d?function(e,t){let r=uQ(e,k,C),n=uQ(t,k,C),o=eL(_(r,.025,0)-.0125),a=eL(_(n,.025,0)-.0125);return[`${100*o}%`,`${100*a}%`]}(o,a):void 0),64&e.$$.dirty[1]&&r(9,u=c?c[0]:""),64&e.$$.dirty[1]&&r(8,h=c?c[1]:""),4194385&e.$$.dirty[0]|8&e.$$.dirty[1]&&n&&f&&f.x&&f.y&&H.set(G(M,S),{hard:!1===p})},[M,w,T,P,f,d,p,g,h,u,m,O,D,W,()=>{V=!1,v=oG(H),b=[G(null!=E?E:k,S),G(null!=R?R:C,S)],I()},()=>{V=!0},({detail:e})=>{j.snap=!V,j.elastic=!V,U(v,e.translation,j)},({detail:e})=>{j.snap=!1,j.elastic=!1;let t=U(v,e.translation,j);if(v=void 0,b=void 0,.01>Math.abs(t-T))return L(T);L(t)},()=>{r(0,M=lb(T,o,a)),I(),L(M)},H,e=>{e.preventDefault(),e.stopPropagation(),Y(pr(e,{fixScrollDirection:$})*B)},({detail:e})=>{Y(e[S]*Math.abs(z||8))},S,k,C,E,R,I,A,L,F,z,B,y,n,a,o,c,s,e=>r(4,f=eD(e.detail))]}class m1 extends a3{constructor(e){super(),a5(this,e,m0,mQ,oj,{labelReset:1,direction:22,min:23,max:24,base:2,value:0,valueLabel:3,valueMin:25,valueMax:26,oninputstart:27,oninputmove:28,oninputend:29,elasticity:30,nudgeMultiplier:31,step:32},null,[-1,-1])}}var m2={[ek]:e=>({x:e.x,y:e.y}),[eE]:e=>({x:e.x+e.width,y:e.y}),[eC]:e=>({x:e.x+e.width,y:e.y}),[eR]:e=>({x:e.x+e.width,y:e.y+e.height}),[eT]:e=>({x:e.x,y:e.y+e.height}),[eI]:e=>({x:e.x,y:e.y+e.height}),[eM]:e=>({x:e.x,y:e.y}),[eP]:e=>({x:e.x,y:e.y})};function m4(e,t,r){let n=e.slice();return n[14]=t[r].key,n[15]=t[r].translate,n[16]=t[r].scale,n[17]=t[r].type,n[18]=t[r].opacity,n}function m5(e,t){let r,n,o,a,l,s,d;return{key:e,first:null,c(){ad(r=ar("div"),"role","button"),ad(r,"aria-label",n=`Drag ${t[17]} ${t[14]}`),ad(r,"tabindex",o="edge"===t[17]?-1:0),ad(r,"class","PinturaRectManipulator"),ad(r,"data-direction",a=t[14]),ad(r,"data-shape",l=`${"edge"===t[17]?"edge":`${t[0]}`}`),a$(r,"--tx",t[15].x),a$(r,"--ty",t[15].y),a$(r,"--sx",t[16].x),a$(r,"--sy",t[16].y),a$(r,"opacity",t[18]),this.first=r},m(e,n){at(e,r,n),s||(d=[as(r,"nudge",function(){oV(t[6](t[14]))&&t[6](t[14]).apply(this,arguments)}),o2(uK.call(null,r,{preventDefault:!0})),as(r,"interactionstart",function(){oV(t[5]("resizestart",t[14]))&&t[5]("resizestart",t[14]).apply(this,arguments)}),as(r,"interactionupdate",function(){oV(t[5]("resizemove",t[14]))&&t[5]("resizemove",t[14]).apply(this,arguments)}),as(r,"interactionend",function(){oV(t[5]("resizeend",t[14]))&&t[5]("resizeend",t[14]).apply(this,arguments)}),o2(h7.call(null,r))],s=!0)},p(e,s){t=e,2&s&&n!==(n=`Drag ${t[17]} ${t[14]}`)&&ad(r,"aria-label",n),2&s&&o!==(o="edge"===t[17]?-1:0)&&ad(r,"tabindex",o),2&s&&a!==(a=t[14])&&ad(r,"data-direction",a),3&s&&l!==(l=`${"edge"===t[17]?"edge":`${t[0]}`}`)&&ad(r,"data-shape",l),2&s&&a$(r,"--tx",t[15].x),2&s&&a$(r,"--ty",t[15].y),2&s&&a$(r,"--sx",t[16].x),2&s&&a$(r,"--sy",t[16].y),2&s&&a$(r,"opacity",t[18])},d(e){e&&ai(r),s=!1,oN(d)}}}function m3(e){let t,r=[],n=new Map,o=e[1],a=e=>e[14];for(let t=0;t<o.length;t+=1){let l=m4(e,o,t),s=a(l);n.set(s,r[t]=m5(s,l))}return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=al()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);at(e,t,n)},p(e,[l]){99&l&&(o=e[1],r=aK(r,l,a,1,e,o,n,t.parentNode,aY,m5,t,m4))},i:oB,o:oB,d(e){for(let t=0;t<r.length;t+=1)r[t].d(e);e&&ai(t)}}}function m6(e,t,r){let n,o,a,l,s;let{rect:d=null}=t,{visible:c=!1}=t,{cornerStyle:u}=t,h=aT("isAnimated");oX(e,h,e=>r(11,l=e));let p=dk(void 0,{precision:1e-4,stiffness:.2,damping:.4});oX(e,p,e=>r(10,a=e));let $=dk(0,{precision:.001});oX(e,$,e=>r(9,o=e));let m=ak();return e.$$set=e=>{"rect"in e&&r(7,d=e.rect),"visible"in e&&r(8,c=e.visible),"cornerStyle"in e&&r(0,u=e.cornerStyle)},e.$$.update=()=>{2304&e.$$.dirty&&p.set(c?1:.5,{hard:!1===l}),2304&e.$$.dirty&&$.set(+!!c,{hard:!1===l}),1664&e.$$.dirty&&r(1,n=Object.keys(eS).map((e,t)=>{let r=eS[e],n=m2[r](d),l=1===r.length?"edge":"corner",s="corner"===l;return{key:r,type:l,scale:{x:/^(t|b)$/.test(r)?d.width:s?lb(a,.5,1.25):1,y:/^(r|l)$/.test(r)?d.height:s?lb(a,.5,1.25):1},translate:{x:n.x,y:n.y},opacity:o}}))},[u,n,h,p,$,(e,t)=>({detail:r})=>{(!s||t===s)&&("resizestart"===e||void 0!==s)&&("resizestart"===e&&(s=t),"resizeend"===e&&(s=void 0),m(e,{direction:t,translation:r&&r.translation}))},e=>({detail:t})=>{m("resizestart",{direction:e,translation:{x:0,y:0}}),m("resizemove",{direction:e,translation:t}),m("resizeend",{direction:e,translation:{x:0,y:0}})},d,c,o,a,l]}class m8 extends a3{constructor(e){super(),a5(this,e,m6,m3,oj,{rect:7,visible:8,cornerStyle:0})}}var m7=e=>{function t(t,r){e.dispatchEvent(new CustomEvent(t,{detail:r}))}let r=r=>{r.preventDefault(),e.addEventListener("gesturechange",n),e.addEventListener("gestureend",o),t("gesturedown")},n=e=>{e.preventDefault(),t("gestureupdate",e.scale)},o=e=>{t("gestureup",e.scale),e.preventDefault(),a()},a=()=>{e.removeEventListener("gesturechange",n),e.removeEventListener("gestureend",o)};return e.addEventListener("gesturestart",r),{destroy:()=>{a(),e.removeEventListener("gesturestart",r)}}},m9={[ek]:eT,[eC]:eM,[eT]:ek,[eM]:eC,[eP]:eR,[eE]:eI,[eR]:eP,[eI]:eE},fe=e=>{let t=e===eM||e===eC,r=e===ek||e===eT;return[e===eC||e===eE||e===eR,e===eM||e===eI||e===eP,e===ek||e===eE||e===eP,e===eT||e===eR||e===eI,t,r,t||r]},ft=(e,t,r,n={})=>{let{target:o,translate:a}=t,{aspectRatio:l,minSize:s,maxSize:d}=n,c=eA[m9[o]],u=e0(eO(e.x,e.y),eO(c[0]*e.width,c[1]*e.height)),h=eA[o],p=e0(tT(e),eO(h[0]*e.width,h[1]*e.height)),[$,m,f,g,y,x,b]=fe(o),v=a.x,w=a.y;y?w=0:x&&(v=0);let{inner:S,outer:k}=fi(u,o,r,{aspectRatio:l,minSize:s,maxSize:d}),[C,T,M,P]=t2(e);if($?P=u.x:m&&(T=u.x),g?C=u.y:f&&(M=u.y),$){let e=S.x+S.width,t=k.x+k.width;T=lb(p.x+v,e,t)}else if(m){let e=k.x,t=S.x;P=lb(p.x+v,e,t)}if(g){let e=S.y+S.height,t=k.y+k.height;M=lb(p.y+w,e,t)}else if(f){let e=k.y,t=S.y;C=lb(p.y+w,e,t)}if(P>S.x&&(P=S.x),T<S.x+S.width&&(T=S.x+S.width),C>S.y&&(C=S.y),M<S.y+S.height&&(M=S.y+S.height),P<k.x){let e=k.x-P;P=k.x,T+=e}if(T>k.x+k.width){let e=T-(k.x+k.width);T=k.x+k.width,P-=e}if(C<k.y){let e=k.y-C;C=k.y,M+=e}if(M>k.y+k.height){let e=M-(k.y+k.height);M=k.y+k.height,C-=e}if(l){if(b){let e=T-P,t=M-C;y?(t=e/l,C=u.y-.5*t,M=u.y+.5*t):x&&(e=t*l,P=u.x-.5*e,T=u.x+.5*e)}else{let e=eO(p.x+v-u.x,p.y+w-u.y);o===eE?(e.x=Math.max(0,e.x),e.y=Math.min(0,e.y)):o===eR?(e.x=Math.max(0,e.x),e.y=Math.max(0,e.y)):o===eI?(e.x=Math.min(0,e.x),e.y=Math.max(0,e.y)):o===eP&&(e.x=Math.min(0,e.x),e.y=Math.min(0,e.y));let t=eX(e),r=lb(t,eX(eO(S.width,S.height)),eX(eO(k.width,k.height))),n=e4(eZ(eO(l,1)),r);o===eE?(T=u.x+n.x,C=u.y-n.y):o===eR?(T=u.x+n.x,M=u.y+n.y):o===eI?(P=u.x-n.x,M=u.y+n.y):o===eP&&(P=u.x-n.x,C=u.y-n.y)}}return tz(P,C,T-P,M-C)};let fi=(e,t,r,n)=>{let o,a,l,s;let{aspectRatio:d,minSize:c,maxSize:u}=n,h=t===eC||t===eE||t===eR,p=t===eM||t===eI||t===eP,$=t===ek||t===eE||t===eP,m=t===eT||t===eR||t===eI,f=t===eM||t===eC,g=t===ek||t===eT,y=tT(r);h?(y.x=e.x,y.width-=e.x):p&&(y.width=e.x),m?(y.y=e.y,y.height-=e.y):$&&(y.height=e.y);let x=tP(Math.min(y.width,u.width),Math.min(y.height,u.height));if(d){if(f){let t=Math.min(e.y,r.height-e.y);x.height=Math.min(2*t,x.height)}else if(g){let t=Math.min(e.x,r.width-e.x);x.width=Math.min(2*t,x.width)}}let b=d?to(tJ(tE(c),d)):c,v=d?to(t1(x,d)):x;h?o=e.x:p&&(a=e.x),m?l=e.y:$&&(s=e.y),h?a=o+b.width:p&&(o=a-b.width),m?s=l+b.height:$&&(l=s-b.height),f?(l=e.y-.5*b.height,s=e.y+.5*b.height):g&&(o=e.x-.5*b.width,a=e.x+.5*b.width);let w=tA([eO(o,l),eO(a,s)]);return h?a=o+v.width:p&&(o=a-v.width),m?s=l+v.height:$&&(l=s-v.height),f?(l=e.y-.5*v.height,s=e.y+.5*v.height):g&&(o=e.x-.5*v.width,a=e.x+.5*v.width),o=Math.max(r.x,o),a=Math.min(r.x+r.width,a),l=Math.max(r.y,l),s=Math.min(r.y+r.height,s),{inner:w,outer:tA([eO(o,l),eO(a,s)])}};var fr=(e,t,r={})=>{let{target:n,translate:o}=t,{aspectRatio:a,minSize:l}=r,s=eA[m9[n]],d=e0(tT(e),eO(s[0]*e.width,s[1]*e.height)),c=eA[n],u=e0(tT(e),eO(c[0]*e.width,c[1]*e.height)),[h,p,$,m,f,g,y]=fe(n),x=o.x,b=o.y;f?b=0:g&&(x=0);let[v,w,S,k]=t2(e);if(h?k=d.x:p&&(w=d.x),m?v=d.y:$&&(S=d.y),h?w=u.x+x:p&&(k=u.x+x),m?S=u.y+b:$&&(v=u.y+b),l&&f&&S-v<l.height){let e=l.height-(S-v);v-=.5*e,S+=.5*e}if(l&&g&&w-k<l.width){let e=l.width-(w-k);k-=.5*e,w+=.5*e}if(a){if(y){let e=w-k,t=S-v;f?(t=e/a,v=d.y-.5*t,S=d.y+.5*t):g&&(e=t*a,k=d.x-.5*e,w=d.x+.5*e)}else{let e=eO(u.x+x-d.x,u.y+b-d.y);n===eE?(e.x=Math.max(0,e.x),e.y=Math.min(0,e.y)):n===eR?(e.x=Math.max(0,e.x),e.y=Math.max(0,e.y)):n===eI?(e.x=Math.min(0,e.x),e.y=Math.max(0,e.y)):n===eP&&(e.x=Math.min(0,e.x),e.y=Math.min(0,e.y));let t=eX(e),r=e4(eZ(eO(a,1)),t);n===eE?(w=d.x+r.x,v=d.y-r.y):n===eR?(w=d.x+r.x,S=d.y+r.y):n===eI?(k=d.x-r.x,S=d.y+r.y):n===eP&&(k=d.x-r.x,v=d.y-r.y)}}return tz(k,v,w-k,S-v)},fn=e=>180*e/Math.PI;function fo(e){let t,r,n;return r=new m1({props:{elasticity:e[5],min:e[9],max:e[10],value:e[11],valueMin:Math.max(e[9],e[0]),valueMax:Math.min(e[10],e[1]),labelReset:e[6],base:e[12],valueLabel:`${Math.round(fn(e[11]))}&deg;`,oninputstart:e[2],oninputmove:e[17],oninputend:e[18]}}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"class","PinturaImageRotator")},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,[t]){let n={};32&t&&(n.elasticity=e[5]),512&t&&(n.min=e[9]),1024&t&&(n.max=e[10]),2048&t&&(n.value=e[11]),513&t&&(n.valueMin=Math.max(e[9],e[0])),1026&t&&(n.valueMax=Math.min(e[10],e[1])),64&t&&(n.labelReset=e[6]),4096&t&&(n.base=e[12]),2048&t&&(n.valueLabel=`${Math.round(fn(e[11]))}&deg;`),4&t&&(n.oninputstart=e[2]),392&t&&(n.oninputmove=e[17]),400&t&&(n.oninputend=e[18]),r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function fa(e,t,r){let n,o,a,l,s,d,c;let{rotation:u}=t,{valueMin:h}=t,{valueMax:p}=t,{oninputstart:$=x}=t,{oninputmove:m=x}=t,{oninputend:f=x}=t,{elasticity:g=0}=t,{labelReset:y}=t,{rotationMin:b}=t,{rotationMax:v}=t;return e.$$set=e=>{"rotation"in e&&r(13,u=e.rotation),"valueMin"in e&&r(0,h=e.valueMin),"valueMax"in e&&r(1,p=e.valueMax),"oninputstart"in e&&r(2,$=e.oninputstart),"oninputmove"in e&&r(3,m=e.oninputmove),"oninputend"in e&&r(4,f=e.oninputend),"elasticity"in e&&r(5,g=e.elasticity),"labelReset"in e&&r(6,y=e.labelReset),"rotationMin"in e&&r(14,b=e.rotationMin),"rotationMax"in e&&r(15,v=e.rotationMax)},e.$$.update=()=>{16384&e.$$.dirty&&r(9,n=b+1e-9),32768&e.$$.dirty&&r(10,o=v-1e-9),1536&e.$$.dirty&&r(12,a=n+(o-n)*.5),32768&e.$$.dirty&&r(16,l=2*v),8192&e.$$.dirty&&r(8,s=Math.sign(u)),73728&e.$$.dirty&&r(7,d=Math.round(Math.abs(u)/l)*l),8576&e.$$.dirty&&r(11,c=u-s*d)},[h,p,$,m,f,g,y,d,s,n,o,c,a,u,b,v,l,e=>m(s*d+e),e=>f(s*d+e)]}class fl extends a3{constructor(e){super(),a5(this,e,fa,fo,oj,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function fs(e){let t,r,n,o,a;return{c(){t=ar("div"),r=ar("p"),n=ao(e[0]),o=ao(" \xd7 "),a=ao(e[1]),ad(t,"class","PinturaImageInfo")},m(e,l){at(e,t,l),o9(t,r),o9(r,n),o9(r,o),o9(r,a)},p(e,[t]){1&t&&ah(n,e[0]),2&t&&ah(a,e[1])},i:oB,o:oB,d(e){e&&ai(t)}}}function fd(e,t,r){let{width:n}=t,{height:o}=t;return e.$$set=e=>{"width"in e&&r(0,n=e.width),"height"in e&&r(1,o=e.height)},[n,o]}class fc extends a3{constructor(e){super(),a5(this,e,fd,fs,oj,{width:0,height:1})}}var fu=(e,t={})=>{let r,n,o,a;let{width:l=24,height:s=24,bounds:d=16,radius:c=3}=t,u=ro(e)?eg(e[0],e[1]):e,h=!!u;a=(o=(u=h?u:1)>1?d:u*d)/u,r=Math.round((l-o)*.5),n=Math.round((s-a)*.5);let p=[l/12,l/6].join(" ");return`<rect fill="${h?"currentColor":"none"}" stroke="${h?"none":"currentColor"}" stroke-width="${l/16}" stroke-dasharray="${p}" x="${r}" y="${n}" width="${o}" height="${a}" rx="${c}"/>`};function fh(e){let t,r;return t=new uS({props:{class:"PinturaPresetListFilter",layout:"row",options:e[8],selectedIndex:e[7],onchange:e[10]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};256&r&&(n.options=e[8]),128&r&&(n.selectedIndex=e[7]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fp(e){let t,r;return t=new uG({props:{icon:e[0],label:e[1],labelClass:e[2],hideLabel:e[3],options:e[9],selectedIndex:e[4],onchange:e[5],optionMapper:e[6],$$slots:{controls:[fh]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,[r]){let n={};1&r&&(n.icon=e[0]),2&r&&(n.label=e[1]),4&r&&(n.labelClass=e[2]),8&r&&(n.hideLabel=e[3]),512&r&&(n.options=e[9]),16&r&&(n.selectedIndex=e[4]),32&r&&(n.onchange=e[5]),64&r&&(n.optionMapper=e[6]),262528&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}let f$='fill="none" stroke="currentColor"';function fm(e,t,r){let n,o,a;let{icon:l}=t,{label:s}=t,{labelClass:d}=t,{hideLabel:c}=t,{options:u}=t,{selectedIndex:h}=t,{onchange:p}=t,{optionMapper:$}=t,{filter:m="landscape"}=t,{onfilterchange:f=x}=t,g=(e,t,r,n,o)=>`
    <rect ${f$} x="${e}" y="${t}" width="${r}" height="${n}" rx="${o}"/>`,y=(e,t)=>`<path ${f$} d="M${e} ${t} l2 2 l3 -4"/>`,b=(e,t)=>(e||[]).map(e=>P(e[0])?(e[1]=e[1].map(t),e):t(e)),v=e=>t=>{let[r,n,o={}]=t;return ri(r)&&(o.hidden="landscape"===e?r<1:r>1),[r,n,o]};return e.$$set=e=>{"icon"in e&&r(0,l=e.icon),"label"in e&&r(1,s=e.label),"labelClass"in e&&r(2,d=e.labelClass),"hideLabel"in e&&r(3,c=e.hideLabel),"options"in e&&r(12,u=e.options),"selectedIndex"in e&&r(4,h=e.selectedIndex),"onchange"in e&&r(5,p=e.onchange),"optionMapper"in e&&r(6,$=e.optionMapper),"filter"in e&&r(11,m=e.filter),"onfilterchange"in e&&r(13,f=e.onfilterchange)},e.$$.update=()=>{6144&e.$$.dirty&&r(9,n=b(u,v(m))),2048&e.$$.dirty&&r(7,o=+("landscape"!==m)),128&e.$$.dirty&&r(8,a=[["landscape","Landscape",{hideLabel:!0,icon:g(2,6,19,12,2)+(0===o?y(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:g(5,3,13,18,2)+(1===o?y(9,12):"")}]])},[l,s,d,c,h,p,$,o,a,n,e=>{r(11,m=e.value),f(e.value)},m,u,f]}class ff extends a3{constructor(e){super(),a5(this,e,fm,fp,oj,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}let fg=e=>eJ(e,e=>eL(e,6)),fy=e=>t5(e,e=>eL(e,6)),fx=e=>e.map(fg),fb=(e,t,r=1e-4)=>Math.abs(e-t)<r;var fv=(e,t,r,n,o={})=>{let{aspectRatio:a}=o;e=fy(e),n=fx(n);let l=tW(e,m9[r.target]),s=eJ(l,e=>eL(e,6)),d=a?tJ(o.minSize,a):o.minSize,c=a?t1(o.maxSize,a):o.maxSize;1>e8(tW(t,r.target),l)&&tD(t=tT(e),Math.min(d.width/e.width,d.height/e.height),l),t=t_(tT(t),d,c,l);let u=tT(t);t=fy(t);let h=io(n,1),p=t4(e),$=t4(t),m=p.findIndex(e=>eK(eJ(e,e=>eL(e,6)),s)),f=e=>h.map(t=>t7(t,e)).filter(Boolean).pop();if(a){let t=$.map((e,t)=>{if(t===m)return;let r=eO(l.x-e.x,l.y-e.y);eZ(r),e4(r,.5);let n=f(tx(eO(l.x-r.x,l.y-r.y),fg(e)));if(n)return{intersection:n,cornerDist:e8(l,p[t]),intersectionDist:e8(l,n)}}).filter(Boolean);if(t.length){let r=t.reduce((e,t)=>{let r=t.intersectionDist/t.cornerDist;return r<e?r:e},Number.MAX_SAFE_INTEGER);tD(u=tT(e),r,l)}}else{let e=1===r.target.length,o=n[0].y!==n[1].y&&n[0].x!==n[1].x,a=p.map((t,r)=>{if(r===m)return;let n=$[r],a=!fb(n.x,s.x)&&!fb(n.y,s.y);if(!e&&!o&&a||e&&(fb(n.x,s.x)||fb(n.y,s.y)))return;let d=eV(e?t:l),c=e1(eV(d),n);eZ(c),e4(c,.5),e?e0(d,c):e1(d,c);let u=f(tx(d,n));if(u)return u}).filter(Boolean);if(a.length){let[e,n,o,d]=fe(r.target),[c,h,p,$]=t2(t);a.forEach(({x:t,y:r})=>{let a=eL(t,6),l=eL(r,6);o&&!fb(l,s.y)&&(c=Math.max(c,r)),e&&!fb(a,s.x)&&(h=Math.min(h,t)),d&&!fb(l,s.y)&&(p=Math.min(p,r)),n&&!fb(a,s.x)&&($=Math.max($,t))}),tD(u=tR([c,h,p,$]),.9999,l)}}return t_(u,d,c,l),u};function fw(e){let t,r;return t=new hJ({props:{items:e[11]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};2048&r[0]&&(n.items=e[11]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fS(e){let t,r,n;return r=new mO({props:{$$slots:{default:[fw]},$$scope:{ctx:e}}}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"slot","header")},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,t){let n={};2048&t[0]|64&t[7]&&(n.$$scope={dirty:t,ctx:e}),r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function fk(e){let t,r;return t=new h3({props:{onclick:e[88],label:e[4].cropLabelButtonRecenter,icon:e[4].cropIconButtonRecenter,disabled:!e[9],hideLabel:!0,class:"PinturaButtonCenter",style:`opacity:${e[29]};transform:translate3d(${e[30].x}px, ${e[30].y}px,0)`}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16&r[0]&&(n.label=e[4].cropLabelButtonRecenter),16&r[0]&&(n.icon=e[4].cropIconButtonRecenter),512&r[0]&&(n.disabled=!e[9]),0x60000000&r[0]&&(n.style=`opacity:${e[29]};transform:translate3d(${e[30].x}px, ${e[30].y}px,0)`),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fC(e){let t,r;return(t=new m8({props:{rect:e[8],visible:e[12],cornerStyle:e[1]}})).$on("resizestart",e[68]),t.$on("resizemove",e[69]),t.$on("resizeend",e[70]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};256&r[0]&&(n.rect=e[8]),4096&r[0]&&(n.visible=e[12]),2&r[0]&&(n.cornerStyle=e[1]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fT(e){let t,r;return t=new fc({props:{width:Math.round(e[13].width),height:Math.round(e[13].height)}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};8192&r[0]&&(n.width=Math.round(e[13].width)),8192&r[0]&&(n.height=Math.round(e[13].height)),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fM(e){let t,r,n,o,a,l,s,d;let c=e[21]&&e[10]&&fk(e),u=e[21]&&fC(e),h=e[22]&&fT(e);return{c(){t=ar("div"),r=ar("div"),c&&c.c(),n=aa(),u&&u.c(),a=aa(),h&&h.c(),ad(r,"class","PinturaStage"),ad(t,"slot","main")},m(p,$){at(p,t,$),o9(t,r),c&&c.m(r,null),o9(r,n),u&&u.m(r,null),e[164](r),o9(t,a),h&&h.m(t,null),l=!0,s||(d=[o2(dO.call(null,r)),as(r,"measure",e[162]),as(r,"wheel",function(){oV(e[2]&&e[87])&&(e[2]&&e[87]).apply(this,arguments)},{passive:!1}),as(r,"interactionstart",e[74]),as(r,"interactionupdate",e[75]),as(r,"interactionrelease",e[77]),as(r,"interactionend",e[76]),o2(o=h7.call(null,r,{drag:!0,inertia:!0,pinch:e[2],shouldStartInteraction:fO,getEventPosition:e[165]})),as(r,"gesturedown",e[84]),as(r,"gestureupdate",e[85]),as(r,"gestureup",e[86]),o2(m7.call(null,r))],s=!0)},p(a,l){(e=a)[21]&&e[10]?c?(c.p(e,l),2098176&l[0]&&aU(c,1)):((c=fk(e)).c(),aU(c,1),c.m(r,n)):c&&(aV(),aH(c,1,1,()=>{c=null}),aj()),e[21]?u?(u.p(e,l),2097152&l[0]&&aU(u,1)):((u=fC(e)).c(),aU(u,1),u.m(r,null)):u&&(aV(),aH(u,1,1,()=>{u=null}),aj()),o&&oV(o.update)&&0x1000004&l[0]&&o.update.call(null,{drag:!0,inertia:!0,pinch:e[2],shouldStartInteraction:fO,getEventPosition:e[165]}),e[22]?h?(h.p(e,l),4194304&l[0]&&aU(h,1)):((h=fT(e)).c(),aU(h,1),h.m(t,null)):h&&(aV(),aH(h,1,1,()=>{h=null}),aj())},i(e){l||(aU(c),aU(u),aU(h),l=!0)},o(e){aH(c),aH(u),aH(h),l=!1},d(r){r&&ai(t),c&&c.d(),u&&u.d(),e[164](null),h&&h.d(),s=!1,oN(d)}}}function fP(e){let t,r,n,o;let a=[{class:"PinturaControlList"},{tabs:e[7]},e[18]],l={$$slots:{default:[fE,({tab:e})=>({222:e}),({tab:e})=>[0,0,0,0,0,0,0,32*!!e]]},$$scope:{ctx:e}};for(let e=0;e<a.length;e+=1)l=oD(l,a[e]);(t=new d7({props:l})).$on("select",e[163]);let s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[17]},e[18]],d={$$slots:{default:[fA,({panel:e})=>({221:e}),({panel:e})=>[0,0,0,0,0,0,0,16*!!e]]},$$scope:{ctx:e}};for(let e=0;e<s.length;e+=1)d=oD(d,s[e]);return n=new cu({props:d}),{c(){a1(t.$$.fragment),r=aa(),a1(n.$$.fragment)},m(e,a){a2(t,e,a),at(e,r,a),a2(n,e,a),o=!0},p(e,r){let o=262272&r[0]?aJ(a,[a[0],128&r[0]&&{tabs:e[7]},262144&r[0]&&aQ(e[18])]):{};96&r[7]&&(o.$$scope={dirty:r,ctx:e}),t.$set(o);let l=393216&r[0]?aJ(s,[s[0],s[1],131072&r[0]&&{panels:e[17]},262144&r[0]&&aQ(e[18])]):{};0x1e804018&r[0]|80&r[7]&&(l.$$scope={dirty:r,ctx:e}),n.$set(l)},i(e){o||(aU(t.$$.fragment,e),aU(n.$$.fragment,e),o=!0)},o(e){aH(t.$$.fragment,e),aH(n.$$.fragment,e),o=!1},d(e){a4(t,e),e&&ai(r),a4(n,e)}}}function fE(e){let t,r;let n=e[222].label+"";return{c(){t=ar("span"),r=ao(n)},m(e,n){at(e,t,n),o9(t,r)},p(e,t){32&t[7]&&n!==(n=e[222].label+"")&&ah(r,n)},d(e){e&&ai(t)}}}function fR(e){let t,r;return t=new m1({props:{elasticity:e[25]*e[44],base:fB,min:e[23],max:fz,valueMin:e[27][0],valueMax:e[27][1],value:e[28],labelReset:e[4].labelReset,valueLabel:`${Math.round(100*e[28])}%`,oninputstart:e[81],oninputmove:e[82],oninputend:e[83]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};0x2000000&r[0]&&(n.elasticity=e[25]*e[44]),8388608&r[0]&&(n.min=e[23]),0x8000000&r[0]&&(n.valueMin=e[27][0]),0x8000000&r[0]&&(n.valueMax=e[27][1]),0x10000000&r[0]&&(n.value=e[28]),16&r[0]&&(n.labelReset=e[4].labelReset),0x10000000&r[0]&&(n.valueLabel=`${Math.round(100*e[28])}%`),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fI(e){let t,r;return t=new fl({props:{elasticity:e[25]*e[44],rotation:e[14],labelReset:e[4].labelReset,valueMin:e[26][0],valueMax:e[26][1],rotationMin:-e[3],rotationMax:e[3],oninputstart:e[71],oninputmove:e[72],oninputend:e[73]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};0x2000000&r[0]&&(n.elasticity=e[25]*e[44]),16384&r[0]&&(n.rotation=e[14]),16&r[0]&&(n.labelReset=e[4].labelReset),0x4000000&r[0]&&(n.valueMin=e[26][0]),0x4000000&r[0]&&(n.valueMax=e[26][1]),8&r[0]&&(n.rotationMin=-e[3]),8&r[0]&&(n.rotationMax=e[3]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fA(e){let t,r,n,o;let a=[fI,fR],l=[];function s(e,t){return e[221]===e[93]+"-rotation"?0:e[221]===e[93]+"-zoom"?1:-1}return~(t=s(e))&&(r=l[t]=a[t](e)),{c(){r&&r.c(),n=al()},m(e,r){~t&&l[t].m(e,r),at(e,n,r),o=!0},p(e,o){let d=t;(t=s(e))===d?~t&&l[t].p(e,o):(r&&(aV(),aH(l[d],1,1,()=>{l[d]=null}),aj()),~t?((r=l[t])?r.p(e,o):(r=l[t]=a[t](e)).c(),aU(r,1),r.m(n.parentNode,n)):r=null)},i(e){o||(aU(r),o=!0)},o(e){aH(r),o=!1},d(e){~t&&l[t].d(e),e&&ai(n)}}}function fL(e){let t,r;let n=e[19]&&fP(e);return{c(){t=ar("div"),n&&n.c(),ad(t,"slot","footer"),a$(t,"transform",e[16])},m(e,o){at(e,t,o),n&&n.m(t,null),r=!0},p(e,r){e[19]?n?(n.p(e,r),524288&r[0]&&aU(n,1)):((n=fP(e)).c(),aU(n,1),n.m(t,null)):n&&(aV(),aH(n,1,1,()=>{n=null}),aj()),65536&r[0]&&a$(t,"transform",e[16])},i(e){r||(aU(n),r=!0)},o(e){aH(n),r=!1},d(e){e&&ai(t),n&&n.d()}}}function fF(e){let t,r,n;function o(t){e[166](t)}let a={hasHeader:e[20],$$slots:{footer:[fL],main:[fM],header:[fS]},$$scope:{ctx:e}};return void 0!==e[15]&&(a.root=e[15]),t=new mK({props:a}),aE.push(()=>a0(t,"root",o)),t.$on("measure",e[167]),{c(){a1(t.$$.fragment)},m(e,r){a2(t,e,r),n=!0},p(e,n){let o={};1048576&n[0]&&(o.hasHeader=e[20]),0x7fef7ffe&n[0]|64&n[7]&&(o.$$scope={dirty:n,ctx:e}),!r&&32768&n[0]&&(r=!0,o.root=e[15],aB(()=>r=!1)),t.$set(o)},i(e){n||(aU(t.$$.fragment,e),n=!0)},o(e){aH(t.$$.fragment,e),n=!1},d(e){a4(t,e)}}}let fz=1,fB=0,fO=(e,t)=>e.target===t;function fD(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,x,b,v,w,S,k,C,T,M,P,E,R,I,A,L,F,z,B,O,D,_,W,N,V,j,H,G,X,Z,Y,q,J,Q,ee,et,ei,er,en,eo,ea,el,es,ed,ec,eu,eh,ep,e$,em,ef,ex,eb,eS,ek,eC,eT,eM,eP,eE,eR,eI,eA,eF,ez;let eB,eD=oB,e_=()=>(eD(),eD=oH(eW,e=>r(12,eB=e)),eW);e.$$.on_destroy.push(()=>eD());let{isActive:eW}=t;e_();let{stores:eN}=t,{cropImageSelectionCornerStyle:ej="circle"}=t,{cropWillRenderImageSelectionGuides:eH=(e,t)=>{let r="rotate"==e;return{rows:r?5:3,cols:r?5:3,opacity:.25*t}}}=t,{cropAutoCenterImageSelectionTimeout:eG}=t,{cropEnableZoomMatchImageAspectRatio:eZ=!0}=t,{cropEnableRotateMatchImageAspectRatio:eY="never"}=t,{cropEnableRotationInput:eq=!0}=t,{cropEnableZoom:eJ=!0}=t,{cropEnableZoomInput:eQ=!0}=t,{cropEnableZoomAutoHide:e2=!0}=t,{cropEnableImageSelection:e5=!0}=t,{cropEnableInfoIndicator:e3=!1}=t,{cropEnableZoomTowardsWheelPosition:e6=!0}=t,{cropEnableLimitWheelInputToCropSelection:e8=!0}=t,{cropEnableCenterImageSelection:e7=!0}=t,{cropEnableButtonRotateLeft:e9=!0}=t,{cropEnableButtonRotateRight:te=!1}=t,{cropEnableButtonFlipHorizontal:tt=!0}=t,{cropEnableButtonFlipVertical:ti=!1}=t,{cropSelectPresetOptions:tn}=t,{cropEnableSelectPreset:tl=!0}=t,{cropEnableFilterMatchAspectRatio:ts=!0}=t,{cropSelectPresetFilter:tc=!1}=t,{cropEnableButtonToggleCropLimit:t$=!1}=t,{cropWillRenderTools:tg=ey}=t,{cropActiveTransformTool:ty="rotation"}=t,{cropMinimizeToolbar:tx="auto"}=t,{cropInteractionFocus:tb="image"}=t,{cropRotationRange:tv=ev}=t,{cropMaskOpacity:tw=.85}=t,{locale:tS={}}=t,{cropFormatIconSelectPreset:tk=function(e){let{aspectRatio:t}=e,[r,n,o]=t?[t<1?1:.3,1===t?.85:.5,t>1?1:.3]:[.2,.3,.4];return{a:r,b:n,c:o}}}=t,{cropFormatIconCropBoundary:tC=function(e){let{isBoundToImage:t}=e,[r,n,o,a]=t?[.3,1,0,0]:[0,0,.3,1];return{a:r,b:n,c:o,d:a}}}=t,tM=aT("isAnimated");oX(e,tM,e=>r(141,A=e));let tP=aT("elasticityMultiplier");oX(e,tP,e=>r(25,ex=e));let tR=aT("redrawTrigger");oX(e,tR,e=>r(161,ef=e));let tI=aT("imageIsStatic");oX(e,tI,e=>r(147,_=e));let tA=aT("imageStaticVisualCorners");oX(e,tA,e=>r(183,es=e));let tL=aT("fixScrollDirection");oX(e,tL,e=>r(177,et=e));let t_="idle",tW=a7();oX(e,tW,e=>r(158,ep=e));let tN=()=>void 0===ea,tV=e=>1/e,tj=e=>{if(ts&&tc!==e)r(95,tc=e),ea&&1!==ea&&tU()&&o1(iP,ea=tV(ea),ea)},tU=()=>{if(1===ea||!n)return!1;let e=tV(ea);return!!c0(ep).find(([t])=>t===e)},tX=(e,t,r)=>ew(r)?t.width===Math.round(e.height)||t.height===Math.round(e.width):t.width===Math.round(e.width)||t.height===Math.round(e.height),tZ=(e,t,r)=>eK(th(tf(tp(tr(t),r),e=>Math.abs(Math.round(e)))),tB(e)),tY=()=>(tN()||"always"===eY&&tU())&&tZ(W,q,J)&&tX(W,q,J),t0=e=>{if("never"!==eY&&tY()){o1(i$,J+=e,J);let t=ew(J),r=t?q.height:q.width,n=t?q.width:q.height;o1(ik,W=tz(0,0,r,n),W),tN()||o1(iP,ea=eg(r,n),ea)}else o1(i$,J+=e,J)},{history:t2,env:t4,isInteracting:t3,isInteractingFraction:t6,isTransformingImage:t8,rootRect:t7,stageRect:t9,utilRect:ie,utilRectPadded:it,rootLineColor:ii,allowPan:ir,allowZoom:io,allowPlayPause:ia,rangeInputElasticity:il,presentationScalar:is,utilTools:id,imagePreviewModifiers:ic,imageOutlineOpacity:iu,imageFlipX:ih,imageFlipY:ip,imageRotation:i$,imageRotationRange:im,imageOutputSize:ig,imageSelectionRect:iy,imageSelectionRectSnapshot:ix,imageSelectionRectIntent:ib,imageSelectionRectPresentation:iv,imageCropRectIntent:iw,imageCropRectOrigin:iS,imageCropRect:ik,imageCropMinSize:iC,imageCropMaxSize:iT,imageCropRange:iM,imageCropAspectRatio:iP,imageCropLimitToImage:iE,imageSize:iR,imageScalar:iI,imageOverlayMarkup:iA,stagePadded:iL,stageRecenter:iF}=eN;function iz(e,t){return U(e.cropIconCropBoundary)?c5(e.cropIconCropBoundary,e,t):sF(e.cropIconCropBoundary,tC({isBoundToImage:t}),"{","}")}oX(e,t4,e=>r(142,L=e)),oX(e,t3,e=>r(146,D=e)),oX(e,t8,e=>r(175,Z=e)),oX(e,t7,e=>r(24,ei=e)),oX(e,t9,e=>r(153,X=e)),oX(e,it,e=>r(150,j=e)),oX(e,is,e=>r(149,V=e)),oX(e,id,e=>r(185,ec=e)),oX(e,ic,e=>r(174,B=e)),oX(e,ih,e=>r(160,em=e)),oX(e,ip,e=>r(159,e$=e)),oX(e,i$,e=>r(14,J=e)),oX(e,im,e=>r(26,eb=e)),oX(e,ig,e=>r(186,eu=e)),oX(e,iy,e=>r(152,G=e)),oX(e,ix,e=>r(151,H=e)),oX(e,ib,e=>r(184,ed=e)),oX(e,iv,e=>r(145,O=e)),oX(e,iw,e=>r(178,er=e)),oX(e,iS,e=>r(180,eo=e)),oX(e,ik,e=>r(13,W=e)),oX(e,iC,e=>r(156,ee=e)),oX(e,iT,e=>r(182,el=e)),oX(e,iM,e=>r(179,en=e)),oX(e,iP,e=>r(181,ea=e)),oX(e,iE,e=>r(155,Q=e)),oX(e,iR,e=>r(154,q=e)),oX(e,iI,e=>r(148,N=e)),oX(e,iL,e=>r(144,z=e));let iB=(e,t)=>{let r={target:e,translate:t},n=tu(tr(ee),V),o=tu(tr(el),V),a=ft(H,r,{...j,x:0,y:0},{aspectRatio:ea,minSize:n,maxSize:o});if(a=tQ(a,{...j,x:0,y:0},ea),!Q)return{boundsLimited:a,boundsIntent:a};let l=fv(H,a,r,es,{aspectRatio:ea,minSize:n,maxSize:o});return{boundsLimited:l,boundsIntent:l}},iO=(e,t)=>{let r={target:e,translate:t},n=tu(tr(ee),V),o=tu(tr(el),V),a=fr(H,r,{aspectRatio:ea,minSize:n});return{boundsLimited:ft(H,r,{...j,x:0,y:0},{aspectRatio:ea,minSize:n,maxSize:o}),boundsIntent:a}},iD=({translation:e,scalar:t})=>{let r;_&&(t=1,e=eU(eV(e)));let n=Math.min(G.width/W.width,G.height/W.height),o=e4(eV(e),1/n);if(eF){let t=e1(eV(eF),e);eF=e,r=tO(tT(W),t)}else r=tO(tT(eA),eU(eV(o))),void 0!==t&&tD(r,1/t);o1(iw,er=r,er),o1(ik,W=r,W)},i_=(e,t,r)=>ew(r)?1-1/Math.min(e.height/t.width,e.width/t.height):1-1/Math.min(e.width/t.width,e.height/t.height),iW=a9([iM,ik],([e,t],r)=>{if(!t)return;let[n,o]=e,a=tG(t);r([to(t5(tJ(n,a),eL)),to(t5(t1(o,a),eL))])});oX(e,iW,e=>r(176,Y=e));let iN=a9([iR,iE,iC,iT,iM,i$],([e,t,r,n,o,a],l)=>{let s,d;if(!e)return;let c=o[0],u=o[1];t?(s=i_(e,u,a),d=Math.min(c.width/r.width,c.height/r.height)):(s=-1,d=1),l([s,d].map(e=>eL(e)))});oX(e,iN,e=>r(27,eS=e));let iV=a9([iR,ik,iM,i$],([e,t,r,n],o)=>{let a;if(!e||!t)return o(0);let l=r[0],s=r[1],d=t.width,c=t.height,u=tG(t),h=t1(ew(n)?td(e.height,e.width):e,u);if(d<=h.width||c<=h.height){let e=h.width-l.width,t=h.height-l.height;a=0===e||0===t?1:1-Math.min((d-l.width)/e,(c-l.height)/t)}else{let e=t1({width:s.width-h.width,height:s.height-h.height},u);a=-Math.min((d-h.width)/e.width,(c-h.height)/e.height)}o(a)});oX(e,iV,e=>r(28,ek=e));let ij=()=>{eA=tT(W)},iU=e=>{let t,r,n;let o=tG(eA),a=t1(ew(J)?td(q.height,q.width):q,o);if(e>=0){let l=a.width-en[0].width,s=a.height-en[0].height;n=tJ({width:t=a.width-l*e,height:r=a.height-s*e},o)}else{let l=en[1].width-a.width,s=en[1].height-a.height;n=t1({width:t=a.width+-(l*e),height:r=a.height+-(s*e)},o)}t=n.width,r=n.height,o1(ik,W={x:eA.x+.5*eA.width-.5*t,y:eA.y+.5*eA.height-.5*r,width:t,height:r},W)},iH=e=>{let t=tD(tT(eP),1/e);o1(iw,er=t,er),o1(ik,W=t,W)},iG=()=>{iF.set({})},iX=dk(0,{precision:1e-4});oX(e,iX,e=>r(29,eC=e));let iZ=dk();oX(e,iZ,e=>r(30,eT=e));let iY=()=>{o1(ic,B.crop={maskOpacity:tw,maskMarkupOpacity:tw},B),ic.set(B)},iq=()=>{delete B.crop,ic.set(B)},iK=a9([iP,ig,tW],([e,t,r],o)=>{if(!n)return;let a=c0(r),l=[...a].map(e=>e[0]).sort((e,t)=>ro(e[0])&&!ro(t[0])?1:-1).find(r=>{if(ro(r)&&t){let[n,o]=r,a=t.width===n&&t.height===o,l=e===eg(n,o);return a&&l}return r===e});if(!l)return o(void 0);o(a.map(e=>e[0]).findIndex(e=>ro(e)?lM(e,l):e===l))});oX(e,iK,e=>r(157,eh=e));let iJ=(e,t)=>{if(!n||-1===e||void 0===e)return;let r=c0(t)[e][0];return r?ro(r)?eg(r[0],r[1]):r:void 0},iQ=a9([ii,iv,t6],([e,t,r],n)=>{let{rows:o,cols:a,opacity:l}=eH(t_,r);if(!t||l<=0)return n([]);let{x:s,y:d,width:c,height:u}=t,h=c/a,p=u/o,$=[];for(let t=1;t<=o-1;t++){let r=d+p*t;$.push({id:`image-selection-guide-row-${t}`,points:[eO(s,r),eO(s+c,r)],opacity:l,strokeWidth:1,strokeColor:e})}for(let t=1;t<=a-1;t++){let r=s+h*t;$.push({id:`image-selection-guide-col-${t}`,points:[eO(r,d),eO(r,d+u)],opacity:l,strokeWidth:1,strokeColor:e})}n($)});oX(e,iQ,e=>r(143,F=e));let i0=()=>{iA.update(e=>{let t=e.filter(e=>!/^image\-selection\-guide/.test(e.id));return eB?[...t,...F]:t})},i1=`crop-${K()}`,i2=i1+"-"+(eq?ty:"zoom"),i4=i2,i5=dk(20*!!A);return oX(e,i5,e=>r(140,I=e)),e.$$set=e=>{"isActive"in e&&e_(r(0,eW=e.isActive)),"stores"in e&&r(97,eN=e.stores),"cropImageSelectionCornerStyle"in e&&r(1,ej=e.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in e&&r(98,eH=e.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in e&&r(99,eG=e.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in e&&r(100,eZ=e.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in e&&r(101,eY=e.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in e&&r(102,eq=e.cropEnableRotationInput),"cropEnableZoom"in e&&r(2,eJ=e.cropEnableZoom),"cropEnableZoomInput"in e&&r(103,eQ=e.cropEnableZoomInput),"cropEnableZoomAutoHide"in e&&r(104,e2=e.cropEnableZoomAutoHide),"cropEnableImageSelection"in e&&r(105,e5=e.cropEnableImageSelection),"cropEnableInfoIndicator"in e&&r(106,e3=e.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in e&&r(107,e6=e.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in e&&r(108,e8=e.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in e&&r(109,e7=e.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in e&&r(110,e9=e.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in e&&r(111,te=e.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in e&&r(112,tt=e.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in e&&r(113,ti=e.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in e&&r(114,tn=e.cropSelectPresetOptions),"cropEnableSelectPreset"in e&&r(115,tl=e.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in e&&r(116,ts=e.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in e&&r(95,tc=e.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in e&&r(117,t$=e.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in e&&r(118,tg=e.cropWillRenderTools),"cropActiveTransformTool"in e&&r(119,ty=e.cropActiveTransformTool),"cropMinimizeToolbar"in e&&r(120,tx=e.cropMinimizeToolbar),"cropInteractionFocus"in e&&r(121,tb=e.cropInteractionFocus),"cropRotationRange"in e&&r(3,tv=e.cropRotationRange),"cropMaskOpacity"in e&&r(122,tw=e.cropMaskOpacity),"locale"in e&&r(4,tS=e.locale),"cropFormatIconSelectPreset"in e&&r(123,tk=e.cropFormatIconSelectPreset),"cropFormatIconCropBoundary"in e&&r(124,tC=e.cropFormatIconCropBoundary)},e.$$.update=()=>{if(4096&e.$$.dirty[0]|0x10000000&e.$$.dirty[3]&&tI.set("selection"===tb&&eB),2097152&e.$$.dirty[3]&&r(131,n=tn&&Array.isArray(tn)&&tn.length),2097152&e.$$.dirty[3]|128&e.$$.dirty[4]&&tW.set(n?tn:[]),4096&e.$$.dirty[0]|131072&e.$$.dirty[4]&&eB&&iu.set(1,{hard:!A}),4096&e.$$.dirty[0]&&ir.set(!eB),4096&e.$$.dirty[0]&&io.set(!eB),4096&e.$$.dirty[0]&&eB&&ia.set(!0),262144&e.$$.dirty[4]&&r(126,$="overlay"===L.layoutMode),4194304&e.$$.dirty[3]|4&e.$$.dirty[4]&&r(130,w=tl&&!$),0x14000000&e.$$.dirty[4]&&r(139,d=j&&G&&tq(j,G)),0x10008000&e.$$.dirty[4]&&r(137,c=!!(G&&d)),0x1000a000&e.$$.dirty[4]&&r(135,u=c&&tH(G,d,e=>eL(e,5))),16400&e.$$.dirty[0]|0x31e0004&e.$$.dirty[3]|0x400408c0&e.$$.dirty[4]|127&e.$$.dirty[5]){var t,B;r(11,o=ef&&tg([e9&&["Button","rotate-left",{label:tS.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:tS.cropIconButtonRotateLeft,onclick:()=>{t0(-Math.PI/2),t2.write()}}],te&&["Button","rotate-right",{label:tS.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:tS.cropIconButtonRotateRight,onclick:()=>{t0(Math.PI/2),t2.write()}}],tt&&["Button","flip-horizontal",{label:tS.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:tS.cropIconButtonFlipHorizontal,onclick:()=>{ew(J)?o1(ip,e$=!e$,e$):o1(ih,em=!em,em),t2.write()}}],ti&&["Button","flip-vertical",{label:tS.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:tS.cropIconButtonFlipVertical,onclick:()=>{ew(J)?o1(ih,em=!em,em):o1(ip,e$=!e$,e$),t2.write()}}],w&&n&&[!1===tc?"Dropdown":ff,"select-preset",{icon:(t=tS,B=iJ(eh,ep),U(t.cropIconSelectPreset)?c5(t.cropIconSelectPreset,t,B):sF(t.cropIconSelectPreset,tk({aspectRatio:B}),"{","}")),label:c5(tS.cropLabelSelectPreset,tS,iJ(eh,ep)),labelClass:"PinturaToolbarContentWide",options:ep,filter:tc,onfilterchange:tj,selectedIndex:eh,onchange:({value:e})=>{ro(e)?(o1(iP,ea=eg(e[0],e[1]),ea),o1(ig,eu=ta(e),eu)):o1(iP,ea=e,ea),u&&iG(),t2.write()},optionMapper:e=>{let t=!1,r=ro(e.value)?e.value[0]/e.value[1]:e.value;if(r){let e=lf(q,J,r);t=e.width<ee.width||e.height<ee.height}return e.icon=fu(e.value,{bounds:14}),{...e,disabled:t}}}],t$&&["Dropdown","select-crop-limit",{icon:iz(tS,Q),label:tS.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:e})=>{o1(iE,Q=e,Q),t2.write()},options:[[!0,tS.cropLabelCropBoundaryEdge,{icon:iz(tS,!0)}],[!1,tS.cropLabelCropBoundaryNone,{icon:iz(tS,!1)}]]}]].filter(Boolean),L,()=>tR.set({})).filter(Boolean))}6144&e.$$.dirty[0]|0x8000000&e.$$.dirty[3]|262148&e.$$.dirty[4]&&o1(id,ec=eB&&"never"!==tx&&("always"===tx||"short"===L.verticalSpace||$)?o.map(([e,t,r])=>Array.isArray(r)?[e,t,r]:[e,t,{...r,hideLabel:!0}]):[],ec),1&e.$$.dirty[5]&&r(23,a=Q?0:-1),0x24000000&e.$$.dirty[4]&&r(132,l=j&&eO(-(X.x-j.x),-(X.y-j.y))),2097408&e.$$.dirty[4]&&r(133,s=O&&l&&eO(cF(O.x+.5*O.width+l.x),cF(O.y+.5*O.height+l.y))),0x8000000&e.$$.dirty[4]&&r(136,h=null!=H),0x4008000&e.$$.dirty[4]&&r(138,p=j&&d&&(d.height===j.height||d.width===j.width)),0x3004000&e.$$.dirty[4]&&r(134,m=!p&&V<1&&N<1),15360&e.$$.dirty[4]&&r(9,f=c&&!h&&(!u||m)),8192&e.$$.dirty[0]|8192&e.$$.dirty[3]|4&e.$$.dirty[4]&&r(22,g=e3&&!!W&&!$),2097408&e.$$.dirty[4]&&r(8,b=O&&l&&{x:O.x+l.x,y:O.y+l.y,width:O.width,height:O.height}),256&e.$$.dirty[0]|4096&e.$$.dirty[3]|4&e.$$.dirty[4]&&r(21,y=e5&&!!b&&!$),65600&e.$$.dirty[3]|8389120&e.$$.dirty[4]&&r(10,x=e7&&!!s&&!eG&&!_),512&e.$$.dirty[0]|64&e.$$.dirty[3]|4194306&e.$$.dirty[4]&&f&&eG&&!D&&(clearTimeout(eR),r(125,eR=setTimeout(iG,eG))),4194306&e.$$.dirty[4]&&D&&clearTimeout(eR),1536&e.$$.dirty[0]|131072&e.$$.dirty[4]&&iX.set(x&&f?1:0,{hard:!1===A}),131584&e.$$.dirty[4]&&iZ.set(s,{hard:!1===A}),4096&e.$$.dirty[0]|1048576&e.$$.dirty[4]&&(eB&&!z?iY():iq()),524288&e.$$.dirty[4]&&F&&i0(),262144&e.$$.dirty[4]&&r(129,v="short"!==L.verticalSpace),0x8000000&e.$$.dirty[3]|36&e.$$.dirty[4]&&r(20,S="never"===tx&&!$||v&&"always"!==tx),4&e.$$.dirty[0]|1024&e.$$.dirty[3]&&r(128,k=eJ&&eQ),2048&e.$$.dirty[3]|48&e.$$.dirty[4]&&r(127,C=e2?v&&k:k),512&e.$$.dirty[3]|8&e.$$.dirty[4]&&r(19,T=eq||C),8&e.$$.dirty[4]&&!C&&r(5,i4=i2),32&e.$$.dirty[0]&&r(18,M={name:i1,selected:i4}),16&e.$$.dirty[0]|512&e.$$.dirty[3]|8&e.$$.dirty[4]&&r(7,P=[eq&&{id:i1+"-rotation",label:tS.cropLabelTabRotation},C&&{id:i1+"-zoom",label:tS.cropLabelTabZoom}].filter(Boolean)),128&e.$$.dirty[0]&&r(17,E=P.map(e=>e.id)),64&e.$$.dirty[0]|4&e.$$.dirty[4]&&eI&&!eI.children.length&&$&&eI.dispatchEvent(new CustomEvent("measure",{detail:eI.rect})),4096&e.$$.dirty[0]|131072&e.$$.dirty[4]&&A&&i5.set(20*!eB),65536&e.$$.dirty[4]&&r(16,R=I?`translateY(${I}px)`:"none")},[eW,ej,eJ,tv,tS,i4,eI,P,b,f,x,o,eB,W,J,ez,R,E,M,T,S,y,g,a,ei,ex,eb,eS,ek,eC,eT,tM,tP,tR,tI,tA,tL,tW,t4,t3,t8,t7,t9,it,il,is,id,ic,ih,ip,i$,im,ig,iy,ix,ib,iv,iw,iS,ik,iC,iT,iM,iP,iE,iR,iI,iL,()=>{t_="select",o1(t3,D=!0,D),o1(ix,H=tT(G),H),eM=_?iB:iO},({detail:e})=>{let{boundsLimited:t,boundsIntent:r}=eM(e.direction,e.translation);o1(t8,Z=!0,Z),o1(ib,ed=r,ed),o1(iy,G=t,G)},({detail:e})=>{let{boundsLimited:t}=eM(e.direction,e.translation);o1(t8,Z=!1,Z),o1(t3,D=!1,D),o1(ib,ed=void 0,ed),eX(e.translation)&&(o1(iy,G=t,G),t2.write()),o1(ix,H=void 0,H),t_=void 0},()=>{t_="rotate",o1(t3,D=!0,D),o1(iS,eo=tT(W),eo)},e=>{o1(t8,Z=!0,Z),o1(i$,J=e,J)},e=>{o1(t8,Z=!1,Z),o1(t3,D=!1,D),o1(i$,J=e,J),t2.write(),o1(iS,eo=void 0,eo)},()=>{t_="pan",eF=void 0,o1(t3,D=!0,D),eA=tT(W)},({detail:e})=>{o1(t8,Z=!0,Z),iD(e)},({detail:e})=>{o1(t8,Z=!1,Z),o1(t3,D=!1,D),(eX(e.translation)>0||0!==e.scalar)&&(iD(e),t2.write()),o1(iw,er=void 0,er),eA=void 0},({detail:{translation:e}})=>{_&&(e=eU(eV(e))),eF=e,o1(t3,D=!1,D)},iW,iN,iV,()=>{t_="zoom",o1(t3,D=!0,D),ij()},e=>{o1(t8,Z=!1,Z),iU(e)},e=>{iU(e),t2.write(),o1(t8,Z=!1,Z),o1(t3,D=!1,D),eA=void 0},()=>{t_="zoom",eA||(eP=tT(W),o1(t3,D=!0,D))},({detail:e})=>{eP&&(o1(t8,Z=!0,Z),iH(e))},({detail:e})=>{eP&&(o1(t8,Z=!1,Z),o1(t3,D=!1,D),iH(e),o1(iw,er=void 0,er),eP=void 0,t2.write())},e=>{let t=pK(e,ei,X);if(e8&&!tK(G,t))return;t_="zoom",o1(t3,D=!0,D),o1(t8,Z=!0,Z),e.preventDefault(),e.stopPropagation();let r=pr(e,{fixScrollDirection:et}),n=tT(W),o=1===Math.min(W.width/ee.width,W.height/ee.height);if(eZ&&Q){let e=tX(W,q,J);if(tN()&&e&&r>0&&u){o1(t3,D=!1,D),o1(t8,Z=!1,Z);let e=ew(J)?tE({height:q.width,width:q.height}):tE(q);if(tH(n,e)||(clearTimeout(eE),tH(t2.state.crop,e)))return;o1(ik,W=e,W),t2.write();return}}let a=tB(W);if(e6&&"selection"!==tb&&r<0&&!o){let e=e1(eV(t),G),r=Math.min(G.width/W.width,G.height/W.height);a=tK(tD(tT(G),1.1),t)?e0(tT(W),e4(e,1/r)):a}let l=tD(tT(W),1+r/100,a);if(tm(Y[1],l)||(l=tF(tB(l),Y[1])),tm(l,Y[0])||(l=tF(tB(l),Y[0])),tH(n,l,eL)){o1(t3,D=!1,D),o1(t8,Z=!1,Z);return}o1(ik,W=t5(l,e=>eL(e,5)),W),o1(t3,D=!1,D),o1(t8,Z=!1,Z),clearTimeout(eE),eE=setTimeout(()=>{t2.write()},500)},iG,iX,iZ,iK,iQ,i1,i5,tc,"crop",eN,eH,eG,eZ,eY,eq,eQ,e2,e5,e3,e6,e8,e7,e9,te,tt,ti,tn,tl,ts,t$,tg,ty,tx,tb,tw,tk,tC,eR,$,C,k,v,w,n,l,s,m,u,h,c,p,d,I,A,L,F,z,O,D,_,N,V,j,H,G,X,q,Q,ee,eh,ep,e$,em,ef,function(t){aM.call(this,e,t)},({detail:e})=>r(5,i4=e),function(e){aE[e?"unshift":"push"](()=>{r(6,eI=e)})},e=>pq(e),function(e){r(15,ez=e)},function(t){aM.call(this,e,t)}]}function f_(e){let t,r,n,o,a,l,s;let d=e[77],c=(U(e[77].label)?e[77].label(e[2]):e[77].label)+"";function u(...t){return e[51](e[77],...t)}let h=()=>e[52](r,d),p=()=>e[52](null,d);return{c(){t=ar("div"),r=ar("div"),n=aa(),o=ar("span"),a=ao(c),ad(r,"class",fj),ad(t,"slot","option"),ad(t,"class","PinturaFilterOption")},m(e,d){at(e,t,d),o9(t,r),h(),o9(t,n),o9(t,o),o9(o,a),l||(s=[as(r,"measure",u),o2(dO.call(null,r))],l=!0)},p(t,r){d!==(e=t)[77]&&(p(),d=e[77],h()),4&r[0]|32768&r[2]&&c!==(c=(U(e[77].label)?e[77].label(e[2]):e[77].label)+"")&&ah(a,c)},d(e){e&&ai(t),p(),l=!1,oN(s)}}}function fW(e){let t,r;return t=new uS({props:{locale:e[2],layout:"row",options:e[3],selectedIndex:e[12],onchange:e[32],$$slots:{option:[f_,({option:e})=>({77:e}),({option:e})=>[0,0,32768*!!e]]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};4&r[0]&&(n.locale=e[2]),8&r[0]&&(n.options=e[3]),4096&r[0]&&(n.selectedIndex=e[12]),1028&r[0]|98304&r[2]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fN(e){let t,r,n,o,a,l,s,d;function c(t){e[54](t)}function u(t){e[55](t)}function h(t){e[56](t)}let p={elasticity:e[13]*e[19],onscroll:e[53],$$slots:{default:[fW]},$$scope:{ctx:e}};return void 0!==e[4]&&(p.maskFeatherStartOpacity=e[4]),void 0!==e[5]&&(p.maskFeatherEndOpacity=e[5]),void 0!==e[6]&&(p.maskFeatherSize=e[6]),r=new pa({props:p}),aE.push(()=>a0(r,"maskFeatherStartOpacity",c)),aE.push(()=>a0(r,"maskFeatherEndOpacity",u)),aE.push(()=>a0(r,"maskFeatherSize",h)),r.$on("measure",e[57]),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"slot","footer"),a$(t,"transform",e[11])},m(n,o){at(n,t,o),a2(r,t,null),l=!0,s||(d=[as(t,"transitionend",e[30]),as(t,"measure",e[58]),o2(dO.call(null,t,{observePosition:!0}))],s=!0)},p(e,l){let s={};8192&l[0]&&(s.elasticity=e[13]*e[19]),128&l[0]&&(s.onscroll=e[53]),5132&l[0]|65536&l[2]&&(s.$$scope={dirty:l,ctx:e}),!n&&16&l[0]&&(n=!0,s.maskFeatherStartOpacity=e[4],aB(()=>n=!1)),!o&&32&l[0]&&(o=!0,s.maskFeatherEndOpacity=e[5],aB(()=>o=!1)),!a&&64&l[0]&&(a=!0,s.maskFeatherSize=e[6],aB(()=>a=!1)),r.$set(s),2048&l[0]&&a$(t,"transform",e[11])},i(e){l||(aU(r.$$.fragment,e),l=!0)},o(e){aH(r.$$.fragment,e),l=!1},d(e){e&&ai(t),a4(r),s=!1,oN(d)}}}function fV(e){let t,r;return(t=new mK({props:{$$slots:{footer:[fN]},$$scope:{ctx:e}}})).$on("measure",e[59]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16380&r[0]|65536&r[2]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}let fj="PinturaFilterPreview";function fU(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,x,b,v,w,S,k,C,T,M,P;let E,R=oB,I=()=>(R(),R=oH(B,e=>r(43,E=e)),B),A,L=oB,F=()=>(L(),L=oH(z,e=>r(49,A=e)),z);e.$$.on_destroy.push(()=>R()),e.$$.on_destroy.push(()=>L());let{isActive:z}=t;F();let{isActiveFraction:B}=t;I();let{stores:O}=t,{locale:D}=t,{filterFunctions:_}=t,{filterOptions:W}=t,N=aT("elasticityMultiplier");oX(e,N,e=>r(13,v=e));let{history:V,interfaceImages:j,stageRectBase:H,utilRect:G,animation:X,scrollElasticity:Z,imageSize:Y,imagePreview:q,imageCropRect:K,imageRotation:J,imageFlipX:Q,imageFlipY:ee,imageBackgroundColor:et,imageGamma:ei,imageColorMatrix:er,allowPan:en,allowZoom:eo,allowZoomControls:ea,allowPlayPause:el}=O;oX(e,j,e=>r(60,u=e)),oX(e,H,e=>r(48,y=e)),oX(e,G,e=>r(47,g=e)),oX(e,X,e=>r(50,x=e)),oX(e,Y,e=>r(62,p=e)),oX(e,q,e=>r(42,c=e)),oX(e,et,e=>r(61,h=e)),oX(e,ei,e=>r(44,$=e)),oX(e,er,e=>r(40,s=e));let es=(e,t)=>{if(!e||!e.filter||!t)return 0;let r=e.filter;return t.findIndex(([e])=>!!_[e]&&lM(_[e](),r))},ed=a7({});oX(e,ed,e=>r(46,f=e));let ec=(e,t)=>o1(ed,f[e.value]=t,f),eu=a9(ed,e=>{if(!e[void 0])return;let t=e[void 0];return b&&tc(b,t)?b:tr(t)});oX(e,eu,e=>r(63,b=e));let eh=a9([z,eu,K,Y,J,Q,ee],([e,t,r,n,o,a,l],s)=>{if(!e||!t||!n)return m;let d=tB(tE(n)),c=tB(lx(n,r,o)),u=e1(eV(d),c);s({origin:eU(eV(u)),translation:u,rotation:{x:l?Math.PI:0,y:a?Math.PI:0,z:o},scale:Math.max(t.width/r.width,t.height/r.height)})});oX(e,eh,e=>r(45,m=e));let ep=e=>({origin:eV(e.origin),translation:eV(e.translation),rotation:{...e.rotation},scale:e.scale}),e$=dk(20*!!x);oX(e,e$,e=>r(39,l=e));let em={},ef={x:0,y:0},eg=a7([]);oX(e,eg,e=>r(41,d=e));let ey=e=>{let t={...e,data:c,size:p,offset:{...e.offset},mask:{...e.mask},backgroundColor:h};return t.opacity=E,t.offset.y+=l,t.mask.y+=l,t.id="filter",t},ex=()=>u.filter(e=>"filter"!==e.id);return aS(()=>{j.set([])}),e.$$set=e=>{"isActive"in e&&F(r(0,z=e.isActive)),"isActiveFraction"in e&&I(r(1,B=e.isActiveFraction)),"stores"in e&&r(34,O=e.stores),"locale"in e&&r(2,D=e.locale),"filterFunctions"in e&&r(35,_=e.filterFunctions),"filterOptions"in e&&r(3,W=e.filterOptions)},e.$$.update=()=>{if(262144&e.$$.dirty[1]&&en.set(A),262144&e.$$.dirty[1]&&eo.set(A),262144&e.$$.dirty[1]&&ea.set(A),262144&e.$$.dirty[1]&&A&&el.set(!1),8&e.$$.dirty[0]&&r(38,n=c0(W)),640&e.$$.dirty[1]&&r(12,o=es(s,n)),786432&e.$$.dirty[1]&&x&&e$.set(20*!A),512&e.$$.dirty[0]|458752&e.$$.dirty[1]&&A&&g&&y&&P&&r(37,M={x:y.x-g.x,y:y.y-g.y+P.y}),496&e.$$.dirty[0]|58096&e.$$.dirty[1]&&m&&M&&ef&&T&&w){let e=M.x+T.x+ef.x,t=M.y,r=T.x+M.x,o=r+T.width;eg.set(n.map(([n],a)=>{let l=f[n],d=ef.x+l.x,c=d+l.width;if(c<0||d>T.width)return!1;let u=e+l.x,h=t+l.y,p=ep(m);p.offset=eO(.5*l.width+u,.5*l.height+h),p.maskOpacity=1,p.mask=tz(u+0,h,l.width+0,l.height),p.maskFeather=[1,0,1,0,1,o,1,o],d<C&&S<1&&(p.maskFeather[0]=S,p.maskFeather[1]=r,p.maskFeather[2]=1,p.maskFeather[3]=r+C),c>T.width-C&&k<1&&(p.maskFeather[4]=k,p.maskFeather[5]=o-C,p.maskFeather[6]=1,p.maskFeather[7]=o),p.maskCornerRadius=w[n];let g=s&&Object.keys(s).filter(e=>"filter"!=e).map(e=>s[e])||[];return U(_[n])&&g.push(_[n]()),p.colorMatrix=g.length?oL(g):void 0,p.gamma=$,p}).filter(Boolean))}if(7424&e.$$.dirty[1]){if(E>0&&d){let e=[...ex(),...d.map(ey)];j.set(e)}else j.set(ex())}256&e.$$.dirty[1]&&r(11,a=l?`translateY(${l}px)`:"none")},[z,B,D,W,S,k,C,ef,T,P,em,a,o,v,N,j,H,G,X,Z,Y,q,et,ei,er,ed,ec,eu,eh,e$,e=>{e.target.className===fj&&r(36,w=Object.keys(em).reduce((e,t)=>{let r=getComputedStyle(em[t]),n=["top-left","top-right","bottom-left","bottom-right"].map(e=>r.getPropertyValue(`border-${e}-radius`)).map(pi).map(e=>1.25*e);return e[t]=n,e},{}))},eg,({value:e})=>{o1(er,s={...s,filter:U(_[e])?_[e]():void 0},s),V.write()},"filter",O,_,w,M,n,l,s,d,c,E,$,m,f,g,y,A,x,(e,t)=>ec(e,t.detail),function(e,t){aE[e?"unshift":"push"](()=>{em[t.value]=e,r(10,em)})},e=>r(7,ef=e),function(e){r(4,S=e)},function(e){r(5,k=e)},function(e){r(6,C=e)},e=>r(8,T=e.detail),e=>r(9,P=e.detail),function(t){aM.call(this,e,t)}]}function fH(e){let t,r,n,o;t=new pa({props:{elasticity:e[6]*e[9],class:"PinturaControlListScroller",$$slots:{default:[fX]},$$scope:{ctx:e}}});let a=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[4]},e[5]],l={$$slots:{default:[fZ,({panel:e})=>({42:e}),({panel:e})=>[0,2048*!!e]]},$$scope:{ctx:e}};for(let e=0;e<a.length;e+=1)l=oD(l,a[e]);return n=new cu({props:l}),{c(){a1(t.$$.fragment),r=aa(),a1(n.$$.fragment)},m(e,a){a2(t,e,a),at(e,r,a),a2(n,e,a),o=!0},p(e,r){let o={};64&r[0]&&(o.elasticity=e[6]*e[9]),38&r[0]|8192&r[1]&&(o.$$scope={dirty:r,ctx:e}),t.$set(o);let l=48&r[0]?aJ(a,[a[0],a[1],16&r[0]&&{panels:e[4]},32&r[0]&&aQ(e[5])]):{};128&r[0]|10240&r[1]&&(l.$$scope={dirty:r,ctx:e}),n.$set(l)},i(e){o||(aU(t.$$.fragment,e),aU(n.$$.fragment,e),o=!0)},o(e){aH(t.$$.fragment,e),aH(n.$$.fragment,e),o=!1},d(e){a4(t,e),e&&ai(r),a4(n,e)}}}function fG(e){let t,r;let n=e[43].label+"";return{c(){t=ar("span"),r=ao(n)},m(e,n){at(e,t,n),o9(t,r)},p(e,t){4096&t[1]&&n!==(n=e[43].label+"")&&ah(r,n)},d(e){e&&ai(t)}}}function fX(e){let t,r;let n=[{class:"PinturaControlList"},{tabs:e[1]},e[5]],o={$$slots:{default:[fG,({tab:e})=>({43:e}),({tab:e})=>[0,4096*!!e]]},$$scope:{ctx:e}};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return(t=new d7({props:o})).$on("select",e[24]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=34&r[0]?aJ(n,[n[0],2&r[0]&&{tabs:e[1]},32&r[0]&&aQ(e[5])]):{};12288&r[1]&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fZ(e){let t,r;let n=[e[7][e[42]]],o={};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return t=new m1({props:o}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=128&r[0]|2048&r[1]?aJ(n,[aQ(e[7][e[42]])]):{};t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fY(e){let t,r;let n=e[5]&&fH(e);return{c(){t=ar("div"),n&&n.c(),ad(t,"slot","footer"),a$(t,"transform",e[3])},m(e,o){at(e,t,o),n&&n.m(t,null),r=!0},p(e,r){e[5]?n?(n.p(e,r),32&r[0]&&aU(n,1)):((n=fH(e)).c(),aU(n,1),n.m(t,null)):n&&(aV(),aH(n,1,1,()=>{n=null}),aj()),8&r[0]&&a$(t,"transform",e[3])},i(e){r||(aU(n),r=!0)},o(e){aH(n),r=!1},d(e){e&&ai(t),n&&n.d()}}}function fq(e){let t,r;return(t=new mK({props:{$$slots:{footer:[fY]},$$scope:{ctx:e}}})).$on("measure",e[25]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};254&r[0]|8192&r[1]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function fK(e,t,r){let n,o,a,l,s,d,c,u,h,p;let $,m=oB,f=()=>(m(),m=oH(y,e=>r(21,$=e)),y);e.$$.on_destroy.push(()=>m());let{stores:g}=t,{isActive:y}=t;f();let{locale:x={}}=t,{finetuneControlConfiguration:b}=t,{finetuneOptions:v}=t,{finetuneNudgePrecision:w}=t,{history:S,animation:k,scrollElasticity:C,rangeInputElasticity:T,imageColorMatrix:M,imageConvolutionMatrix:P,imageGamma:E,imageVignette:R,imageNoise:I,allowPan:A,allowZoom:L,allowZoomControls:F,allowPlayPause:z}=g;oX(e,k,e=>r(22,c=e));let B={imageColorMatrix:M,imageConvolutionMatrix:P,imageGamma:E,imageVignette:R,imageNoise:I},O=aT("elasticityMultiplier");oX(e,O,e=>r(6,h=e));let D=`finetune-${K()}`,_=a7({});oX(e,_,e=>r(23,u=e));let W=a7({});oX(e,W,e=>r(7,p=e));let N=()=>{o1(W,p=Object.keys(u).reduce((e,t)=>{let{base:r,min:n,max:o,getLabel:a,getStore:l,setValue:s=(e,t)=>e.set(t)}=b[t],d=l(B),c=null!=u[t]?u[t]:r;return e[t]={base:r,min:n,max:o,value:c,valueLabel:a?a(c,n,o,o-n):Math.round(100*c),oninputmove:e=>{s(d,e)},oninputend:e=>{s(d,e),S.write()},elasticity:h*T,labelReset:x.labelReset,nudgeMultiplier:w},e},{}),p)},V=[],j=e=>{V&&V.forEach(e=>e()),V=l.map(t=>{let{getStore:r,getValue:n=ey}=e[t];return r(B).subscribe(e=>{let r=null!=e?n(e):e;o1(_,u={...u,[t]:r},u)})})},H=dk(20*!!c);return oX(e,H,e=>r(20,d=e)),e.$$set=e=>{"stores"in e&&r(15,g=e.stores),"isActive"in e&&f(r(0,y=e.isActive)),"locale"in e&&r(16,x=e.locale),"finetuneControlConfiguration"in e&&r(17,b=e.finetuneControlConfiguration),"finetuneOptions"in e&&r(18,v=e.finetuneOptions),"finetuneNudgePrecision"in e&&r(19,w=e.finetuneNudgePrecision)},e.$$.update=()=>{2097152&e.$$.dirty[0]&&A.set($),2097152&e.$$.dirty[0]&&L.set($),2097152&e.$$.dirty[0]&&F.set($),2097152&e.$$.dirty[0]&&$&&z.set(!0),327680&e.$$.dirty[0]&&r(1,n=v?v.map(([e,t])=>({id:e,label:U(t)?t(x):t})):[]),2&e.$$.dirty[0]&&r(2,o=n.length?n[0].id:void 0),4&e.$$.dirty[0]&&r(5,a=o&&{name:D,selected:o}),2&e.$$.dirty[0]&&r(4,l=n.map(e=>e.id)),131072&e.$$.dirty[0]&&b&&j(b),8519680&e.$$.dirty[0]&&b&&u&&N(),6291456&e.$$.dirty[0]&&c&&H.set(20*!$),1048576&e.$$.dirty[0]&&r(3,s=d?`translateY(${d}px)`:"none")},[y,n,o,s,l,a,h,p,k,C,O,_,W,H,"finetune",g,x,b,v,w,d,$,c,u,({detail:e})=>r(2,o=e),function(t){aM.call(this,e,t)}]}var fJ=(e,t)=>{let r=t.length;return e<0?e%r+r:e>=r?e%r:e};function fQ(e,t,r){let n=e.slice();return n[46]=t[r].key,n[47]=t[r].index,n[48]=t[r].translate,n[49]=t[r].scale,n[50]=t[r].selected,n[12]=t[r].rotate,n[51]=t[r].dir,n[52]=t[r].center,n[53]=t[r].type,n[2]=t[r].visible,n}function f0(e){let t;return{c(){ad(t=ar("div"),"class","PinturaShapeManipulator"),ad(t,"data-control","point"),a$(t,"pointer-events","none"),a$(t,"opacity",e[4]),a$(t,"transform",`translate3d(${e[52].x}px, ${e[52].y}px, 0) scale(${e[5]}, ${e[5]})`)},m(e,r){at(e,t,r)},p(e,r){16&r[0]&&a$(t,"opacity",e[4]),40&r[0]&&a$(t,"transform",`translate3d(${e[52].x}px, ${e[52].y}px, 0) scale(${e[5]}, ${e[5]})`)},d(e){e&&ai(t)}}}function f1(e,t){let r,n,o,a,l,s,d,c,u;function h(...e){return t[18](t[47],...e)}let p="edge"===t[53]&&t[2]&&f0(t);return{key:e,first:null,c(){r=ar("div"),s=aa(),p&&p.c(),d=al(),ad(r,"role","button"),ad(r,"aria-label",n=`Drag ${t[53]} ${t[46]}`),ad(r,"tabindex",o="edge"===t[53]?-1:0),ad(r,"class","PinturaShapeManipulator"),ad(r,"data-control",a=t[53]),ad(r,"data-selected",l=t[50]),a$(r,"cursor",t[51]?t[51]+"-resize":"move"),a$(r,"opacity",t[4]),a$(r,"--tx",t[48].x),a$(r,"--ty",t[48].y),a$(r,"--r","edge"===t[53]?t[12]:0),a$(r,"--sx","point"===t[53]?t[5]:t[49].x),a$(r,"--sy","point"===t[53]?t[5]:t[49].y),this.first=r},m(e,n){at(e,r,n),at(e,s,n),p&&p.m(e,n),at(e,d,n),c||(u=[as(r,"nudge",h),o2(uK.call(null,r,{preventDefault:!0})),as(r,"interactionstart",function(){oV(t[9]("start",t[47]))&&t[9]("start",t[47]).apply(this,arguments)}),as(r,"interactionupdate",function(){oV(t[9]("move",t[47]))&&t[9]("move",t[47]).apply(this,arguments)}),as(r,"interactionend",function(){oV(t[9]("end",t[47]))&&t[9]("end",t[47]).apply(this,arguments)}),o2(h7.call(null,r,{observeKeys:!0}))],c=!0)},p(e,s){t=e,8&s[0]&&n!==(n=`Drag ${t[53]} ${t[46]}`)&&ad(r,"aria-label",n),8&s[0]&&o!==(o="edge"===t[53]?-1:0)&&ad(r,"tabindex",o),8&s[0]&&a!==(a=t[53])&&ad(r,"data-control",a),8&s[0]&&l!==(l=t[50])&&ad(r,"data-selected",l),8&s[0]&&a$(r,"cursor",t[51]?t[51]+"-resize":"move"),16&s[0]&&a$(r,"opacity",t[4]),8&s[0]&&a$(r,"--tx",t[48].x),8&s[0]&&a$(r,"--ty",t[48].y),8&s[0]&&a$(r,"--r","edge"===t[53]?t[12]:0),40&s[0]&&a$(r,"--sx","point"===t[53]?t[5]:t[49].x),40&s[0]&&a$(r,"--sy","point"===t[53]?t[5]:t[49].y),"edge"===t[53]&&t[2]?p?p.p(t,s):((p=f0(t)).c(),p.m(d.parentNode,d)):p&&(p.d(1),p=null)},d(e){e&&ai(r),e&&ai(s),p&&p.d(e),e&&ai(d),c=!1,oN(u)}}}function f2(e){let t,r,n;return{c(){ad(t=ar("div"),"role","button"),ad(t,"aria-label","Drag rotator"),ad(t,"tabindex","0"),ad(t,"class","PinturaShapeManipulator"),ad(t,"data-control","rotate"),a$(t,"transform",`translate3d(${e[0].x}px, ${e[0].y}px, 0) scale(${e[5]}, ${e[5]})`),a$(t,"opacity",e[4])},m(o,a){at(o,t,a),r||(n=[as(t,"nudge",e[11]),o2(uK.call(null,t,{preventDefault:!0})),as(t,"interactionstart",e[12]("start")),as(t,"interactionupdate",e[12]("move")),as(t,"interactionend",e[12]("end")),o2(h7.call(null,t,{observeKeys:!0}))],r=!0)},p(e,r){33&r[0]&&a$(t,"transform",`translate3d(${e[0].x}px, ${e[0].y}px, 0) scale(${e[5]}, ${e[5]})`),16&r[0]&&a$(t,"opacity",e[4])},d(e){e&&ai(t),r=!1,oN(n)}}}function f4(e){let t,r,n=[],o=new Map,a=e[3],l=e=>e[46];for(let t=0;t<a.length;t+=1){let r=fQ(e,a,t),s=l(r);o.set(s,n[t]=f1(s,r))}let s=e[1]&&f2(e);return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=aa(),s&&s.c(),r=al()},m(e,o){for(let t=0;t<n.length;t+=1)n[t].m(e,o);at(e,t,o),s&&s.m(e,o),at(e,r,o)},p(e,d){1592&d[0]&&(a=e[3],n=aK(n,d,l,1,e,a,o,t.parentNode,aY,f1,t,fQ)),e[1]?s?s.p(e,d):((s=f2(e)).c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},i:oB,o:oB,d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&ai(t),s&&s.d(e),e&&ai(r)}}}function f5(e,t,r){let n,o,a,l;let s=ak(),d=.5*ev,c=eb-d,u=eb+d,h=-eb,p=h-d,$=h+d,m=ex-d,f=-ex+d,g=-d,y=eb-ev,x=y-d,b=y+d,v=ex-ev,w=v-d,S=v+d,k=h-ev,C=k+d,T=k-d,M=h+ev,P=M+d,E=M-d,{visible:R=!1}=t,{points:I=[]}=t,{rotatorPoint:A}=t,{selectedPoint:L}=t,{enableDragEdges:F=!0}=t,{enableDragPoints:z=!0}=t,{enableRotatePoints:B=!0}=t,O=aT("isAnimated");oX(e,O,e=>r(17,o=e));let D=dk(.5,{precision:1e-4,stiffness:.3,damping:.7});oX(e,D,e=>r(5,l=e));let _=dk(0,{precision:.001,stiffness:.3,damping:.7});oX(e,_,e=>r(4,a=e));let W=e=>{let t="";return(e<=u&&e>=c||e>=p&&e<=$)&&(t="ns"),(e<=f||e>=m||e>=g&&e<=d)&&(t="ew"),(e>=w&&e<=S||e<=P&&e>=E)&&(t="nesw"),(e>=x&&e<=b||e<=C&&e>=T)&&(t="nwse"),t},N=(e,t)=>{let r=0,n=e9(e),o=[],a=e.length;for(;r<a;r++){let t=fJ(r-1,e),a=fJ(r+1,e),l=e[t],s=e[r],d=e[a],c=Math.atan2(d.y-s.y,d.x-s.x);if(z){let e=eZ(eO(l.x-s.x,l.y-s.y)),t=eZ(eO(d.x-s.x,d.y-s.y)),n=eO(e.x+t.x,e.y+t.y),a=F?z&&W(Math.atan2(n.y,n.x)):void 0;o.push({index:[r],key:`point-${r}`,type:"point",selected:L===r,scale:{x:1,y:1},translate:{x:s.x,y:s.y},angle:void 0,rotate:B,center:s,dir:a})}if(!F||Array.isArray(F)&&!F.some(([e,t])=>r===e&&a===t))continue;let u=eO(s.x+(d.x-s.x)*.5,s.y+(d.y-s.y)*.5);o.push({index:[r,a],key:`edge-${r}`,type:"edge",scale:{x:e8(s,d),y:1},translate:{x:s.x,y:s.y},angle:c,rotate:c,center:u,visible:Array.isArray(F),dir:W(Math.atan2(n.y-u.y,n.x-u.x))})}return o},V=(e,t)=>{s("resizestart",{indexes:e,translation:eB(),isNudge:!0}),s("resizemove",{indexes:e,translation:t,isNudge:!0}),s("resizeend",{indexes:e,translation:eB(),isNudge:!0})};return e.$$set=e=>{"visible"in e&&r(2,R=e.visible),"points"in e&&r(13,I=e.points),"rotatorPoint"in e&&r(0,A=e.rotatorPoint),"selectedPoint"in e&&r(14,L=e.selectedPoint),"enableDragEdges"in e&&r(15,F=e.enableDragEdges),"enableDragPoints"in e&&r(16,z=e.enableDragPoints),"enableRotatePoints"in e&&r(1,B=e.enableRotatePoints)},e.$$.update=()=>{131076&e.$$.dirty[0]&&D.set(R?1:.5,{hard:!1===o}),131076&e.$$.dirty[0]&&_.set(+!!R,{hard:!1===o}),8192&e.$$.dirty[0]&&r(3,n=N(I))},[A,B,R,n,a,l,O,D,_,(e,t)=>({detail:r})=>{let n=r&&r.translation?r.translation:eO(0,0);s(`resize${e}`,{...r,indexes:t,translation:n})},V,({detail:e})=>{s("rotatestart",{translation:eB(),isNudge:!0}),s("rotatemove",{translation:e,isNudge:!0}),s("rotateend",{translation:eB(),isNudge:!0})},e=>({detail:t})=>{let r=t&&t.translation?t.translation:eO(0,0);s(`rotate${e}`,{...t,translation:r})},I,L,F,z,o,(e,{detail:t})=>V(e,t)]}class f3 extends a3{constructor(e){super(),a5(this,e,f5,f4,oj,{visible:2,points:13,rotatorPoint:0,selectedPoint:14,enableDragEdges:15,enableDragPoints:16,enableRotatePoints:1},null,[-1,-1])}}var f6=(e,t)=>e1(pq(e),t),f8=e=>document.createTextNode(e),f7=e=>(iw()&&e.endsWith("<div><br></div>")?e.replace(/<div><br><\/div>$/,"<br><br>"):e).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function f9(e){let t,r,n,o;return{c(){ad(t=ar("pre"),"class","PinturaContentEditable")},m(a,l){at(a,t,l),t.innerHTML=e[0],n||(o=o2(r=d9.call(null,t,`${e[7]};position:absolute;z-index:-1;pointer-events:none;`)),n=!0)},p(e,n){1&n[0]&&(t.innerHTML=e[0]),r&&oV(r.update)&&128&n[0]&&r.update.call(null,`${e[7]};position:absolute;z-index:-1;pointer-events:none;`)},d(e){e&&ai(t),n=!1,o()}}}function ge(e){let t,r,n,o,a,l;let s=e[8]&&f9(e);return{c(){s&&s.c(),t=aa(),ad(r=ar("pre"),"class","PinturaContentEditable"),ad(r,"data-wrap-content",n=e[4]||e[5]?"wrap":"nowrap"),ad(r,"contenteditable",""),ad(r,"spellcheck",e[1]),ad(r,"autocorrect",e[2]),ad(r,"autocapitalize",e[3])},m(n,d){s&&s.m(n,d),at(n,t,d),at(n,r,d),e[26](r),a||(l=[o2(o=d9.call(null,r,e[8]?e[15](e[7]):e[7])),as(r,"input",e[13]),as(r,"compositionend",e[12]),as(r,"paste",e[14]),as(r,"keydown",e[10]),as(r,"keyup",e[11]),as(r,"blur",e[9])],a=!0)},p(e,a){e[8]?s?s.p(e,a):((s=f9(e)).c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),48&a[0]&&n!==(n=e[4]||e[5]?"wrap":"nowrap")&&ad(r,"data-wrap-content",n),2&a[0]&&ad(r,"spellcheck",e[1]),4&a[0]&&ad(r,"autocorrect",e[2]),8&a[0]&&ad(r,"autocapitalize",e[3]),o&&oV(o.update)&&384&a[0]&&o.update.call(null,e[8]?e[15](e[7]):e[7])},i:oB,o:oB,d(n){s&&s.d(n),n&&ai(t),n&&ai(r),e[26](null),a=!1,oN(l)}}}function gt(e,t,r){let n,o,a,l;let{spellcheck:s="false"}=t,{autocorrect:d="off"}=t,{autocapitalize:c="off"}=t,{wrapLines:u=!0}=t,{allowNewline:h=!0}=t,{textFormat:p="text"}=t,{formatInput:$=ey}=t,{formatPaste:m=ey}=t,{styles:f}=t,{innerHTML:g}=t,{oninput:y=x}=t,{enableTextStyleShortcuts:b=!1}=t,v=()=>{if(!a)return;let e=document.createRange();e.selectNodeContents(a);let t=F();t.removeAllRanges(),t.addRange(e)},w=ak();document.execCommand("defaultParagraphSeparator",!1,"br");let S=e=>{e!==a.innerHTML&&(r(6,a.innerHTML=e,a),a===document.activeElement&&v())},k=e=>e.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),C=()=>{r(0,g=a.innerHTML);let e=f7(g);w("input",e),y(e),requestAnimationFrame(()=>a&&a.scrollTo(0,0))},T=()=>{z(a);let e="html"===p?a.innerHTML:k(a.innerHTML);r(6,a.innerHTML=$(e),a),B(a),C()},M=()=>{w("confirm")},P=()=>{w("cancel")},E={b:"bold",i:"italic",u:"underline",s:"strikethrough"},I=e=>{let t=E[e];t&&document.execCommand(t)},A=e=>{let t=R("span");return t.dataset.bookmark=e,t},L=(e,t,r)=>{let n=A(r);if(e.nodeType===Node.TEXT_NODE){let o=e.textContent;if("start"===r){let r=f8(o.substring(0,t)),a=f8(o.substring(t));e.replaceWith(r,n,a)}else{let r=f8(o.substring(0,t)),a=f8(o.substring(t));e.replaceWith(r,n,a)}}else e.nodeType===Node.ELEMENT_NODE&&e.insertBefore(n,e.childNodes[t])},F=()=>{let e=a.getRootNode();return"getSelection"in e?e.getSelection():document.getSelection()},z=e=>{let t=F();if(!(t.getRangeAt&&t.rangeCount))return;let r=t.getRangeAt(0),{startOffset:n,endOffset:o,startContainer:a,endContainer:l}=r;if(e.contains(r.startContainer)&&e.contains(r.endContainer)){if(a.nodeType===Node.TEXT_NODE&&a===l){let e=a.textContent,t=e.substring(0,n),r=A("start"),l=o-n>0?e.substring(n,o):"",s=A("end"),d=e.substring(o);a.replaceWith(t,r,l,s,d)}else L(a,n,"start"),L(l,o+ +(a===l),"end")}},B=e=>{let t=O(e,"start"),r=O(e,"end");if(!t||!r)return;let n=document.createRange();n.setStart(t,0),n.setEnd(r,0);let o=F();o.removeAllRanges(),o.addRange(n),t.remove(),r.remove()},O=(e,t)=>{let r=e.children;for(let e=0;e<r.length;e++){let n=r[e];if(n.dataset.bookmark===t)return n;if(n.children.length){let e=O(n,t);if(e)return e}}};return e.$$set=e=>{"spellcheck"in e&&r(1,s=e.spellcheck),"autocorrect"in e&&r(2,d=e.autocorrect),"autocapitalize"in e&&r(3,c=e.autocapitalize),"wrapLines"in e&&r(4,u=e.wrapLines),"allowNewline"in e&&r(5,h=e.allowNewline),"textFormat"in e&&r(16,p=e.textFormat),"formatInput"in e&&r(17,$=e.formatInput),"formatPaste"in e&&r(18,m=e.formatPaste),"styles"in e&&r(19,f=e.styles),"innerHTML"in e&&r(0,g=e.innerHTML),"oninput"in e&&r(20,y=e.oninput),"enableTextStyleShortcuts"in e&&r(21,b=e.enableTextStyleShortcuts)},e.$$.update=()=>{if(64&e.$$.dirty[0]&&r(25,n=!!a),0x2000001&e.$$.dirty[0]&&n&&g&&S(g),524336&e.$$.dirty[0]){if(!u&&h){let e=f.includes(":right")?"text-indent:-100px!important":f.includes(":center")?"":"min-width:calc(100% + 100px)!important";r(7,l=f+";overflow:visible;"+e)}else r(7,l=f)}524288&e.$$.dirty[0]&&r(8,o=f.includes("text-stroke"))},[g,s,d,c,u,h,a,l,o,()=>{w("blur")},e=>{if(/escape/i.test(e.code))return e.stopPropagation(),P();let t=e.ctrlKey||e.metaKey;if("html"===p&&t&&/b|i|u|s/.test(e.key)){b&&I(e.key),e.preventDefault();return}if(/enter/i.test(e.code)&&(e.stopPropagation(),!e.isComposing)){if(t)return M();h||e.preventDefault(),document.execCommand("insertLineBreak"),e.preventDefault()}},()=>{},e=>{""!==e.data&&T()},e=>{let{inputType:t}=e;"insertCompositionText"!==t&&"deleteCompositionText"!==t&&T()},e=>{e.preventDefault();let t=e.clipboardData.getData("text/plain"),r="html"===p?t:k(t),n=m(r);if(!n.length)return;let o=F().getRangeAt(0);o.deleteContents(),o.insertNode(document.createTextNode(n)),C()},e=>e.replace("-webkit-text-stroke","--text-stroke").replace("text-shadow","--text-shadow"),p,$,m,f,y,b,()=>T(),()=>a&&a.focus(),v,n,function(e){aE[e?"unshift":"push"](()=>{r(6,a=e)})}]}class gi extends a3{constructor(e){super(),a5(this,e,gt,ge,oj,{spellcheck:1,autocorrect:2,autocapitalize:3,wrapLines:4,allowNewline:5,textFormat:16,formatInput:17,formatPaste:18,styles:19,innerHTML:0,oninput:20,enableTextStyleShortcuts:21,confirm:22,focus:23,select:24},null,[-1,-1])}get spellcheck(){return this.$$.ctx[1]}set spellcheck(e){this.$$set({spellcheck:e}),a_()}get autocorrect(){return this.$$.ctx[2]}set autocorrect(e){this.$$set({autocorrect:e}),a_()}get autocapitalize(){return this.$$.ctx[3]}set autocapitalize(e){this.$$set({autocapitalize:e}),a_()}get wrapLines(){return this.$$.ctx[4]}set wrapLines(e){this.$$set({wrapLines:e}),a_()}get allowNewline(){return this.$$.ctx[5]}set allowNewline(e){this.$$set({allowNewline:e}),a_()}get textFormat(){return this.$$.ctx[16]}set textFormat(e){this.$$set({textFormat:e}),a_()}get formatInput(){return this.$$.ctx[17]}set formatInput(e){this.$$set({formatInput:e}),a_()}get formatPaste(){return this.$$.ctx[18]}set formatPaste(e){this.$$set({formatPaste:e}),a_()}get styles(){return this.$$.ctx[19]}set styles(e){this.$$set({styles:e}),a_()}get innerHTML(){return this.$$.ctx[0]}set innerHTML(e){this.$$set({innerHTML:e}),a_()}get oninput(){return this.$$.ctx[20]}set oninput(e){this.$$set({oninput:e}),a_()}get enableTextStyleShortcuts(){return this.$$.ctx[21]}set enableTextStyleShortcuts(e){this.$$set({enableTextStyleShortcuts:e}),a_()}get confirm(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}get select(){return this.$$.ctx[24]}}let gr=["i","b","u","strike"].map(e=>({tag:e,tagOpen:RegExp(`<${e}>`,"g"),tagClose:RegExp(`</${e}>`,"g"),placeholderOpen:RegExp(`___${e}O___`,"g"),placeholderClose:RegExp(`___${e}C___`,"g")})),gn=(e,t=gr)=>(t.forEach(({tag:t,tagOpen:r,tagClose:n})=>{e=e.replace(r,`___${t}O___`).replace(n,`___${t}C___`)}),e),go=(e,t=gr)=>(t.forEach(({tag:t,placeholderOpen:r,placeholderClose:n})=>{e=e.replace(r,`<${t}>`).replace(n,`</${t}>`)}),e);var ga=e=>e=go(e=(e=gn(e)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split("\n").join("<br>")),gl=e=>f7(e).split(/<br>|<br\/>/g).join("\n").replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&amp;/g,"&"),gs=(e,t)=>P(e)?parseFloat(e)/100*t:e,gd=(e,t)=>({x:rm(e.x,t.width),y:rm(e.y,t.height)});function gc(e,t,r){let n=e.slice();return n[300]=t[r],n[302]=r,n}function gu(e,t){let r,n,o,a,l,s,d,c,u,h,p;let $=t[300].name+"";function m(){return t[190](t[302])}return o=new hg({props:{color:t[300].color}}),{key:e,first:null,c(){r=ar("li"),n=ar("button"),a1(o.$$.fragment),a=aa(),l=ar("span"),s=ao($),c=aa(),ad(n,"class","PinturaShapeListItem"),ad(n,"type","button"),ad(n,"aria-label",d="Select shape "+t[300].name),this.first=r},m(e,t){at(e,r,t),o9(r,n),a2(o,n,null),o9(n,a),o9(n,l),o9(l,s),o9(r,c),u=!0,h||(p=as(n,"click",m),h=!0)},p(e,r){t=e;let a={};2097152&r[0]&&(a.color=t[300].color),o.$set(a),(!u||2097152&r[0])&&$!==($=t[300].name+"")&&ah(s,$),(!u||2097152&r[0]&&d!==(d="Select shape "+t[300].name))&&ad(n,"aria-label",d)},i(e){u||(aU(o.$$.fragment,e),u=!0)},o(e){aH(o.$$.fragment,e),u=!1},d(e){e&&ai(r),a4(o),h=!1,p()}}}function gh(e){let t,r;return(t=new f3({props:{visible:!0,points:e[12],rotatorPoint:e[28],selectedPoint:e[16],enableDragEdges:e[17],enableDragPoints:e[30],enableRotatePoints:e[14]}})).$on("resizestart",e[39]),t.$on("resizemove",e[40]),t.$on("resizeend",e[41]),t.$on("rotatestart",e[42]),t.$on("rotatemove",e[43]),t.$on("rotateend",e[44]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};4096&r[0]&&(n.points=e[12]),0x10000000&r[0]&&(n.rotatorPoint=e[28]),65536&r[0]&&(n.selectedPoint=e[16]),131072&r[0]&&(n.enableDragEdges=e[17]),0x40000000&r[0]&&(n.enableDragPoints=e[30]),16384&r[0]&&(n.enableRotatePoints=e[14]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function gp(e){let t,r,n,o;let a=[gm,g$],l=[];function s(e,t){return"modal"===e[4]?0:"inline"===e[4]?1:-1}return~(t=s(e))&&(r=l[t]=a[t](e)),{c(){r&&r.c(),n=al()},m(e,r){~t&&l[t].m(e,r),at(e,n,r),o=!0},p(e,o){let d=t;(t=s(e))===d?~t&&l[t].p(e,o):(r&&(aV(),aH(l[d],1,1,()=>{l[d]=null}),aj()),~t?((r=l[t])?r.p(e,o):(r=l[t]=a[t](e)).c(),aU(r,1),r.m(n.parentNode,n)):r=null)},i(e){o||(aU(r),o=!0)},o(e){aH(r),o=!1},d(e){~t&&l[t].d(e),e&&ai(n)}}}function g$(e){let t,r,n,o,a,l;return r=new gi({props:{formatInput:e[46],wrapLines:!!e[13].width,textFormat:e[13].format,enableTextStyleShortcuts:e[5],allowNewline:e[29],styles:e[27]}}),e[193](r),r.$on("input",e[47]),r.$on("keyup",e[50]),r.$on("cancel",e[52]),r.$on("confirm",e[51]),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"class","PinturaInlineInput")},m(s,d){at(s,t,d),a2(r,t,null),o=!0,a||(l=[o2(n=d9.call(null,t,e[26])),as(t,"focusout",e[194])],a=!0)},p(e,t){let o={};8192&t[0]&&(o.wrapLines=!!e[13].width),8192&t[0]&&(o.textFormat=e[13].format),32&t[0]&&(o.enableTextStyleShortcuts=e[5]),0x20000000&t[0]&&(o.allowNewline=e[29]),0x8000000&t[0]&&(o.styles=e[27]),r.$set(o),n&&oV(n.update)&&0x4000000&t[0]&&n.update.call(null,e[26])},i(e){o||(aU(r.$$.fragment,e),o=!0)},o(e){aH(r.$$.fragment,e),o=!1},d(n){n&&ai(t),e[193](null),a4(r),a=!1,oN(l)}}}function gm(e){let t,r;return t=new pv({props:{panelOffset:e[2],onconfirm:e[51],oncancel:e[52],buttonCancel:{icon:e[6].shapeIconInputCancel,label:e[6].shapeLabelInputCancel},buttonConfirm:{icon:e[6].shapeIconInputConfirm,label:e[6].shapeLabelInputConfirm,hideLabel:!0},$$slots:{default:[gf]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};4&r[0]&&(n.panelOffset=e[2]),64&r[0]&&(n.buttonCancel={icon:e[6].shapeIconInputCancel,label:e[6].shapeLabelInputCancel}),64&r[0]&&(n.buttonConfirm={icon:e[6].shapeIconInputConfirm,label:e[6].shapeLabelInputConfirm,hideLabel:!0}),0xa000100&r[0]|0x1000000&r[9]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function gf(e){let t,r,n,o;return{c(){ad(t=ar("textarea"),"spellcheck","false"),ad(t,"autocorrect","off"),ad(t,"autocapitalize","off")},m(a,l){at(a,t,l),e[191](t),ap(t,e[25]),n||(o=[as(t,"keydown",e[49]),as(t,"keypress",e[48]),as(t,"keyup",e[50]),as(t,"input",e[47]),as(t,"input",e[192]),o2(r=d9.call(null,t,e[27]))],n=!0)},p(e,n){0x2000000&n[0]&&ap(t,e[25]),r&&oV(r.update)&&0x8000000&n[0]&&r.update.call(null,e[27])},d(r){r&&ai(t),e[191](null),n=!1,oN(o)}}}function gg(e){let t,r,n,o,a;return r=new hJ({props:{items:e[22],key:e[10]}}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"class","PinturaShapeControls"),a$(t,"transform",e[24]),a$(t,"opacity",e[23])},m(l,s){at(l,t,s),a2(r,t,null),n=!0,o||(a=[as(t,"measure",e[195]),o2(dO.call(null,t))],o=!0)},p(e,n){let o={};4194304&n[0]&&(o.items=e[22]),1024&n[0]&&(o.key=e[10]),r.$set(o),0x1000000&n[0]&&a$(t,"transform",e[24]),8388608&n[0]&&a$(t,"opacity",e[23])},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r),o=!1,oN(a)}}}function gy(e){let t,r,n,o,a,l,s,d,c,u;let h=[],p=new Map,$=e[21],m=e=>e[300].id;for(let t=0;t<$.length;t+=1){let r=gc(e,$,t),n=m(r);p.set(n,h[t]=gu(n,r))}let f=e[15]&&gh(e),g=e[11]&&gp(e),y=e[18]>0&&gg(e);return{c(){t=ar("div"),r=ar("nav"),n=ar("ul");for(let e=0;e<h.length;e+=1)h[e].c();o=aa(),f&&f.c(),a=aa(),g&&g.c(),l=aa(),y&&y.c(),ad(r,"class","PinturaShapeList"),ad(r,"data-visible",e[19]),ad(t,"class","PinturaShapeEditor"),ad(t,"tabindex","0")},m(p,$){at(p,t,$),o9(t,r),o9(r,n);for(let e=0;e<h.length;e+=1)h[e].m(n,null);o9(t,o),f&&f.m(t,null),o9(t,a),g&&g.m(t,null),o9(t,l),y&&y.m(t,null),e[196](t),d=!0,c||(u=[as(r,"focusin",e[55]),as(r,"focusout",e[56]),as(t,"keydown",function(){oV(e[0]?x:e[45])&&(e[0]?x:e[45]).apply(this,arguments)}),as(t,"nudge",function(){oV(e[0]?x:e[54])&&(e[0]?x:e[54]).apply(this,arguments)}),as(t,"measure",e[189]),as(t,"pointermove",function(){oV(e[0]?x:e[57])&&(e[0]?x:e[57]).apply(this,arguments)}),as(t,"pointerleave",function(){oV(e[0]?x:e[58])&&(e[0]?x:e[58]).apply(this,arguments)}),as(t,"interactionstart",function(){oV(e[0]?x:e[33])&&(e[0]?x:e[33]).apply(this,arguments)}),as(t,"interactionupdate",function(){oV(e[0]?x:e[35])&&(e[0]?x:e[35]).apply(this,arguments)}),as(t,"interactioncancel",function(){oV(e[0]?x:e[34])&&(e[0]?x:e[34]).apply(this,arguments)}),as(t,"interactionrelease",function(){oV(e[0]?x:e[36])&&(e[0]?x:e[36]).apply(this,arguments)}),as(t,"interactionend",function(){oV(e[0]?x:e[37])&&(e[0]?x:e[37]).apply(this,arguments)}),o2(dO.call(null,t)),o2(uK.call(null,t)),o2(s=h7.call(null,t,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:gb,getEventPosition:e[197]}))],c=!0)},p(o,c){e=o,2097282&c[0]&&($=e[21],aV(),h=aK(h,c,m,1,e,$,p,n,aq,gu,null,gc),aj()),(!d||524288&c[0])&&ad(r,"data-visible",e[19]),e[15]?f?(f.p(e,c),32768&c[0]&&aU(f,1)):((f=gh(e)).c(),aU(f,1),f.m(t,a)):f&&(aV(),aH(f,1,1,()=>{f=null}),aj()),e[11]?g?(g.p(e,c),2048&c[0]&&aU(g,1)):((g=gp(e)).c(),aU(g,1),g.m(t,l)):g&&(aV(),aH(g,1,1,()=>{g=null}),aj()),e[18]>0?y?(y.p(e,c),262144&c[0]&&aU(y,1)):((y=gg(e)).c(),aU(y,1),y.m(t,null)):y&&(aV(),aH(y,1,1,()=>{y=null}),aj()),s&&oV(s.update)&&8&c[0]&&s.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,observeKeys:!0,shouldStartInteraction:gb,getEventPosition:e[197]})},i(e){if(!d){for(let e=0;e<$.length;e+=1)aU(h[e]);aU(f),aU(g),aU(y),d=!0}},o(e){for(let e=0;e<h.length;e+=1)aH(h[e]);aH(f),aH(g),aH(y),d=!1},d(r){r&&ai(t);for(let e=0;e<h.length;e+=1)h[e].d();f&&f.d(),g&&g.d(),y&&y.d(),e[196](null),c=!1,oN(u)}}}let gx="markup-hover",gb=(e,t)=>e.target===t;function gv(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,b,v,w,S,k,C,T,M,E,R,I,A,L,F,z,B,O,D,_,W,N,V,j,U,H,G,X,Z,Y,q,J,Q,ee,et,ei,en,eo,ea,el,es,ed,ec,eu,eh,ep,e$,em,ef,eg,ex,eb,ev,ew,eS,ek,eC,eT,eM,eP,eE,eR;let eI,eA=oB,eF=()=>(eA(),eA=oH(eN,e=>r(185,eI=e)),eN);e.$$.on_destroy.push(()=>eA());let{uid:eD=K()}=t,{ui:e_}=t,{disabled:eW=!1}=t,{shapes:eN}=t;eF();let{selection:ej}=t,{offset:eU}=t,{contextRotation:eH=0}=t,{contextFlipX:eX=!1}=t,{contextFlipY:eY=!1}=t,{contextZoom:eQ=1}=t,{active:e2=!1}=t,{opacity:e5=1}=t,{parentRect:e3}=t,{rootRect:e7}=t,{utilRect:ti}=t,{hoverColor:tr}=t,{caretColor:to}=t,{gridColor:ta}=t,{snapColor:tl}=t,{textInputMode:ts="inline"}=t,{oninteractionstart:tc=x}=t,{oninteractionupdate:tu=x}=t,{oninteractionrelease:th=x}=t,{oninteractionend:tp=x}=t,{oninteractioncancel:t$=x}=t,{onaddshape:tm=x}=t,{onupdateshape:tg=x}=t,{onselectshape:ty=x}=t,{onblurshape:tb=x}=t,{onremoveshape:tw=x}=t,{ontapshape:tk=x}=t,{onhovershape:tC=x}=t,{ontriggerhistorywrite:tT=x}=t,{onhovercanvas:tM=x}=t,{ontapcanvas:tP=x}=t,{onleavecanvas:tE=x}=t,{beforeSelectShape:tR=()=>!0}=t,{beforeDeselectShape:tF=()=>!0}=t,{beforeRemoveShape:tO=()=>!0}=t,{beforeUpdateShape:tD=(e,t,r)=>t}=t,{willRenderShapeControls:t_=ey}=t,{willRenderShapeTextControls:tW=ey}=t,{willStartInteraction:tN=(e,t)=>!0}=t,{mapEditorPointToImagePoint:tV}=t,{mapImagePointToEditorPoint:tj}=t,{eraseRadius:tU}=t,{selectRadius:tH}=t,{enableButtonFlipVertical:tG=!1}=t,{enableTapToAddText:tX=!0}=t,{enableMultiSelect:tZ=!1}=t,{enableTextStyleControls:tq=!0}=t,{locale:tK}=t,{snapThreshold:tJ=0}=t,{snapPointer:tQ=!0}=t,{enableSnapToContext:t0=!0}=t,{gridSize:t5=0}=t,t3=e=>{let t;return 0===tJ?[]:(t0&&(t={...e3,x:0,y:0}),[...eI.filter(t=>t!==e).filter(e=>!nu(e)).filter(e=>nk(e)).map(e=>n8({...e},e3)),t].filter(Boolean))},t6=(e,t,r,n)=>0===e?{snapTargets:[]}:{snapThreshold:e,gridSize:t,gridRect:r,snapTargets:t3(n)},t8=aT("isAnimated");oX(e,t8,e=>r(186,ep=e));let t7=e=>e.set(oG(e)),t9=e=>oG(e).find(nu),it=(e,t)=>{if(!t9(t))return nv(e),ip(e,t)},ir=e=>{t9(e)&&e.update(e=>e.filter(e=>!nu(e)))},io=e=>{let t=t9(e);if(t)return nw(t),t7(e),t},ih=(e,t,r=(e,t)=>({...e,...t}))=>{t9(t)&&t.update(t=>t.map(t=>nu(t)?r(t,e):t))},ip=(e,t=eN)=>(t.update(t=>[...t,e]),e),i$=(e,t,r)=>{let n=tD({...e},t,{...r});return oi(e,n,r),e},im=(e,t)=>{let r=e8(e,t),n=eq(e,t),o=Math.PI/8,a=o*Math.round(n/o)-eH%o;t.x=e.x+r*Math.cos(a),t.y=e.y+r*Math.sin(a)},ig=(e,t=12)=>{if(ni(e))return tY(e,e.rotation,tB(e));if(r9(e)){let t=i8(e);return tY(t,e.rotation,tB(t))}return nr(e)?ia(eO(e.x,e.y),e.rx,e.ry,e.rotation,e.flipX,e.flipY,t):[]},iy=aT("keysPressed");oX(e,iy,e=>r(187,e$=e));let ix=(e,t,r)=>0===e||t&&r?e:t||r?-e:e,ib=e=>{if(null===e.x&&null===e.y)return iv();e.x&&r(141,iw=tV({x:e.x,y:0}).x),e.y&&r(142,iS=tV({x:0,y:e.y}).y)},iv=()=>{r(141,iw=null),r(142,iS=null)},iw=null,iS=null,ik=(e,t)=>{let r=tj(e);return tV(e0(r,t))},iC=(e,t,r)=>Array.from({length:(r-t)/e+1},(r,n)=>t+n*e),iT=e=>{let t=[],r=[],n=e.points;if(void 0!==e.x1&&(n=[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}]),n){let e=n.map(tj),o=tA(e),a=e[0],l=e[e.length-1];t=[o.x,o.x+.5*o.width,o.x+o.width,a.x,l.x],r=[o.y,o.y+.5*o.height,o.y+o.height,a.y,l.y]}else if(e.text||void 0!==e.width||void 0!==e.rx){let n;if(e.text&&void 0===e.height){let t=rz(e.text,e);n=tz(e.x,e.y,t.width,t.height)}else n=void 0!==e.width?tI(e):tI({x:e.x-e.rx,y:e.y-e.ry,width:2*e.rx,height:2*e.ry});let o=t4(n).map(tj),a=tA(Math.abs(e.rotation)>0?tY(n,e.rotation).map(tj):o),l=tB(a),s=a.width,d=a.height,c=.5*s,u=.5*d;t=[l.x-c,l.x,l.x+c],r=[l.y-u,l.y,l.y+u]}else if(void 0!==e.x){let n=tj(e);t=[n.x],r=[n.y]}return{x:t,y:r}},iM=(e,t,r)=>{let n,o,a;let l=Number.Infinity,s=null,d=null;for(let c=0;c<e.length;c++){o=e[c];for(let e=0;e<t.length;e++)(n=Math.abs(o-(a=t[e])))<r&&(null===d||n<l)&&(l=n,s=o,d=a)}return{origin:s,target:d}},iP=(e,t,r)=>{let n={x:null,y:null},o={x:null,y:null},a=iM(e.x,t.x,r);null!==a.target&&(n.x=a.target,o.x=a.target-a.origin);let l=iM(e.y,t.y,r);return null!==l.target&&(n.y=l.target,o.y=l.target-l.origin),{snapTranslation:o,snapLine:n}},iE=(e,t,r,n,o)=>{let a={x:null,y:null},l={x:null,y:null},s=t.map(iT);if(n>0){let e=tj({x:0,y:0}),t=tj({x:n,y:n}),r=tj({x:o.width,y:o.height}),a=t.x-e.x,l=iC(a,e.x,r.x),d=iC(a,e.y,r.y);s.push({x:l,y:d})}return s.forEach(t=>{let{snapTranslation:n,snapLine:o}=iP(e,t,r);null!==n.x&&(null===l.x||Math.abs(n.x)<Math.abs(l.x))&&(l.x=n.x||0,a.x=o.x),null!==n.y&&(null===l.y||Math.abs(n.y)<Math.abs(l.y))&&(l.y=n.y||0,a.y=o.y)}),{snapTranslation:l,snapLines:a}},iR=(e,t)=>(null!==t.x&&(e.x+=t.x),null!==t.y&&(e.y+=t.y),e),iI=(e,t,r,n)=>{let{snapThreshold:o=0,gridSize:a=0,gridRect:l,snapTargets:s=[]}=n||{},d=null;if(nn(e)){if(o){let n=n8({...e},e3),d=ik(r8(t),r),c=ik(r7(t),r),{snapTranslation:u,snapLines:h}=iE(iT({...n,x1:d.x,y1:d.y,x2:c.x,y2:c.y}),s,o,a,l);iR(r,u),ib(h)}let n=ik(r8(t),r),c=ik(r7(t),r);d={x1:n.x,y1:n.y,x2:c.x,y2:c.y}}else if(e.points){if(nA(eT)&&iU(eT,{selectedPoint:void 0}),o){let{snapTranslation:n,snapLines:d}=iE(iT({...n8({...e},e3),points:t.points.map(e=>ik(e,r))}),s,o,a,l);iR(r,n),ib(d)}d={points:t.points.map(e=>ik(e,r))}}else if(ni(e)||r9(e)||nr(e)){if(o){let n=n8({...e},e3),d=ik(t,r),{snapTranslation:c,snapLines:u}=iE(iT({...n,...d}),s,o,a,l);iR(r,c),ib(u)}d=ik(t,r)}d&&(i$(e,d,e3),iV())},iA={0:1,1:0,2:3,3:2},iL={0:3,1:2,2:1,3:0},iF=(e,t,r,n,o)=>{let{shiftKey:a,snapThreshold:l=0,gridSize:s=0,gridRect:d,snapTargets:c=[]}=o||{},u=l?(e,t,r)=>{let{snapTranslation:n,snapLines:o}=iE(iT(e),c,l,s,d);iR(t,n),ib(o);let a=ik(r(),t);e.x=a.x,e.y=a.y}:x;if(nn(e)||no(e)&&rn(e,"pathClose")){let o,l,s;let[d]=r,c=a?im:(e,t)=>t;if(nn(e))0===d?(o=()=>r8(t),l=e=>c(r7(t),e),s=(e,t)=>{e.x1=t.x,e.y1=t.y}):1===d&&(o=()=>r7(t),l=e=>c(r8(t),e),s=(e,t)=>{e.x2=t.x,e.y2=t.y});else{let e=t.points;o=()=>({...e[d]}),l=t=>{let r=e[fJ(d-1,e)],n=e[fJ(d+1,e)];c(r,t),c(n,t)},s=(e,t)=>e.points=e.points.map((e,r)=>d===r?t:e)}let h=ik(o(),n);u(h,n,o),l(h),s(e,h)}else if(nh(e)||nr(e)||nt(e)){let a,l,s=!1;if(nr(e))a=tL(t);else if(nh(e))a=tI(t);else{s=!0,a=tI(t);let e=rz(t.text,t);a.height=e.height}e.aspectRatio?l=e.aspectRatio:o.shiftKey&&!s&&(l=a.width/a.height);let d=tI(a),c=tB(d),h=e.rotation,p=t4(d),$=tY(d,h);if(1===r.length){let t,o=r[0];e.flipX&&(o=iA[o]),e.flipY&&(o=iL[o]);let[a,s,d,m]=p,f=tj($[o]),g=e0({...f},n),y=tV(g);u(y,n,()=>tV(f));let x=eG(eV(eO(y.x-$[o].x,y.y-$[o].y)),-h),b=eO(p[o].x+x.x,p[o].y+x.y);0===o&&(t=d),1===o&&(t=m),2===o&&(t=a),3===o&&(t=s);let v=tA([t,b]);if(l){let{width:e,height:r}=t1(v,l),[n,o,a,s]=t2(v);v.width=e,v.height=r,b.y<t.y&&(v.y=a-r),b.x<t.x&&(v.x=o-e)}let w=tY(v,h,c),S=e9(w),k=tA([eG(w[0],-h,S),eG(w[2],-h,S)]);i$(e,nr(e)?ez(k):k,e3)}else{let t;let[o,a]=(r=r.map(t=>(e.flipX&&(t=iA[t]),e.flipY&&(t=iL[t]),t))).map(e=>$[e]),d={x:o.x+(a.x-o.x)*.5,y:o.y+(a.y-o.y)*.5},[m,f]=r.map(e=>p[e]),[g,y]=r.map(e=>{let t=e+2;return t<4?p[t]:p[t-4]}),x={x:g.x+(y.x-g.x)*.5,y:g.y+(y.y-g.y)*.5},b=tj(d),v=e0({...b},n),w=tV(v);u(w,n,()=>tV(b));let S=eG(eV(eO(w.x-d.x,w.y-d.y)),-h),k=eJ(e1(eV(m),f),e=>1-Math.abs(Math.sign(e))),C=eO(S.x*k.x,S.y*k.y);e0(m,C),e0(f,C);let T=tA(p);if(l){let e=T.width,t=T.height;0===k.y?t=e/l:e=t*l,T.width=e,T.height=t,0===k.y?T.y=x.y-.5*t:T.x=x.x-.5*e}let M=tY(T,h,c),P=e9(M),E=tA([eG(M[0],-h,P),eG(M[2],-h,P)]);nr(e)?t=ez(E):nh(e)?t=E:s&&(t={x:E.x,y:E.y,width:E.width}),i$(e,t,e3)}}iV()},iz=(e,t,r,n)=>{let o=tB(i8(n8(r2(e),e3))),a=eq(ik(ef,r),o)+Math.PI/2;if(n.shiftKey){let e=Math.PI/16;a=e*Math.round(a/e)-eH%e}i$(e,{rotation:a},e3),iV()},iB=(e,t)=>{let r;let n=e.points,o=[];for(let e=0;e<n.length-1;e++)o.push([n[e],n[e+1]]);o.push([n[n.length-1],n[0]]);let a=o.findIndex(([e,r])=>il(t,6,e,r)),l=[];for(let e=0;e<o.length;e++)l.push(o[e][0]),e===a&&(r=e+1,l.push(t));iU(e,{points:l,selectedPoint:r})},iO=(e,t)=>{let r=e.points.filter((e,r)=>r!==t);iU(e,{points:r,selectedPoint:void 0})},iD=()=>{if(eI.length)return eI.find(nu)},i_=()=>{if(eI.length)return eI.findIndex(nu)},iW=()=>{let e=iD();if(e)return nw(e),iV(),e},iN=()=>{if(!iD())return;let e=[...eI];e.splice(i_(),1),eN.set(e)},iV=()=>{eN.set(eI)},ij=(e,t=[],r=!0)=>{t.filter(Boolean).forEach(t=>delete e[t]),r&&iV()},iU=(e,t,r=!0)=>{e=Object.assign(e,t),r&&iV()},iH=(e,t,r,n=!0)=>{e[t]=r,n&&iV()},iG=(e,t=!0)=>{eI.forEach(t=>iU(t,e,!1)),t&&iV()},iX=()=>[...eI].reverse().filter(nd),iZ=()=>[...eI].reverse().find(nd),iY=()=>!!iZ(),iq=(e,t=!1)=>{if(!tO(e))return!1;eN.set(eI.filter(t=>t!==e)),t||tw(e)},iK=(e,t=!0,r=!1)=>{let n=eI.filter(e=>nT(e)&&nC(e)),o=n.findIndex(t=>t===e);if(!1===iq(e,r))return;if(ew=e,n.length-1<=0)return iQ();if(!t)return!0;let a=o-1<0?n.length-1:o-1;return i1(n[a]),!0},iJ=()=>{if(l){let e=[];a.forEach((t,r)=>{nT(t)&&iK(t,r===a.length-1,!0)&&e.push(t)}),e.length&&tT();return}let e=iZ();e&&iK(e)},iQ=(e={})=>{let{storePrevious:t=!0}=e;Object.keys(r3).forEach(e=>r3[e]={});let r=i0();t&&(ew=r),iG({isSelected:!1,isEditing:!1,_prerender:!1}),r&&tb(r)},i0=()=>eI.find(nd),i1=(e,t=!0,r=!1)=>{if(nu(e))return;let n=i0()||ew,o=nd(e);ew=void 0,tR(n,e)&&(r||iQ(),nb(e),o||ty(e),t&&iV())},i2=e=>{ex&&ex.confirm&&e.isEditing&&ex.confirm();let t={isSelected:!1,isEditing:!1,_prerender:!1};e.selectedPoint>-1&&(t.selectedPoint=void 0),iU(e,t),tb(e)},i4=e=>{iU(e,{isSelected:!0,isEditing:!0,_prerender:"inline"===ts})},i5=e=>{iU(e,{isSelected:!0,isEditing:!1,_prerender:!1})},i3=e=>{if(!e.length)return[];let t=e.filter(tO);return eN.set(eI.filter(e=>!t.includes(e))),t},i6=e=>{let t=rz(e.text,e);return tz(e.x,e.y,e.width?Math.min(e.width,t.width):t.width,e.height?Math.min(e.height,t.height):t.height)},i8=e=>{if(nh(e))return tI(e);if(nr(e))return tL(e);let t=i6(e);return t.width=Math.max(10,e.width||t.width),t},i7=(e,t,r=0,n=()=>!0)=>[...e].reverse().filter(n).map(e=>({shape:e,priority:1})).filter(e=>{let{shape:n}=e,o=n8(r2(n),e3),a=r+.5*(o.strokeWidth||0);if(ni(o))return iu(t,a,o,n.rotation);if(r9(o)){let r=i8(o),l=iu(t,a,r,n.rotation),s=!1;if(l&&!nd(n)){let l=i6(o);"right"!==n.textAlign||n.flipX||(l.x=r.x+r.width-l.width),"center"===n.textAlign&&(l.x=r.x+.5*r.width-.5*l.width),iu(t,a,l,n.rotation,tB(r))||(e.priority=-1)}return l}return nr(o)?ic(t,a,o,n.rotation,n.flipX,n.flipY):nn(o)?il(t,Math.max(16,a),r8(o),r7(o)):no(o)&&o.pathClose?id(t,a,o.points):!!no(o)&&(1===o.points.length?e6(t,o.points[0])<a*a:is(t,Math.max(16,a),o.points))}).sort((e,t)=>e.priority<t.priority?1:e.priority>t.priority?-1:0).map(e=>e.shape),i9=(e,t,r,n=0)=>{let o=Math.abs(n),a=tv(tx(t,r),o),l=tS(a,o);return e.filter(e=>{let t=n8(r2(e),e3);return nn(t)||no(t)?!!ie(a,t.points?[...t.points]:[r8(t),r7(t)]):ii(l,ig(t))})},re=!1,rt=!1,rr=!1,ro=e=>{eE=e.map(e=>({shape:e,shapeOrigin:r2(e),shapeOriginComputed:n8(r2(e),e3)}))},ra=()=>{clearTimeout(ek),ek=void 0,r(144,rr=!1),iv()},rl=null,rs=e=>t4(tA(e.map(e=>rd(n8(e,e3))).flat())),rd=e=>{let t=ri(e.rotation)&&0!==e.rotation;if(ni(e)){if(e.width<1&&e.height<1)return;let r=tB(e),n=t4(e);return(e.flipX||e.flipY)&&te(n,e.flipX,e.flipY,r.x,r.y),t?tt(n,e.rotation,r.x,r.y):n}if(nr(e)){if(e.rx<1&&e.ry<1)return;let r=t4(tL(e));return(e.flipX||e.flipY)&&te(r,e.flipX,e.flipY,e.x,e.y),t?tt(r,e.rotation,e.x,e.y):r}if(nn(e))return[r8(e),r7(e)];if(no(e)){if(e.bitmap&&!e.pathClose){let t=tA(e.points);return t.x-=.5*e.strokeWidth,t.y-=.5*e.strokeWidth,t.width+=e.strokeWidth,t.height+=e.strokeWidth,rd({...e,...t})}return[...e.points]}if(r9(e)){if(e.width<5&&e.height<5)return;let r=i8(e);r.width=Math.max(10,r.width);let n=tB(r),o=t4(r);return(e.flipX||e.flipY)&&te(o,e.flipX,e.flipY,n.x,n.y),t?tt(o,e.rotation,n.x,n.y):o}return[]},rc=e=>{let t,r;let n=rd(e);return e.flipY?(t=e9([n[0],n[1]]),r=eZ(eO(n[1].x-n[2].x,n[1].y-n[2].y))):(t=e9([n[2],n[3]]),r=eZ(eO(n[2].x-n[1].x,n[2].y-n[1].y))),e4(r,20/eQ),{origin:t,dir:r}},ru=e=>{let t=rc(e),r=tj({x:t.origin.x+t.dir.x,y:t.origin.y+t.dir.y});return{origin:tj(t.origin),position:r}},rh=e=>t=>!e(t),rp=e=>t=>t.id===e,r$=e=>{let t=rp(e);return e=>e.filter(rh(t))},rg=e=>{let t=rp(e),r=r$(e);return()=>e_.update(e=>e.some(t)?r(e):e)},ry=e=>{let t=r$(e);return(...e)=>{e_.update(r=>[...t(r),...e.filter(Boolean)])}},rx=rg(gx),rb=ry(gx),rv=e=>{let t=rd(n8(r2(e),e3));if(!t)return;let r=t.map(tj),n=!!e.pathClose||!(!e.bitmap&&(no(e)||nn(e))),o="hook"===e.selectionStyle;rb(...o?r.map((e,t,r)=>({id:gx,points:rC(r,t),strokeColor:[0,0,0,.1],strokeWidth:2})):[{id:gx,points:r.map(e=>eO(e.x+1,e.y+1)),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:n}],...o?r.map((e,t,r)=>({id:gx,points:rC(r,t),strokeColor:tr,strokeWidth:2})):[{id:gx,points:r,strokeColor:tr,strokeWidth:2,pathClose:n}])},rw="markup-manipulator-segment-"+eD,rS=rg(rw),rk=ry(rw),rC=(e,t)=>{let r=e[t],n=t-1<0?e[e.length-1]:e[t-1],o=t+1<e.length?e[t+1]:e[0],a=e1(eV(n),r);eZ(a);let l=e0(e4(a,10),r),s=e1(eV(o),r);eZ(s);let d=e0(e4(s,10),r);return[l,r,d]},rT=(e,t,r)=>{if(!nC(t))return;let n=no(t),o=n&&rn(t,"pathClose"),a=o&&nx(t),l=nu(t),s=nl(t),d="hook"===t.selectionStyle,c=!0!==t.disableShowPoints,{selectionOpacity:u=1}=t;if(l&&n&&!o)return;let h=[],p=[...S],m=p[p.length-1],f=p[0],g=(s?.05:.1)*e*u,y=g>0,x=(s?.5:1)*e*u,b=x>0,v=[0,0,0],w=[1,1,1],k=s?1:1.5;e$.includes(16)&&m&&r&&im(m,r);let C=p.length&&o&&l&&r?e6(f,r):1/0,T=p.length&&o&&l&&r?e6(m,r):1/0,M=C<=256,P=T<=256;!M&&r&&p.push(r);let E=p.length>1,I=!!t.pathClose||!(!t.bitmap&&(no(t)||nn(t)))||p.length>2&&M;E&&y&&(d?h.push(...p.map((e,t,r)=>({id:rw,points:rC(r,t),strokeColor:v,opacity:g}))):h.push({id:rw,points:p.map(e=>eO(e.x+1,e.y+1)),pathClose:I,strokeColor:v,strokeWidth:2,opacity:g})),o&&y&&c&&h.push(...p.map(e=>({id:rw,...e,rx:2*k,ry:2*k,backgroundColor:v,opacity:g}))),R&&y&&h.push({id:rw,points:[eO(R.origin.x+1,R.origin.y+1),eO(R.position.x+1,R.position.y+1)],strokeColor:v,strokeWidth:2,opacity:g}),E&&b&&(d?h.push(...p.map((e,t,r)=>({id:rw,points:rC(r,t),strokeColor:w,strokeWidth:k,opacity:x}))):h.push({id:rw,points:p,pathClose:I,strokeColor:w,strokeWidth:k,backgroundColor:l&&o&&t.backgroundColor&&t.backgroundColor[3]>0?t.backgroundColor:[0,0,0,0],opacity:x})),o&&c&&h.push(...p.map(e=>({id:rw,...e,rx:3*k,ry:3*k,backgroundColor:[.5,.5,.5],strokeWidth:k,strokeColor:w}))),o&&l&&c&&S.length>=3&&h.push({...f,id:rw,rx:k*(M?5:4),ry:k*(M?5:4),backgroundColor:M?tr:[.5,.5,.5],strokeWidth:k,strokeColor:w}),o&&l&&a&&c&&!M&&$.length>=2&&h.push({...m,id:rw,rx:k*(P?5:4),ry:k*(P?5:4),backgroundColor:P?tr:[.5,.5,.5],strokeWidth:k,strokeColor:w}),R&&b&&!d&&h.push({id:rw,points:[{x:R.origin.x,y:R.origin.y},{x:R.position.x,y:R.position.y}],strokeColor:w,strokeWidth:k,opacity:x}),rk(...h)},rM=()=>{o===eg&&rP()},rP=()=>{r(145,eg=void 0),rx()},rE="markup-multi-selection-segment-"+eD,rR=rg(rE),rI=ry(rE),rA=(e,t)=>{if(tJ<=0)return e;if(t)return iv(),e;let r=tV(e),o=t3(),{snapTranslation:a,snapLines:l}=iE(iT(r),o,tJ,t5,n);return ib(l),iR(e,a),e},rL=dk(0);oX(e,rL,e=>r(188,em=e));let rF=`markup-grid-line-${eD}`,rB=rg(rF),rO=ry(rF),rD=(e,t,r,n)=>{let o=tj({x:0,y:0}),a=tj({x:e,y:e}),l=tj({x:t.width,y:t.height}),s=a.x-o.x;if(rL.set(+(s>6)),n<=0)return rB();let d=iC(s,o.x,l.x).map(e=>({id:rF,opacity:n,points:[{x:e,y:o.y},{x:e,y:l.y}],strokeWidth:1,strokeColor:r})),c=iC(s,o.y,l.y).map(e=>({id:rF,opacity:n,points:[{x:o.x,y:e},{x:l.x,y:e}],strokeWidth:1,strokeColor:r}));rO(...c,...d)},r_="markup-snap-line",rW=rg(r_),rN=ry(r_),rV=(e,t,r)=>{let n,o;if(null===e&&null===t)return rW();null!==e&&(n={id:r_,strokeColor:r,strokeWidth:1.5,points:[tj({x:e,y:0}),tj({x:e,y:e3.height})]}),null!==t&&(o={id:r_,strokeColor:r,strokeWidth:1.5,points:[tj({x:0,y:t}),tj({x:e3.width,y:t})]}),rN(n,o)},rj=e=>{if(!e)return iG({_prerender:!1});let t=eI.find(e=>e.isEditing);t&&iU(t,{_prerender:"inline"===ts})},rU=()=>{let[e]=e$;if((8===e||46===e)&&iY()&&!o.isEditing){if(no(o)&&ri(o.selectedPoint)){setTimeout(()=>iO(o,o.selectedPoint),0);return}setTimeout(()=>iJ(),0)}},rH=()=>({...o}),rG=(e,t)=>{let{textAlign:r="left",fontFamily:n="sans-serif",fontWeight:o="normal",fontStyle:a="normal",letterSpacing:l="normal",textShadowX:s=0,textShadowY:d=0,textShadowBlur:c=0,textShadowColor:u,textOutlineWidth:h=0,textOutlineColor:p}=e,$="!important",m=`caret-color:${G};text-align:${r}${$};font-family:${n}${$};font-weight:${o}${$};font-style:${a}${$};letter-spacing:${ri(l)?l+"px":"normal"}${$}`;if("modal"===t)return m;let f=h?`;-webkit-text-stroke:${2*h}px ${rf(p)} ${$}`:"",g=c||s||d?`;text-shadow:${s}px ${d}px ${c}px ${rf(u)} ${$}`:"",y=e.fontSize,x=1,b="";y>1e3&&er()&&(x=y/1e3,b=`transform-origin:0 0;transform:scale(${x})`,y=1e3);let v=e.lineHeight/x,w=rf(e.color),S=.5*Math.max(0,y-v);return`--font-scalar:${x};--bottom-inset:${S}px;padding:${S}px 0 0${$};color:${w}${$};font-size:${y}px${$};line-height:${v}px${$};${m};${b}${f}${g}`},rX=(e,t,r,n)=>{let a,l;e.width&&e.height?(a=tB(e),l=tn(e)):((l=rz(o.text,h)).width=h.width||l.width,a=eO(e.x+.5*l.width,e.y+.5*l.height));let s=Math.max(0,e.fontSize-e.lineHeight)+e.lineHeight,d=tj(a),c=d.x-t.x-.5*l.width,u=d.y-t.y-.5*l.height,p=e.flipX,$=e.flipY,m=e.rotation;eX&&eY?(p=!p,$=!$):eX?(p=!p,m=-m):eY&&($=!$,m=-m),m+=n;let f=r*(p?-1:1),g=r*($?-1:1);return`--line-height:${s}px;width:${l.width}px;height:${l.height}px;transform:translate(${c}px,${u}px) rotate(${m}rad) scale(${f}, ${g})`},rZ=()=>rY(V),rY=e=>{r(8,ex.innerHTML=ga(e),ex)},rq=e=>{let t=e.split(/[\n\r]/g);return t.length>1?t.map(e=>e.trim()).filter(e=>e.length).join(" "):t[0]},rK=e=>{let t=void 0===e.value?e.innerHTML:e.value,r="text"===o.format?gl(t):t;return ne(o)&&!1!==o.disableNewline?rq(r):r},rJ=()=>{let e=rK(ex),t=nR(o,e),r=!0===t?e:t,n=_.x,a=_.y;if(!o.height){let e=tY({...N},o.rotation),t=tY({x:n,y:a,...rz(r,h)},o.rotation),[l,,s]=e,[d,,c]=t,u=l,p=d;o.flipX&&(u=s,p=c);let $=e1(eV(u),p);n+=$.x,a+=$.y}iU(o,{x:P(D.x)?rm(n,e3.width):n,y:P(D.y)?rm(a,e3.height):a,text:r})},rQ=()=>{c&&iW(),ex&&ex.confirm&&ex.confirm(),rJ(),i5(o),tg(o)},r0=()=>{c?iN():(iU(o,{text:D.text,x:D.x,y:D.y}),i5(o))},r4=(e,t,{flipX:r,flipY:n,rotation:o},a="top left")=>{let l,s;let[d,c,u,h]=tY(e,o),[p,$,m,f]=tY(t,o);if("top center"===a){let e=e9(n?[h,u]:[d,c]),t=e9(n?[f,m]:[p,$]);l=e,s=t}else"top right"===a&&!r||"top left"===a&&r?(l=n?u:c,s=n?m:$):(l=n?h:d,s=n?f:p);return e1(eV(l),s)},r5=(e,t,r)=>eO(P(e.x)?rm(t.x+r.x,e3.width):t.x+r.x,P(e.y)?rm(t.y+r.y,e3.height):t.y+r.y),r3={},r6=()=>iO(o,o.selectedPoint),na=()=>i4(o),ns=()=>{let e=tf(rz(o.text,h),e=>Math.ceil(e)),t=rn(o,"height"),r=!t&&rn(o,"width"),n=o.id,a=r3[n];a||(r3[n]={},a=r3[n]);let l=e=>{let{width:t,...r}=h,n=rz(o.text,r),a=r4(tz(h.x,h.y,e.width,e.height),tz(h.x,h.y,n.width,n.height),h,`top ${o.textAlign}`),l=!1!==h.disableNewline;ij(o,["width","height",l&&"textAlign"]),iU(o,{...r5(o,h,a)})},s=t=>{let r=td(a.width||h.width||e.width,e.height),n=a.textAlign||"left",l=r4(tz(h.x,h.y,t.width,t.height),tz(h.x,h.y,r.width,r.height),h,`top ${n}`);ij(o,["height"]),iU(o,{...r5(o,h,l),width:P(o.width)?rm(r.width,e3.width):r.width,textAlign:n})},d=t=>{let r=td(a.width||e.width,a.height||e.height),n=a.textAlign||"left",l=r4(tz(h.x,h.y,t.width,t.height),tz(h.x,h.y,r.width,r.height),h,`top ${n}`);iU(o,{...r5(o,h,l),width:P(o.width)?rm(r.width,e3.width):r.width,height:P(o.width)?rm(r.height,e3.height):r.height,textAlign:n})};if(t){a.textAlign=o.textAlign,a.width=h.width,a.height=h.height;let e=td(h.width,h.height);nI(o,"auto-height")?s(e):nI(o,"auto-width")&&l(e)}else if(r){a.textAlign=o.textAlign,a.width=h.width;let t=td(h.width,e.height);nI(o,"auto-width")?l(t):nI(o,"fixed-size")&&d(t)}else{a.textAlign=o.textAlign;let t=td(Math.ceil(e.width),Math.ceil(e.height));nI(o,"fixed-size")?d(t):nI(o,"auto-height")&&s(t)}},nc=e=>{e.stopPropagation();let t=o.flipX||!1;iH(o,"flipX",!t),tg(o)},np=e=>{e.stopPropagation();let t=o.flipY||!1;iH(o,"flipY",!t),tg(o)},n$=e=>{iH(o,"opacity",e)},nm=e=>{n$(e),tg(o)},nf=e=>{e.stopPropagation(),e.target.blur(),iJ()},ng=e=>{e.stopPropagation(),eI.findIndex(e=>e===o)!==eI.length-1&&(eN.set(eI.filter(e=>e!==o).concat([o])),tg(o))},ny=e=>{e.stopPropagation(),nF()},nF=()=>{let e=(l?a:[o]).filter(nM).map(e=>{let t=r2(e);t.id=K();let r=eO(50,-50);if(rn(t,"points")){let e=ot(t,["points"],e3);e.points.forEach(e=>{e.x+=r.x,e.y+=r.y}),oi(t,e,e3)}else if(nn(t)){let e=ot(t,["x1","y1","x2","y2"],e3);e.x1+=r.x,e.y1+=r.y,e.x2+=r.x,e.y2+=r.y,oi(t,e,e3)}else{let e=ot(t,["x","y"],e3);e.x+=50,e.y-=50,oi(t,e,e3)}return eN.set([...eI,t]),tm(t),t});if(e.length>1){iQ(),e.forEach(e=>{i1(e,!0,!0)});return}i1(e[0])},nD=dk(0,{stiffness:.2,damping:.7});oX(e,nD,e=>r(18,eh=e));let n_=e=>eJ(eO(e.x+.5*e.width,e.y),cF),nW=(e,t,r,n)=>{let o=e.x,a=e.y,l=o+e.width,s=Math.max(t.x-.5*r.width,o),d=Math.max(t.y-r.height+n,a);return s+r.width>l&&(s=l-r.width),eO(s,d)},nN=(e,t)=>{let{disableTextLayout:r=[]}=t;return"height"in t?r.includes("auto-height")?e.shapeIconButtonTextLayoutAutoWidth:e.shapeIconButtonTextLayoutAutoHeight:"width"in t?r.includes("auto-width")?e.shapeIconButtonTextLayoutFixedSize:e.shapeIconButtonTextLayoutAutoWidth:r.includes("fixed-size")?e.shapeIconButtonTextLayoutAutoHeight:e.shapeIconButtonTextLayoutFixedSize},nV=(e,t)=>{let{disableTextLayout:r=[]}=t;return"height"in t?r.includes("auto-height")?e.shapeTitleButtonTextLayoutAutoWidth:e.shapeTitleButtonTextLayoutAutoHeight:"width"in t?r.includes("auto-width")?e.shapeTitleButtonTextLayoutFixedSize:e.shapeTitleButtonTextLayoutAutoWidth:r.includes("fixed-size")?e.shapeTitleButtonTextLayoutAutoHeight:e.shapeTitleButtonTextLayoutFixedSize},nj=!1,nU=eB(),nH=e=>{tC(e),r(145,eg=e)};return aS(()=>{rW(),rB(),rS(),rx()}),e.$$set=e=>{"uid"in e&&r(59,eD=e.uid),"ui"in e&&r(60,e_=e.ui),"disabled"in e&&r(0,eW=e.disabled),"shapes"in e&&eF(r(1,eN=e.shapes)),"selection"in e&&r(61,ej=e.selection),"offset"in e&&r(2,eU=e.offset),"contextRotation"in e&&r(62,eH=e.contextRotation),"contextFlipX"in e&&r(63,eX=e.contextFlipX),"contextFlipY"in e&&r(64,eY=e.contextFlipY),"contextZoom"in e&&r(65,eQ=e.contextZoom),"active"in e&&r(66,e2=e.active),"opacity"in e&&r(67,e5=e.opacity),"parentRect"in e&&r(68,e3=e.parentRect),"rootRect"in e&&r(3,e7=e.rootRect),"utilRect"in e&&r(69,ti=e.utilRect),"hoverColor"in e&&r(70,tr=e.hoverColor),"caretColor"in e&&r(71,to=e.caretColor),"gridColor"in e&&r(72,ta=e.gridColor),"snapColor"in e&&r(73,tl=e.snapColor),"textInputMode"in e&&r(4,ts=e.textInputMode),"oninteractionstart"in e&&r(74,tc=e.oninteractionstart),"oninteractionupdate"in e&&r(75,tu=e.oninteractionupdate),"oninteractionrelease"in e&&r(76,th=e.oninteractionrelease),"oninteractionend"in e&&r(77,tp=e.oninteractionend),"oninteractioncancel"in e&&r(78,t$=e.oninteractioncancel),"onaddshape"in e&&r(79,tm=e.onaddshape),"onupdateshape"in e&&r(80,tg=e.onupdateshape),"onselectshape"in e&&r(81,ty=e.onselectshape),"onblurshape"in e&&r(82,tb=e.onblurshape),"onremoveshape"in e&&r(83,tw=e.onremoveshape),"ontapshape"in e&&r(84,tk=e.ontapshape),"onhovershape"in e&&r(85,tC=e.onhovershape),"ontriggerhistorywrite"in e&&r(86,tT=e.ontriggerhistorywrite),"onhovercanvas"in e&&r(87,tM=e.onhovercanvas),"ontapcanvas"in e&&r(88,tP=e.ontapcanvas),"onleavecanvas"in e&&r(89,tE=e.onleavecanvas),"beforeSelectShape"in e&&r(90,tR=e.beforeSelectShape),"beforeDeselectShape"in e&&r(91,tF=e.beforeDeselectShape),"beforeRemoveShape"in e&&r(92,tO=e.beforeRemoveShape),"beforeUpdateShape"in e&&r(93,tD=e.beforeUpdateShape),"willRenderShapeControls"in e&&r(94,t_=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&r(95,tW=e.willRenderShapeTextControls),"willStartInteraction"in e&&r(96,tN=e.willStartInteraction),"mapEditorPointToImagePoint"in e&&r(97,tV=e.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in e&&r(98,tj=e.mapImagePointToEditorPoint),"eraseRadius"in e&&r(99,tU=e.eraseRadius),"selectRadius"in e&&r(100,tH=e.selectRadius),"enableButtonFlipVertical"in e&&r(101,tG=e.enableButtonFlipVertical),"enableTapToAddText"in e&&r(102,tX=e.enableTapToAddText),"enableMultiSelect"in e&&r(103,tZ=e.enableMultiSelect),"enableTextStyleControls"in e&&r(5,tq=e.enableTextStyleControls),"locale"in e&&r(6,tK=e.locale),"snapThreshold"in e&&r(104,tJ=e.snapThreshold),"snapPointer"in e&&r(105,tQ=e.snapPointer),"enableSnapToContext"in e&&r(106,t0=e.enableSnapToContext),"gridSize"in e&&r(107,t5=e.gridSize)},e.$$.update=()=>{64&e.$$.dirty[2]|16384&e.$$.dirty[3]&&r(173,n=t5>0?{x:0,y:0,...e3}:void 0),1&e.$$.dirty[0]|0x40000000&e.$$.dirty[5]&&r(149,o=!eW&&eI&&(iD()||iZ())),1024&e.$$.dirty[3]|0x40000000&e.$$.dirty[5]&&r(165,a=tZ?eI.filter(nd):[]),1024&e.$$.dirty[5]&&r(164,l=a.length>1),64&e.$$.dirty[2]|1536&e.$$.dirty[5]&&r(184,s=l?a.map(e=>n8(r2(e),e3)):[]),0x2000000&e.$$.dirty[4]&&r(181,d=!!o),0x2000000&e.$$.dirty[4]&&r(167,c=o&&nu(o)),0x2000000&e.$$.dirty[4]|4096&e.$$.dirty[5]&&r(10,u=o&&!c?o.id:void 0),8&e.$$.dirty[0]|64&e.$$.dirty[2]|0x2000000&e.$$.dirty[4]&&r(13,h=e7&&o&&n8(r2(o),e3)),0x2000000&e.$$.dirty[4]|4096&e.$$.dirty[5]&&r(147,p=!!(o&&c)),8192&e.$$.dirty[0]|32&e.$$.dirty[2]|0x2000000&e.$$.dirty[4]&&r(180,$=o&&e5&&rd(h)||[]),0x20000200&e.$$.dirty[5]&&r(177,m=l?s.map(rd):[]),0x2000000&e.$$.dirty[4]|512&e.$$.dirty[5]&&r(183,f=!l&&o&&nB(o)&&!nl(o)),0x2000000&e.$$.dirty[4]|512&e.$$.dirty[5]&&r(14,g=!l&&o&&nO(o)&&!nl(o)),0x2000000&e.$$.dirty[4]|0x10000000&e.$$.dirty[5]&&r(17,y=f&&rn(o,"text")&&!o.height?[[1,2],[3,0]]:!(o&&(nn(o)||no(o)))&&f),131072&e.$$.dirty[0]|0x2000000&e.$$.dirty[4]|0x10000000&e.$$.dirty[5]&&r(30,b=!!o&&!Array.isArray(y)&&f),1536&e.$$.dirty[5]&&r(182,v=l?rs(a):[]),0x2000000&e.$$.dirty[4]|0x2000200&e.$$.dirty[5]&&r(15,w=o&&$.length>1||l),32&e.$$.dirty[3]|0xa000200&e.$$.dirty[5]&&r(178,S=l?v.map(tj):$.map(tj)),4&e.$$.dirty[0]|8388608&e.$$.dirty[5]&&r(12,k=S.map(e=>eO(e.x-eU.x,e.y-eU.y))),0x2000000&e.$$.dirty[4]&&r(16,C=o&&o.points&&ri(o.selectedPoint)?o.selectedPoint:-1),65536&e.$$.dirty[0]&&r(157,T=C>=0),69632&e.$$.dirty[0]|4&e.$$.dirty[5]&&r(162,M=T?k[C]:void 0),0x2000000&e.$$.dirty[4]|0x4000000&e.$$.dirty[5]&&r(29,E=d&&(nt(o)?!rn(o,"disableNewline")||!o.disableNewline:!1===o.disableNewline)),32&e.$$.dirty[3]|2097152&e.$$.dirty[4]&&(eg&&tj&&!nd(eg)&&nC(eg)?rv(eg):rx()),61440&e.$$.dirty[0]|32&e.$$.dirty[2]&&r(179,R=w&&g&&e5&&k?ru(h):void 0),4&e.$$.dirty[0]|0x1000000&e.$$.dirty[5]&&r(28,I=R&&eO(R.position.x-eU.x,R.position.y-eU.y)),2&e.$$.dirty[6]&&r(172,z=!!(e$||[]).find(e=>[91,93,17].includes(e))),4096&e.$$.dirty[3]|131072&e.$$.dirty[5]&&r(174,A=!(z||!tQ)),32&e.$$.dirty[2]|0x2400000&e.$$.dirty[4]|8916992&e.$$.dirty[5]&&o&&S&&e5>0&&(rM(),rT(e5,o,c&&no(o)?rA({...eR},!A):void 0)),0x2000000&e.$$.dirty[4]&&!o&&(rP(),rS()),32&e.$$.dirty[3]|4194304&e.$$.dirty[5]&&(m.length?(rR(),rI(...m.map(e=>({id:rE,points:e.map(tj),strokeWidth:1,strokeColor:[1,1,1,.5],pathClose:!0})))):rR()),2097152&e.$$.dirty[4]&&r(175,L=!!eg),524288&e.$$.dirty[4]&&r(176,F=!!eT),4194304&e.$$.dirty[4]|3670016&e.$$.dirty[5]&&eR&&!F&&!L&&rA({...eR},!A),1024&e.$$.dirty[2]|16416&e.$$.dirty[3]|262144&e.$$.dirty[5]|4&e.$$.dirty[6]&&t5>0&&n&&tj&&rD(t5,n,ta,em),2048&e.$$.dirty[2]|32&e.$$.dirty[3]|393216&e.$$.dirty[4]|131072&e.$$.dirty[5]&&tj&&(z?rW():rV(iw,iS,tl)),16&e.$$.dirty[2]&&rj(e2),2&e.$$.dirty[6]&&e$&&e$.length&&rU(),272&e.$$.dirty[0]&&ex&&"inline"===ts&&ex.focus(),0x2000000&e.$$.dirty[4]&&r(171,B=o&&r9(o)),0x2000000&e.$$.dirty[4]|65536&e.$$.dirty[5]&&r(11,O=B&&!1!==nR(o)&&nl(o)),2048&e.$$.dirty[0]&&r(166,D=O?rH():void 0),64&e.$$.dirty[2]|2048&e.$$.dirty[5]&&r(168,_=D&&n8({...D},e3)),8192&e.$$.dirty[5]&&r(170,W=_&&rz(_.text,_)),40960&e.$$.dirty[5]&&(N=_&&tz(_.x,_.y,W.width,W.height)),2048&e.$$.dirty[0]|0x2000000&e.$$.dirty[4]&&r(25,V=O?o.text:""),2056&e.$$.dirty[0]|64&e.$$.dirty[2]|0x2000000&e.$$.dirty[4]&&r(169,j=e7&&o&&O&&n8({...r2(o),width:ri(o.width)?Math.floor(o.width):void 0,height:ri(o.height)?Math.floor(o.height):void 0},e3)),2064&e.$$.dirty[0]|16384&e.$$.dirty[5]&&r(27,U=O&&rG(j,ts)),2052&e.$$.dirty[0]|9&e.$$.dirty[2]|16384&e.$$.dirty[5]&&r(26,H=O&&rX(j,eU,eQ,eH)),512&e.$$.dirty[2]&&(G=to?rf(to):"auto"),2320&e.$$.dirty[0]&&O&&ex&&"inline"===ts&&rZ(),0x22800000&e.$$.dirty[4]&&r(153,X=o&&!p?o:X),0x20000000&e.$$.dirty[4]&&r(155,Z=X&&nE(X)),0x20000000&e.$$.dirty[4]&&r(150,Y=X&&nI(X)),0x20000000&e.$$.dirty[4]&&r(152,q=X&&nM(X)),0x20000000&e.$$.dirty[4]&&r(151,J=X&&nT(X)),0x20000000&e.$$.dirty[4]|512&e.$$.dirty[5]&&r(154,Q=!l&&X&&nP(X)),0x20000000&e.$$.dirty[4]&&r(148,ee=X&&!1!==nR(X)),0x20000000&e.$$.dirty[4]&&r(156,et=X&&rn(X,"backgroundImage")&&nS(X,"opacity")),0x2000000&e.$$.dirty[4]&&r(159,ei=o&&"html"===o.format),0x2800000&e.$$.dirty[4]|16&e.$$.dirty[5]&&r(163,en=o&&(!p||ei)),1048576&e.$$.dirty[4]|256&e.$$.dirty[5]|1&e.$$.dirty[6]&&nD.set(en&&!rr?1:0,{hard:!1===ep}),4096&e.$$.dirty[0]|320&e.$$.dirty[5]&&r(161,eo=en&&k.length?n_(tA(k)):eo),512&e.$$.dirty[0]|128&e.$$.dirty[2]|192&e.$$.dirty[5]&&r(160,ea=(M||eo)&&eb&&ti&&nW(ti,M||eo,eb,-16)),32&e.$$.dirty[5]&&r(24,el=ea?`translate(${ea.x}px, ${ea.y}px)`:void 0),262144&e.$$.dirty[0]|32&e.$$.dirty[5]&&r(23,es=ea?eh:void 0),2048&e.$$.dirty[0]&&r(158,ed=O?"text":"shape"),1088&e.$$.dirty[0]|262&e.$$.dirty[3]|0x7f000000&e.$$.dirty[4]|0x4000001f&e.$$.dirty[5]&&r(22,ec="text"===ed&&tW&&ei?pX(()=>tW([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map(([e,t])=>["Button","style-"+e,{onclick:()=>document.execCommand(e),...t,style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+t.style}])]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400",title:"Remove styles",label:[["span","T",{style:"font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline",textContent:"T"}],["span","x",{style:"position:relative;top:.175rem;",innerHTML:"&times;"}]]}]]]],u)):"shape"===ed&&t_&&u?pX(()=>t_(T?[["div","epsilon",{class:"PinturaShapeControlsGroup"},[["Button","remove-point",{onclick:r6,label:tK.shapeTitleButtonRemove,icon:tK.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]]]]:[et&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:nm,onchange:n$,step:.01,value:rn(o,"opacity")?o.opacity:1,label:(e,t,r)=>`${Math.round(e/r*100)}%`,min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[Z&&["Button","flip-horizontal",{onclick:nc,label:tK.shapeTitleButtonFlipHorizontal,icon:tK.shapeIconButtonFlipHorizontal,hideLabel:!0}],Z&&tG&&["Button","flip-vertical",{onclick:np,label:tK.shapeTitleButtonFlipVertical,icon:tK.shapeIconButtonFlipVertical,hideLabel:!0}],Q&&["Button","to-front",{onclick:ng,label:tK.shapeTitleButtonMoveToFront,icon:tK.shapeIconButtonMoveToFront,hideLabel:!0,disabled:eI[eI.length-1]===X}],q&&["Button","duplicate",{onclick:ny,label:tK.shapeTitleButtonDuplicate,icon:tK.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],J&&["Button","remove",{onclick:nf,label:tK.shapeTitleButtonRemove,icon:tK.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],ee&&Y&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:ns,label:c5(nV,tK,o),icon:c5(nN,tK,o),hideLabel:!0}]]],ee&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:tK.shapeLabelInputText,onclick:na}]]]].filter(Boolean),u)):[]),64&e.$$.dirty[0]|0x40000000&e.$$.dirty[5]&&r(21,eu=eI.filter(nC).filter(e=>e.id).filter(e=>!nu(e)).map(e=>({id:e.id,color:r9(e)?e.color:nn(e)?e.strokeColor:e.backgroundColor,name:e.name||tK[`shapeLabelTool${lc(nQ(e))}`]})))},[eW,eN,eU,e7,ts,tq,tK,i1,ex,eb,u,O,k,h,g,w,C,y,eh,nj,ev,eu,ec,es,el,V,H,U,I,E,b,t8,iy,e=>{let{origin:t}=e.detail,n=tZ&&e$.includes(16);eE=void 0,r(143,eT=void 0),eM=void 0,eP=void 0,re=!1,eC=void 0,rt=!1,iv(),clearTimeout(ek),ek=setTimeout(()=>r(144,rr=!0),250);let s=iD();if(s&&!(no(s)&&rn(s,"pathClose"))&&iW(),eS=tV(eV(t)),s&&no(s)&&rn(s,"pathClose"))return tc(e);let d=i7(eI,eS,tH,e=>nC(e)),c=d.length&&d.shift();if(o&&nl(o)&&(rQ(),tX&&(rt=!0)),!c&&o&&nl(o)&&i2(o),tN(t)){if(c&&nd(c)){if(re=!0,r(143,eT=c),l){n&&i2(c),ro(a);return}eM=r2(eT),eP=n8(r2(eT),e3);return}if(eC=c||void 0,!tc(e)&&c){if(i1(c,!0,n),r(143,eT=c),l)return ro(a);eM=r2(eT),eP=n8(r2(eT),e3)}}},e=>{ra(),t$(e)},e=>{let{translation:t,ctrlKey:r,metaKey:o,shiftKey:l,position:s}=e.detail;if(eT){if(!nz(eT)||nl(eT))return;if(l){let e=Math.abs(t.x),r=Math.abs(t.y);"x"===rl&&(r-=64),"y"===rl&&(e-=64),e>r?(t.y=0,rl="x"):r>e&&(t.x=0,rl="y")}else rl=null;if(eE){if(!a.every(nz))return;eE.forEach(({shape:e,shapeOriginComputed:r})=>{iI(e,r,t,{...t6(0,t5,n,e)})});return}return iI(eT,eP,t,{...t6(r||o?0:tJ,t5,n,eT)})}tu(e)},e=>{if(ra(),eT){if(l)return;if(nl(eT)&&r0(),e.detail.isTap&&no(eT)&&nL(eT)){let{position:t}=e.detail,r=tV(eV(t));iB(eT,r)}else e.detail.isTap&&re&&r9(eT)&&!1!==nR(eT)&&i4(eT);return}th(e)},e=>{let t=eC&&e.detail.isTap,n=tZ&&e$.includes(16);if(e.detail.isTap&&setTimeout(()=>{tP({target:eT||eC,position:eS},0)}),eT){tk(eT),r1(eT,eM)||tg(eT),r(143,eT=void 0);return}let o=!0;if(!n){let e=i0();(o=!e||tF(e,eC||void 0))&&iQ({storePrevious:!1})}tp(e),o&&t&&i1(eC,!0,n)},rL,e=>{r(144,rr=!0),r(143,eT=o),eP=h},e=>{if(!eT){r(144,rr=!1);return}let{translation:t,indexes:o,shiftKey:a,ctrlKey:l,metaKey:s,isNudge:d}=e.detail;iF(eT,eP,o,t,{shiftKey:!d&&a,...t6(l||s?0:tJ,t5,n,eT)}),nA(eT)&&e6(t)>16&&iU(eT,{selectedPoint:void 0})},e=>{if(!eT){r(144,rr=!1);return}i1(eT);let{isTap:t,translation:n,indexes:a}=e.detail;t&&(nA(eT)&&iU(eT,{selectedPoint:eT.selectedPoint===a[0]?void 0:a[0]}),tk(eT)),r(143,eT=void 0),r(144,rr=!1),tg(o)},e=>{ef=rc(h).origin,r(144,rr=!0),r(143,eT=o),eP=h},e=>{if(!eT){r(144,rr=!1);return}let{translation:t,shiftKey:n}=e.detail;iz(eT,eP,t,{shiftKey:n})},()=>{if(!eT){r(144,rr=!1);return}i1(eT),r(143,eT=void 0),r(144,rr=!1),tg(o)},e=>{let{key:t}=e,r=/escape/i.test(t);if(iY()){if(r)return e.preventDefault(),e.stopPropagation(),i2(o);q&&"d"===t&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),e.stopPropagation(),nF())}},e=>{let t=nR(o,e);return!0===t?e:t},rJ,e=>{let{target:t,key:r}=e,n=t.value||t.innerText,a=t.selectionStart||0,l=t.selectionEnd||n.length,s=n.substring(0,a)+r+n.substring(l);if(nR(o,s)!==s)return e.preventDefault()},e=>ne(o)&&/enter/i.test(e.code)&&!1!==o.disableNewline?e.preventDefault():/arrow/i.test(e.code)?e.stopPropagation():/escape/i.test(e.key)?r0():void 0,e=>{let{key:t,ctrlKey:r,altKey:n}=e;if(/enter/i.test(t)&&(r||n))return rQ()},rQ,r0,nD,e=>{let t=iX();!(!t||t.find(nl))&&(t.find(e=>!nz(e))||t.forEach(t=>{r(143,eT=t),eP=n8(r2(eT),e3),iI(eT,eP,e.detail)}))},e=>{r(19,nj=!0)},({relatedTarget:e})=>{e&&e.classList.contains("shape-selector__button")||r(19,nj=!1)},e=>{if("touch"===e.pointerType||"PinturaShapeEditor"!==e.target.className){tE();return}(rr||ek)&&nH(void 0);let t=f6(e,e7);r(146,eR=eV(t));let n=eJ(tV(t),e=>Math.round(e));if(eK(n,nU)||(nU=eV(n),tM(rr,t,n),rr||ek||p))return;let[o]=i7(eI,n,0,nC);o&&nu(o)||nH(o)},e=>{"touch"!==e.pointerType&&tE()},eD,e_,ej,eH,eX,eY,eQ,e2,e5,e3,ti,tr,to,ta,tl,tc,tu,th,tp,t$,tm,tg,ty,tb,tw,tk,tC,tT,tM,tP,tE,tR,tF,tO,tD,t_,tW,tN,tV,tj,tU,tH,tG,tX,tZ,tJ,tQ,t0,t5,t7,t9,it,ir,io,ih,ip,(e,t={})=>{let r,o,a;let l=nr(e),s=r9(e),d="relative"===t.position,c=t3(),u=e=>{if(!tJ)return e;let{snapTranslation:t,snapLines:r}=iE(iT(tV(e)),c,tJ,t5,n);return iR(e,t),ib(r),e},h=!!i0(),p=t.isSelection?ej:eN,$="step"===t.inputMode;if(no(e)){if($){let t=!1,n=(e,r)=>{let n=t9(p),o=e&&eO(gs(e.x,e3.width),gs(e.y,e3.height)),a=o&&tj(o);e$.includes(16)&&a&&im(a,r);let l=tV(r),s=n.points.length?n.points[0]:l,c=eO(gs(s.x,e3.width),gs(s.y,e3.height)),u=e6(tj(c),r);if(!t&&1===n.points.length&&u<36)return ir(p);if(n.points.length>2&&u<=256){n.pathClose=!0,nC(n)&&i1(n);let e=io(p);tm(e);return}let h=n.strokeWidth&&n.strokeColor&&(void 0===n.strokeColor[3]||n.strokeColor[3]>0),$=e6(a,r);if(h&&n.points.length>1&&$<256){n.pathClose=!1,n.backgroundColor=[0,0,0,0],nC(n)&&i1(n);let e=io(p);tm(e);return}if(!(n.points.length>0)||!($<100))return d?gd(l,e3):l};return{start:e=>{let l=t9(p),{origin:s}=e.detail;if(o=4,r=u(eV(s)),a=eV(r),l){let e=n(l.points[l.points.length-1],r);e&&(l.points=[...l.points,e]),ih({points:l.points},p);return}t=!0},update:e=>{if(!t)return;let o=t9(p);if(!o)return;let a=n(o.points[0],eO(r.x+e.detail.translation.x,r.y+e.detail.translation.y));a&&(o.points[1]=a,ih({points:o.points},p))},release:e=>e.detail.preventInertia(),cancel:()=>{ir(p)},end:n=>{if(!t)return;let o=tV(r),a=d?gd(o,e3):o,{isTap:l}=n.detail;if(l&&i7(eI,o,0,nC).length)return ir(p);it({...e,points:[a]},p)}}}return{start:t=>{let{origin:n}=t.detail;o=4,r=eV(n),a=eV(r);let l=tV(r),s=d?gd(l,e3):l;it({...e,points:[s]},p)},update:e=>{let t=t9(p);if(!t)return;let{translation:n}=e.detail,l=eO(r.x+n.x,r.y+n.y),s=e8(a,l);if(eL(s,5)<=o)return;let c=eq(l,a),u=o-s;a.x+=u*Math.cos(c),a.y+=u*Math.sin(c);let h=tV(a),$=d?gd(h,e3):h;ih({points:t.points.concat($)},p)},release:e=>e.detail.preventInertia(),cancel:()=>{ir(p)},end:e=>{let t=t9(p);if(!t)return;if(e.detail.isTap){let e=!1;if(t.bitmap?(eC&&(e=!0),h&&(e=!0)):e=!0,e)return ir(p)}let r=io(p);tm(r)}}}return l||s||ni(e)?{start:t=>{let{origin:n}=t.detail;r=u(eV(n));let o=tV(r),a=d?gd(o,e3):o,s=-1*ix(eH,eX,eY),c={...e,rotation:s,...a};c.flipX=eX,c.flipY=eY,delete c.position,c.opacity=0,(l?["rx","ry"]:["width","height"]).forEach(e=>{c[e]=d?"0%":0}),it(c,p)},update:e=>{let t=t9(p);if(!t)return;t.opacity=1;let{aspectRatio:n}=t,{translation:o,shiftKey:a,ctrlKey:s}=e.detail;!n&&a&&(n=1);let d=u(eO(r.x+o.x,r.y+o.y)),c=tV(r),h=tV(d);if(n){let e=t1(tA([c,h]),n),t=h.x<c.x?-1:1,r=h.y<c.y?-1:1;h.x=c.x+e.width*t,h.y=c.y+e.height*r}let $={x:c.x+(h.x-c.x)*.5,y:c.y+(h.y-c.y)*.5},m=ix(eH,eX,eY);eG(c,m,$),eG(h,m,$);let f=Math.min(c.x,h.x),g=Math.min(c.y,h.y),y=Math.max(c.x,h.x),x=Math.max(c.y,h.y),b=y-f,v=x-g,w={};l?(s?(w.x=c.x,w.y=c.y):(w.x=f+.5*b,w.y=g+.5*v),w.rx=.5*b,w.ry=.5*v):(s?(w.x=c.x-.5*b,w.y=c.y-.5*v):(w.x=f,w.y=g),w.width=b,w.height=v),ih(w,p,(e,t)=>i$(e,t,e3))},release:e=>{e.detail.preventInertia()},cancel:()=>{ir(p)},end:e=>{let t=t9(p);if(t){if(e.detail.isTap){if(r9(t)&&tX&&rt||!r9(t)||!tX||eC)return ir(p);delete t.width,delete t.height,!1!==t.disableNewline&&delete t.textAlign;let e=n8({...t},e3),n=rz(t.text,e),o=tV({x:r.x,y:r.y-.5*n.height}),a=tV({x:r.x+n.width,y:r.y+.5*n.height}),l={x:o.x+(a.x-o.x)*.5,y:o.y+(a.y-o.y)*.5},s=ix(eH,eX,eY);eG(o,s,l),eG(a,s,l);let d=Math.min(o.x,a.x),c=Math.min(o.y,a.y);d<0&&(d=0),c<0&&(c=0),d+n.width>e3.width&&(d=e3.width-n.width),c+n.height>e3.height&&(c=e3.height-n.height),t.x=P(t.x)?rm(d,e3.width):d,t.y=P(t.y)?rm(c,e3.height):c}if(t.opacity=1,r9(t))tm(t);else{let e=io(p);tm(e)}nC(t)&&i1(t),r9(t)&&i4(t)}}}:nn(e)?{start:t=>{let{origin:n}=t.detail,o=eJ(tV(u(n)),cF);r=eV(n),it({...e,x1:d?rm(o.x,e3.width):o.x,y1:d?rm(o.y,e3.height):o.y,x2:d?rm(o.x,e3.width):o.x,y2:d?rm(o.y,e3.height):o.y,opacity:0},p)},update:e=>{if(!t9(p))return;let{translation:t}=e.detail,n=u(e0(eV(r),t));if(e$.includes(16)){let e=e8(r,n),t=eq(r,n),o=Math.PI/4,a=o*Math.round(t/o);n.x=r.x+e*Math.cos(a),n.y=r.y+e*Math.sin(a)}let o=tV(n);ih({x2:d?rm(o.x,e3.width):o.x,y2:d?rm(o.y,e3.height):o.y,opacity:1},p)},release:e=>e.detail.preventInertia(),cancel:()=>{ir(p)},end:e=>{let t=t9(p);if(!t)return;if(e.detail.isTap)return ir(p);t.opacity=1;let r=io(p);tm(r),nC(t)&&i1(r)}}:void 0},()=>{let e,t;let r=tU*tU,n=(e,t,n=!1)=>{let o;let a=e6(e,t);if(!n&&a<2)return!1;let l=eI.filter(e=>!e.disableErase);return i3(a<r?i7(eI,tV(t),tU):i9(l,tV(e),tV(t),tU)).forEach(tw),!0};return{start:r=>{n(e=eO(Math.round(r.detail.origin.x),Math.round(r.detail.origin.y)),e,!0),t=e},update:r=>{let{translation:o}=r.detail,a=eO(Math.round(e.x+o.x),Math.round(e.y+o.y));n(t,a)&&(t=eV(a))},release:e=>e.detail.preventInertia(),cancel:()=>{ir(collection)},end:()=>{}}},iD,i_,e=>{if(!iD())return nv(e),ip(e)},iW,iN,(e={})=>({id:K(),...e}),iV,ij,iU,iH,(e,t,r=!0)=>{eI.forEach(r=>iH(r,e,t,!1)),r&&iV()},iG,iX,iZ,iY,iQ,i2,i4,i5,i3,i6,i8,i7,i9,iw,iS,eT,rr,eg,eR,p,ee,o,Y,J,q,X,Q,Z,et,T,ed,ei,ea,eo,M,en,l,a,D,c,_,j,W,B,z,n,A,L,F,m,S,R,$,d,v,f,s,eI,ep,e$,em,function(t){aM.call(this,e,t)},e=>i1(eN[e]),function(e){aE[e?"unshift":"push"](()=>{r(8,ex=e)})},function(){r(25,V=this.value),r(11,O),r(149,o),r(171,B),r(0,eW),r(185,eI)},function(e){aE[e?"unshift":"push"](()=>{r(8,ex=e)})},()=>{ev&&ev.focus()},e=>r(9,eb=e.detail),function(e){aE[e?"unshift":"push"](()=>{r(20,ev=e)})},e=>f6(e,e7)]}class gw extends a3{constructor(e){super(),a5(this,e,gv,gy,oj,{uid:59,ui:60,disabled:0,shapes:1,selection:61,offset:2,contextRotation:62,contextFlipX:63,contextFlipY:64,contextZoom:65,active:66,opacity:67,parentRect:68,rootRect:3,utilRect:69,hoverColor:70,caretColor:71,gridColor:72,snapColor:73,textInputMode:4,oninteractionstart:74,oninteractionupdate:75,oninteractionrelease:76,oninteractionend:77,oninteractioncancel:78,onaddshape:79,onupdateshape:80,onselectshape:81,onblurshape:82,onremoveshape:83,ontapshape:84,onhovershape:85,ontriggerhistorywrite:86,onhovercanvas:87,ontapcanvas:88,onleavecanvas:89,beforeSelectShape:90,beforeDeselectShape:91,beforeRemoveShape:92,beforeUpdateShape:93,willRenderShapeControls:94,willRenderShapeTextControls:95,willStartInteraction:96,mapEditorPointToImagePoint:97,mapImagePointToEditorPoint:98,eraseRadius:99,selectRadius:100,enableButtonFlipVertical:101,enableTapToAddText:102,enableMultiSelect:103,enableTextStyleControls:5,locale:6,snapThreshold:104,snapPointer:105,enableSnapToContext:106,gridSize:107,syncShapeCollection:108,getShapeDraft:109,addShapeDraft:110,discardShapeDraft:111,confirmShapeDraft:112,updateShapeDraft:113,addShape:114,createShape:115,eraseShape:116,getMarkupItemDraft:117,getMarkupItemDraftIndex:118,addMarkupItemDraft:119,confirmMarkupItemDraft:120,discardMarkupItemDraft:121,createMarkupItem:122,syncShapes:123,removeMarkupShapeProps:124,updateMarkupShape:125,updateMarkupShapeProperty:126,updateMarkupItemsShapeProperty:127,updateMarkupShapeItems:128,getActiveMarkupItems:129,getActiveMarkupItem:130,hasActiveMarkupItem:131,blurShapes:132,selectShape:7,deselectMarkupItem:133,editMarkupItem:134,finishEditMarkupItem:135,removeMarkupItems:136,getTextShapeRect:137,getMarkupShapeRect:138,getShapesNearPosition:139,getShapesBetweenPoints:140},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get syncShapeCollection(){return this.$$.ctx[108]}get getShapeDraft(){return this.$$.ctx[109]}get addShapeDraft(){return this.$$.ctx[110]}get discardShapeDraft(){return this.$$.ctx[111]}get confirmShapeDraft(){return this.$$.ctx[112]}get updateShapeDraft(){return this.$$.ctx[113]}get addShape(){return this.$$.ctx[114]}get createShape(){return this.$$.ctx[115]}get eraseShape(){return this.$$.ctx[116]}get getMarkupItemDraft(){return this.$$.ctx[117]}get getMarkupItemDraftIndex(){return this.$$.ctx[118]}get addMarkupItemDraft(){return this.$$.ctx[119]}get confirmMarkupItemDraft(){return this.$$.ctx[120]}get discardMarkupItemDraft(){return this.$$.ctx[121]}get createMarkupItem(){return this.$$.ctx[122]}get syncShapes(){return this.$$.ctx[123]}get removeMarkupShapeProps(){return this.$$.ctx[124]}get updateMarkupShape(){return this.$$.ctx[125]}get updateMarkupShapeProperty(){return this.$$.ctx[126]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[127]}get updateMarkupShapeItems(){return this.$$.ctx[128]}get getActiveMarkupItems(){return this.$$.ctx[129]}get getActiveMarkupItem(){return this.$$.ctx[130]}get hasActiveMarkupItem(){return this.$$.ctx[131]}get blurShapes(){return this.$$.ctx[132]}get selectShape(){return this.$$.ctx[7]}get deselectMarkupItem(){return this.$$.ctx[133]}get editMarkupItem(){return this.$$.ctx[134]}get finishEditMarkupItem(){return this.$$.ctx[135]}get removeMarkupItems(){return this.$$.ctx[136]}get getTextShapeRect(){return this.$$.ctx[137]}get getMarkupShapeRect(){return this.$$.ctx[138]}get getShapesNearPosition(){return this.$$.ctx[139]}get getShapesBetweenPoints(){return this.$$.ctx[140]}}function gS(e){let t,r,n;return r=new hJ({props:{items:e[2]}}),{c(){t=ar("ul"),a1(r.$$.fragment),ad(t,"class","PinturaShapeStyleList")},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,t){let n={};4&t&&(n.items=e[2]),r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function gk(e){let t,r;return t=new pa({props:{class:"PinturaShapeStyles",elasticity:e[0],$$slots:{default:[gC]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};1&r&&(n.elasticity=e[0]),524292&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function gC(e){let t,r,n;return r=new hJ({props:{items:e[2]}}),{c(){t=ar("ul"),a1(r.$$.fragment),ad(t,"class","PinturaShapeStyleList")},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,t){let n={};4&t&&(n.items=e[2]),r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function gT(e){var t;let r,n,o,a;let l=[gk,gS],s=[];function d(e,t){return+!e[1]}return o=s[n=+!e[1]]=l[n](e),{c(){r=ar("div"),o.c(),a$(r,"opacity",e[5]),a$(r,"pointer-events",e[4]),a$(r,"visibility",e[3])},m(e,t){at(e,r,t),s[n].m(r,null),a=!0},p(e,[t]){var a;let d=n;(n=+!e[1])===d?s[n].p(e,t):(aV(),aH(s[d],1,1,()=>{s[d]=null}),aj(),(o=s[n])?o.p(e,t):(o=s[n]=l[n](e)).c(),aU(o,1),o.m(r,null)),32&t&&a$(r,"opacity",e[5]),16&t&&a$(r,"pointer-events",e[4]),8&t&&a$(r,"visibility",e[3])},i(e){a||(aU(o),a=!0)},o(e){aH(o),a=!1},d(e){e&&ai(r),s[n].d()}}}function gM(e,t,r){let n,o,a,l,s,d,c,u;let{isActive:h=!1}=t,{controls:p=[]}=t,{locale:$}=t,{scrollElasticity:m}=t,{scrollEnable:f=!0}=t,{hideTitles:g=!1}=t,{willRenderControls:y=ey}=t,x=aT("redrawTrigger");oX(e,x,e=>r(16,d=e));let b=aT("env");oX(e,b,e=>r(15,s=e));let v=aT("isAnimated");oX(e,v,e=>r(18,u=e));let w=dk(0,{stiffness:.25,damping:.9});return oX(e,w,e=>r(17,c=e)),e.$$set=e=>{"isActive"in e&&r(10,h=e.isActive),"controls"in e&&r(11,p=e.controls),"locale"in e&&r(12,$=e.locale),"scrollElasticity"in e&&r(0,m=e.scrollElasticity),"scrollEnable"in e&&r(1,f=e.scrollEnable),"hideTitles"in e&&r(13,g=e.hideTitles),"willRenderControls"in e&&r(14,y=e.willRenderControls)},e.$$.update=()=>{263168&e.$$.dirty&&w.set(+!!h,{hard:!1===u}),131072&e.$$.dirty&&r(5,n=c),1024&e.$$.dirty&&r(4,o=h?"auto":"none"),131072&e.$$.dirty&&r(3,a=c<=0?"hidden":"visible"),129024&e.$$.dirty&&r(2,l=d&&y(p.map(e=>["ShapeStyle",e.id,{title:e.componentProps.title,locale:$,hideTitle:g,items:[[e.component,e.id,e.componentProps]]}]),s,()=>x.set({})))},[m,f,l,a,o,n,x,b,v,w,h,p,$,g,y,s,d,c,u]}class gP extends a3{constructor(e){super(),a5(this,e,gM,gT,oj,{isActive:10,controls:11,locale:12,scrollElasticity:0,scrollEnable:1,hideTitles:13,willRenderControls:14})}}function gE(e,t,r){let n=e.slice();return n[15]=t[r].key,n[6]=t[r].controls,n[16]=t[r].isActive,n}function gR(e,t){let r,n,o;return n=new gP({props:{isActive:t[16],controls:t[6],locale:t[1],scrollElasticity:t[2],scrollEnable:t[3],hideTitles:t[4],willRenderControls:t[5]}}),{key:e,first:null,c(){r=al(),a1(n.$$.fragment),this.first=r},m(e,t){at(e,r,t),a2(n,e,t),o=!0},p(e,r){t=e;let o={};128&r&&(o.isActive=t[16]),128&r&&(o.controls=t[6]),2&r&&(o.locale=t[1]),4&r&&(o.scrollElasticity=t[2]),8&r&&(o.scrollEnable=t[3]),16&r&&(o.hideTitles=t[4]),32&r&&(o.willRenderControls=t[5]),n.$set(o)},i(e){o||(aU(n.$$.fragment,e),o=!0)},o(e){aH(n.$$.fragment,e),o=!1},d(e){e&&ai(r),a4(n,e)}}}function gI(e){let t,r,n;let o=[],a=new Map,l=e[7],s=e=>e[15];for(let t=0;t<l.length;t+=1){let r=gE(e,l,t),n=s(r);a.set(n,o[t]=gR(n,r))}return{c(){t=ar("div");for(let e=0;e<o.length;e+=1)o[e].c();ad(t,"class",r=d0(["PinturaShapeStyleEditor",!e[3]&&"PinturaShapeStyleEditorOverflow",e[0]]))},m(e,r){at(e,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);n=!0},p(e,[d]){190&d&&(l=e[7],aV(),o=aK(o,d,s,1,e,l,a,t,aq,gR,null,gE),aj()),(!n||9&d&&r!==(r=d0(["PinturaShapeStyleEditor",!e[3]&&"PinturaShapeStyleEditorOverflow",e[0]])))&&ad(t,"class",r)},i(e){if(!n){for(let e=0;e<l.length;e+=1)aU(o[e]);n=!0}},o(e){for(let e=0;e<o.length;e+=1)aH(o[e]);n=!1},d(e){e&&ai(t);for(let e=0;e<o.length;e+=1)o[e].d()}}}function gA(e,t,r){let n,o,a;let{class:l}=t,{controls:s={}}=t,{shapeProps:d}=t,{onchange:c}=t,{locale:u}=t,{scrollElasticity:h}=t,{scrollEnable:p=!0}=t,{hideTitles:$=!1}=t,{willRenderControls:m}=t,f=e=>n.filter(t=>t.split("_").every(t=>rn(e,t)&&nS(e,t))).map(t=>{let r=(e.settings&&e.settings[t]||{}).control||t,n=t.split("_"),o=n.length>1?n.map(t=>e[t]):e[t];if(U(s[r])){let{title:n,component:a}=s[r](o,e=>{c({[t]:e})},{selectedShapeId:e.id});return{id:r,component:hJ,componentProps:{title:n,items:a}}}let[a,l]=s[r];if(P(a)&&s[a]){let e={...l};[a,l]=s[a],l={...l,...e}}let d=U(l.options)?l.options(e):l.options;return"RadioGroup"===a&&(l.selectedIndex=-1),{id:r,component:a,componentProps:{...l,options:d,locale:u,value:o,optionLabelClass:"PinturaButtonLabel",onchange:r=>{let o=N(r)&&!ro(r)?r.value:r;l.onchange&&l.onchange(o,e);let a=n.length>1?n.reduce((e,t,r)=>({...e,[t]:Array.isArray(o)?o[r]:o}),{}):{[t]:o};c(a)}}}}).filter(Boolean),g=[],y=(e,t)=>{let r=g.find(t=>t.key===e);return r||(r={key:e,controls:t},g.push(r)),g.forEach(e=>e.isActive=!1),r.controls=t,r.isActive=!0,g};return e.$$set=e=>{"class"in e&&r(0,l=e.class),"controls"in e&&r(6,s=e.controls),"shapeProps"in e&&r(8,d=e.shapeProps),"onchange"in e&&r(9,c=e.onchange),"locale"in e&&r(1,u=e.locale),"scrollElasticity"in e&&r(2,h=e.scrollElasticity),"scrollEnable"in e&&r(3,p=e.scrollEnable),"hideTitles"in e&&r(4,$=e.hideTitles),"willRenderControls"in e&&r(5,m=e.willRenderControls)},e.$$.update=()=>{64&e.$$.dirty&&r(11,n=Object.keys(s).filter(e=>s[e])),2304&e.$$.dirty&&r(10,o=d&&Object.keys(d).length&&n&&nS(d)?f(d):[]),1280&e.$$.dirty&&r(7,a=y(d&&Object.keys(d).length?Object.keys(d).join("_"):"none",o||[]))},[l,u,h,p,$,m,s,a,d,c,o,n]}class gL extends a3{constructor(e){super(),a5(this,e,gA,gI,oj,{class:0,controls:6,shapeProps:8,onchange:9,locale:1,scrollElasticity:2,scrollEnable:3,hideTitles:4,willRenderControls:5})}}var gF=e=>/<svg /.test(e);function gz(e){let t,r;return t=new hJ({props:{items:e[10]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};1024&r&&(n.items=e[10]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function gB(e){var t;let r,n,o,a;let l=[gD,gO],s=[];function d(e,t){return+!e[8]}return n=s[r=+!e[8]]=l[r](e),{c(){n.c(),o=al()},m(e,t){s[r].m(e,t),at(e,o,t),a=!0},p(e,t){var a;let d=r;(r=+!e[8])===d?s[r].p(e,t):(aV(),aH(s[d],1,1,()=>{s[d]=null}),aj(),(n=s[r])?n.p(e,t):(n=s[r]=l[r](e)).c(),aU(n,1),n.m(o.parentNode,o))},i(e){a||(aU(n),a=!0)},o(e){aH(n),a=!1},d(e){s[r].d(e),e&&ai(o)}}}function gO(e){let t,r,n,o;let a=e[10]&&g_(e);return n=new pa({props:{scrollAutoCancel:e[9],elasticity:e[0],$$slots:{default:[gW]},$$scope:{ctx:e}}}),{c(){t=ar("div"),a&&a.c(),r=aa(),a1(n.$$.fragment),ad(t,"class","PinturaShapePresetsFlat")},m(e,l){at(e,t,l),a&&a.m(t,null),o9(t,r),a2(n,t,null),o=!0},p(e,o){e[10]?a?(a.p(e,o),1024&o&&aU(a,1)):((a=g_(e)).c(),aU(a,1),a.m(t,r)):a&&(aV(),aH(a,1,1,()=>{a=null}),aj());let l={};512&o&&(l.scrollAutoCancel=e[9]),1&o&&(l.elasticity=e[0]),0x2000009e&o&&(l.$$scope={dirty:o,ctx:e}),n.$set(l)},i(e){o||(aU(a),aU(n.$$.fragment,e),o=!0)},o(e){aH(a),aH(n.$$.fragment,e),o=!1},d(e){e&&ai(t),a&&a.d(),a4(n)}}}function gD(e){let t,r,n,o,a;r=new pa({props:{elasticity:e[0],class:"PinturaShapePresetsGroups",$$slots:{default:[gG]},$$scope:{ctx:e}}});let l=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:e[11]},e[12]],s={$$slots:{default:[gZ,({panel:e,panelIsActive:t})=>({26:e,27:t}),({panel:e,panelIsActive:t})=>0x4000000*!!e|0x8000000*!!t]},$$scope:{ctx:e}};for(let e=0;e<l.length;e+=1)s=oD(s,l[e]);return o=new cu({props:s}),{c(){t=ar("div"),a1(r.$$.fragment),n=aa(),a1(o.$$.fragment),ad(t,"class","PinturaShapePresetsGrouped")},m(e,l){at(e,t,l),a2(r,t,null),o9(t,n),a2(o,t,null),a=!0},p(e,t){let n={};1&t&&(n.elasticity=e[0]),0x20001460&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);let a=6144&t?aJ(l,[l[0],l[1],2048&t&&{panels:e[11]},4096&t&&aQ(e[12])]):{};0x2c00221f&t&&(a.$$scope={dirty:t,ctx:e}),o.$set(a)},i(e){a||(aU(r.$$.fragment,e),aU(o.$$.fragment,e),a=!0)},o(e){aH(r.$$.fragment,e),aH(o.$$.fragment,e),a=!1},d(e){e&&ai(t),a4(r),a4(o)}}}function g_(e){let t,r;return t=new hJ({props:{items:e[10]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};1024&r&&(n.items=e[10]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function gW(e){let t,r;return t=new cI({props:{items:e[7],onclickitem:e[1],ongrabitem:e[2],ondragitem:e[3],ondropitem:e[4]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};128&r&&(n.items=e[7]),2&r&&(n.onclickitem=e[1]),4&r&&(n.ongrabitem=e[2]),8&r&&(n.ondragitem=e[3]),16&r&&(n.ondropitem=e[4]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function gN(e){let t,r;return t=new hJ({props:{items:e[10]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};1024&r&&(n.items=e[10]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function gV(e){let t,r;return t=new cx({props:{$$slots:{default:[gj]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};0x30000000&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function gj(e){let t;let r=e[28].icon+"";return{c(){t=an("g")},m(e,n){at(e,t,n),t.innerHTML=r},p(e,n){0x10000000&n&&r!==(r=e[28].icon+"")&&(t.innerHTML=r)},d(e){e&&ai(t)}}}function gU(e){let t,r;let n=e[28].label+"";return{c(){t=ar("span"),r=ao(n)},m(e,n){at(e,t,n),o9(t,r)},p(e,t){0x10000000&t&&n!==(n=e[28].label+"")&&ah(r,n)},d(e){e&&ai(t)}}}function gH(e){let t,r,n;let o=e[28].icon&&gV(e),a=!e[28].hideLabel&&gU(e);return{c(){o&&o.c(),t=aa(),a&&a.c(),r=al()},m(e,l){o&&o.m(e,l),at(e,t,l),a&&a.m(e,l),at(e,r,l),n=!0},p(e,n){e[28].icon?o?(o.p(e,n),0x10000000&n&&aU(o,1)):((o=gV(e)).c(),aU(o,1),o.m(t.parentNode,t)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj()),e[28].hideLabel?a&&(a.d(1),a=null):a?a.p(e,n):((a=gU(e)).c(),a.m(r.parentNode,r))},i(e){n||(aU(o),n=!0)},o(e){aH(o),n=!1},d(e){o&&o.d(e),e&&ai(t),a&&a.d(e),e&&ai(r)}}}function gG(e){let t,r,n;let o=e[10]&&gN(e),a=[{class:"PinturaControlList"},{tabs:e[5]},e[12],{layout:"compact"}],l={$$slots:{default:[gH,({tab:e})=>({28:e}),({tab:e})=>0x10000000*!!e]},$$scope:{ctx:e}};for(let e=0;e<a.length;e+=1)l=oD(l,a[e]);return(r=new d7({props:l})).$on("select",e[18]),{c(){o&&o.c(),t=aa(),a1(r.$$.fragment)},m(e,a){o&&o.m(e,a),at(e,t,a),a2(r,e,a),n=!0},p(e,n){e[10]?o?(o.p(e,n),1024&n&&aU(o,1)):((o=gN(e)).c(),aU(o,1),o.m(t.parentNode,t)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj());let l=4128&n?aJ(a,[a[0],32&n&&{tabs:e[5]},4096&n&&aQ(e[12]),a[3]]):{};0x30000000&n&&(l.$$scope={dirty:n,ctx:e}),r.$set(l)},i(e){n||(aU(o),aU(r.$$.fragment,e),n=!0)},o(e){aH(o),aH(r.$$.fragment,e),n=!1},d(e){o&&o.d(e),e&&ai(t),a4(r,e)}}}function gX(e){let t,r;return t=new cI({props:{items:e[13][e[26]].items,disabled:e[13][e[26]].disabled,onclickitem:e[1],ongrabitem:e[2],ondragitem:e[3],ondropitem:e[4]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};0x4002000&r&&(n.items=e[13][e[26]].items),0x4002000&r&&(n.disabled=e[13][e[26]].disabled),2&r&&(n.onclickitem=e[1]),4&r&&(n.ongrabitem=e[2]),8&r&&(n.ondragitem=e[3]),16&r&&(n.ondropitem=e[4]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function gZ(e){let t,r;return t=new pa({props:{scroll:e[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:e[9],elasticity:e[0],$$slots:{default:[gX]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};0x8000000&r&&(n.scroll=e[27]?{scrollOffset:0,animate:!1}:void 0),512&r&&(n.scrollAutoCancel=e[9]),1&r&&(n.elasticity=e[0]),0x2400201e&r&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function gY(e){let t,r,n,o;let a=[gB,gz],l=[];function s(e,t){return e[9]?0:e[10]?1:-1}return~(r=s(e))&&(n=l[r]=a[r](e)),{c(){t=ar("div"),n&&n.c(),ad(t,"class","PinturaShapePresetsPalette")},m(e,n){at(e,t,n),~r&&l[r].m(t,null),o=!0},p(e,[o]){let d=r;(r=s(e))===d?~r&&l[r].p(e,o):(n&&(aV(),aH(l[d],1,1,()=>{l[d]=null}),aj()),~r?((n=l[r])?n.p(e,o):(n=l[r]=a[r](e)).c(),aU(n,1),n.m(t,null)):n=null)},i(e){o||(aU(n),o=!0)},o(e){aH(n),o=!1},d(e){e&&ai(t),~r&&l[r].d()}}}function gq(e,t,r){let n,o,a,l,s,d,c,u,h;let{locale:p}=t,{presets:$}=t,{scrollElasticity:m}=t,{enableSelectImage:f=!0}=t,{willRenderPresetToolbar:g=ey}=t,{onaddpreset:y=x}=t,{ongrabpreset:b}=t,{ondragpreset:v}=t,{ondroppreset:w}=t,S=`presets-${K()}`,k=e=>ro(e)&&P(e[0])&&ro(e[1]),C=(e,t="")=>gF(e)?e:rr(e)?rh(e,t):`<img src="${e}" alt="${t}"/>`,T=e=>ec(ig(e)),M=["src","alt","thumb","shape","id","mount","disabled"],E=e=>{let t,r,n,o,a,l,s;return P(e)?rr(e)?o=C(t=e,a=e):(a=T(t=e),o=C(t,a)):(t=e.src,a=e.alt||(P(t)?T(t):P(e.thumb)?T(e.thumb):void 0),o=C(e.thumb||t,a),r=e.shape,l=e.mount,s=e.disabled,n=Object.keys(e).reduce((t,r)=>(M.includes(r)||(t[r]=e[r]),t),{})),{id:e,src:t,thumb:o,shape:r,shapeProps:n,alt:a,title:a,mount:l,disabled:s}},R=e=>e.map(e=>k(e)?{...e[2],id:`${S}-${e[0].toLowerCase()}`,label:e[0],items:R(e[1])}:E(e));return e.$$set=e=>{"locale"in e&&r(14,p=e.locale),"presets"in e&&r(15,$=e.presets),"scrollElasticity"in e&&r(0,m=e.scrollElasticity),"enableSelectImage"in e&&r(16,f=e.enableSelectImage),"willRenderPresetToolbar"in e&&r(17,g=e.willRenderPresetToolbar),"onaddpreset"in e&&r(1,y=e.onaddpreset),"ongrabpreset"in e&&r(2,b=e.ongrabpreset),"ondragpreset"in e&&r(3,v=e.ondragpreset),"ondroppreset"in e&&r(4,w=e.ondroppreset)},e.$$.update=()=>{32768&e.$$.dirty&&r(7,n=R($)),128&e.$$.dirty&&r(9,o=n.length),640&e.$$.dirty&&r(8,a=o&&n.some(e=>!!e.items)),384&e.$$.dirty&&r(5,l=a&&n),384&e.$$.dirty&&r(13,s=a&&n.reduce((e,t)=>(e[t.id]=t,e),{})),96&e.$$.dirty&&r(6,d=d||l&&(l.find(e=>!e.disabled)||{}).id),64&e.$$.dirty&&r(12,c={name:S,selected:d}),32&e.$$.dirty&&r(11,u=l&&l.map(e=>e.id)),212994&e.$$.dirty&&r(10,h=p&&g([f&&["Button","browse",{label:p.shapeLabelButtonSelectSticker,icon:p.shapeIconButtonSelectSticker,onclick:()=>{pG().then(e=>{e&&y(e)})}}]]))},[m,y,b,v,w,l,d,n,a,o,h,u,c,s,p,$,f,g,({detail:e})=>r(6,d=e)]}class gK extends a3{constructor(e){super(),a5(this,e,gq,gY,oj,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}var gJ=e=>(t,r)=>{e.dispatchEvent(pP(t,r))};function gQ(e){let t,r,n,o;return t=new hJ({props:{items:e[30]}}),n=new gL({props:{locale:e[4],shapeProps:e[49],onchange:e[85],controls:e[9],scrollEnable:!1,hideTitles:!0,willRenderControls:e[165]}}),{c(){a1(t.$$.fragment),r=aa(),a1(n.$$.fragment)},m(e,a){a2(t,e,a),at(e,r,a),a2(n,e,a),o=!0},p(e,r){let o={};0x40000000&r[0]&&(o.items=e[30]),t.$set(o);let a={};16&r[0]&&(a.locale=e[4]),262144&r[1]&&(a.shapeProps=e[49]),512&r[0]&&(a.controls=e[9]),n.$set(a)},i(e){o||(aU(t.$$.fragment,e),aU(n.$$.fragment,e),o=!0)},o(e){aH(t.$$.fragment,e),aH(n.$$.fragment,e),o=!1},d(e){a4(t,e),e&&ai(r),a4(n,e)}}}function g0(e){let t,r,n;return r=new mO({props:{$$slots:{default:[gQ]},$$scope:{ctx:e}}}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"slot","header")},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,t){let n={};0x40000210&t[0]|262144&t[1]|0x8000000&t[6]&&(n.$$scope={dirty:t,ctx:e}),r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function g1(e){let t,r;let n=[{locale:e[4]},{ui:e[69]},{shapes:e[5]},{selection:e[58]},{uid:e[20]},{parentRect:e[37]},{rootRect:e[55]},{utilRect:e[39]},{offset:e[50]},{disabled:e[38]},{contextRotation:e[23]},{contextFlipX:e[24]},{contextFlipY:e[25]},{contextZoom:e[36]?e[36].scale:void 0},{active:e[35]},{opacity:e[56]},{hoverColor:e[57]},{caretColor:e[57]},{snapColor:e[57]},{gridColor:[1,1,1,.125]},{eraseRadius:e[47]},{selectRadius:e[6]},{enableButtonFlipVertical:e[10]},{enableMultiSelect:e[14]},{mapEditorPointToImagePoint:e[21]},{mapImagePointToEditorPoint:e[22]},{enableTapToAddText:e[13]},{textInputMode:e[8]},{snapThreshold:e[16]},{snapPointer:!e[48]},{enableSnapToContext:e[17]},{gridSize:e[15]},{willStartInteraction:e[95]},{oninteractionstart:e[79]},{oninteractionupdate:e[80]},{oninteractionrelease:e[81]},{oninteractionend:e[83]},{oninteractioncancel:e[82]},{onleavecanvas:e[87]},{onhovercanvas:e[86]},{onhovershape:e[89]},{ontapcanvas:e[88]},{onaddshape:e[156]},{onselectshape:e[157]},{onblurshape:e[158]},{ontapshape:e[159]},{onupdateshape:e[160]},{onremoveshape:e[161]},{ontriggerhistorywrite:e[162]},e[42]],o={};for(let e=0;e<n.length;e+=1)o=oD(o,n[e]);return t=new gw({props:o}),e[163](t),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let o=0x3f3e570&r[0]|0xf0b09f1&r[1]|0xf3e0080&r[2]|12&r[3]?aJ(n,[16&r[0]&&{locale:e[4]},128&r[2]&&{ui:e[69]},32&r[0]&&{shapes:e[5]},0x8000000&r[1]&&{selection:e[58]},1048576&r[0]&&{uid:e[20]},64&r[1]&&{parentRect:e[37]},0x1000000&r[1]&&{rootRect:e[55]},256&r[1]&&{utilRect:e[39]},524288&r[1]&&{offset:e[50]},128&r[1]&&{disabled:e[38]},8388608&r[0]&&{contextRotation:e[23]},0x1000000&r[0]&&{contextFlipX:e[24]},0x2000000&r[0]&&{contextFlipY:e[25]},32&r[1]&&{contextZoom:e[36]?e[36].scale:void 0},16&r[1]&&{active:e[35]},0x2000000&r[1]&&{opacity:e[56]},0x4000000&r[1]&&{hoverColor:e[57]},0x4000000&r[1]&&{caretColor:e[57]},0x4000000&r[1]&&{snapColor:e[57]},n[19],65536&r[1]&&{eraseRadius:e[47]},64&r[0]&&{selectRadius:e[6]},1024&r[0]&&{enableButtonFlipVertical:e[10]},16384&r[0]&&{enableMultiSelect:e[14]},2097152&r[0]&&{mapEditorPointToImagePoint:e[21]},4194304&r[0]&&{mapImagePointToEditorPoint:e[22]},8192&r[0]&&{enableTapToAddText:e[13]},256&r[0]&&{textInputMode:e[8]},65536&r[0]&&{snapThreshold:e[16]},131072&r[1]&&{snapPointer:!e[48]},131072&r[0]&&{enableSnapToContext:e[17]},32768&r[0]&&{gridSize:e[15]},4&r[3]&&{willStartInteraction:e[95]},131072&r[2]&&{oninteractionstart:e[79]},262144&r[2]&&{oninteractionupdate:e[80]},524288&r[2]&&{oninteractionrelease:e[81]},2097152&r[2]&&{oninteractionend:e[83]},1048576&r[2]&&{oninteractioncancel:e[82]},0x2000000&r[2]&&{onleavecanvas:e[87]},0x1000000&r[2]&&{onhovercanvas:e[86]},0x8000000&r[2]&&{onhovershape:e[89]},0x4000000&r[2]&&{ontapcanvas:e[88]},1&r[1]|8&r[3]&&{onaddshape:e[156]},1&r[1]&&{onselectshape:e[157]},1&r[1]&&{onblurshape:e[158]},1&r[1]&&{ontapshape:e[159]},1&r[1]|8&r[3]&&{onupdateshape:e[160]},1&r[1]|8&r[3]&&{onremoveshape:e[161]},8&r[3]&&{ontriggerhistorywrite:e[162]},2048&r[1]&&aQ(e[42])]):{};t.$set(o)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(r){e[163](null),a4(t,r)}}}function g2(e){let t,r,n,o;let a=e[51]&&g1(e);return{c(){t=ar("div"),a&&a.c(),ad(t,"slot","main"),a$(t,"cursor",e[46])},m(l,s){at(l,t,s),a&&a.m(t,null),e[164](t),r=!0,n||(o=[as(t,"keydown",e[84]),o2(dV.call(null,t)),as(t,"dropfiles",function(){oV(e[12]?e[94]:x)&&(e[12]?e[94]:x).apply(this,arguments)}),o2(dO.call(null,t)),as(t,"measure",e[152])],n=!0)},p(r,n){(e=r)[51]?a?(a.p(e,n),1048576&n[1]&&aU(a,1)):((a=g1(e)).c(),aU(a,1),a.m(t,null)):a&&(aV(),aH(a,1,1,()=>{a=null}),aj()),32768&n[1]&&a$(t,"cursor",e[46])},i(e){r||(aU(a),r=!0)},o(e){aH(a),r=!1},d(r){r&&ai(t),a&&a.d(),e[164](null),n=!1,oN(o)}}}function g4(e){let t,r;return t=new gK({props:{locale:e[4],presets:e[19],enableSelectImage:e[11],willRenderPresetToolbar:e[43],onaddpreset:e[93],ongrabpreset:e[90],ondragpreset:e[91],ondroppreset:e[92],scrollElasticity:e[44]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16&r[0]&&(n.locale=e[4]),524288&r[0]&&(n.presets=e[19]),2048&r[0]&&(n.enableSelectImage=e[11]),4096&r[1]&&(n.willRenderPresetToolbar=e[43]),8192&r[1]&&(n.scrollElasticity=e[44]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function g5(e){let t,r,n;let o="stack"===e[7]&&g3(e),a=(e[53]&&e[34]||"row"===e[7])&&g7(e);return{c(){o&&o.c(),t=aa(),a&&a.c(),r=al()},m(e,l){o&&o.m(e,l),at(e,t,l),a&&a.m(e,l),at(e,r,l),n=!0},p(e,n){"stack"===e[7]?o?(o.p(e,n),128&n[0]&&aU(o,1)):((o=g3(e)).c(),aU(o,1),o.m(t.parentNode,t)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj()),e[53]&&e[34]||"row"===e[7]?a?(a.p(e,n),128&n[0]|4194312&n[1]&&aU(a,1)):((a=g7(e)).c(),aU(a,1),a.m(r.parentNode,r)):a&&(aV(),aH(a,1,1,()=>{a=null}),aj())},i(e){n||(aU(o),aU(a),n=!0)},o(e){aH(o),aH(a),n=!1},d(e){o&&o.d(e),e&&ai(t),a&&a.d(e),e&&ai(r)}}}function g3(e){var t;let r,n,o,a;let l=[g8,g6],s=[];function d(e,t){return+!e[45]}return o=s[n=+!e[45]]=l[n](e),{c(){r=ar("div"),o.c(),ad(r,"class","PinturaControlPanels")},m(e,t){at(e,r,t),s[n].m(r,null),a=!0},p(e,t){var a;let d=n;(n=+!e[45])===d?s[n].p(e,t):(aV(),aH(s[d],1,1,()=>{s[d]=null}),aj(),(o=s[n])?o.p(e,t):(o=s[n]=l[n](e)).c(),aU(o,1),o.m(r,null))},i(e){a||(aU(o),a=!0)},o(e){aH(o),a=!1},d(e){e&&ai(r),s[n].d()}}}function g6(e){let t,r,n;return r=new gL({props:{locale:e[4],shapeProps:e[49],onchange:e[85],controls:e[9],scrollElasticity:e[44],willRenderControls:e[18]}}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"class","PinturaControlPanel")},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,t){let n={};16&t[0]&&(n.locale=e[4]),262144&t[1]&&(n.shapeProps=e[49]),512&t[0]&&(n.controls=e[9]),8192&t[1]&&(n.scrollElasticity=e[44]),262144&t[0]&&(n.willRenderControls=e[18]),r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function g8(e){let t,r,n;return r=new gK({props:{locale:e[4],presets:e[19],enableSelectImage:e[11],willRenderPresetToolbar:e[43],onaddpreset:e[93],ongrabpreset:e[90],ondragpreset:e[91],ondroppreset:e[92],scrollElasticity:e[44]}}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"class","PinturaControlPanel")},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,t){let n={};16&t[0]&&(n.locale=e[4]),524288&t[0]&&(n.presets=e[19]),2048&t[0]&&(n.enableSelectImage=e[11]),4096&t[1]&&(n.willRenderPresetToolbar=e[43]),8192&t[1]&&(n.scrollElasticity=e[44]),r.$set(n)},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function g7(e){let t,r;return t=new pa({props:{class:"PinturaControlListScroller",elasticity:e[44],$$slots:{default:[yo]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};8192&r[1]&&(n.elasticity=e[44]),262801&r[0]|262154&r[1]|0x8000000&r[6]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function g9(e){let t,r;return t=new uS({props:{locale:e[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:e[32],selectedIndex:e[32].findIndex(e[153]),onchange:e[78],$$slots:{option:[yr,({option:e})=>({212:e}),({option:e})=>[0,0,0,0,0,0,0x4000000*!!e]]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16&r[0]&&(n.locale=e[4]),2&r[1]&&(n.options=e[32]),1&r[0]|2&r[1]&&(n.selectedIndex=e[32].findIndex(e[153])),16&r[0]|0xc000000&r[6]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function ye(e){let t,r;return t=new cx({props:{$$slots:{default:[yt]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16&r[0]|0xc000000&r[6]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yt(e){let t;let r=(U(e[212].icon)?e[212].icon(e[4]):e[212].icon)+"";return{c(){t=an("g")},m(e,n){at(e,t,n),t.innerHTML=r},p(e,n){16&n[0]|0x4000000&n[6]&&r!==(r=(U(e[212].icon)?e[212].icon(e[4]):e[212].icon)+"")&&(t.innerHTML=r)},d(e){e&&ai(t)}}}function yi(e){let t,r;let n=(U(e[212].label)?e[212].label(e[4]):e[212].label)+"";return{c(){t=ar("span"),r=ao(n)},m(e,n){at(e,t,n),o9(t,r)},p(e,t){16&t[0]|0x4000000&t[6]&&n!==(n=(U(e[212].label)?e[212].label(e[4]):e[212].label)+"")&&ah(r,n)},d(e){e&&ai(t)}}}function yr(e){let t,r,n;let o=e[212].icon&&ye(e),a=!e[212].hideLabel&&yi(e);return{c(){t=ar("div"),o&&o.c(),r=aa(),a&&a.c(),ad(t,"slot","option")},m(e,l){at(e,t,l),o&&o.m(t,null),o9(t,r),a&&a.m(t,null),n=!0},p(e,n){e[212].icon?o?(o.p(e,n),0x4000000&n[6]&&aU(o,1)):((o=ye(e)).c(),aU(o,1),o.m(t,r)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj()),e[212].hideLabel?a&&(a.d(1),a=null):a?a.p(e,n):((a=yi(e)).c(),a.m(t,null))},i(e){n||(aU(o),n=!0)},o(e){aH(o),n=!1},d(e){e&&ai(t),o&&o.d(),a&&a.d()}}}function yn(e){let t,r;return t=new gL({props:{locale:e[4],shapeProps:e[49],onchange:e[85],controls:e[9],scrollEnable:!1,hideTitles:!0,willRenderControls:e[154]}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16&r[0]&&(n.locale=e[4]),262144&r[1]&&(n.shapeProps=e[49]),512&r[0]&&(n.controls=e[9]),262144&r[0]&&(n.willRenderControls=e[154]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yo(e){let t,r,n;let o=e[34]&&g9(e),a="row"===e[7]&&yn(e);return{c(){o&&o.c(),t=aa(),a&&a.c(),r=al()},m(e,l){o&&o.m(e,l),at(e,t,l),a&&a.m(e,l),at(e,r,l),n=!0},p(e,n){e[34]?o?(o.p(e,n),8&n[1]&&aU(o,1)):((o=g9(e)).c(),aU(o,1),o.m(t.parentNode,t)):o&&(aV(),aH(o,1,1,()=>{o=null}),aj()),"row"===e[7]?a?(a.p(e,n),128&n[0]&&aU(a,1)):((a=yn(e)).c(),aU(a,1),a.m(r.parentNode,r)):a&&(aV(),aH(a,1,1,()=>{a=null}),aj())},i(e){n||(aU(o),aU(a),n=!0)},o(e){aH(o),aH(a),n=!1},d(e){o&&o.d(e),e&&ai(t),a&&a.d(e),e&&ai(r)}}}function ya(e){let t,r;return t=new pa({props:{class:"PinturaControlListScroller",elasticity:e[44],$$slots:{default:[yc]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};8192&r[1]&&(n.elasticity=e[44]),0x8000010&r[0]|8388608&r[1]|0x8000000&r[6]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yl(e){let t,r;return t=new cx({props:{$$slots:{default:[ys]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16&r[0]|0xc000000&r[6]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function ys(e){let t;let r=(U(e[212].icon)?e[212].icon(e[4]):e[212].icon)+"";return{c(){t=an("g")},m(e,n){at(e,t,n),t.innerHTML=r},p(e,n){16&n[0]|0x4000000&n[6]&&r!==(r=(U(e[212].icon)?e[212].icon(e[4]):e[212].icon)+"")&&(t.innerHTML=r)},d(e){e&&ai(t)}}}function yd(e){let t,r,n,o,a;let l=(U(e[212].label)?e[212].label(e[4]):e[212].label)+"",s=e[212].icon&&yl(e);return{c(){t=ar("div"),s&&s.c(),r=aa(),n=ar("span"),o=ao(l),ad(t,"slot","option")},m(e,l){at(e,t,l),s&&s.m(t,null),o9(t,r),o9(t,n),o9(n,o),a=!0},p(e,n){e[212].icon?s?(s.p(e,n),0x4000000&n[6]&&aU(s,1)):((s=yl(e)).c(),aU(s,1),s.m(t,r)):s&&(aV(),aH(s,1,1,()=>{s=null}),aj()),(!a||16&n[0]|0x4000000&n[6])&&l!==(l=(U(e[212].label)?e[212].label(e[4]):e[212].label)+"")&&ah(o,l)},i(e){a||(aU(s),a=!0)},o(e){aH(s),a=!1},d(e){e&&ai(t),s&&s.d()}}}function yc(e){let t,r;return t=new uS({props:{locale:e[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:e[54],selectedIndex:e[54].findIndex(e[155]),onchange:e[77],$$slots:{option:[yd,({option:e})=>({212:e}),({option:e})=>[0,0,0,0,0,0,0x4000000*!!e]]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};16&r[0]&&(n.locale=e[4]),8388608&r[1]&&(n.options=e[54]),0x8000000&r[0]|8388608&r[1]&&(n.selectedIndex=e[54].findIndex(e[155])),16&r[0]|0xc000000&r[6]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yu(e){let t,r,n,o,a;let l=[g5,g4],s=[];function d(e,t){return e[52]?0:e[45]?1:-1}~(r=d(e))&&(n=s[r]=l[r](e));let c=e[33]&&ya(e);return{c(){t=ar("div"),n&&n.c(),o=aa(),c&&c.c(),ad(t,"slot","footer"),a$(t,"transform",e[40])},m(e,n){at(e,t,n),~r&&s[r].m(t,null),o9(t,o),c&&c.m(t,null),a=!0},p(e,a){let u=r;(r=d(e))===u?~r&&s[r].p(e,a):(n&&(aV(),aH(s[u],1,1,()=>{s[u]=null}),aj()),~r?((n=s[r])?n.p(e,a):(n=s[r]=l[r](e)).c(),aU(n,1),n.m(t,o)):n=null),e[33]?c?(c.p(e,a),4&a[1]&&aU(c,1)):((c=ya(e)).c(),aU(c,1),c.m(t,null)):c&&(aV(),aH(c,1,1,()=>{c=null}),aj()),512&a[1]&&a$(t,"transform",e[40])},i(e){a||(aU(n),aU(c),a=!0)},o(e){aH(n),aH(c),a=!1},d(e){e&&ai(t),~r&&s[r].d(),c&&c.d()}}}function yh(e){let t,r;return(t=new mK({props:{hasHeader:e[41],$$slots:{footer:[yu],main:[g2],header:[g0]},$$scope:{ctx:e}}})).$on("measure",e[166]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};1024&r[1]&&(n.hasHeader=e[41]),0x7bfffff1&r[0]|0x7fffbff&r[1]|0x8000000&r[6]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yp(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,x,b,v,w,S,k,C,T,M,E,R,I,A,L,F,z,B,O,D,_,W,N,V,j,U,H,G,X,Z,Y,q,K,J,Q,ee,et,ei,er,en,eo,ea,el,es,ed,ec,eu,eh,ep,e$,em,ef,eg,ex,eb,ev,ew,eS;let ek,eC=oB,eT=()=>(eC(),eC=oH(eW,e=>r(35,ek=e)),eW),eM,eP=oB,eE=()=>(eP(),eP=oH(eH,e=>r(145,eM=e)),eH),eR,eI=oB,eA=()=>(eI(),eI=oH(tg,e=>r(37,eR=e)),tg),eL,eF=oB,ez=()=>(eF(),eF=oH(eV,e=>r(151,eL=e)),eV),eB,eD=oB,e_=()=>(eD(),eD=oH(eN,e=>r(56,eB=e)),eN);e.$$.on_destroy.push(()=>eC()),e.$$.on_destroy.push(()=>eP()),e.$$.on_destroy.push(()=>eI()),e.$$.on_destroy.push(()=>eF()),e.$$.on_destroy.push(()=>eD());let{isActive:eW}=t;eT();let{isActiveFraction:eN}=t;e_();let{isVisible:eV}=t;ez();let{stores:ej}=t,{locale:eU={}}=t,{shapes:eH}=t;eE();let{toolbar:eG=[]}=t,{toolShapes:eX={}}=t,{toolActive:eZ}=t,{toolSelectRadius:eY}=t,{toolRetainStyles:eq=!1}=t,{toolbarLayout:eK="stack"}=t,{textInputMode:eJ}=t,{shapeControls:e0={}}=t,{enableButtonFlipVertical:e1=!1}=t,{enablePresetSelectImage:e2=!0}=t,{enablePresetDropImage:e4=!0}=t,{enableSelectToolToAddShape:e5=!1}=t,{enableAutoSelectMoveTool:e3=["line","arrow","path","rectangle","ellipse","text"]}=t,{enableTapToAddText:e6=!1}=t,{enableMoveTool:e7=!1}=t,{enableViewTool:te=!1}=t,{enableToolShareStyles:tt=!0}=t,{enableMultiSelect:ti=!1}=t,{gridSize:tr=0}=t,{snapThreshold:tn=0}=t,{enableSnapToContext:to=!0}=t,{willRenderHeaderTools:ta=ey}=t,{willRenderPresetToolbar:tl}=t,{willRenderShapeStyleControls:ts}=t,{willStartInteraction:td}=t,{shapePresets:tc=[]}=t,{utilKey:tu}=t,{mapScreenPointToImagePoint:th}=t,{mapImagePointToScreenPoint:tp}=t,{imageRotation:t$=0}=t,{imageFlipX:tm=!1}=t,{imageFlipY:tf=!1}=t,{parentRect:tg}=t;eA();let{hooks:ty={}}=t,tx=aT("selection");oX(e,tx,e=>r(150,es=e));let tb=aT("isAnimated");oX(e,tb,e=>r(142,Y=e));let tv=aT("elasticityMultiplier");oX(e,tv,e=>r(146,J=e));let tw=aT("ui");oX(e,tw,e=>r(177,ed=e));let tS=aT("keysPressed");oX(e,tS,e=>r(149,el=e));let{env:tk,history:tC,rootRect:tT,rootColorSecondary:tM,enablePanInput:tP,enablePanInputStatus:tE,enableZoomInput:tR,stageRect:tI,utilRectPadded:tA,scrollElasticity:tL,imageOverlayMarkup:tF,imagePreviewModifiers:tz,imageCropRect:tO,shapePreprocessor:tD,stageScalar:t_,imageSelectionRect:tW,imageTransformsInterpolated:tN,imageSelectionPan:tV,imageSize:tj,allowPan:tU,allowZoom:tH,allowZoomControls:tG,allowPlayPause:tX}=ej;oX(e,tk,e=>r(143,q=e)),oX(e,tT,e=>r(55,eh=e)),oX(e,tM,e=>r(57,ep=e)),oX(e,tE,e=>r(38,eo=e)),oX(e,tI,e=>r(147,Q=e)),oX(e,tA,e=>r(39,ec=e)),oX(e,tz,e=>r(178,eu=e)),oX(e,tO,e=>r(176,en=e)),oX(e,t_,e=>r(174,ei=e)),oX(e,tW,e=>r(175,er=e)),oX(e,tN,e=>r(36,ee=e)),oX(e,tV,e=>r(173,et=e)),oX(e,tj,e=>r(148,ea=e));let tZ=(e,{willRenderPresetToolbar:t,shapePresets:r,enableViewTool:n,enableMoveTool:a})=>{let l=0!==r.length||t?e:e.filter(e=>"preset"!==e[0]);return o&&(l=[["move",e=>e.shapeLabelToolMove,{icon:e=>e.shapeIconToolMove}],["view",e=>e.shapeLabelToolView,{icon:e=>e.shapeIconToolView}],...l]),l=a?l:l.filter(e=>"move"!==e[0]),n?l:l.filter(e=>"view"!==e[0])},tY=0,tq={},tJ=e=>{let t,r;let[n,o]=e$[e],a="relative"===o.position,l=a?"0%":0,s=a?"0%":0;ni(n)||r9(n)?(r=a?"20%":.2*eR.width,(t=r2(n)).x=l,t.y=s,oi(t,{width:r,height:r},eR)):nr(n)?(r=a?"10%":.1*eR.width,(t=r2(n)).x=l,t.y=s,oi(t,{rx:r,ry:r},eR)):nn(n)&&(r=a?"10%":.1*eR.width,(t=r2(n)).x1=l,t.y1=s,t.x2=l,t.y2=s),t&&Promise.resolve().then(()=>{id(il(t,void 0,r))})},tQ=e=>th(f6(e,eh)),t0={},t1=()=>{o1(tz,eu[tu]={maskMarkupOpacity:.85},eu)},t2=()=>{delete eu[tu]},t4=e=>{if(!em)return;let t=em.getShapeDraft(tx);t&&(e&&(ef=t.drawMode),em.updateShapeDraft({drawMode:e?"subtract":ef},tx))},t5=e=>{if(!(no(e)&&rn(e,"pathClose")))return;let t=[...e.strokeColor];t[3]=1,em.updateMarkupShape(e,{pathClose:!1,strokeColor:t},!1),em.removeMarkupShapeProps(e,["backgroundColor"],!1),em.confirmMarkupItemDraft(),em.selectShape(e),N("addshape",e),tC.write()},t3=()=>{em&&"move"!==eZ&&em.blurShapes()},t6=()=>ed[tu]?ed[tu][eZ]:{},t8=()=>{r(115,t0={})},t7=(e,t,r)=>{let n=ed[e],o=n?n[t]:{};tw.set({...ed,[e]:{...n,[t]:{...o,...r}}})},t9=e=>{tw.set({[e]:{}})},ie=(e,t)=>{let r={};return Object.entries(e).forEach(([e,n])=>{rn(t,e)&&(r[e]=n)}),r},it=(e,t)=>ri(e)?e:e.endsWith("%")?parseFloat(e)/100*t.width:void 0,ii=e=>{tF.update(t=>[...t.filter(e=>e.id!==`cursor-${tu}`),...e])},ir=()=>{tF.update(e=>e.filter(e=>e.id!==`cursor-${tu}`))},io=({cursorStyle:e,cursorSize:t},r,n)=>{let o;let a=r[t];if(void 0===a?o=it(t,n):ri(a)?o=a:P(a)&&(o=n4(t,r[t],n),"strokeWidth"===t&&(o*=.5)),!(o<=0)&&void 0!==o)return{size:o,style:e}},ia=(e,t,r,n,o,a)=>{if(n)return o?"grabbing":"grab";if(e&&!t)return"none";if(!t)return"move"===a?"default":"crosshair";let l=t||r;return nd(l)?nc(l)?"modal"===eJ?"default":"text":nz(l)&&(!v||b.every(nz))?"move":"default":"default"},il=(e,t,r)=>{let n=!1;t||(n=!0,t=W?th(tB(Q)):tB(en)),t.x-=eR.x||0,t.y-=eR.y||0,(tm||tf)&&(e.flipX=tm,e.flipY=tf);let o=em.getShapesNearPosition(eM,t);if(n&&o.length){let e=.1*Math.min(en.width,en.height);t.x+=Math.round(-e+Math.random()*e*2),t.y+=Math.round(-e+Math.random()*e*2)}if(0!==t$&&(tm&&tf?e.rotation=-t$:tm?e.rotation=t$:tf?e.rotation=t$:e.rotation=-t$),rn(e,"width")&&rn(e,"height")){let{width:r,height:n}=ot(e,["width","height"],eR);oi(e,{x:t.x-.5*r,y:t.y-.5*n},eR)}else if(nr(e))oi(e,{x:t.x,y:t.y},eR);else if(nn(e)){let{x1:n,y1:o,x2:a,y2:l}=ot(e,["x1","y1","x2","y2"],eR),s=e8(eO(n,o),eO(a,l)),d=P(r)?n0(r,eR.width):s;oi(e,{x1:t.x-d,y1:t.y+d,x2:t.x+d,y2:t.y-d},eR)}else if(no(e)){let{points:r}=ot(e,["points"],eR),n=e9(r);oi(e,{points:r.map(e=>({x:e.x+t.x-n.x,y:e.y+t.y-n.y}))},eR)}return e},is=(e,t)=>{let r=il(r6(e,en),t);return e.shape&&(rn(e.shape,"x")&&(r.x=e.shape.x),rn(e.shape,"y")&&(r.y=e.shape.y)),id(r)},id=e=>{let{beforeAddShape:t=()=>!0}=ty;if(t(e))return em.addShape(e),em.selectShape(e),N("addshape",e),tC.write(),e},ic=!1,iu=(e,t)=>e.forEach(e=>is(e,t)),ih=()=>{tC.write()},ip=aT("redrawTrigger");oX(e,ip,e=>r(144,K=e));let i$=e=>{eM&&eH.update(t=>t.map(t=>(t._prerender=!!e&&nc(t),t)))},im=[],ig=dk(20*!!Y);return oX(e,ig,e=>r(141,Z=e)),e.$$set=e=>{"isActive"in e&&eT(r(1,eW=e.isActive)),"isActiveFraction"in e&&e_(r(2,eN=e.isActiveFraction)),"isVisible"in e&&ez(r(3,eV=e.isVisible)),"stores"in e&&r(100,ej=e.stores),"locale"in e&&r(4,eU=e.locale),"shapes"in e&&eE(r(5,eH=e.shapes)),"toolbar"in e&&r(101,eG=e.toolbar),"toolShapes"in e&&r(102,eX=e.toolShapes),"toolActive"in e&&r(0,eZ=e.toolActive),"toolSelectRadius"in e&&r(6,eY=e.toolSelectRadius),"toolRetainStyles"in e&&r(103,eq=e.toolRetainStyles),"toolbarLayout"in e&&r(7,eK=e.toolbarLayout),"textInputMode"in e&&r(8,eJ=e.textInputMode),"shapeControls"in e&&r(9,e0=e.shapeControls),"enableButtonFlipVertical"in e&&r(10,e1=e.enableButtonFlipVertical),"enablePresetSelectImage"in e&&r(11,e2=e.enablePresetSelectImage),"enablePresetDropImage"in e&&r(12,e4=e.enablePresetDropImage),"enableSelectToolToAddShape"in e&&r(104,e5=e.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in e&&r(105,e3=e.enableAutoSelectMoveTool),"enableTapToAddText"in e&&r(13,e6=e.enableTapToAddText),"enableMoveTool"in e&&r(106,e7=e.enableMoveTool),"enableViewTool"in e&&r(107,te=e.enableViewTool),"enableToolShareStyles"in e&&r(108,tt=e.enableToolShareStyles),"enableMultiSelect"in e&&r(14,ti=e.enableMultiSelect),"gridSize"in e&&r(15,tr=e.gridSize),"snapThreshold"in e&&r(16,tn=e.snapThreshold),"enableSnapToContext"in e&&r(17,to=e.enableSnapToContext),"willRenderHeaderTools"in e&&r(109,ta=e.willRenderHeaderTools),"willRenderPresetToolbar"in e&&r(110,tl=e.willRenderPresetToolbar),"willRenderShapeStyleControls"in e&&r(18,ts=e.willRenderShapeStyleControls),"willStartInteraction"in e&&r(111,td=e.willStartInteraction),"shapePresets"in e&&r(19,tc=e.shapePresets),"utilKey"in e&&r(20,tu=e.utilKey),"mapScreenPointToImagePoint"in e&&r(21,th=e.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in e&&r(22,tp=e.mapImagePointToScreenPoint),"imageRotation"in e&&r(23,t$=e.imageRotation),"imageFlipX"in e&&r(24,tm=e.imageFlipX),"imageFlipY"in e&&r(25,tf=e.imageFlipY),"parentRect"in e&&eA(r(26,tg=e.parentRect)),"hooks"in e&&r(112,ty=e.hooks)},e.$$.update=()=>{if(0x2000000&e.$$.dirty[4]&&r(124,n=el.includes(18)),1049088&e.$$.dirty[3]&&(!e$||eX!==e$)&&r(113,e$=eX),16&e.$$.dirty[1]&&tU.set(ek),16&e.$$.dirty[1]&&tH.set(ek),16&e.$$.dirty[1]&&tG.set(ek),256&e.$$.dirty[3]&&r(33,o=Array.isArray(eG)&&eG.length>1&&Array.isArray(eG[0][1])),4&e.$$.dirty[1]|256&e.$$.dirty[3]&&r(54,a=o?eG.map((e,t)=>[t,e[0]]):[]),0x8000000&e.$$.dirty[0]|4&e.$$.dirty[1]|256&e.$$.dirty[3]&&r(140,l=o?eG[tY][1]:eG),524288&e.$$.dirty[0]|155648&e.$$.dirty[3]|65536&e.$$.dirty[4]&&r(32,s=tZ(l,{willRenderPresetToolbar:tl,shapePresets:tc,enableMoveTool:e7,enableViewTool:te})),2&e.$$.dirty[1]&&r(138,u=!!s.length),1&e.$$.dirty[0]|2&e.$$.dirty[1]|16384&e.$$.dirty[4]&&u&&void 0===eZ&&r(0,eZ=s[0][0]),0x8000001&e.$$.dirty[0]|4&e.$$.dirty[1]|2097152&e.$$.dirty[3]|65536&e.$$.dirty[4]&&o&&r(114,tq={...tq,[tY]:l.map(([e])=>e).includes(eZ)?eZ:tq[tY]||l[0][0]}),512&e.$$.dirty[0]&&r(137,d=!!Object.keys(e0).length),2&e.$$.dirty[1]&&r(34,c=s.length>1),12&e.$$.dirty[1]&&r(53,h=c||o),1&e.$$.dirty[0]&&r(139,p=void 0!==eZ),57344&e.$$.dirty[4]&&r(52,$=(!p||u)&&d),0x20000000&e.$$.dirty[0]&&r(31,N=eb&&gJ(eb)),1&e.$$.dirty[0]|17&e.$$.dirty[1]&&ek&&N&&N("selectcontrol",eZ),16&e.$$.dirty[1]&&(ek?t1():t2()),1&e.$$.dirty[0]|1048576&e.$$.dirty[3]&&r(136,m=eZ&&e$[eZ]?e$[eZ][1]:void 0),4096&e.$$.dirty[4]&&r(125,f=m&&m.isSelection?"selection":"shapes"),3&e.$$.dirty[4]&&t4("selection"===f&&n),0x10000001&e.$$.dirty[0]&&eZ&&em){let e=em.getMarkupItemDraft();e&&t5(e)}if(1&e.$$.dirty[0]&&eZ&&t3(),16&e.$$.dirty[1]|0x8000000&e.$$.dirty[4]&&r(51,g=eL&&ek),256&e.$$.dirty[1]|8388608&e.$$.dirty[4]&&r(50,y=ec&&eO(Q.x-ec.x,Q.y-ec.y)),512&e.$$.dirty[0]&&r(135,x=Object.keys(e0)),16384&e.$$.dirty[0]|16&e.$$.dirty[1]|2097152&e.$$.dirty[4]&&r(122,b=ti?ek&&eM.filter(nd):[]),0x20000000&e.$$.dirty[3]&&r(123,v=b.length>1),16&e.$$.dirty[1]|2097152&e.$$.dirty[4]&&r(119,w=ek&&eM.filter(nd)[0]),16&e.$$.dirty[1]|2097152&e.$$.dirty[4]&&r(130,S=ek&&eM.find(e=>nc(e))),16&e.$$.dirty[1]|2097152&e.$$.dirty[4]&&r(133,k=ek&&eM.find(e=>nu(e))),1&e.$$.dirty[0]|16&e.$$.dirty[1]|1048576&e.$$.dirty[3]&&r(127,C=ek&&e$[eZ]?nJ(r2({...e$[eZ][0],...t6()})):{}),1048576&e.$$.dirty[3]&&e$&&t8(),1&e.$$.dirty[0]|4227072&e.$$.dirty[3]|2056&e.$$.dirty[4]&&r(126,T=C&&Object.keys(C).reduce((e,t)=>{let r="disableStyle"===t,n="settings"===t,o=!!x.find(e=>e.split("_").includes(t));if(!r&&!n&&!o||void 0===C[t]||!0===C.disableStyle||C.disableStyle&&C.disableStyle.includes(t))return e;if("strokeWidth"===t&&Object.keys(t0).includes("strokeWidth")&&void 0===t0[t]&&rn(C,"points"))return e[t]=C[t],e;let{share:a=!0}=C.settings&&C.settings[t]||{},l=tt&&a?t0:t0[eZ]||{};return e[t]=rn(l,t)?l[t]:C[t],e},{})),1048577&e.$$.dirty[0]|1024&e.$$.dirty[3]|4&e.$$.dirty[4]&&(eq?t7(tu,eZ,T):t9(tu)),16&e.$$.dirty[1]|0x4000000&e.$$.dirty[3]|0x4000004&e.$$.dirty[4]&&r(134,M=es&&ek?w||T:void 0),0x60000000&e.$$.dirty[3]|1536&e.$$.dirty[4]&&r(49,E=v?function(e){let t={};return e.forEach(e=>{Object.entries(e).filter(([e])=>!e.startsWith("_")).forEach(([e,r])=>{if(rn(t,e)){"disableStyle"===e&&t[e].push(...r);return}t[e]=r})}),t}(b):M||k),1&e.$$.dirty[0]|8&e.$$.dirty[4]&&r(48,R=rn(C,"eraseRadius")||rn(C,"points")&&!rn(C,"pathClose")||"move"===eZ||"view"===eZ),64&e.$$.dirty[1]|8&e.$$.dirty[4]&&r(47,I=C&&void 0!==C.eraseRadius?it(C.eraseRadius,eR):void 0),16&e.$$.dirty[1]|0x2000000&e.$$.dirty[4]&&r(131,A=ek&&el.includes(32)),1&e.$$.dirty[0]|16&e.$$.dirty[1]&&r(132,L=ek&&"view"===eZ),384&e.$$.dirty[4]&&r(129,F=L||A),96&e.$$.dirty[4]&&r(128,z=!!F&&(!!S||cD(document.activeElement))),16&e.$$.dirty[1]|48&e.$$.dirty[4]&&tP.set(!ek||F&&!z),16&e.$$.dirty[1]|16&e.$$.dirty[4]&&tR.set(!ek||!z),64&e.$$.dirty[1]|12&e.$$.dirty[4]&&r(120,B=C.cursorStyle?io(C,{...C,...T},eR):void 0),0x2000000&e.$$.dirty[3]|0x1000000&e.$$.dirty[4]&&r(121,O=eS&&eQ(eS,ea)),1048576&e.$$.dirty[0]|160&e.$$.dirty[1]|0x19800000&e.$$.dirty[3]|3&e.$$.dirty[4]){if(O&&!ev&&B&&!eo){let e=B.size*ee.scale,t={id:`cursor-${tu}`,x:ew.x,y:ew.y,strokeWidth:.5,strokeColor:[0,0,0]};"ellipse"===B.style&&(t.rx=e,t.ry=e);let r={strokeWidth:2.5,strokeColor:[1,1,1],opacity:.75},o=[{...t,...r},t];if("selection"===f&&n){let t=ew.x+e,n=ew.y+e+4,a={id:`cursor-${tu}`,strokeWidth:.75,strokeColor:[0,0,0],points:[{x:t,y:n},{x:t+4,y:n}]};o.push({...a,...r,strokeWidth:2,points:[{x:t-.5,y:n},{x:t+4.5,y:n}]},a)}ii(o)}else ir()}1&e.$$.dirty[0]|128&e.$$.dirty[1]|0x1c800000&e.$$.dirty[3]&&r(46,D=O?ia(B,ev,w,eo,!1,eZ):"default"),526337&e.$$.dirty[0]|131072&e.$$.dirty[3]&&r(45,_="preset"===eZ&&(tc.length>0||e2||tl)),64&e.$$.dirty[1]&&(W=!rn(eR,"x")&&!rn(eR,"y")),4194304&e.$$.dirty[4]&&r(44,V=J*tL),131072&e.$$.dirty[3]|1572864&e.$$.dirty[4]&&r(43,j=K&&tl?e=>pX(()=>tl(e,is,{...q},()=>ip.set({}))):ey),524288&e.$$.dirty[3]&&r(42,U=Object.keys(ty).reduce((e,t)=>("beforeAddShape"===t||void 0===ty[t]||(e[t]=ty[t]),e),{})),16&e.$$.dirty[1]&&i$(ek),65536&e.$$.dirty[3]|1572864&e.$$.dirty[4]&&r(30,H=K&&ta([],q,()=>ip.set({}))),0x40000200&e.$$.dirty[0]&&r(41,G=!!H.length||!!Object.keys(e0).some(e=>im.includes(e))),16&e.$$.dirty[1]|262144&e.$$.dirty[4]&&Y&&ig.set(20*!ek),e.$$.dirty[4],131072&e.$$.dirty[4]&&r(40,X=Z?`translateY(${Z}px)`:"none")},tX.set(!1),[eZ,eW,eN,eV,eU,eH,eY,eK,eJ,e0,e1,e2,e4,e6,ti,tr,tn,to,ts,tc,tu,th,tp,t$,tm,tf,tg,tY,em,eb,H,N,s,o,c,ek,ee,eR,eo,ec,X,G,U,j,V,_,D,I,R,E,y,g,$,h,a,eh,eB,ep,tx,tb,tv,tw,tS,tk,tT,tM,tE,tI,tA,tF,tz,tO,t_,tW,tN,tV,tj,({index:e},t)=>{r(27,tY=e),r(0,eZ=tq[e])},({value:e},t)=>{r(0,eZ=e),(e5||/enter/i.test(t.key))&&tJ(e)},e=>{if("eraser"===eZ)eg=em.eraseShape();else if(eZ&&e$[eZ]){let[e,t={}]=e$[eZ],{drawMode:r}=M;"selection"===f&&"new"===r&&tx.set([]);let o={};"selection"===f&&(N("selectiondown",[...es]),n&&(ef=e.drawMode,o.drawMode="subtract")),eg=em.createShape({...e,...T,...o},t)}else eg=void 0;return!!eg&&(eg.start(e),!0)},e=>!!eg&&(eg.update(e),!0),e=>!!eg&&(eg.release(e),!0),e=>!!eg&&(eg.cancel(e),eg=void 0,!0),e=>{if(!eg)return!1;if(eg.end(e),eg=void 0,"selection"===f){if(e.detail.isTap){let[e]=e$[eZ];e.bitmap||tx.set([])}N("selectionup",[...es])}let t=em.getMarkupItemDraft(),n=e7&&(!0===e3||Array.isArray(e3)&&e3.includes(eZ));return(!t||t.isEditing)&&n&&r(0,eZ="move"),!0},e=>{let{key:t}=e,r=em.getMarkupItemDraft();/escape/i.test(t)&&r&&(e.preventDefault(),e.stopPropagation(),em.discardMarkupItemDraft(),eg=void 0),/enter/i.test(t)&&r&&(e.preventDefault(),e.stopPropagation(),t5(r),eg=void 0)},function(e){Object.keys(e).forEach(t=>{let{retain:n=!0,share:o=!0}=C.settings&&C.settings[t]||{};if(n){if(tt&&o){r(115,t0[t]=e[t],t0);return}t0[eZ]||r(115,t0[eZ]={},t0),r(115,t0[eZ][t]=e[t],t0)}}),N("selectstyle",e),w&&(v?b.forEach(t=>{em.updateMarkupShape(t,ie(e,t))}):em.updateMarkupShape(w,e),clearTimeout(ex),ex=setTimeout(()=>{ih()},200))},(e,t,n)=>{r(117,ew=t),r(118,eS=n)},()=>{r(118,eS=void 0),r(117,ew=void 0)},e=>{N("markuptap",e)},e=>r(116,ev=e),()=>{ic=!1},(e,t)=>{if(ic)return;let{beforeAddShape:r=()=>!0}=ty,n=tQ(t),o=em.getMarkupItemDraft(),a=tK(en,{x:n.x+(eR.x||0),y:n.y+(eR.y||0)});if(o&&!a&&em.discardMarkupItemDraft(),a){if(!o){let o=il(r6(e,en),n);if(!r(o)){ic=!0,t.preventDefault();return}nv(o),em.addShape(o);return}ni(o)&&(n.x-=.5*o.width,n.y-=.5*o.height),e.shape&&(rn(e.shape,"x")&&(n.x=e.shape.x),rn(e.shape,"y")&&(n.y=e.shape.y)),em.updateMarkupShape(o,n)}},(e,t)=>{if(ic)return;let r=tQ(t);if(!tK(en,{x:r.x+(eR.x||0),y:r.y+(eR.y||0)})){em.discardMarkupItemDraft();return}let n=em.confirmMarkupItemDraft();em.selectShape(n),N("addshape",n),tC.write()},e=>is(e),e=>iu(e.detail.resources,tQ(e.detail.event)),e=>{if(!td)return!0;let t=rectClone(er);return rectScale(t,1/ei),rectTranslate(t,et),rectScale(t,ee.scale),td(e,{...t,x:t.x+Q.x,y:t.y+Q.y})},ih,ip,im,ig,ej,eG,eX,eq,e5,e3,e7,te,tt,ta,tl,td,ty,e$,tq,t0,ev,ew,eS,w,B,O,b,v,n,f,T,C,z,F,S,A,L,k,M,x,m,d,u,p,l,Z,Y,q,K,eM,J,Q,ea,el,es,eL,function(t){aM.call(this,e,t)},e=>e[0]===eZ,(e,t,r)=>{let n=e.filter(([,e])=>!im.includes(e));return ts?ts(n,t,r):n},e=>e[0]===tY,e=>{Promise.resolve().then(()=>{N("addshape",e),ih()})},e=>{N("selectshape",e)},e=>{Promise.resolve().then(()=>{N("blurshape",e)})},e=>{N("tapshape",e)},e=>{N("updateshape",e),ih()},e=>{N("removeshape",e),ih()},()=>{ih()},function(e){aE[e?"unshift":"push"](()=>{r(28,em=e)})},function(e){aE[e?"unshift":"push"](()=>{r(29,eb=e)})},e=>e.filter(([,e])=>im.includes(e)),function(t){aM.call(this,e,t)}]}class y$ extends a3{constructor(e){super(),a5(this,e,yp,yh,oj,{isActive:1,isActiveFraction:2,isVisible:3,stores:100,locale:4,shapes:5,toolbar:101,toolShapes:102,toolActive:0,toolSelectRadius:6,toolRetainStyles:103,toolbarLayout:7,textInputMode:8,shapeControls:9,enableButtonFlipVertical:10,enablePresetSelectImage:11,enablePresetDropImage:12,enableSelectToolToAddShape:104,enableAutoSelectMoveTool:105,enableTapToAddText:13,enableMoveTool:106,enableViewTool:107,enableToolShareStyles:108,enableMultiSelect:14,gridSize:15,snapThreshold:16,enableSnapToContext:17,willRenderHeaderTools:109,willRenderPresetToolbar:110,willRenderShapeStyleControls:18,willStartInteraction:111,shapePresets:19,utilKey:20,mapScreenPointToImagePoint:21,mapImagePointToScreenPoint:22,imageRotation:23,imageFlipX:24,imageFlipY:25,parentRect:26,hooks:112},null,[-1,-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),a_()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),a_()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),a_()}get stores(){return this.$$.ctx[100]}set stores(e){this.$$set({stores:e}),a_()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),a_()}get shapes(){return this.$$.ctx[5]}set shapes(e){this.$$set({shapes:e}),a_()}get toolbar(){return this.$$.ctx[101]}set toolbar(e){this.$$set({toolbar:e}),a_()}get toolShapes(){return this.$$.ctx[102]}set toolShapes(e){this.$$set({toolShapes:e}),a_()}get toolActive(){return this.$$.ctx[0]}set toolActive(e){this.$$set({toolActive:e}),a_()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(e){this.$$set({toolSelectRadius:e}),a_()}get toolRetainStyles(){return this.$$.ctx[103]}set toolRetainStyles(e){this.$$set({toolRetainStyles:e}),a_()}get toolbarLayout(){return this.$$.ctx[7]}set toolbarLayout(e){this.$$set({toolbarLayout:e}),a_()}get textInputMode(){return this.$$.ctx[8]}set textInputMode(e){this.$$set({textInputMode:e}),a_()}get shapeControls(){return this.$$.ctx[9]}set shapeControls(e){this.$$set({shapeControls:e}),a_()}get enableButtonFlipVertical(){return this.$$.ctx[10]}set enableButtonFlipVertical(e){this.$$set({enableButtonFlipVertical:e}),a_()}get enablePresetSelectImage(){return this.$$.ctx[11]}set enablePresetSelectImage(e){this.$$set({enablePresetSelectImage:e}),a_()}get enablePresetDropImage(){return this.$$.ctx[12]}set enablePresetDropImage(e){this.$$set({enablePresetDropImage:e}),a_()}get enableSelectToolToAddShape(){return this.$$.ctx[104]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),a_()}get enableAutoSelectMoveTool(){return this.$$.ctx[105]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),a_()}get enableTapToAddText(){return this.$$.ctx[13]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),a_()}get enableMoveTool(){return this.$$.ctx[106]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),a_()}get enableViewTool(){return this.$$.ctx[107]}set enableViewTool(e){this.$$set({enableViewTool:e}),a_()}get enableToolShareStyles(){return this.$$.ctx[108]}set enableToolShareStyles(e){this.$$set({enableToolShareStyles:e}),a_()}get enableMultiSelect(){return this.$$.ctx[14]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),a_()}get gridSize(){return this.$$.ctx[15]}set gridSize(e){this.$$set({gridSize:e}),a_()}get snapThreshold(){return this.$$.ctx[16]}set snapThreshold(e){this.$$set({snapThreshold:e}),a_()}get enableSnapToContext(){return this.$$.ctx[17]}set enableSnapToContext(e){this.$$set({enableSnapToContext:e}),a_()}get willRenderHeaderTools(){return this.$$.ctx[109]}set willRenderHeaderTools(e){this.$$set({willRenderHeaderTools:e}),a_()}get willRenderPresetToolbar(){return this.$$.ctx[110]}set willRenderPresetToolbar(e){this.$$set({willRenderPresetToolbar:e}),a_()}get willRenderShapeStyleControls(){return this.$$.ctx[18]}set willRenderShapeStyleControls(e){this.$$set({willRenderShapeStyleControls:e}),a_()}get willStartInteraction(){return this.$$.ctx[111]}set willStartInteraction(e){this.$$set({willStartInteraction:e}),a_()}get shapePresets(){return this.$$.ctx[19]}set shapePresets(e){this.$$set({shapePresets:e}),a_()}get utilKey(){return this.$$.ctx[20]}set utilKey(e){this.$$set({utilKey:e}),a_()}get mapScreenPointToImagePoint(){return this.$$.ctx[21]}set mapScreenPointToImagePoint(e){this.$$set({mapScreenPointToImagePoint:e}),a_()}get mapImagePointToScreenPoint(){return this.$$.ctx[22]}set mapImagePointToScreenPoint(e){this.$$set({mapImagePointToScreenPoint:e}),a_()}get imageRotation(){return this.$$.ctx[23]}set imageRotation(e){this.$$set({imageRotation:e}),a_()}get imageFlipX(){return this.$$.ctx[24]}set imageFlipX(e){this.$$set({imageFlipX:e}),a_()}get imageFlipY(){return this.$$.ctx[25]}set imageFlipY(e){this.$$set({imageFlipY:e}),a_()}get parentRect(){return this.$$.ctx[26]}set parentRect(e){this.$$set({parentRect:e}),a_()}get hooks(){return this.$$.ctx[112]}set hooks(e){this.$$set({hooks:e}),a_()}}var ym=(e,t,r,n,o,a,l,s,d)=>{let c=eV(e),u=.5*r.width,h=.5*r.height,p=.5*t.width,$=.5*t.height,m=o.x+n.x,f=o.y+n.y;s&&(c.x=r.width-c.x),d&&(c.y=r.height-c.y);let g=Math.cos(a),y=Math.sin(a);c.x-=u,c.y-=h;let x=c.x*g-c.y*y,b=c.x*y+c.y*g;c.x=u+x,c.y=h+b,c.x*=l,c.y*=l,c.x+=p,c.y+=$,c.x+=m,c.y+=f,c.x-=u*l,c.y-=h*l;let v=(o.x-m)*l,w=(o.y-f)*l;return c.x+=v*g-w*y,c.y+=v*y+w*g,c},yf=(e,t,r,n,o,a,l,s,d)=>{let c=eV(e),u=th(r),h=th(t),p=eO(o.x+n.x,o.y+n.y),$=Math.cos(a),m=Math.sin(a);c.x-=h.x,c.y-=h.y;let f=(o.x-p.x)*l,g=(o.y-p.y)*l;c.x-=f*$-g*m,c.y-=f*m+g*$,c.x-=p.x,c.y-=p.y,c.x/=l,c.y/=l;let y=c.x*$+c.y*m,x=c.x*m-c.y*$;return c.x=y,c.y=-x,c.x+=u.x,c.y+=u.y,s&&(c.x=r.width-c.x),d&&(c.y=r.height-c.y),c},yg=e=>"boolean"==typeof e;function yy(e){let t,r,n;function o(t){e[60](t)}let a={utilKey:e[1],stores:e[5],locale:e[6],isActive:e[2],isActiveFraction:e[3],isVisible:e[4],mapScreenPointToImagePoint:e[46],mapImagePointToScreenPoint:e[45],imageRotation:e[47],imageFlipX:e[44],imageFlipY:e[43],shapes:e[49],toolbar:e[21]||e[7],toolShapes:e[22]||e[8],toolRetainStyles:e[9],enableSelectToolToAddShape:e[31],enableTapToAddText:e[32],enableViewTool:e[30],enableMoveTool:e[34],enableAutoSelectMoveTool:e[33],enableMultiSelect:e[35],snapThreshold:e[16],gridSize:ri(e[18])?e[18]:e[15],enableSnapToContext:yg(e[19])?e[19]:e[17],enableToolShareStyles:e[13],shapeControls:e[23]||e[10],shapePresets:e[27],enableButtonFlipVertical:e[24],parentRect:e[50],enablePresetDropImage:e[26],enablePresetSelectImage:e[25],toolSelectRadius:e[11],textInputMode:e[12],willStartInteraction:e[14],willRenderPresetToolbar:e[28]||e[20],willRenderShapeStyleControls:e[29],hooks:{willRenderShapeControls:e[36],willRenderShapeTextControls:e[37],beforeAddShape:e[38],beforeRemoveShape:e[39],beforeDeselectShape:e[40],beforeSelectShape:e[41],beforeUpdateShape:e[42]}};return void 0!==e[0]&&(a.toolActive=e[0]),t=new y$({props:a}),aE.push(()=>a0(t,"toolActive",o)),t.$on("measure",e[61]),{c(){a1(t.$$.fragment)},m(e,r){a2(t,e,r),n=!0},p(e,n){let o={};32&n[0]&&(o.stores=e[5]),64&n[0]&&(o.locale=e[6]),4&n[0]&&(o.isActive=e[2]),8&n[0]&&(o.isActiveFraction=e[3]),16&n[0]&&(o.isVisible=e[4]),32768&n[1]&&(o.mapScreenPointToImagePoint=e[46]),16384&n[1]&&(o.mapImagePointToScreenPoint=e[45]),65536&n[1]&&(o.imageRotation=e[47]),8192&n[1]&&(o.imageFlipX=e[44]),4096&n[1]&&(o.imageFlipY=e[43]),2097280&n[0]&&(o.toolbar=e[21]||e[7]),4194560&n[0]&&(o.toolShapes=e[22]||e[8]),512&n[0]&&(o.toolRetainStyles=e[9]),1&n[1]&&(o.enableSelectToolToAddShape=e[31]),2&n[1]&&(o.enableTapToAddText=e[32]),0x40000000&n[0]&&(o.enableViewTool=e[30]),8&n[1]&&(o.enableMoveTool=e[34]),4&n[1]&&(o.enableAutoSelectMoveTool=e[33]),16&n[1]&&(o.enableMultiSelect=e[35]),65536&n[0]&&(o.snapThreshold=e[16]),294912&n[0]&&(o.gridSize=ri(e[18])?e[18]:e[15]),655360&n[0]&&(o.enableSnapToContext=yg(e[19])?e[19]:e[17]),8192&n[0]&&(o.enableToolShareStyles=e[13]),8389632&n[0]&&(o.shapeControls=e[23]||e[10]),0x8000000&n[0]&&(o.shapePresets=e[27]),0x1000000&n[0]&&(o.enableButtonFlipVertical=e[24]),0x4000000&n[0]&&(o.enablePresetDropImage=e[26]),0x2000000&n[0]&&(o.enablePresetSelectImage=e[25]),2048&n[0]&&(o.toolSelectRadius=e[11]),4096&n[0]&&(o.textInputMode=e[12]),16384&n[0]&&(o.willStartInteraction=e[14]),0x10100000&n[0]&&(o.willRenderPresetToolbar=e[28]||e[20]),0x20000000&n[0]&&(o.willRenderShapeStyleControls=e[29]),4064&n[1]&&(o.hooks={willRenderShapeControls:e[36],willRenderShapeTextControls:e[37],beforeAddShape:e[38],beforeRemoveShape:e[39],beforeDeselectShape:e[40],beforeSelectShape:e[41],beforeUpdateShape:e[42]}),!r&&1&n[0]&&(r=!0,o.toolActive=e[0],aB(()=>r=!1)),t.$set(o)},i(e){n||(aU(t.$$.fragment,e),n=!0)},o(e){aH(t.$$.fragment,e),n=!1},d(e){a4(t,e)}}}function yx(e,t,r){let n,o,a,l,s,d,c,u,h;let{isActive:p}=t,{isActiveFraction:$}=t,{isVisible:m}=t,{stores:f}=t,{locale:g={}}=t,{markupEditorToolbar:y}=t,{markupEditorToolStyles:x}=t,{markupEditorToolRetainStyles:b}=t,{markupEditorShapeStyleControls:v}=t,{markupEditorToolSelectRadius:w}=t,{markupEditorTextInputMode:S}=t,{markupEditorToolShareStyles:k}=t,{markupEditorWillStartInteraction:C}=t,{markupEditorGridSize:T=0}=t,{markupEditorSnapThreshold:M=0}=t,{markupEditorSnapToContext:P=!1}=t,{annotateGridSize:E}=t,{annotateSnapToContext:R}=t,{willRenderShapePresetToolbar:I}=t,{annotateTools:A}=t,{annotateToolShapes:L}=t,{annotateShapeControls:F}=t,{annotateActiveTool:z}=t,{annotateEnableButtonFlipVertical:B=!1}=t,{annotateEnableSelectImagePreset:O=!1}=t,{annotateEnableDropImagePreset:D=!0}=t,{annotatePresets:_=[]}=t,{annotateWillRenderShapePresetToolbar:W}=t,{annotateWillRenderShapeStyleControls:N}=t,{enableViewTool:V}=t,{enableSelectToolToAddShape:j}=t,{enableTapToAddText:U}=t,{enableAutoSelectMoveTool:H}=t,{enableMoveTool:G}=t,{enableMultiSelect:X}=t,{willRenderShapeControls:Z}=t,{willRenderShapeTextControls:Y}=t,{beforeAddShape:q}=t,{beforeRemoveShape:K}=t,{beforeDeselectShape:J}=t,{beforeSelectShape:Q}=t,{beforeUpdateShape:ee}=t,{rootRect:et,imageAnnotation:ei,imageSize:er,imageRotation:en,imageFlipX:eo,imageFlipY:ea,imageTransforms:el,imageTransformsInterpolated:es}=f;return oX(e,et,e=>r(59,u=e)),oX(e,er,e=>r(58,c=e)),oX(e,en,e=>r(47,h=e)),oX(e,eo,e=>r(44,l=e)),oX(e,ea,e=>r(43,a=e)),oX(e,el,e=>r(57,d=e)),oX(e,es,e=>r(56,s=e)),e.$$set=e=>{"isActive"in e&&r(2,p=e.isActive),"isActiveFraction"in e&&r(3,$=e.isActiveFraction),"isVisible"in e&&r(4,m=e.isVisible),"stores"in e&&r(5,f=e.stores),"locale"in e&&r(6,g=e.locale),"markupEditorToolbar"in e&&r(7,y=e.markupEditorToolbar),"markupEditorToolStyles"in e&&r(8,x=e.markupEditorToolStyles),"markupEditorToolRetainStyles"in e&&r(9,b=e.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in e&&r(10,v=e.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in e&&r(11,w=e.markupEditorToolSelectRadius),"markupEditorTextInputMode"in e&&r(12,S=e.markupEditorTextInputMode),"markupEditorToolShareStyles"in e&&r(13,k=e.markupEditorToolShareStyles),"markupEditorWillStartInteraction"in e&&r(14,C=e.markupEditorWillStartInteraction),"markupEditorGridSize"in e&&r(15,T=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&r(16,M=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&r(17,P=e.markupEditorSnapToContext),"annotateGridSize"in e&&r(18,E=e.annotateGridSize),"annotateSnapToContext"in e&&r(19,R=e.annotateSnapToContext),"willRenderShapePresetToolbar"in e&&r(20,I=e.willRenderShapePresetToolbar),"annotateTools"in e&&r(21,A=e.annotateTools),"annotateToolShapes"in e&&r(22,L=e.annotateToolShapes),"annotateShapeControls"in e&&r(23,F=e.annotateShapeControls),"annotateActiveTool"in e&&r(0,z=e.annotateActiveTool),"annotateEnableButtonFlipVertical"in e&&r(24,B=e.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in e&&r(25,O=e.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in e&&r(26,D=e.annotateEnableDropImagePreset),"annotatePresets"in e&&r(27,_=e.annotatePresets),"annotateWillRenderShapePresetToolbar"in e&&r(28,W=e.annotateWillRenderShapePresetToolbar),"annotateWillRenderShapeStyleControls"in e&&r(29,N=e.annotateWillRenderShapeStyleControls),"enableViewTool"in e&&r(30,V=e.enableViewTool),"enableSelectToolToAddShape"in e&&r(31,j=e.enableSelectToolToAddShape),"enableTapToAddText"in e&&r(32,U=e.enableTapToAddText),"enableAutoSelectMoveTool"in e&&r(33,H=e.enableAutoSelectMoveTool),"enableMoveTool"in e&&r(34,G=e.enableMoveTool),"enableMultiSelect"in e&&r(35,X=e.enableMultiSelect),"willRenderShapeControls"in e&&r(36,Z=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&r(37,Y=e.willRenderShapeTextControls),"beforeAddShape"in e&&r(38,q=e.beforeAddShape),"beforeRemoveShape"in e&&r(39,K=e.beforeRemoveShape),"beforeDeselectShape"in e&&r(40,J=e.beforeDeselectShape),"beforeSelectShape"in e&&r(41,Q=e.beforeSelectShape),"beforeUpdateShape"in e&&r(42,ee=e.beforeUpdateShape)},e.$$.update=()=>{0x1e003000&e.$$.dirty[1]&&r(46,n=e=>yf(e,u,c,s.origin,s.translation,d.rotation.z,s.scale,l,a)),0x1e003000&e.$$.dirty[1]&&r(45,o=e=>ym(e,u,c,s.origin,s.translation,d.rotation.z,s.scale,l,a))},[z,"annotate",p,$,m,f,g,y,x,b,v,w,S,k,C,T,M,P,E,R,I,A,L,F,B,O,D,_,W,N,V,j,U,H,G,X,Z,Y,q,K,J,Q,ee,a,l,o,n,h,et,ei,er,en,eo,ea,el,es,s,d,c,u,function(e){r(0,z=e)},function(t){aM.call(this,e,t)}]}function yb(e){let t,r,n;function o(t){e[52](t)}let a={utilKey:e[1],stores:e[5],locale:e[6],isActive:e[2],isActiveFraction:e[3],isVisible:e[4],mapScreenPointToImagePoint:e[44],mapImagePointToScreenPoint:e[43],shapes:e[46],toolbar:e[20]||e[7],toolShapes:e[21]||e[8],toolRetainStyles:e[9],shapeControls:e[22]||e[10],shapePresets:e[26],enableSelectToolToAddShape:e[29],enableTapToAddText:e[30],enableViewTool:e[31],enableMoveTool:e[32],enableAutoSelectMoveTool:e[33],enableMultiSelect:e[34],snapThreshold:e[16],gridSize:ri(e[18])?e[18]:e[15],enableSnapToContext:yg(e[19])?e[19]:e[17],enableToolShareStyles:e[13],enablePresetSelectImage:e[24],enablePresetDropImage:e[25],enableButtonFlipVertical:e[23],parentRect:e[45],toolSelectRadius:e[11],textInputMode:e[12],willStartInteraction:e[42],willRenderPresetToolbar:e[27]||e[14],willRenderShapeStyleControls:e[28],hooks:{willRenderShapeControls:e[35],willRenderShapeTextControls:e[36],beforeAddShape:e[37],beforeRemoveShape:e[38],beforeDeselectShape:e[39],beforeSelectShape:e[40],beforeUpdateShape:e[41]}};return void 0!==e[0]&&(a.toolActive=e[0]),t=new y$({props:a}),aE.push(()=>a0(t,"toolActive",o)),t.$on("measure",e[53]),{c(){a1(t.$$.fragment)},m(e,r){a2(t,e,r),n=!0},p(e,n){let o={};32&n[0]&&(o.stores=e[5]),64&n[0]&&(o.locale=e[6]),4&n[0]&&(o.isActive=e[2]),8&n[0]&&(o.isActiveFraction=e[3]),16&n[0]&&(o.isVisible=e[4]),8192&n[1]&&(o.mapScreenPointToImagePoint=e[44]),4096&n[1]&&(o.mapImagePointToScreenPoint=e[43]),1048704&n[0]&&(o.toolbar=e[20]||e[7]),2097408&n[0]&&(o.toolShapes=e[21]||e[8]),512&n[0]&&(o.toolRetainStyles=e[9]),4195328&n[0]&&(o.shapeControls=e[22]||e[10]),0x4000000&n[0]&&(o.shapePresets=e[26]),0x20000000&n[0]&&(o.enableSelectToolToAddShape=e[29]),0x40000000&n[0]&&(o.enableTapToAddText=e[30]),1&n[1]&&(o.enableViewTool=e[31]),2&n[1]&&(o.enableMoveTool=e[32]),4&n[1]&&(o.enableAutoSelectMoveTool=e[33]),8&n[1]&&(o.enableMultiSelect=e[34]),65536&n[0]&&(o.snapThreshold=e[16]),294912&n[0]&&(o.gridSize=ri(e[18])?e[18]:e[15]),655360&n[0]&&(o.enableSnapToContext=yg(e[19])?e[19]:e[17]),8192&n[0]&&(o.enableToolShareStyles=e[13]),0x1000000&n[0]&&(o.enablePresetSelectImage=e[24]),0x2000000&n[0]&&(o.enablePresetDropImage=e[25]),8388608&n[0]&&(o.enableButtonFlipVertical=e[23]),2048&n[0]&&(o.toolSelectRadius=e[11]),4096&n[0]&&(o.textInputMode=e[12]),2048&n[1]&&(o.willStartInteraction=e[42]),0x8004000&n[0]&&(o.willRenderPresetToolbar=e[27]||e[14]),0x10000000&n[0]&&(o.willRenderShapeStyleControls=e[28]),2032&n[1]&&(o.hooks={willRenderShapeControls:e[35],willRenderShapeTextControls:e[36],beforeAddShape:e[37],beforeRemoveShape:e[38],beforeDeselectShape:e[39],beforeSelectShape:e[40],beforeUpdateShape:e[41]}),!r&&1&n[0]&&(r=!0,o.toolActive=e[0],aB(()=>r=!1)),t.$set(o)},i(e){n||(aU(t.$$.fragment,e),n=!0)},o(e){aH(t.$$.fragment,e),n=!1},d(e){a4(t,e)}}}function yv(e,t,r){let n,o,a,l,s;let{isActive:d}=t,{isActiveFraction:c}=t,{isVisible:u}=t,{stores:h}=t,{locale:p={}}=t,{markupEditorToolbar:$}=t,{markupEditorToolStyles:m}=t,{markupEditorToolRetainStyles:f}=t,{markupEditorShapeStyleControls:g}=t,{markupEditorToolSelectRadius:y}=t,{markupEditorTextInputMode:x}=t,{markupEditorToolShareStyles:b}=t,{willRenderShapePresetToolbar:v}=t,{markupEditorGridSize:w}=t,{markupEditorSnapThreshold:S}=t,{markupEditorSnapToContext:k=!0}=t,{decorateGridSize:C}=t,{decorateSnapToContext:T}=t,{decorateTools:M}=t,{decorateToolShapes:P}=t,{decorateShapeControls:E}=t,{decorateActiveTool:R}=t,{decorateEnableButtonFlipVertical:I=!1}=t,{decorateEnableSelectImagePreset:A=!1}=t,{decorateEnableDropImagePreset:L=!0}=t,{decoratePresets:F=[]}=t,{decorateWillRenderShapePresetToolbar:z}=t,{decorateWillRenderShapeStyleControls:B}=t,{enableSelectToolToAddShape:O}=t,{enableTapToAddText:D}=t,{enableViewTool:_}=t,{enableMoveTool:W}=t,{enableAutoSelectMoveTool:N}=t,{enableMultiSelect:V}=t,{willRenderShapeControls:j}=t,{willRenderShapeTextControls:U}=t,{beforeAddShape:H}=t,{beforeRemoveShape:G}=t,{beforeDeselectShape:X}=t,{beforeSelectShape:Z}=t,{beforeUpdateShape:Y}=t,{markupEditorWillStartInteraction:q}=t,{imageCropRect:K,imageDecoration:J,imageSelectionRectPresentation:Q,imageTransformsInterpolated:ee}=h;return oX(e,Q,e=>r(50,l=e)),oX(e,ee,e=>r(51,s=e)),e.$$set=e=>{"isActive"in e&&r(2,d=e.isActive),"isActiveFraction"in e&&r(3,c=e.isActiveFraction),"isVisible"in e&&r(4,u=e.isVisible),"stores"in e&&r(5,h=e.stores),"locale"in e&&r(6,p=e.locale),"markupEditorToolbar"in e&&r(7,$=e.markupEditorToolbar),"markupEditorToolStyles"in e&&r(8,m=e.markupEditorToolStyles),"markupEditorToolRetainStyles"in e&&r(9,f=e.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in e&&r(10,g=e.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in e&&r(11,y=e.markupEditorToolSelectRadius),"markupEditorTextInputMode"in e&&r(12,x=e.markupEditorTextInputMode),"markupEditorToolShareStyles"in e&&r(13,b=e.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in e&&r(14,v=e.willRenderShapePresetToolbar),"markupEditorGridSize"in e&&r(15,w=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&r(16,S=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&r(17,k=e.markupEditorSnapToContext),"decorateGridSize"in e&&r(18,C=e.decorateGridSize),"decorateSnapToContext"in e&&r(19,T=e.decorateSnapToContext),"decorateTools"in e&&r(20,M=e.decorateTools),"decorateToolShapes"in e&&r(21,P=e.decorateToolShapes),"decorateShapeControls"in e&&r(22,E=e.decorateShapeControls),"decorateActiveTool"in e&&r(0,R=e.decorateActiveTool),"decorateEnableButtonFlipVertical"in e&&r(23,I=e.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in e&&r(24,A=e.decorateEnableSelectImagePreset),"decorateEnableDropImagePreset"in e&&r(25,L=e.decorateEnableDropImagePreset),"decoratePresets"in e&&r(26,F=e.decoratePresets),"decorateWillRenderShapePresetToolbar"in e&&r(27,z=e.decorateWillRenderShapePresetToolbar),"decorateWillRenderShapeStyleControls"in e&&r(28,B=e.decorateWillRenderShapeStyleControls),"enableSelectToolToAddShape"in e&&r(29,O=e.enableSelectToolToAddShape),"enableTapToAddText"in e&&r(30,D=e.enableTapToAddText),"enableViewTool"in e&&r(31,_=e.enableViewTool),"enableMoveTool"in e&&r(32,W=e.enableMoveTool),"enableAutoSelectMoveTool"in e&&r(33,N=e.enableAutoSelectMoveTool),"enableMultiSelect"in e&&r(34,V=e.enableMultiSelect),"willRenderShapeControls"in e&&r(35,j=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&r(36,U=e.willRenderShapeTextControls),"beforeAddShape"in e&&r(37,H=e.beforeAddShape),"beforeRemoveShape"in e&&r(38,G=e.beforeRemoveShape),"beforeDeselectShape"in e&&r(39,X=e.beforeDeselectShape),"beforeSelectShape"in e&&r(40,Z=e.beforeSelectShape),"beforeUpdateShape"in e&&r(41,Y=e.beforeUpdateShape),"markupEditorWillStartInteraction"in e&&r(42,q=e.markupEditorWillStartInteraction)},e.$$.update=()=>{1048576&e.$$.dirty[1]&&r(49,n=s?s.scale:1),786432&e.$$.dirty[1]&&r(44,o=e=>{let t=eV(e);return t.x-=l.x,t.y-=l.y,t.x/=n,t.y/=n,t}),786432&e.$$.dirty[1]&&r(43,a=e=>{let t=eV(e);return t.x*=n,t.y*=n,t.x+=l.x,t.y+=l.y,t})},[R,"decorate",d,c,u,h,p,$,m,f,g,y,x,b,v,w,S,k,C,T,M,P,E,I,A,L,F,z,B,O,D,_,W,N,V,j,U,H,G,X,Z,Y,q,a,o,K,J,Q,ee,n,l,s,function(e){r(0,R=e)},function(t){aM.call(this,e,t)}]}function yw(e){let t,r;return(t=new y$({props:{stores:e[3],locale:e[4],isActive:e[0],isActiveFraction:e[1],isVisible:e[2],mapScreenPointToImagePoint:e[26],mapImagePointToScreenPoint:e[25],utilKey:"sticker",shapePresets:e[5],shapes:e[6]?e[35]:e[36],toolActive:"preset",imageFlipX:!!e[6]&&e[24],imageFlipY:!!e[6]&&e[23],imageRotation:e[6]?e[31]:0,parentRect:e[6]?e[37]:e[33],snapThreshold:e[29],gridSize:e[28],enableMultiSelect:e[12],enableSnapToContext:e[27],enablePresetDropImage:e[7],enablePresetSelectImage:e[30],enableButtonFlipVertical:e[10]||e[8],toolSelectRadius:e[15],willStartInteraction:e[22],willRenderPresetToolbar:e[11]||e[9]||e[16],hooks:{willRenderShapeControls:e[13],willRenderShapeTextControls:e[14],beforeAddShape:e[17],beforeRemoveShape:e[18],beforeDeselectShape:e[19],beforeSelectShape:e[20],beforeUpdateShape:e[21]}}})).$on("measure",e[60]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};8&r[0]&&(n.stores=e[3]),16&r[0]&&(n.locale=e[4]),1&r[0]&&(n.isActive=e[0]),2&r[0]&&(n.isActiveFraction=e[1]),4&r[0]&&(n.isVisible=e[2]),0x4000000&r[0]&&(n.mapScreenPointToImagePoint=e[26]),0x2000000&r[0]&&(n.mapImagePointToScreenPoint=e[25]),32&r[0]&&(n.shapePresets=e[5]),64&r[0]&&(n.shapes=e[6]?e[35]:e[36]),0x1000040&r[0]&&(n.imageFlipX=!!e[6]&&e[24]),8388672&r[0]&&(n.imageFlipY=!!e[6]&&e[23]),64&r[0]|1&r[1]&&(n.imageRotation=e[6]?e[31]:0),64&r[0]&&(n.parentRect=e[6]?e[37]:e[33]),0x20000000&r[0]&&(n.snapThreshold=e[29]),0x10000000&r[0]&&(n.gridSize=e[28]),4096&r[0]&&(n.enableMultiSelect=e[12]),0x8000000&r[0]&&(n.enableSnapToContext=e[27]),128&r[0]&&(n.enablePresetDropImage=e[7]),0x40000000&r[0]&&(n.enablePresetSelectImage=e[30]),1280&r[0]&&(n.enableButtonFlipVertical=e[10]||e[8]),32768&r[0]&&(n.toolSelectRadius=e[15]),4194304&r[0]&&(n.willStartInteraction=e[22]),68096&r[0]&&(n.willRenderPresetToolbar=e[11]||e[9]||e[16]),4087808&r[0]&&(n.hooks={willRenderShapeControls:e[13],willRenderShapeTextControls:e[14],beforeAddShape:e[17],beforeRemoveShape:e[18],beforeDeselectShape:e[19],beforeSelectShape:e[20],beforeUpdateShape:e[21]}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yS(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y;let{isActive:x}=t,{isActiveFraction:b}=t,{isVisible:v}=t,{stores:w}=t,{locale:S={}}=t,{stickers:k=[]}=t,{stickerForceEnable:C=!1}=t,{stickerStickToImage:T=!1}=t,{stickerEnableSelectImagePreset:M=!0}=t,{stickerEnableDropImagePreset:P=!0}=t,{stickerEnableButtonFlipVertical:E=!1}=t,{stickerWillRenderShapePresetToolbar:R}=t,{stickerEnableSelectImage:I=!0}=t,{stickersEnableButtonFlipVertical:A=!1}=t,{stickersWillRenderShapePresetToolbar:L}=t,{markupEditorGridSize:F=0}=t,{markupEditorSnapThreshold:z=0}=t,{markupEditorSnapToContext:B=!1}=t,{enableMultiSelect:O}=t,{annotateGridSize:D}=t,{annotateSnapToContext:_}=t,{decorateGridSize:W}=t,{decorateSnapToContext:N}=t,{willRenderShapeControls:V}=t,{willRenderShapeTextControls:j}=t,{markupEditorToolSelectRadius:U}=t,{willRenderShapePresetToolbar:H}=t,{beforeAddShape:G}=t,{beforeRemoveShape:X}=t,{beforeDeselectShape:Z}=t,{beforeSelectShape:Y}=t,{beforeUpdateShape:q}=t,{markupEditorWillStartInteraction:K}=t,{rootRect:J,imageCropRect:Q,imageSelectionRectPresentation:ee,imageAnnotation:et,imageDecoration:ei,imageSize:er,imageTransforms:en,imageTransformsInterpolated:eo,imageRotation:ea,imageFlipX:el,imageFlipY:es}=w;return oX(e,J,e=>r(59,g=e)),oX(e,ee,e=>r(55,u=e)),oX(e,er,e=>r(58,f=e)),oX(e,en,e=>r(57,m=e)),oX(e,eo,e=>r(56,$=e)),oX(e,ea,e=>r(31,y=e)),oX(e,el,e=>r(24,p=e)),oX(e,es,e=>r(23,h=e)),e.$$set=e=>{"isActive"in e&&r(0,x=e.isActive),"isActiveFraction"in e&&r(1,b=e.isActiveFraction),"isVisible"in e&&r(2,v=e.isVisible),"stores"in e&&r(3,w=e.stores),"locale"in e&&r(4,S=e.locale),"stickers"in e&&r(5,k=e.stickers),"stickerForceEnable"in e&&r(44,C=e.stickerForceEnable),"stickerStickToImage"in e&&r(6,T=e.stickerStickToImage),"stickerEnableSelectImagePreset"in e&&r(45,M=e.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in e&&r(7,P=e.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in e&&r(8,E=e.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in e&&r(9,R=e.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in e&&r(46,I=e.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in e&&r(10,A=e.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in e&&r(11,L=e.stickersWillRenderShapePresetToolbar),"markupEditorGridSize"in e&&r(47,F=e.markupEditorGridSize),"markupEditorSnapThreshold"in e&&r(48,z=e.markupEditorSnapThreshold),"markupEditorSnapToContext"in e&&r(49,B=e.markupEditorSnapToContext),"enableMultiSelect"in e&&r(12,O=e.enableMultiSelect),"annotateGridSize"in e&&r(50,D=e.annotateGridSize),"annotateSnapToContext"in e&&r(51,_=e.annotateSnapToContext),"decorateGridSize"in e&&r(52,W=e.decorateGridSize),"decorateSnapToContext"in e&&r(53,N=e.decorateSnapToContext),"willRenderShapeControls"in e&&r(13,V=e.willRenderShapeControls),"willRenderShapeTextControls"in e&&r(14,j=e.willRenderShapeTextControls),"markupEditorToolSelectRadius"in e&&r(15,U=e.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in e&&r(16,H=e.willRenderShapePresetToolbar),"beforeAddShape"in e&&r(17,G=e.beforeAddShape),"beforeRemoveShape"in e&&r(18,X=e.beforeRemoveShape),"beforeDeselectShape"in e&&r(19,Z=e.beforeDeselectShape),"beforeSelectShape"in e&&r(20,Y=e.beforeSelectShape),"beforeUpdateShape"in e&&r(21,q=e.beforeUpdateShape),"markupEditorWillStartInteraction"in e&&r(22,K=e.markupEditorWillStartInteraction)},e.$$.update=()=>{0x2000000&e.$$.dirty[1]&&r(54,n=$?$.scale:1),49152&e.$$.dirty[1]&&r(30,o=!1!==M&&I),131072&e.$$.dirty[1]&&r(29,a=z),64&e.$$.dirty[0]|2686976&e.$$.dirty[1]&&r(28,l=T?ri(D)?D:F:ri(W)?W:F),64&e.$$.dirty[0]|5505024&e.$$.dirty[1]&&r(27,s=T?yg(_)?_:B:yg(N)?N:B),0x1800040&e.$$.dirty[0]|0x1f800000&e.$$.dirty[1]&&r(26,d=T?e=>yf(e,g,f,$.origin,$.translation,m.rotation.z,$.scale,p,h):e=>{let t=eV(e);return t.x-=u.x,t.y-=u.y,t.x/=n,t.y/=n,t}),0x1800040&e.$$.dirty[0]|0x1f800000&e.$$.dirty[1]&&r(25,c=T?e=>ym(e,g,f,$.origin,$.translation,m.rotation.z,$.scale,p,h):e=>{let t=eV(e);return t.x*=n,t.y*=n,t.x+=u.x,t.y+=u.y,t})},[x,b,v,w,S,k,T,P,E,R,A,L,O,V,j,U,H,G,X,Z,Y,q,K,h,p,c,d,s,l,a,o,y,J,Q,ee,et,ei,er,en,eo,ea,el,es,"sticker",C,M,I,F,z,B,D,_,W,N,n,u,$,m,f,g,function(t){aM.call(this,e,t)}]}function yk(e){let t,r;let n=(e[14](e[36].value)||"")+"";return{c(){t=new af(!1),r=al(),t.a=r},m(e,o){t.m(n,e,o),at(e,r,o)},p(e,r){32&r[1]&&n!==(n=(e[14](e[36].value)||"")+"")&&t.p(n)},i:oB,o:oB,d(e){e&&ai(r),e&&t.d()}}}function yC(e){let t,r;return t=new hJ({props:{items:e[16](e[36].value)}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};32&r[1]&&(n.items=e[16](e[36].value)),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yT(e){let t,r,n,o,a,l,s,d;let c=(U(e[36].label)?e[36].label(e[1]):e[36].label)+"",u=[yC,yk],h=[];function p(e,t){return+(32&t[1]&&(r=null),null==r&&(r=!!e[15](e[36].value)),!r)}return o=h[n=p(e,[-1,-1])]=u[n](e),{c(){t=ar("div"),o.c(),a=aa(),l=ar("span"),s=ao(c),ad(t,"slot","option")},m(e,r){at(e,t,r),h[n].m(t,null),o9(t,a),o9(t,l),o9(l,s),d=!0},p(e,r){let l=n;(n=p(e,r))===l?h[n].p(e,r):(aV(),aH(h[l],1,1,()=>{h[l]=null}),aj(),(o=h[n])?o.p(e,r):(o=h[n]=u[n](e)).c(),aU(o,1),o.m(t,a)),(!d||2&r[0]|32&r[1])&&c!==(c=(U(e[36].label)?e[36].label(e[1]):e[36].label)+"")&&ah(s,c)},i(e){d||(aU(o),d=!0)},o(e){aH(o),d=!1},d(e){e&&ai(t),h[n].d()}}}function yM(e){let t,r;return t=new uS({props:{locale:e[1],class:"PinturaControlList",layout:"row",options:e[2],selectedIndex:e[6],onchange:e[12],$$slots:{option:[yT,({option:e})=>({36:e}),({option:e})=>[0,32*!!e]]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};2&r[0]&&(n.locale=e[1]),4&r[0]&&(n.options=e[2]),64&r[0]&&(n.selectedIndex=e[6]),2&r[0]|96&r[1]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yP(e){let t,r,n,o,a;return r=new gL({props:{locale:e[1],class:"PinturaControlPanels",shapeProps:e[4],onchange:e[13],controls:e[3],scrollElasticity:e[7]}}),o=new pa({props:{elasticity:e[10],$$slots:{default:[yM]},$$scope:{ctx:e}}}),{c(){t=ar("div"),a1(r.$$.fragment),n=aa(),a1(o.$$.fragment),ad(t,"slot","footer"),a$(t,"transform",e[5])},m(e,l){at(e,t,l),a2(r,t,null),o9(t,n),a2(o,t,null),a=!0},p(e,n){let a={};2&n[0]&&(a.locale=e[1]),16&n[0]&&(a.shapeProps=e[4]),8&n[0]&&(a.controls=e[3]),128&n[0]&&(a.scrollElasticity=e[7]),r.$set(a);let l={};70&n[0]|64&n[1]&&(l.$$scope={dirty:n,ctx:e}),o.$set(l),32&n[0]&&a$(t,"transform",e[5])},i(e){a||(aU(r.$$.fragment,e),aU(o.$$.fragment,e),a=!0)},o(e){aH(r.$$.fragment,e),aH(o.$$.fragment,e),a=!1},d(e){e&&ai(t),a4(r),a4(o)}}}function yE(e){let t,r;return(t=new mK({props:{$$slots:{footer:[yP]},$$scope:{ctx:e}}})).$on("measure",e[25]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};254&r[0]|64&r[1]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yR(e,t,r){let n,o,a,l,s,d,c,u;let h,p=oB,$=()=>(p(),p=oH(m,e=>r(22,h=e)),m);e.$$.on_destroy.push(()=>p());let{isActive:m}=t;$();let{stores:f}=t,{locale:g={}}=t,{frameStyles:y={}}=t,{frameOptions:x=[]}=t,{markupEditorShapeStyleControls:b}=t,v=aT("elasticityMultiplier");oX(e,v,e=>r(24,c=e));let{history:w,animation:S,scrollElasticity:k,imageFrame:C,allowPan:T,allowZoom:M,allowZoomControls:P,allowPlayPause:E}=f;oX(e,S,e=>r(23,s=e)),oX(e,C,e=>r(4,d=e));let R={},I=e=>/rect|path|circle|line|<g>/i.test(e),A=e=>/div/i.test(e),L=e=>A(e)||gF(e)?e:I(e)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${e}</svg>`:`<img src="${e}" alt=""/>`,F=dk(20*!!s);return oX(e,F,e=>r(21,l=e)),e.$$set=e=>{"isActive"in e&&$(r(0,m=e.isActive)),"stores"in e&&r(19,f=e.stores),"locale"in e&&r(1,g=e.locale),"frameStyles"in e&&r(20,y=e.frameStyles),"frameOptions"in e&&r(2,x=e.frameOptions),"markupEditorShapeStyleControls"in e&&r(3,b=e.markupEditorShapeStyleControls)},e.$$.update=()=>{4194304&e.$$.dirty[0]&&T.set(h),4194304&e.$$.dirty[0]&&M.set(h),4194304&e.$$.dirty[0]&&P.set(h),4194304&e.$$.dirty[0]&&h&&E.set(!0),0x1000000&e.$$.dirty[0]&&r(7,n=c*k),20&e.$$.dirty[0]&&r(6,o=d?x.findIndex(([e])=>e===d.id):0),0xc00000&e.$$.dirty[0]&&s&&F.set(20*!h),2097152&e.$$.dirty[0]&&r(5,a=l?`translateY(${l}px)`:"none")},[m,g,x,b,d,a,o,n,v,S,k,C,({value:e})=>{let t=y[e];if(!t||!t.shape){C.set(void 0),w.write();return}let{shape:r}=t,n={id:e,...r2(r),...Object.keys(R).reduce((e,t)=>(r[t]&&(e[t]=R[t]),e),{})};C.set(n),w.write()},function(e){rn(e,"frameColor")&&(R.frameColor=e.frameColor),d&&(oi(d,e),C.set(d),clearTimeout(u),u=setTimeout(()=>{w.write()},200))},e=>{let t=y[e];if(t&&t.thumb)return L(t.thumb)},e=>{let t=y[e];return!!t&&!!t.thumb&&ro(t.thumb)},e=>y[e].thumb,F,"frame",f,y,l,h,s,c,function(t){aM.call(this,e,t)}]}function yI(e){let t,r,n,o,a,l,s,d;return{c(){t=ar("div"),r=ar("input"),o=aa(),a=ar("label"),l=ao(e[1]),ad(r,"id",e[0]),ad(r,"type","number"),ad(r,"min","1"),ad(r,"inputmode","numeric"),ad(r,"pattern","[0-9]*"),ad(r,"data-state",e[3]),ad(r,"autocomplete","off"),ad(r,"placeholder",e[4]),r.value=n=void 0===e[5]?"":e[7](e[5]+""),ad(a,"for",e[0]),ad(a,"title",e[2]),ad(a,"aria-label",e[2]),ad(t,"class","PinturaInputDimension")},m(n,c){at(n,t,c),o9(t,r),o9(t,o),o9(t,a),o9(a,l),s||(d=as(r,"input",e[8]),s=!0)},p(e,[t]){1&t&&ad(r,"id",e[0]),8&t&&ad(r,"data-state",e[3]),16&t&&ad(r,"placeholder",e[4]),160&t&&n!==(n=void 0===e[5]?"":e[7](e[5]+""))&&r.value!==n&&(r.value=n),2&t&&ah(l,e[1]),1&t&&ad(a,"for",e[0]),4&t&&ad(a,"title",e[2]),4&t&&ad(a,"aria-label",e[2])},i:oB,o:oB,d(e){e&&ai(t),s=!1,d()}}}function yA(e,t,r){let{id:n}=t,{label:o}=t,{title:a}=t,{state:l}=t,{placeholder:s}=t,{value:d}=t,{onchange:c}=t,{format:u=e=>e.replace(/\D/g,"")}=t;return e.$$set=e=>{"id"in e&&r(0,n=e.id),"label"in e&&r(1,o=e.label),"title"in e&&r(2,a=e.title),"state"in e&&r(3,l=e.state),"placeholder"in e&&r(4,s=e.placeholder),"value"in e&&r(5,d=e.value),"onchange"in e&&r(6,c=e.onchange),"format"in e&&r(7,u=e.format)},[n,o,a,l,s,d,c,u,e=>c(u(e.currentTarget.value))]}class yL extends a3{constructor(e){super(),a5(this,e,yA,yI,oj,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function yF(e){let t;return{c(){t=an("g")},m(r,n){at(r,t,n),t.innerHTML=e[2]},p(e,r){4&r&&(t.innerHTML=e[2])},d(e){e&&ai(t)}}}function yz(e){let t,r,n,o,a,l,s,d;return a=new cx({props:{$$slots:{default:[yF]},$$scope:{ctx:e}}}),{c(){t=ar("div"),r=ar("input"),n=aa(),o=ar("label"),a1(a.$$.fragment),ad(r,"id",e[0]),ad(r,"class","implicit"),ad(r,"type","checkbox"),r.checked=e[1],ad(o,"for",e[0]),ad(o,"title",e[3])},m(c,u){at(c,t,u),o9(t,r),o9(t,n),o9(t,o),a2(a,o,null),l=!0,s||(d=as(r,"change",e[5]),s=!0)},p(e,[t]){(!l||1&t)&&ad(r,"id",e[0]),(!l||2&t)&&(r.checked=e[1]);let n={};68&t&&(n.$$scope={dirty:t,ctx:e}),a.$set(n),(!l||1&t)&&ad(o,"for",e[0]),(!l||8&t)&&ad(o,"title",e[3])},i(e){l||(aU(a.$$.fragment,e),l=!0)},o(e){aH(a.$$.fragment,e),l=!1},d(e){e&&ai(t),a4(a),s=!1,d()}}}function yB(e,t,r){let{id:n}=t,{locked:o}=t,{icon:a}=t,{title:l}=t,{onchange:s}=t;return e.$$set=e=>{"id"in e&&r(0,n=e.id),"locked"in e&&r(1,o=e.locked),"icon"in e&&r(2,a=e.icon),"title"in e&&r(3,l=e.title),"onchange"in e&&r(4,s=e.onchange)},[n,o,a,l,s,e=>s(e.currentTarget.checked)]}class yO extends a3{constructor(e){super(),a5(this,e,yB,yz,oj,{id:0,locked:1,icon:2,title:3,onchange:4})}}function yD(e){let t;return{c(){t=ao("Save")},m(e,r){at(e,t,r)},d(e){e&&ai(t)}}}function y_(e){let t,r,n,o,a,l,s,d,c,u,h,p,$;let m=e[1].resizeLabelFormCaption+"";return d=new hJ({props:{items:e[4]}}),u=new h3({props:{type:"submit",class:"implicit",$$slots:{default:[yD]},$$scope:{ctx:e}}}),{c(){t=ar("form"),r=ar("div"),n=ar("fieldset"),o=ar("legend"),a=ao(m),l=aa(),s=ar("div"),a1(d.$$.fragment),c=aa(),a1(u.$$.fragment),ad(o,"class","implicit"),ad(s,"class","PinturaFieldsetInner"),ad(r,"class","PinturaFormInner"),ad(t,"slot","footer"),a$(t,"transform",e[3])},m(m,f){if(at(m,t,f),o9(t,r),o9(r,n),o9(n,o),o9(o,a),o9(n,l),o9(n,s),a2(d,s,null),e[66](s),o9(r,c),a2(u,r,null),h=!0,!p){var g;$=[as(s,"focusin",e[15]),as(s,"focusout",e[16]),as(t,"submit",(g=e[17],function(e){return e.preventDefault(),g.call(this,e)}))],p=!0}},p(e,r){(!h||2&r[0])&&m!==(m=e[1].resizeLabelFormCaption+"")&&ah(a,m);let n={};16&r[0]&&(n.items=e[4]),d.$set(n);let o={};32&r[3]&&(o.$$scope={dirty:r,ctx:e}),u.$set(o),8&r[0]&&a$(t,"transform",e[3])},i(e){h||(aU(d.$$.fragment,e),aU(u.$$.fragment,e),h=!0)},o(e){aH(d.$$.fragment,e),aH(u.$$.fragment,e),h=!1},d(r){r&&ai(t),a4(d),e[66](null),a4(u),p=!1,oN($)}}}function yW(e){let t,r;return(t=new mK({props:{$$slots:{footer:[y_]},$$scope:{ctx:e}}})).$on("measure",e[67]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};30&r[0]|32&r[3]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yN(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,x,b,v,w,S,k,C,T,M,E,R,I,A,L,F,z,B,O,D,_,W,N;let V,j=oB,H=()=>(j(),j=oH(X,e=>r(50,V=e)),X);e.$$.on_destroy.push(()=>j());let G=(e,t=0,r=9999)=>{if(P(e)&&!(e=e.replace(/\D/g,"")).length)return;let n=Math.round(e);if(!Number.isNaN(n))return lb(n,t,r)},{isActive:X}=t;H();let{stores:Z}=t,{locale:Y={}}=t,{resizeMinSize:q=td(1,1)}=t,{resizeMaxSize:J=td(9999,9999)}=t,{resizeAspectRatioLocked:Q=!1}=t,{resizeEnableButtonLockAspectRatio:ee=!0}=t,{resizeSizePresetOptions:et}=t,{resizeWidthPresetOptions:ei}=t,{resizeHeightPresetOptions:er}=t,{resizeWillRenderFooter:en=ey}=t,{resizeFormatIconButtonMaintainAspectRatio:eo=function(e){let{active:t,activeFraction:r}=e;return{active:t,activeFraction:(r-1)*3}}}=t,ea=dk(0,{stiffness:.15,damping:.3});oX(e,ea,e=>r(55,y=e));let{animation:el,imageSize:es,imageCropRect:ed,imageCropRectAspectRatio:ec,imageCropAspectRatio:eu,imageOutputSize:eh,imageSelectionZoom:ep,imageSelectionPan:e$,history:em,env:ef,allowPan:ex,allowZoom:eb,allowZoomControls:ev,allowPlayPause:ew}=Z;oX(e,el,e=>r(51,$=e)),oX(e,es,e=>r(74,I=e)),oX(e,ed,e=>r(53,f=e)),oX(e,ec,e=>r(54,g=e)),oX(e,eu,e=>r(73,T=e)),oX(e,eh,e=>r(62,C=e)),oX(e,ep,e=>r(75,A=e)),oX(e,e$,e=>r(76,L=e)),oX(e,ef,e=>r(52,m=e));let eS=K(),ek=eB(),eC=()=>{ek=L,_=A},eT=e=>{if(o1(e$,L=eB(),L),!e||!f){o1(ep,A=1,A);return}o1(ep,A=e.width/f.width||e.height/f.height,A)},eM=()=>{o1(e$,L=ek,L),o1(ep,A=_,A)},eP=(e,t,r,n,o)=>null!=e&&r!==t?e>=n[t]&&e<=o[t]?"valid":"invalid":"undetermined",eE=(e,t,r)=>Math.round(null!=e?e*t:r.width),eR=(e,t,r)=>Math.round(null!=e?e/t:r.height),eI=()=>{Q&&z&&B&&("width"===O?r(40,B=Math.round(z/g)):"height"===O?r(39,z=Math.round(B*g)):("width"===D?r(40,B=Math.round(z/g)):"height"===D&&r(39,z=Math.round(B*g)),eA()))},eA=e=>{let t=G(z),n=G(B),o=t,a=n,l=o&&a,s=e||g;if(!o&&!a)return;o&&!a?a=Math.round(o/s):a&&!o&&(o=Math.round(a*s)),s=e||l?eg(o,a):g;let d=td(o,a);tm(J,d)||(d=t1(J,s)),tm(d,q)||(d=tJ(q,s)),r(39,z=null!=t?Math.round(d.width):void 0),r(40,B=null!=n?Math.round(d.height):void 0)},eL=()=>{eA();let{width:e,height:t}=C||{};(e!==z||t!==B)&&(z||B?(z&&B&&o1(eu,T=z/B,T),o1(eh,C=td(z,B),C)):(o1(eu,T=I.width/I.height,T),o1(eu,T=void 0,T),o1(eh,C=void 0,C)),em.write())},eF=eh.subscribe(e=>{if(!e){r(39,z=void 0),r(40,B=void 0);return}r(39,z=e.width),r(40,B=e.height),eA()}),ez=eu.subscribe(e=>{(z||B)&&e&&(z&&B&&eg(z,B)!==e?(r(40,B=z/e),eA(e)):eA())}),eO=e=>P(e[0])?(e[1]=e[1].map(eO),e):ri(e)?[e,""+e]:e,eD=e=>{if(P(e[0]))return e[1]=e[1].map(eD),e;let[t,r]=e;if(ri(t)&&ri(r)){let[e,n]=[t,r];r=`${e} &times; ${n}`,t=[e,n]}return[t,r]},e_=a7();oX(e,e_,e=>r(61,k=e));let eW=a7();oX(e,eW,e=>r(65,R=e));let eN=a7();oX(e,eN,e=>r(59,w=e));let eV=a7();oX(e,eV,e=>r(64,E=e));let ej=a7();oX(e,ej,e=>r(57,b=e));let eU=a7();oX(e,eU,e=>r(63,M=e));let eH=a9([eh,eW],([e,t],r)=>{if(!t)return r(-1);let n=t.findIndex(([t])=>{if(!t&&!e)return!0;if(!t)return!1;let[r,n]=t;return e.width===r&&e.height===n});r(n<0?0:n)});oX(e,eH,e=>r(60,S=e));let eG=a9([eh,eV],([e,t],r)=>{if(!t)return r(-1);let n=t.findIndex(([t])=>!t&&!e||!!t&&e.width===t);r(n<0?0:n)});oX(e,eG,e=>r(58,v=e));let eX=a9([eh,eU],([e,t],r)=>{if(!t)return r(-1);let n=t.findIndex(([t])=>!t&&!e||!!t&&e.height===t);r(n<0?0:n)});oX(e,eX,e=>r(56,x=e));let eZ=e=>{e&&!W&&(W={...f},N=T),e?(o1(eu,T=eg(e[0],e[1]),T),o1(eh,C=ta(e),C)):(o1(ed,f=W,f),o1(eu,T=N,T),o1(eh,C=void 0,C),W=void 0,N=void 0),em.write()},eY=aT("redrawTrigger"),eq=dk(20*!!$);return oX(e,eq,e=>r(49,p=e)),aS(()=>{eF(),ez()}),e.$$set=e=>{"isActive"in e&&H(r(0,X=e.isActive)),"stores"in e&&r(30,Z=e.stores),"locale"in e&&r(1,Y=e.locale),"resizeMinSize"in e&&r(31,q=e.resizeMinSize),"resizeMaxSize"in e&&r(32,J=e.resizeMaxSize),"resizeAspectRatioLocked"in e&&r(28,Q=e.resizeAspectRatioLocked),"resizeEnableButtonLockAspectRatio"in e&&r(33,ee=e.resizeEnableButtonLockAspectRatio),"resizeSizePresetOptions"in e&&r(34,et=e.resizeSizePresetOptions),"resizeWidthPresetOptions"in e&&r(35,ei=e.resizeWidthPresetOptions),"resizeHeightPresetOptions"in e&&r(36,er=e.resizeHeightPresetOptions),"resizeWillRenderFooter"in e&&r(37,en=e.resizeWillRenderFooter),"resizeFormatIconButtonMaintainAspectRatio"in e&&r(38,eo=e.resizeFormatIconButtonMaintainAspectRatio)},e.$$.update=()=>{524288&e.$$.dirty[1]&&ex.set(!V),524288&e.$$.dirty[1]&&eb.set(!V),524288&e.$$.dirty[1]&&ev.set(!V),524288&e.$$.dirty[1]&&V&&ew.set(!0),0x40000008&e.$$.dirty[1]&&et&&(o1(e_,k=et.map(eD),k),o1(eW,R=c0(k),R)),0x40000000&e.$$.dirty[1]&&r(48,l=!!k),0x20000000&e.$$.dirty[1]|8&e.$$.dirty[2]&&r(47,n=S>-1&&R[S][1]),0x10000010&e.$$.dirty[1]&&ei&&(o1(eN,w=ei.map(eO),w),o1(eV,E=c0(w),E)),0x10020000&e.$$.dirty[1]&&r(45,s=!l&&w),0x8000000&e.$$.dirty[1]|4&e.$$.dirty[2]&&r(46,o=v>-1&&E[v][1]),0x4000020&e.$$.dirty[1]&&er&&(o1(ej,b=er.map(eO),b),o1(eU,M=c0(b),M)),0x4020000&e.$$.dirty[1]&&r(44,d=!l&&b),0x2000000&e.$$.dirty[1]|2&e.$$.dirty[2]&&r(43,a=x>-1&&M[x][1]),155648&e.$$.dirty[1]&&r(42,c=!l&&!s&&!d),0x10000002&e.$$.dirty[0]|0x7fe3ffc7&e.$$.dirty[1]&&r(4,u=eY&&pX(()=>en([l&&["Dropdown","size-presets",{label:n,options:k,onchange:e=>eZ(e.value),selectedIndex:S}],s&&["Dropdown","width-presets",{label:o,options:w,onchange:e=>{r(39,z=e.value),eL()},selectedIndex:v}],s&&d&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],d&&["Dropdown","height-presets",{label:a,options:b,onchange:e=>{r(40,B=e.value),eL()},selectedIndex:x}],c&&[yL,"width-input",{id:`width-${eS}`,title:Y.resizeTitleInputWidth,label:Y.resizeLabelInputWidth,placeholder:eE(G(B),g,f),value:z,state:eP(G(z),"width",O,q,J),onchange:e=>{r(39,z=e),eI()}}],c&&ee&&[yO,"aspect-ratio-lock",{id:`aspect-ratio-lock-${eS}`,title:Y.resizeTitleButtonMaintainAspectRatio,icon:U(Y.resizeIconButtonMaintainAspectRatio)?Y.resizeIconButtonMaintainAspectRatio(Q,y):sF(Y.resizeIconButtonMaintainAspectRatio,eo({active:Q,activeFraction:y}),"{","}"),locked:Q,onchange:e=>{r(28,Q=e),eI()}}],c&&[yL,"height-input",{id:`height-${eS}`,title:Y.resizeTitleInputHeight,label:Y.resizeLabelInputHeight,placeholder:eR(G(z),g,f),value:B,state:eP(G(B),"height",O,q,J),onchange:e=>{r(40,B=e),eI()}}]].filter(Boolean),{...m},()=>eY.set({}))).filter(Boolean)),0x10000000&e.$$.dirty[0]&&ea.set(+!!Q),1024&e.$$.dirty[1]&&O&&(D=O),524288&e.$$.dirty[1]&&V&&eC(),524288&e.$$.dirty[1]|1&e.$$.dirty[2]&&(V?setTimeout(()=>eT(C),0):eM()),1572864&e.$$.dirty[1]&&$&&eq.set(20*!V),262144&e.$$.dirty[1]&&r(3,h=p?`translateY(${p}px)`:"none")},[X,Y,F,h,u,ea,el,es,ed,ec,eu,eh,ep,e$,ef,e=>{let t=e.target.id;/width/.test(t)?r(41,O="width"):/height/.test(t)?r(41,O="height"):/aspectRatio/i.test(t)?r(41,O="lock"):r(41,O=void 0)},e=>{F.contains(e.relatedTarget)||eL(),r(41,O=void 0)},eL,e_,eW,eN,eV,ej,eU,eH,eG,eX,eq,Q,"resize",Z,q,J,ee,et,ei,er,en,eo,z,B,O,c,a,d,s,o,n,l,p,V,$,m,f,g,y,x,b,v,w,S,k,C,M,E,R,function(e){aE[e?"unshift":"push"](()=>{r(2,F=e)})},function(t){aM.call(this,e,t)}]}function yV(e){let t,r;return(t=new y$({props:{stores:e[3],locale:e[4],isActive:e[0],isActiveFraction:e[1],isVisible:e[2],mapScreenPointToImagePoint:e[10],mapImagePointToScreenPoint:e[9],enableMultiSelect:e[6],utilKey:"redact",imageRotation:e[11],imageFlipX:e[8],imageFlipY:e[7],shapes:e[12],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:e[14],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:e[5],hooks:{willRenderShapeControls:e[25]}}})).$on("measure",e[26]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,[r]){let n={};8&r&&(n.stores=e[3]),16&r&&(n.locale=e[4]),1&r&&(n.isActive=e[0]),2&r&&(n.isActiveFraction=e[1]),4&r&&(n.isVisible=e[2]),1024&r&&(n.mapScreenPointToImagePoint=e[10]),512&r&&(n.mapImagePointToScreenPoint=e[9]),64&r&&(n.enableMultiSelect=e[6]),2048&r&&(n.imageRotation=e[11]),256&r&&(n.imageFlipX=e[8]),128&r&&(n.imageFlipY=e[7]),32&r&&(n.willStartInteraction=e[5]),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yj(e,t,r){let n,o,a,l,s,d,c,u,h;let{isActive:p}=t,{isActiveFraction:$}=t,{isVisible:m}=t,{stores:f}=t,{locale:g={}}=t,{markupEditorWillStartInteraction:y}=t,{enableMultiSelect:x}=t,{imageRedaction:b,rootRect:v,imageSize:w,imageRotation:S,imageFlipX:k,imageFlipY:C,imageTransforms:T,imageTransformsInterpolated:M}=f;return oX(e,v,e=>r(24,u=e)),oX(e,w,e=>r(23,c=e)),oX(e,S,e=>r(11,h=e)),oX(e,k,e=>r(8,l=e)),oX(e,C,e=>r(7,a=e)),oX(e,T,e=>r(22,d=e)),oX(e,M,e=>r(21,s=e)),e.$$set=e=>{"isActive"in e&&r(0,p=e.isActive),"isActiveFraction"in e&&r(1,$=e.isActiveFraction),"isVisible"in e&&r(2,m=e.isVisible),"stores"in e&&r(3,f=e.stores),"locale"in e&&r(4,g=e.locale),"markupEditorWillStartInteraction"in e&&r(5,y=e.markupEditorWillStartInteraction),"enableMultiSelect"in e&&r(6,x=e.enableMultiSelect)},e.$$.update=()=>{0x1e00180&e.$$.dirty&&r(10,n=e=>yf(e,u,c,s.origin,s.translation,d.rotation.z,s.scale,l,a)),0x1e00180&e.$$.dirty&&r(9,o=e=>ym(e,u,c,s.origin,s.translation,d.rotation.z,s.scale,l,a))},[p,$,m,f,g,y,x,a,l,o,n,h,b,v,w,S,k,C,T,M,"redact",s,d,c,u,e=>($z("to-front",$F(e[0])),e),function(t){aM.call(this,e,t)}]}function yU(e){let t;return{c(){t=ar("div")},m(e,r){at(e,t,r)},p:oB,d(e){e&&ai(t)}}}function yH(e){let t,r,n,o;return{c(){ad(t=ar("div"),"class","PinturaFillTile")},m(a,l){at(a,t,l),n||(o=o2(r=yJ.call(null,t,e[31].value)),n=!0)},p(e,t){r&&oV(r.update)&&1&t[1]&&r.update.call(null,e[31].value)},d(e){e&&ai(t),n=!1,o()}}}function yG(e){let t,r,n;return{c(){t=ar("div"),oU((r=ar("img")).src,n=e[31].value)||ad(r,"src",n),ad(r,"alt",""),ad(r,"width","48"),ad(r,"height","64"),ad(t,"class","PinturaFillTile")},m(e,n){at(e,t,n),o9(t,r)},p(e,t){1&t[1]&&!oU(r.src,n=e[31].value)&&ad(r,"src",n)},d(e){e&&ai(t)}}}function yX(e){let t,r;let n=(U(e[31].label)?e[31].label(e[1]):e[31].label)+"";return{c(){t=ar("span"),r=ao(n)},m(e,n){at(e,t,n),o9(t,r)},p(e,t){2&t[0]|1&t[1]&&n!==(n=(U(e[31].label)?e[31].label(e[1]):e[31].label)+"")&&ah(r,n)},d(e){e&&ai(t)}}}function yZ(e){let t,r,n,o;function a(e,t){return(1&t[1]&&(r=null),1&t[1]&&(n=null),null==r&&(r=!!P(e[31].value)),r)?yG:(null==n&&(n=!!ro(e[31].value)),n)?yH:yU}let l=a(e,[-1,-1]),s=l(e),d=e[31].label&&yX(e);return{c(){t=ar("div"),s.c(),o=aa(),d&&d.c(),ad(t,"slot","option")},m(e,r){at(e,t,r),s.m(t,null),o9(t,o),d&&d.m(t,null)},p(e,r){l===(l=a(e,r))&&s?s.p(e,r):(s.d(1),(s=l(e))&&(s.c(),s.m(t,o))),e[31].label?d?d.p(e,r):((d=yX(e)).c(),d.m(t,null)):d&&(d.d(1),d=null)},d(e){e&&ai(t),s.d(),d&&d.d()}}}function yY(e){let t,r;return t=new uS({props:{locale:e[1],class:"PinturaControlList",layout:"row",options:e[2],selectedIndex:e[4],onchange:e[10],$$slots:{option:[yZ,({option:e})=>({31:e}),({option:e})=>[0,+!!e]]},$$scope:{ctx:e}}}),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};2&r[0]&&(n.locale=e[1]),4&r[0]&&(n.options=e[2]),16&r[0]&&(n.selectedIndex=e[4]),2&r[0]|3&r[1]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yq(e){let t,r,n;return r=new pa({props:{elasticity:e[5],$$slots:{default:[yY]},$$scope:{ctx:e}}}),{c(){t=ar("div"),a1(r.$$.fragment),ad(t,"slot","footer"),a$(t,"transform",e[3])},m(e,o){at(e,t,o),a2(r,t,null),n=!0},p(e,n){let o={};32&n[0]&&(o.elasticity=e[5]),22&n[0]|2&n[1]&&(o.$$scope={dirty:n,ctx:e}),r.$set(o),8&n[0]&&a$(t,"transform",e[3])},i(e){n||(aU(r.$$.fragment,e),n=!0)},o(e){aH(r.$$.fragment,e),n=!1},d(e){e&&ai(t),a4(r)}}}function yK(e){let t,r;return(t=new mK({props:{$$slots:{footer:[yq]},$$scope:{ctx:e}}})).$on("measure",e[21]),{c(){a1(t.$$.fragment)},m(e,n){a2(t,e,n),r=!0},p(e,r){let n={};62&r[0]|2&r[1]&&(n.$$scope={dirty:r,ctx:e}),t.$set(n)},i(e){r||(aU(t.$$.fragment,e),r=!0)},o(e){aH(t.$$.fragment,e),r=!1},d(e){a4(t,e)}}}function yJ(e){let t=document.createElement("div");return e.append(t),{update(r){let[n,o,a,l]=r.map((e,t)=>t<3?Math.round(255*e):e);e.dataset.transparent=l<1,t.style.backgroundColor=`rgba(${n},${o},${a},${l})`}}}function yQ(e,t,r){let n,o,a,l,s,d,c,u,h;let p,$=oB,m=()=>($(),$=oH(f,e=>r(16,p=e)),f);e.$$.on_destroy.push(()=>$());let{isActive:f}=t;m();let{stores:g}=t,{locale:y={}}=t,{fillOptions:x=[]}=t,b=e=>ro(e)&&P(e[0])&&ro(e[1]),v=e=>[Array.isArray(e)&&3===e.length?[...e,1]:e,void 0,{disabled:!1}],w=e=>e.map(e=>b(e)?[e[0],w(e[1]),e[2]]:v(e)),S=aT("elasticityMultiplier");oX(e,S,e=>r(20,h=e));let{history:k,animation:C,scrollElasticity:T,imageBackgroundColor:M,imageBackgroundImage:E,allowPan:R,allowZoom:I,allowZoomControls:A,allowPlayPause:L}=g;oX(e,C,e=>r(17,d=e)),oX(e,M,e=>r(19,u=e)),oX(e,E,e=>r(18,c=e));let F=dk(20*!!d);return oX(e,F,e=>r(15,s=e)),e.$$set=e=>{"isActive"in e&&m(r(0,f=e.isActive)),"stores"in e&&r(13,g=e.stores),"locale"in e&&r(1,y=e.locale),"fillOptions"in e&&r(14,x=e.fillOptions)},e.$$.update=()=>{16384&e.$$.dirty[0]&&r(2,n=w(x)),65536&e.$$.dirty[0]&&R.set(p),65536&e.$$.dirty[0]&&I.set(p),65536&e.$$.dirty[0]&&A.set(p),65536&e.$$.dirty[0]&&p&&L.set(!0),1048576&e.$$.dirty[0]&&r(5,o=h*T),786436&e.$$.dirty[0]&&r(4,a=n.findIndex(([e])=>c?e===c:Array.isArray(e)?lM(e,u):void 0)||0),196608&e.$$.dirty[0]&&d&&F.set(20*!p),32768&e.$$.dirty[0]&&r(3,l=s?`translateY(${s}px)`:"none")},[f,y,n,l,a,o,S,C,M,E,({value:e})=>{P(e)&&(o1(M,u=void 0,u),o1(E,c=e,c)),ro(e)&&(o1(M,u=e,u),o1(E,c=void 0,c)),k.write()},F,"fill",g,x,s,p,d,c,u,h,function(t){aM.call(this,e,t)}]}let y0='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',y1='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>',y2={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:`${y1}`,shapeIconButtonTextLayoutAutoHeight:`<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>${y1}`,shapeIconButtonTextLayoutFixedSize:`<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>${y1}`,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextOutline:"Text outline",shapeTitleTextOutlineWidth:"Width",shapeTitleTextShadow:"Text shadow",shapeTitleTextShadowBlur:"Blur",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="1" y="1" width="22" height="22" rx="4"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>',shapeTitleSelectionMode:"Selection mode",shapeTitleBrushSize:"Brush size",shapeLabelSelectionModeNew:"New",shapeLabelSelectionModeAdd:"Add",shapeLabelSelectionModeSubtract:"Remove",shapeLabelToolSelectionBrush:"Brush",shapeLabelToolSelectionLassoo:"Lassoo",shapeLabelToolSelectionRectangle:"Rectangle marquee",shapeLabelToolSelectionEllipse:"Ellipse marquee",shapeIconSelectionModeNew:'<g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M6.5 17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1.5"/><rect width="12" height="12" x="9" y="9" fill="currentColor" fill-opacity=".25" rx="2"/></g>',shapeIconSelectionModeAdd:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2v-2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><path d="M13 15h4M15 13v4"/></g>',shapeIconSelectionModeSubtract:'<g fill="none" fill-rule="evenodd" stroke="currentColor"><path fill="currentColor" fill-opacity=".25" stroke-linecap="round" stroke-linejoin="round" d="M15 3a2 2 0 0 1 2 2v4h-6a2 2 0 0 0-1.995 1.85L9 11v6H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10Z"/><rect width="12" height="12" x="9" y="9" stroke-linecap="round" stroke-linejoin="round" rx="2"/><path d="M13 15h4"/></g>',shapeIconToolSelectionBrush:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSelectionLassoo:'<g fill="none" fill-rule="evenodd" stroke-width=".125em" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.428 17.702a18.46 18.46 0 0 0 4.085-1.595c5.851-3.112 9.019-8.599 7.074-12.256-1.945-3.657-8.265-4.1-14.116-.988C2.619 5.974-.55 11.46 1.396 15.118c.63 1.186 1.72 2.033 3.105 2.532"/><ellipse cx="8" cy="18.5" rx="3.5" ry="2.833" transform="rotate(-15 8 18.5)"/><path stroke-linecap="round" d="M5 18c3.347 1.048 5.514 1.881 6.5 2.5.859.54 1.517.994 1.5 2.364"/></g>',shapeIconToolSelectionRectangle:'<g stroke-width=".125em" stroke="currentColor"><path d="M9 1 h6 m4 0 h4v4 m0 4 v6 m0 4 v4h-4 m-4 0 h-6 m-4 0 h-4v-4 m0 -4 v-6 m0 -4 v-4h4" fill="none" /></g>',shapeIconToolSelectionEllipse:'<path stroke-width=".125em" stroke="currentColor" d="M1.21 9.853a11.054 11.054 0 0 0 0 4.294m1.643 3.965a11.054 11.054 0 0 0 3.035 3.035m3.965 1.644a11.054 11.054 0 0 0 4.294 0m3.965-1.644a11.054 11.054 0 0 0 3.035-3.035m1.644-3.965a11.054 11.054 0 0 0 0-4.294m-1.644-3.965a11.054 11.054 0 0 0-3.035-3.035m-3.965-1.644a11.054 11.054 0 0 0-4.294 0M5.888 2.853a11.054 11.054 0 0 0-3.035 3.035"/>'};var y4={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:`<g fill="currentColor">
        <rect opacity="{a}" x="2" y="4" width="10" height="18" rx="1"/>
        <rect opacity="{b}" x="4" y="8" width="14" height="14" rx="1"/>
        <rect opacity="{c}" x="6" y="12" width="17" height="10" rx="1"/>
    </g>`,cropIconCropBoundary:`<g fill="currentColor">
        <rect opacity="{a}" x="2" y="3" width="20" height="20" rx="1"/>
        <rect opacity="{b}" x="7" y="8" width="10" height="10" rx="1"/>
        <rect opacity="{c}" x="4" y="8" width="14" height="14" rx="1"/>
        <rect opacity="{d}" x="12" y="4" width="10" height="10" rx="1"/>
    </g>`,cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},y5={fillLabel:"Fill",fillIcon:`
    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
        <g transform="rotate(60, 12, 12)">
            <rect x="4" y="4" width="14" height="16" rx="3"/>
        </g>
        <path d="M21 13 L21 21"></path>
        <path d="M4.5 12.5 L19 12.5"></path>
    </g>
    `},y3={frameLabel:"Frame",frameIcon:`<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
            <rect x="2" y="2" width="20" height="20" rx="4"/>
            <rect x="6" y="6" width="12" height="12" rx="1"/>
        </g>`,frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},y6=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e);Object.keys(r).forEach(n=>{r[n].get?Object.defineProperty(t,n,{get:()=>e[n],set:t=>e[n]=t}):t[n]=e[n]})},y8=()=>k()&&null!==document.doctype,y7=e=>{let t={},{sub:r,pub:n}=rk();y8()||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");let o=lH();y6(o,t);let a=$P(e,o.stores);y6(a,t);let l=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(e=>a.on(e,t=>{let r=o[e](t&&t.detail);r instanceof Promise&&r.catch(x)})),s=(e,t)=>{let n=r(e,t),l=o.on(e,t),s=a.on(e,t);return()=>{n(),l(),s()}};t.handleEvent=x;let d=$E.map(e=>s(e,r=>t.handleEvent(e,r)));return lu(t,{on:s,updateImage:e=>new Promise((r,n)=>{let a=t.history.get(),l=t.history.index,s=t.imageState;o.loadImage(e).then(e=>{t.history.set(a),t.history.index=l,t.imageState=s,r(e)}).catch(n)}),close:()=>{n("close")},destroy:()=>{[...l,...d].forEach(e=>e()),a.destroy(),o.destroy(),n("destroy")}}),setTimeout(()=>n("init",t),0),t};k()&&HTMLElement;let{document:y9,window:xe}=aZ;function xt(e){let t,r,n,o;return az(e[28]),{c(){t=aa(),ad(r=ar("div"),"class",e[4]),a$(r,"--editor-modal",1),a$(r,"--viewport-pad-footer",e[5]),a$(r,"opacity",e[7]),a$(r,"height",e[6])},m(a,l){at(a,t,l),at(a,r,l),e[29](r),n||(o=[as(xe,"keydown",e[12]),as(xe,"orientationchange",e[13]),as(xe,"resize",e[28]),as(y9.body,"focusin",function(){oV(!e[1]&&e[9])&&(!e[1]&&e[9]).apply(this,arguments)}),as(y9.body,"focusout",function(){oV(e[2]&&e[10])&&(e[2]&&e[10]).apply(this,arguments)}),as(r,"wheel",e[11],{passive:!1})],n=!0)},p(t,n){e=t,16&n[0]&&ad(r,"class",e[4]),32&n[0]&&a$(r,"--viewport-pad-footer",e[5]),128&n[0]&&a$(r,"opacity",e[7]),64&n[0]&&a$(r,"height",e[6])},i:oB,o:oB,d(a){a&&ai(t),a&&ai(r),e[29](null),n=!1,oN(o)}}}function xi(e,t,r){let n,o,a,l,s,d,c,u,h,p,$,m,f,g,y,x,b,v;let w=ak(),{root:S}=t,{preventZoomViewport:C=!0}=t,{preventScrollBodyIfNeeded:T=!0}=t,{preventFooterOverlapIfNeeded:M=!0}=t,{class:P}=t,E=!0,I=!1,A=!1,L=k()&&document.documentElement,F=k()&&document.body,z=k()&&document.head,B=dk(0,{precision:.001,damping:.5});oX(e,B,e=>r(27,h=e));let O=B.subscribe(e=>{A&&e>=1?(r(21,A=!1),r(1,E=!1),w("show")):I&&e<=0&&(r(20,I=!1),r(1,E=!0),w("hide"))}),D=!1,_=()=>document.querySelector("meta[name=viewport]"),W=()=>Array.from(document.querySelectorAll("meta[name=theme-color]")),N=(e,t)=>{let r=()=>{if(e()){t();return}requestAnimationFrame(r)};requestAnimationFrame(r)},V=0,j=()=>{f||(f=R("div",{style:"position:fixed;height:100vh;top:0"}),F.append(f))};av(()=>{M&&iG()&&j()}),aw(()=>{f&&(r(23,b=f.offsetHeight),f.remove(),f=void 0)});let U=()=>L.style.setProperty("--pintura-document-height",`${window.innerHeight}px`),H=e=>{e?(v=window.scrollY,L.classList.add("PinturaDocumentLock"),U(),window.addEventListener("resize",U)):(window.removeEventListener("resize",U),L.classList.remove("PinturaDocumentLock"),ri(v)&&window.scrollTo(0,v),v=void 0)};return aS(()=>{L.classList.remove("PinturaModalBodyLock"),O()}),e.$$set=e=>{"root"in e&&r(0,S=e.root),"preventZoomViewport"in e&&r(14,C=e.preventZoomViewport),"preventScrollBodyIfNeeded"in e&&r(15,T=e.preventScrollBodyIfNeeded),"preventFooterOverlapIfNeeded"in e&&r(16,M=e.preventFooterOverlapIfNeeded),"class"in e&&r(17,P=e.class)},e.$$.update=()=>{0x8300002&e.$$.dirty[0]&&r(26,n=A||I?h:+!E),16384&e.$$.dirty[0]&&(o="width=device-width,height=device-height,initial-scale=1"+(C?",maximum-scale=1,user-scalable=0":"")),3145730&e.$$.dirty[0]&&r(24,a=!A&&!E&&!I),12&e.$$.dirty[0]&&!D&&r(22,m=V),0x4000000&e.$$.dirty[0]&&r(7,l=n),4194304&e.$$.dirty[0]&&r(6,s=`${m}px`),8388616&e.$$.dirty[0]&&r(5,d=ri(b)?`--viewport-pad-footer:${b>V?0:1}`:void 0),131072&e.$$.dirty[0]&&r(4,c=d0(["pintura-editor","PinturaModal",P])),32768&e.$$.dirty[0]&&r(25,u=T&&iG()&&/15_/.test(navigator.userAgent)),0x3000000&e.$$.dirty[0]&&u&&H(a)},[S,E,D,V,c,d,s,l,B,e=>{cD(e.target)&&(r(2,D=!0),$=V)},e=>{if(cD(e.target)){if(clearTimeout(p),$===V)r(2,D=!1);else{let e=V;N(()=>V!==e,()=>r(2,D=!1))}}},e=>{e.target&&/PinturaStage/.test(e.target.className)&&e.preventDefault()},e=>{let{key:t}=e;if(!/escape/i.test(t))return;let r=e.target;if(r&&/input|textarea/i.test(r.nodeName))return;let n=document.querySelectorAll(".PinturaModal");n[n.length-1]===S&&w("close")},j,C,T,M,P,()=>{if(A||!E)return;r(21,A=!0);let e=_()||R("meta",{name:"viewport"});g=!g&&e.getAttribute("content"),e.setAttribute("content",o+(/cover/.test(g)?",viewport-fit=cover":"")),e.parentNode||z.append(e);let t=getComputedStyle(S).getPropertyValue("--color-background"),n=W();if(n.length)y=n.map(e=>e.getAttribute("content"));else{let e=R("meta",{name:"theme-color"});z.append(e),n.push(e)}n.forEach(e=>e.setAttribute("content",`rgb(${t})`)),clearTimeout(x),x=setTimeout(()=>B.set(1),250)},()=>{if(I||E)return;clearTimeout(x),r(20,I=!0);let e=_();g?e.setAttribute("content",g):e.remove();let t=W();y?t.forEach((e,t)=>{e.setAttribute("content",y[t])}):t.forEach(e=>e.remove()),B.set(0)},I,A,m,b,a,u,n,h,function(){r(3,V=xe.innerHeight)},function(e){aE[e?"unshift":"push"](()=>{r(0,S=e)})}]}class xr extends a3{constructor(e){super(),a5(this,e,xi,xt,oj,{root:0,preventZoomViewport:14,preventScrollBodyIfNeeded:15,preventFooterOverlapIfNeeded:16,class:17,show:18,hide:19},null,[-1,-1])}get root(){return this.$$.ctx[0]}set root(e){this.$$set({root:e}),a_()}get preventZoomViewport(){return this.$$.ctx[14]}set preventZoomViewport(e){this.$$set({preventZoomViewport:e}),a_()}get preventScrollBodyIfNeeded(){return this.$$.ctx[15]}set preventScrollBodyIfNeeded(e){this.$$set({preventScrollBodyIfNeeded:e}),a_()}get preventFooterOverlapIfNeeded(){return this.$$.ctx[16]}set preventFooterOverlapIfNeeded(e){this.$$set({preventFooterOverlapIfNeeded:e}),a_()}get class(){return this.$$.ctx[17]}set class(e){this.$$set({class:e}),a_()}get show(){return this.$$.ctx[18]}get hide(){return this.$$.ctx[19]}}var xn=(e={},t)=>new xr({target:t||document.body,props:{class:e.class,preventZoomViewport:e.preventZoomViewport,preventScrollBodyIfNeeded:e.preventScrollBodyIfNeeded,preventFooterOverlapIfNeeded:e.preventFooterOverlapIfNeeded}});let xo=(e,t,r,n)=>{let o;let a=eZ(eO(t.x-e.x,t.y-e.y)),l=5*r;o=n?.5*l:Math.ceil((l-1)*.5);let s=e4(eV(a),o);return{anchor:eV(e),offset:s,normal:a,solid:n,size:l,sizeHalf:o}},xa=(e,t,r)=>{let{strokeWidth:n,strokeColor:o,strokeJoin:a,strokeCap:l,...s}=e,{anchor:d,offset:c,normal:u,solid:h,size:p,sizeHalf:$}=t,m=d.x,f=d.y,g=e4(eV(u),p),y=eO(m+g.x,f+g.y);if(e4(g,.55),h){e0(r,c);let e=e4(eV(u),.5*$);return[{...s,points:[eO(m-e.x,f-e.y),eO(y.x-g.y,y.y+g.x),eO(y.x+g.y,y.y-g.x)],pathClose:!0,backgroundColor:o}]}{let e=e4(eH(eV(u)),.5),t=eO(m-e.x,f-e.y),r=eO(m+e.x,f+e.y);return[{...s,points:[eO(y.x+g.y,y.y-g.x),t,eO(m,f),r,eO(y.x-g.y,y.y+g.x)],pathClose:!1,strokeWidth:n,strokeColor:o,strokeJoin:a,strokeCap:l}]}},xl=(e,t,r)=>{let{strokeWidth:n,strokeColor:o,...a}=e,{anchor:l,solid:s,offset:d,normal:c,sizeHalf:u}=t;return e0(r,d),s&&e0(r,eU(eV(c))),[{...a,x:l.x,y:l.y,rx:u,ry:u,backgroundColor:s?o:void 0,strokeWidth:s?void 0:n,strokeColor:s?void 0:o}]},xs=(e,t)=>{let{strokeWidth:r,strokeColor:n,strokeJoin:o,strokeCap:a,...l}=e,{anchor:s,offset:d}=t;return[{...l,points:[eO(s.x-d.y,s.y+d.x),eO(s.x+d.y,s.y-d.x)],strokeWidth:r,strokeColor:n,strokeJoin:o,strokeCap:a}]},xd=(e,t,r)=>{let{strokeWidth:n,strokeColor:o,...a}=e,{anchor:l,solid:s,offset:d,normal:c,sizeHalf:u}=t;return e0(r,d),[{...a,x:l.x-u,y:l.y-u,width:2*u,height:2*u,rotation:eY(c),backgroundColor:s?o:void 0,strokeWidth:s?void 0:n,strokeColor:s?void 0:o}]},xc=(e={})=>t=>{if(!t.lineStart&&!t.lineEnd)return;let r=[],{x1:n,y1:o,x2:a,y2:l,lineStart:s,lineEnd:d,strokeWidth:c,strokeColor:u,strokeJoin:h,strokeCap:p,strokeDash:$,bitmap:m,aboveFrame:f,opacity:g}=t,y=eO(n,o),x=eO(a,l),b=[y,x],v={bitmap:m,aboveFrame:f,opacity:g,strokeColor:u,strokeWidth:c,strokeJoin:h,strokeCap:p};if(s){let[t,n]=s.split("-"),o=e[t];if(o){let e=xo(y,x,c,!!n);r.push(...o(v,e,y))}}if(d){let[t,n]=d.split("-"),o=e[t];if(o){let e=xo(x,y,c,!!n);r.push(...o(v,e,x))}}return[{...v,strokeDash:$,points:b},...r]},xu=()=>({arrow:xa,circle:xl,square:xd,bar:xs}),xh=(e,t)=>{let r=parseFloat(e)*t;return P(e)?`${r}%`:r},xp=(e,t)=>P(e)?n0(e,t):e,x$=e=>[{...e,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:e.frameSize?xh(e.frameSize,2):"2.5%",frameRadius:e.frameRound?xh(e.frameSize,2):0}],xm=({width:e,height:t,frameImage:r,frameSize:n="15%",frameOutset:o=0,frameSlices:a={x1:.15,y1:.15,x2:.85,y2:.85}},{isPreview:l})=>{if(!r)return[];let s=Math.sqrt(e*t),d=xp(n,s),c=l?d:Math.round(d),u=xp(o,s),h=2*u,{x1:p,x2:$,y1:m,y2:f}=a,g={x0:0,y0:0,x1:c,y1:c,x2:e-c,y2:t-c,cw:c,ch:c,ew:e-c-c,eh:t-c-c},y=+!!l,x=2*y,b=u>0,v={expandsCanvas:b,width:g.cw,height:g.ch,backgroundImage:r};return[{expandsCanvas:b,x:g.x1-y-u,y:g.y0-u,width:g.ew+x+h,height:g.ch,backgroundCorners:[{x:p,y:0},{x:$,y:0},{x:$,y:m},{x:p,y:m}],backgroundImage:r},{expandsCanvas:b,x:g.x1-y-u,y:g.y2+u,width:g.ew+x+h,height:g.ch,backgroundCorners:[{x:p,y:f},{x:$,y:f},{x:$,y:1},{x:p,y:1}],backgroundImage:r},{expandsCanvas:b,x:g.x0-u,y:g.y1-y-u,width:g.cw,height:g.eh+x+h,backgroundCorners:[{x:0,y:m},{x:p,y:m},{x:p,y:f},{x:0,y:f}],backgroundImage:r},{expandsCanvas:b,x:g.x2+u,y:g.y1-y-u,width:g.cw,height:g.eh+x+h,backgroundCorners:[{x:$,y:m},{x:1,y:m},{x:1,y:f},{x:$,y:f}],backgroundImage:r},{...v,x:g.x0-u,y:g.y0-u,backgroundCorners:[{x:0,y:0},{x:p,y:0},{x:p,y:m},{x:0,y:m}]},{...v,x:g.x2+u,y:g.y0-u,backgroundCorners:[{x:$,y:0},{x:1,y:0},{x:1,y:m},{x:$,y:m}]},{...v,x:g.x2+u,y:g.y2+u,backgroundCorners:[{x:$,y:f},{x:1,y:f},{x:1,y:1},{x:$,y:1}]},{...v,x:g.x0-u,y:g.y2+u,backgroundCorners:[{x:0,y:f},{x:p,y:f},{x:p,y:1},{x:0,y:1}]}]},xf=({x:e,y:t,width:r,height:n,frameInset:o="3.5%",frameSize:a=".25%",frameColor:l=[1,1,1],frameOffset:s="5%",frameAmount:d=1,frameRadius:c=0,expandsCanvas:u=!1},{isPreview:h})=>{let p=Math.sqrt(r*n),$=xp(a,p),m=xp(o,p),f=xp(s,p),g=0;h||(g=.5*(($=Math.max(1,Math.round($)))%2!=0));let y=xp(xh(c,d),p);return Array(d).fill(void 0).map((o,a)=>{let s=f*a,d=e+m+s,c=t+m+s,p=e+r-m-s,x=t+n-m-s;return h||(d=Math.round(d),c=Math.round(c),p=Math.round(p),x=Math.round(x)),{x:d+g,y:c+g,width:p-d,height:x-c,cornerRadius:y>0?y-s:0,strokeWidth:$,strokeColor:l,expandsCanvas:u}})},xg=({x:e,y:t,width:r,height:n,frameSize:o=".25%",frameOffset:a=0,frameInset:l="2.5%",frameColor:s=[1,1,1]},{isPreview:d})=>{let c=Math.sqrt(r*n),u=xp(o,c),h=xp(l,c),p=xp(a,c),$=0;d||(u=Math.max(1,Math.round(u)),h=Math.round(h),p=Math.round(p),$=.5*(u%2!=0));let m=p-h,f=e+h+$,g=t+h+$,y=e+r-h-$,x=t+n-h-$;return[{points:[eO(f+m,g),eO(y-m,g)]},{points:[eO(y,g+m),eO(y,x-m)]},{points:[eO(y-m,x),eO(f+m,x)]},{points:[eO(f,x-m),eO(f,g+m)]}].map(e=>(e.strokeWidth=u,e.strokeColor=s,e))},xy=({x:e,y:t,width:r,height:n,frameSize:o=".25%",frameInset:a="2.5%",frameLength:l="2.5%",frameColor:s=[1,1,1]},{isPreview:d})=>{let c=Math.sqrt(r*n),u=xp(o,c),h=xp(a,c),p=xp(l,c),$=0;d||(u=Math.max(1,Math.round(u)),h=Math.round(h),p=Math.round(p),$=.5*(u%2!=0));let m=e+h+$,f=t+h+$,g=e+r-h-$,y=t+n-h-$;return[{points:[eO(m,f+p),eO(m,f),eO(m+p,f)]},{points:[eO(g-p,f),eO(g,f),eO(g,f+p)]},{points:[eO(g,y-p),eO(g,y),eO(g-p,y)]},{points:[eO(m+p,y),eO(m,y),eO(m,y-p)]}].map(e=>(e.strokeWidth=u,e.strokeColor=s,e))},xx=({x:e,y:t,width:r,height:n,frameColor:o=[1,1,1]},{isPreview:a})=>{let l=Math.sqrt(r*n),s=.1*l,d=.2*l,c=0,u=.5*s;return a?c=1:d=Math.ceil(d),o.length=3,[{id:"border",x:e-u+c,y:t-u+c,width:r+s-2*c,height:n+d-2*c,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:s,frameColor:o,expandsCanvas:!0},{id:"chin",x:e-u,y:n-c,width:r+s,height:d,backgroundColor:o,expandsCanvas:!0}].filter(Boolean)},xb=(e={})=>(t,r)=>{if(!rn(t,"frameStyle"))return;let n=e[t.frameStyle];if(!n)return;let{frameStyle:o,...a}=t;return n(a,r)},xv=()=>({solid:x$,hook:xy,line:xf,edge:xg,polaroid:xx,nine:xm}),xw=()=>xc(xu()),xS=()=>xb(xv()),xk=()=>[xS(),xw()],xC=e=>{let t=(r,n={isPreview:!0})=>{let o=e.map(e=>{let o=e(r,n);if(o)return o.map(e=>t(e,n))}).filter(Boolean).flat();return o.length?o.flat().map((e,t)=>(e.id=r.id+"_"+t,e)):r};return t},xT=()=>({read:w,apply:W}),xM=(e={})=>{let{blurAmount:t,dataSizeScalar:r,scrambleAmount:n,backgroundColor:o}=e;return(e,a)=>db(e,{blurAmount:t,scrambleAmount:n,backgroundColor:o,...a,dataSizeScalar:r||a.dataSizeScalar})},xP=$7,xE=$6,xR={markupEditorToolbar:$7(),markupEditorToolStyles:$6(),markupEditorShapeStyleControls:mF()},xI={util:["crop",class extends a3{constructor(e){super(),a5(this,e,fD,fF,oj,{name:96,isActive:0,stores:97,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:98,cropAutoCenterImageSelectionTimeout:99,cropEnableZoomMatchImageAspectRatio:100,cropEnableRotateMatchImageAspectRatio:101,cropEnableRotationInput:102,cropEnableZoom:2,cropEnableZoomInput:103,cropEnableZoomAutoHide:104,cropEnableImageSelection:105,cropEnableInfoIndicator:106,cropEnableZoomTowardsWheelPosition:107,cropEnableLimitWheelInputToCropSelection:108,cropEnableCenterImageSelection:109,cropEnableButtonRotateLeft:110,cropEnableButtonRotateRight:111,cropEnableButtonFlipHorizontal:112,cropEnableButtonFlipVertical:113,cropSelectPresetOptions:114,cropEnableSelectPreset:115,cropEnableFilterMatchAspectRatio:116,cropSelectPresetFilter:95,cropEnableButtonToggleCropLimit:117,cropWillRenderTools:118,cropActiveTransformTool:119,cropMinimizeToolbar:120,cropInteractionFocus:121,cropRotationRange:3,cropMaskOpacity:122,locale:4,cropFormatIconSelectPreset:123,cropFormatIconCropBoundary:124},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[96]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),a_()}get stores(){return this.$$.ctx[97]}set stores(e){this.$$set({stores:e}),a_()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(e){this.$$set({cropImageSelectionCornerStyle:e}),a_()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[98]}set cropWillRenderImageSelectionGuides(e){this.$$set({cropWillRenderImageSelectionGuides:e}),a_()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[99]}set cropAutoCenterImageSelectionTimeout(e){this.$$set({cropAutoCenterImageSelectionTimeout:e}),a_()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableZoomMatchImageAspectRatio(e){this.$$set({cropEnableZoomMatchImageAspectRatio:e}),a_()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[101]}set cropEnableRotateMatchImageAspectRatio(e){this.$$set({cropEnableRotateMatchImageAspectRatio:e}),a_()}get cropEnableRotationInput(){return this.$$.ctx[102]}set cropEnableRotationInput(e){this.$$set({cropEnableRotationInput:e}),a_()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(e){this.$$set({cropEnableZoom:e}),a_()}get cropEnableZoomInput(){return this.$$.ctx[103]}set cropEnableZoomInput(e){this.$$set({cropEnableZoomInput:e}),a_()}get cropEnableZoomAutoHide(){return this.$$.ctx[104]}set cropEnableZoomAutoHide(e){this.$$set({cropEnableZoomAutoHide:e}),a_()}get cropEnableImageSelection(){return this.$$.ctx[105]}set cropEnableImageSelection(e){this.$$set({cropEnableImageSelection:e}),a_()}get cropEnableInfoIndicator(){return this.$$.ctx[106]}set cropEnableInfoIndicator(e){this.$$set({cropEnableInfoIndicator:e}),a_()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[107]}set cropEnableZoomTowardsWheelPosition(e){this.$$set({cropEnableZoomTowardsWheelPosition:e}),a_()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[108]}set cropEnableLimitWheelInputToCropSelection(e){this.$$set({cropEnableLimitWheelInputToCropSelection:e}),a_()}get cropEnableCenterImageSelection(){return this.$$.ctx[109]}set cropEnableCenterImageSelection(e){this.$$set({cropEnableCenterImageSelection:e}),a_()}get cropEnableButtonRotateLeft(){return this.$$.ctx[110]}set cropEnableButtonRotateLeft(e){this.$$set({cropEnableButtonRotateLeft:e}),a_()}get cropEnableButtonRotateRight(){return this.$$.ctx[111]}set cropEnableButtonRotateRight(e){this.$$set({cropEnableButtonRotateRight:e}),a_()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[112]}set cropEnableButtonFlipHorizontal(e){this.$$set({cropEnableButtonFlipHorizontal:e}),a_()}get cropEnableButtonFlipVertical(){return this.$$.ctx[113]}set cropEnableButtonFlipVertical(e){this.$$set({cropEnableButtonFlipVertical:e}),a_()}get cropSelectPresetOptions(){return this.$$.ctx[114]}set cropSelectPresetOptions(e){this.$$set({cropSelectPresetOptions:e}),a_()}get cropEnableSelectPreset(){return this.$$.ctx[115]}set cropEnableSelectPreset(e){this.$$set({cropEnableSelectPreset:e}),a_()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[116]}set cropEnableFilterMatchAspectRatio(e){this.$$set({cropEnableFilterMatchAspectRatio:e}),a_()}get cropSelectPresetFilter(){return this.$$.ctx[95]}set cropSelectPresetFilter(e){this.$$set({cropSelectPresetFilter:e}),a_()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[117]}set cropEnableButtonToggleCropLimit(e){this.$$set({cropEnableButtonToggleCropLimit:e}),a_()}get cropWillRenderTools(){return this.$$.ctx[118]}set cropWillRenderTools(e){this.$$set({cropWillRenderTools:e}),a_()}get cropActiveTransformTool(){return this.$$.ctx[119]}set cropActiveTransformTool(e){this.$$set({cropActiveTransformTool:e}),a_()}get cropMinimizeToolbar(){return this.$$.ctx[120]}set cropMinimizeToolbar(e){this.$$set({cropMinimizeToolbar:e}),a_()}get cropInteractionFocus(){return this.$$.ctx[121]}set cropInteractionFocus(e){this.$$set({cropInteractionFocus:e}),a_()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(e){this.$$set({cropRotationRange:e}),a_()}get cropMaskOpacity(){return this.$$.ctx[122]}set cropMaskOpacity(e){this.$$set({cropMaskOpacity:e}),a_()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),a_()}get cropFormatIconSelectPreset(){return this.$$.ctx[123]}set cropFormatIconSelectPreset(e){this.$$set({cropFormatIconSelectPreset:e}),a_()}get cropFormatIconCropBoundary(){return this.$$.ctx[124]}set cropFormatIconCropBoundary(e){this.$$set({cropFormatIconCropBoundary:e}),a_()}}]},xA={util:["filter",class extends a3{constructor(e){super(),a5(this,e,fU,fV,oj,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),a_()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),a_()}get stores(){return this.$$.ctx[34]}set stores(e){this.$$set({stores:e}),a_()}get locale(){return this.$$.ctx[2]}set locale(e){this.$$set({locale:e}),a_()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(e){this.$$set({filterFunctions:e}),a_()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(e){this.$$set({filterOptions:e}),a_()}}]},xL={util:["finetune",class extends a3{constructor(e){super(),a5(this,e,fK,fq,oj,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(e){this.$$set({stores:e}),a_()}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),a_()}get locale(){return this.$$.ctx[16]}set locale(e){this.$$set({locale:e}),a_()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(e){this.$$set({finetuneControlConfiguration:e}),a_()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(e){this.$$set({finetuneOptions:e}),a_()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(e){this.$$set({finetuneNudgePrecision:e}),a_()}}]},xF={util:["annotate",class extends a3{constructor(e){super(),a5(this,e,yx,yy,oj,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,markupEditorWillStartInteraction:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,annotateGridSize:18,annotateSnapToContext:19,willRenderShapePresetToolbar:20,annotateTools:21,annotateToolShapes:22,annotateShapeControls:23,annotateActiveTool:0,annotateEnableButtonFlipVertical:24,annotateEnableSelectImagePreset:25,annotateEnableDropImagePreset:26,annotatePresets:27,annotateWillRenderShapePresetToolbar:28,annotateWillRenderShapeStyleControls:29,enableViewTool:30,enableSelectToolToAddShape:31,enableTapToAddText:32,enableAutoSelectMoveTool:33,enableMoveTool:34,enableMultiSelect:35,willRenderShapeControls:36,willRenderShapeTextControls:37,beforeAddShape:38,beforeRemoveShape:39,beforeDeselectShape:40,beforeSelectShape:41,beforeUpdateShape:42},null,[-1,-1])}get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(e){this.$$set({isActive:e}),a_()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),a_()}get isVisible(){return this.$$.ctx[4]}set isVisible(e){this.$$set({isVisible:e}),a_()}get stores(){return this.$$.ctx[5]}set stores(e){this.$$set({stores:e}),a_()}get locale(){return this.$$.ctx[6]}set locale(e){this.$$set({locale:e}),a_()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(e){this.$$set({markupEditorToolbar:e}),a_()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(e){this.$$set({markupEditorToolStyles:e}),a_()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(e){this.$$set({markupEditorToolRetainStyles:e}),a_()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),a_()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),a_()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(e){this.$$set({markupEditorTextInputMode:e}),a_()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(e){this.$$set({markupEditorToolShareStyles:e}),a_()}get markupEditorWillStartInteraction(){return this.$$.ctx[14]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),a_()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),a_()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),a_()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),a_()}get annotateGridSize(){return this.$$.ctx[18]}set annotateGridSize(e){this.$$set({annotateGridSize:e}),a_()}get annotateSnapToContext(){return this.$$.ctx[19]}set annotateSnapToContext(e){this.$$set({annotateSnapToContext:e}),a_()}get willRenderShapePresetToolbar(){return this.$$.ctx[20]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),a_()}get annotateTools(){return this.$$.ctx[21]}set annotateTools(e){this.$$set({annotateTools:e}),a_()}get annotateToolShapes(){return this.$$.ctx[22]}set annotateToolShapes(e){this.$$set({annotateToolShapes:e}),a_()}get annotateShapeControls(){return this.$$.ctx[23]}set annotateShapeControls(e){this.$$set({annotateShapeControls:e}),a_()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(e){this.$$set({annotateActiveTool:e}),a_()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[24]}set annotateEnableButtonFlipVertical(e){this.$$set({annotateEnableButtonFlipVertical:e}),a_()}get annotateEnableSelectImagePreset(){return this.$$.ctx[25]}set annotateEnableSelectImagePreset(e){this.$$set({annotateEnableSelectImagePreset:e}),a_()}get annotateEnableDropImagePreset(){return this.$$.ctx[26]}set annotateEnableDropImagePreset(e){this.$$set({annotateEnableDropImagePreset:e}),a_()}get annotatePresets(){return this.$$.ctx[27]}set annotatePresets(e){this.$$set({annotatePresets:e}),a_()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[28]}set annotateWillRenderShapePresetToolbar(e){this.$$set({annotateWillRenderShapePresetToolbar:e}),a_()}get annotateWillRenderShapeStyleControls(){return this.$$.ctx[29]}set annotateWillRenderShapeStyleControls(e){this.$$set({annotateWillRenderShapeStyleControls:e}),a_()}get enableViewTool(){return this.$$.ctx[30]}set enableViewTool(e){this.$$set({enableViewTool:e}),a_()}get enableSelectToolToAddShape(){return this.$$.ctx[31]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),a_()}get enableTapToAddText(){return this.$$.ctx[32]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),a_()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),a_()}get enableMoveTool(){return this.$$.ctx[34]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),a_()}get enableMultiSelect(){return this.$$.ctx[35]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),a_()}get willRenderShapeControls(){return this.$$.ctx[36]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),a_()}get willRenderShapeTextControls(){return this.$$.ctx[37]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),a_()}get beforeAddShape(){return this.$$.ctx[38]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),a_()}get beforeRemoveShape(){return this.$$.ctx[39]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),a_()}get beforeDeselectShape(){return this.$$.ctx[40]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),a_()}get beforeSelectShape(){return this.$$.ctx[41]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),a_()}get beforeUpdateShape(){return this.$$.ctx[42]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),a_()}}]},xz={util:["decorate",class extends a3{constructor(e){super(),a5(this,e,yv,yb,oj,{name:1,isActive:2,isActiveFraction:3,isVisible:4,stores:5,locale:6,markupEditorToolbar:7,markupEditorToolStyles:8,markupEditorToolRetainStyles:9,markupEditorShapeStyleControls:10,markupEditorToolSelectRadius:11,markupEditorTextInputMode:12,markupEditorToolShareStyles:13,willRenderShapePresetToolbar:14,markupEditorGridSize:15,markupEditorSnapThreshold:16,markupEditorSnapToContext:17,decorateGridSize:18,decorateSnapToContext:19,decorateTools:20,decorateToolShapes:21,decorateShapeControls:22,decorateActiveTool:0,decorateEnableButtonFlipVertical:23,decorateEnableSelectImagePreset:24,decorateEnableDropImagePreset:25,decoratePresets:26,decorateWillRenderShapePresetToolbar:27,decorateWillRenderShapeStyleControls:28,enableSelectToolToAddShape:29,enableTapToAddText:30,enableViewTool:31,enableMoveTool:32,enableAutoSelectMoveTool:33,enableMultiSelect:34,willRenderShapeControls:35,willRenderShapeTextControls:36,beforeAddShape:37,beforeRemoveShape:38,beforeDeselectShape:39,beforeSelectShape:40,beforeUpdateShape:41,markupEditorWillStartInteraction:42},null,[-1,-1])}get name(){return this.$$.ctx[1]}get isActive(){return this.$$.ctx[2]}set isActive(e){this.$$set({isActive:e}),a_()}get isActiveFraction(){return this.$$.ctx[3]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),a_()}get isVisible(){return this.$$.ctx[4]}set isVisible(e){this.$$set({isVisible:e}),a_()}get stores(){return this.$$.ctx[5]}set stores(e){this.$$set({stores:e}),a_()}get locale(){return this.$$.ctx[6]}set locale(e){this.$$set({locale:e}),a_()}get markupEditorToolbar(){return this.$$.ctx[7]}set markupEditorToolbar(e){this.$$set({markupEditorToolbar:e}),a_()}get markupEditorToolStyles(){return this.$$.ctx[8]}set markupEditorToolStyles(e){this.$$set({markupEditorToolStyles:e}),a_()}get markupEditorToolRetainStyles(){return this.$$.ctx[9]}set markupEditorToolRetainStyles(e){this.$$set({markupEditorToolRetainStyles:e}),a_()}get markupEditorShapeStyleControls(){return this.$$.ctx[10]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),a_()}get markupEditorToolSelectRadius(){return this.$$.ctx[11]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),a_()}get markupEditorTextInputMode(){return this.$$.ctx[12]}set markupEditorTextInputMode(e){this.$$set({markupEditorTextInputMode:e}),a_()}get markupEditorToolShareStyles(){return this.$$.ctx[13]}set markupEditorToolShareStyles(e){this.$$set({markupEditorToolShareStyles:e}),a_()}get willRenderShapePresetToolbar(){return this.$$.ctx[14]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),a_()}get markupEditorGridSize(){return this.$$.ctx[15]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),a_()}get markupEditorSnapThreshold(){return this.$$.ctx[16]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),a_()}get markupEditorSnapToContext(){return this.$$.ctx[17]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),a_()}get decorateGridSize(){return this.$$.ctx[18]}set decorateGridSize(e){this.$$set({decorateGridSize:e}),a_()}get decorateSnapToContext(){return this.$$.ctx[19]}set decorateSnapToContext(e){this.$$set({decorateSnapToContext:e}),a_()}get decorateTools(){return this.$$.ctx[20]}set decorateTools(e){this.$$set({decorateTools:e}),a_()}get decorateToolShapes(){return this.$$.ctx[21]}set decorateToolShapes(e){this.$$set({decorateToolShapes:e}),a_()}get decorateShapeControls(){return this.$$.ctx[22]}set decorateShapeControls(e){this.$$set({decorateShapeControls:e}),a_()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(e){this.$$set({decorateActiveTool:e}),a_()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[23]}set decorateEnableButtonFlipVertical(e){this.$$set({decorateEnableButtonFlipVertical:e}),a_()}get decorateEnableSelectImagePreset(){return this.$$.ctx[24]}set decorateEnableSelectImagePreset(e){this.$$set({decorateEnableSelectImagePreset:e}),a_()}get decorateEnableDropImagePreset(){return this.$$.ctx[25]}set decorateEnableDropImagePreset(e){this.$$set({decorateEnableDropImagePreset:e}),a_()}get decoratePresets(){return this.$$.ctx[26]}set decoratePresets(e){this.$$set({decoratePresets:e}),a_()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[27]}set decorateWillRenderShapePresetToolbar(e){this.$$set({decorateWillRenderShapePresetToolbar:e}),a_()}get decorateWillRenderShapeStyleControls(){return this.$$.ctx[28]}set decorateWillRenderShapeStyleControls(e){this.$$set({decorateWillRenderShapeStyleControls:e}),a_()}get enableSelectToolToAddShape(){return this.$$.ctx[29]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),a_()}get enableTapToAddText(){return this.$$.ctx[30]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),a_()}get enableViewTool(){return this.$$.ctx[31]}set enableViewTool(e){this.$$set({enableViewTool:e}),a_()}get enableMoveTool(){return this.$$.ctx[32]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),a_()}get enableAutoSelectMoveTool(){return this.$$.ctx[33]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),a_()}get enableMultiSelect(){return this.$$.ctx[34]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),a_()}get willRenderShapeControls(){return this.$$.ctx[35]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),a_()}get willRenderShapeTextControls(){return this.$$.ctx[36]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),a_()}get beforeAddShape(){return this.$$.ctx[37]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),a_()}get beforeRemoveShape(){return this.$$.ctx[38]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),a_()}get beforeDeselectShape(){return this.$$.ctx[39]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),a_()}get beforeSelectShape(){return this.$$.ctx[40]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),a_()}get beforeUpdateShape(){return this.$$.ctx[41]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),a_()}get markupEditorWillStartInteraction(){return this.$$.ctx[42]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),a_()}}]},xB={util:["sticker",class extends a3{constructor(e){super(),a5(this,e,yS,yw,oj,{name:43,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerForceEnable:44,stickerStickToImage:6,stickerEnableSelectImagePreset:45,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:46,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,markupEditorGridSize:47,markupEditorSnapThreshold:48,markupEditorSnapToContext:49,enableMultiSelect:12,annotateGridSize:50,annotateSnapToContext:51,decorateGridSize:52,decorateSnapToContext:53,willRenderShapeControls:13,willRenderShapeTextControls:14,markupEditorToolSelectRadius:15,willRenderShapePresetToolbar:16,beforeAddShape:17,beforeRemoveShape:18,beforeDeselectShape:19,beforeSelectShape:20,beforeUpdateShape:21,markupEditorWillStartInteraction:22},null,[-1,-1])}get name(){return this.$$.ctx[43]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),a_()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),a_()}get isVisible(){return this.$$.ctx[2]}set isVisible(e){this.$$set({isVisible:e}),a_()}get stores(){return this.$$.ctx[3]}set stores(e){this.$$set({stores:e}),a_()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),a_()}get stickers(){return this.$$.ctx[5]}set stickers(e){this.$$set({stickers:e}),a_()}get stickerForceEnable(){return this.$$.ctx[44]}set stickerForceEnable(e){this.$$set({stickerForceEnable:e}),a_()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(e){this.$$set({stickerStickToImage:e}),a_()}get stickerEnableSelectImagePreset(){return this.$$.ctx[45]}set stickerEnableSelectImagePreset(e){this.$$set({stickerEnableSelectImagePreset:e}),a_()}get stickerEnableDropImagePreset(){return this.$$.ctx[7]}set stickerEnableDropImagePreset(e){this.$$set({stickerEnableDropImagePreset:e}),a_()}get stickerEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickerEnableButtonFlipVertical(e){this.$$set({stickerEnableButtonFlipVertical:e}),a_()}get stickerWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickerWillRenderShapePresetToolbar(e){this.$$set({stickerWillRenderShapePresetToolbar:e}),a_()}get stickerEnableSelectImage(){return this.$$.ctx[46]}set stickerEnableSelectImage(e){this.$$set({stickerEnableSelectImage:e}),a_()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[10]}set stickersEnableButtonFlipVertical(e){this.$$set({stickersEnableButtonFlipVertical:e}),a_()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[11]}set stickersWillRenderShapePresetToolbar(e){this.$$set({stickersWillRenderShapePresetToolbar:e}),a_()}get markupEditorGridSize(){return this.$$.ctx[47]}set markupEditorGridSize(e){this.$$set({markupEditorGridSize:e}),a_()}get markupEditorSnapThreshold(){return this.$$.ctx[48]}set markupEditorSnapThreshold(e){this.$$set({markupEditorSnapThreshold:e}),a_()}get markupEditorSnapToContext(){return this.$$.ctx[49]}set markupEditorSnapToContext(e){this.$$set({markupEditorSnapToContext:e}),a_()}get enableMultiSelect(){return this.$$.ctx[12]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),a_()}get annotateGridSize(){return this.$$.ctx[50]}set annotateGridSize(e){this.$$set({annotateGridSize:e}),a_()}get annotateSnapToContext(){return this.$$.ctx[51]}set annotateSnapToContext(e){this.$$set({annotateSnapToContext:e}),a_()}get decorateGridSize(){return this.$$.ctx[52]}set decorateGridSize(e){this.$$set({decorateGridSize:e}),a_()}get decorateSnapToContext(){return this.$$.ctx[53]}set decorateSnapToContext(e){this.$$set({decorateSnapToContext:e}),a_()}get willRenderShapeControls(){return this.$$.ctx[13]}set willRenderShapeControls(e){this.$$set({willRenderShapeControls:e}),a_()}get willRenderShapeTextControls(){return this.$$.ctx[14]}set willRenderShapeTextControls(e){this.$$set({willRenderShapeTextControls:e}),a_()}get markupEditorToolSelectRadius(){return this.$$.ctx[15]}set markupEditorToolSelectRadius(e){this.$$set({markupEditorToolSelectRadius:e}),a_()}get willRenderShapePresetToolbar(){return this.$$.ctx[16]}set willRenderShapePresetToolbar(e){this.$$set({willRenderShapePresetToolbar:e}),a_()}get beforeAddShape(){return this.$$.ctx[17]}set beforeAddShape(e){this.$$set({beforeAddShape:e}),a_()}get beforeRemoveShape(){return this.$$.ctx[18]}set beforeRemoveShape(e){this.$$set({beforeRemoveShape:e}),a_()}get beforeDeselectShape(){return this.$$.ctx[19]}set beforeDeselectShape(e){this.$$set({beforeDeselectShape:e}),a_()}get beforeSelectShape(){return this.$$.ctx[20]}set beforeSelectShape(e){this.$$set({beforeSelectShape:e}),a_()}get beforeUpdateShape(){return this.$$.ctx[21]}set beforeUpdateShape(e){this.$$set({beforeUpdateShape:e}),a_()}get markupEditorWillStartInteraction(){return this.$$.ctx[22]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),a_()}},({stickers:e,stickerEnableSelectImage:t,stickerEnableSelectImagePreset:r,stickerEnableDropImagePreset:n,stickerForceEnable:o})=>e&&e.length||t||r||n||o]},xO={util:["frame",class extends a3{constructor(e){super(),a5(this,e,yR,yE,oj,{name:18,isActive:0,stores:19,locale:1,frameStyles:20,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[18]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),a_()}get stores(){return this.$$.ctx[19]}set stores(e){this.$$set({stores:e}),a_()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),a_()}get frameStyles(){return this.$$.ctx[20]}set frameStyles(e){this.$$set({frameStyles:e}),a_()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(e){this.$$set({frameOptions:e}),a_()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(e){this.$$set({markupEditorShapeStyleControls:e}),a_()}},({src:e})=>e&&!l6(e)]},xD={util:["redact",class extends a3{constructor(e){super(),a5(this,e,yj,yV,oj,{name:20,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5,enableMultiSelect:6})}get name(){return this.$$.ctx[20]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),a_()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),a_()}get isVisible(){return this.$$.ctx[2]}set isVisible(e){this.$$set({isVisible:e}),a_()}get stores(){return this.$$.ctx[3]}set stores(e){this.$$set({stores:e}),a_()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),a_()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(e){this.$$set({markupEditorWillStartInteraction:e}),a_()}get enableMultiSelect(){return this.$$.ctx[6]}set enableMultiSelect(e){this.$$set({enableMultiSelect:e}),a_()}},({src:e})=>e&&!l6(e)]},x_={util:["resize",class extends a3{constructor(e){super(),a5(this,e,yN,yW,oj,{name:29,isActive:0,stores:30,locale:1,resizeMinSize:31,resizeMaxSize:32,resizeAspectRatioLocked:28,resizeEnableButtonLockAspectRatio:33,resizeSizePresetOptions:34,resizeWidthPresetOptions:35,resizeHeightPresetOptions:36,resizeWillRenderFooter:37,resizeFormatIconButtonMaintainAspectRatio:38},null,[-1,-1,-1,-1])}get name(){return this.$$.ctx[29]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),a_()}get stores(){return this.$$.ctx[30]}set stores(e){this.$$set({stores:e}),a_()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),a_()}get resizeMinSize(){return this.$$.ctx[31]}set resizeMinSize(e){this.$$set({resizeMinSize:e}),a_()}get resizeMaxSize(){return this.$$.ctx[32]}set resizeMaxSize(e){this.$$set({resizeMaxSize:e}),a_()}get resizeAspectRatioLocked(){return this.$$.ctx[28]}set resizeAspectRatioLocked(e){this.$$set({resizeAspectRatioLocked:e}),a_()}get resizeEnableButtonLockAspectRatio(){return this.$$.ctx[33]}set resizeEnableButtonLockAspectRatio(e){this.$$set({resizeEnableButtonLockAspectRatio:e}),a_()}get resizeSizePresetOptions(){return this.$$.ctx[34]}set resizeSizePresetOptions(e){this.$$set({resizeSizePresetOptions:e}),a_()}get resizeWidthPresetOptions(){return this.$$.ctx[35]}set resizeWidthPresetOptions(e){this.$$set({resizeWidthPresetOptions:e}),a_()}get resizeHeightPresetOptions(){return this.$$.ctx[36]}set resizeHeightPresetOptions(e){this.$$set({resizeHeightPresetOptions:e}),a_()}get resizeWillRenderFooter(){return this.$$.ctx[37]}set resizeWillRenderFooter(e){this.$$set({resizeWillRenderFooter:e}),a_()}get resizeFormatIconButtonMaintainAspectRatio(){return this.$$.ctx[38]}set resizeFormatIconButtonMaintainAspectRatio(e){this.$$set({resizeFormatIconButtonMaintainAspectRatio:e}),a_()}}]},xW={util:["fill",class extends a3{constructor(e){super(),a5(this,e,yQ,yK,oj,{name:12,isActive:0,stores:13,locale:1,fillOptions:14},null,[-1,-1])}get name(){return this.$$.ctx[12]}get isActive(){return this.$$.ctx[0]}set isActive(e){this.$$set({isActive:e}),a_()}get stores(){return this.$$.ctx[13]}set stores(e){this.$$set({stores:e}),a_()}get locale(){return this.$$.ctx[1]}set locale(e){this.$$set({locale:e}),a_()}get fillOptions(){return this.$$.ctx[14]}set fillOptions(e){this.$$set({fillOptions:e}),a_()}},({src:e,fillOptions:t})=>e&&!l6(e)&&t&&t.length]},xN={finetuneControlConfiguration:{gamma:{base:1,min:.15,max:4,getLabel:e=>e<1?pY((e-.15)/.85-1):pY((e-1)/3),getStore:({imageGamma:e})=>e},brightness:{base:0,min:-.25,max:.25,getLabel:e=>pY(e/.25),getStore:({imageColorMatrix:e})=>e,getValue:e=>{if(e.brightness)return e.brightness[4]},setValue:(e,t)=>e.update(e=>({...e,brightness:[1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0]}))},contrast:{base:1,min:.5,max:1.5,getLabel:e=>pY(-1+(e-.5)*2),getStore:({imageColorMatrix:e})=>e,getValue:e=>{if(e.contrast)return e.contrast[0]},setValue:(e,t)=>e.update(e=>({...e,contrast:[t,0,0,0,.5*(1-t),0,t,0,0,.5*(1-t),0,0,t,0,.5*(1-t),0,0,0,1,0]}))},saturation:{base:1,min:0,max:2,getLabel:e=>pY(e-1),getStore:({imageColorMatrix:e})=>e,getValue:e=>{if(e.saturation)return(e.saturation[0]-.213)/.787},setValue:(e,t)=>e.update(e=>({...e,saturation:[.213+.787*t,.715-.715*t,.072-.072*t,0,0,.213-.213*t,.715+.285*t,.072-.072*t,0,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,0,1,0]}))},exposure:{base:1,min:.5,max:1.5,getLabel:e=>pY(-1+(e-.5)*2),getStore:({imageColorMatrix:e})=>e,getValue:e=>{if(e.exposure)return e.exposure[0]},setValue:(e,t)=>e.update(e=>({...e,exposure:[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0]}))},temperature:{base:0,min:-1,max:1,getStore:({imageColorMatrix:e})=>e,getValue:e=>{if(!e.temperature)return;let t=e.temperature[0];return t>=1?(t-1)/.1:-((1-t)/.15)},setValue:(e,t)=>e.update(e=>({...e,temperature:t>0?[1+.1*t,0,0,0,0,0,1,0,0,0,0,0,1+-(.1*t),0,0,0,0,0,1,0]:[1+.15*t,0,0,0,0,0,1+.05*t,0,0,0,0,0,1+-(.15*t),0,0,0,0,0,1,0]}))},clarity:{base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:e})=>e,getValue:e=>{if(e.clarity)return 0===e.clarity[0]?-(e.clarity[1]/1):-(e.clarity[1]/2)},setValue:(e,t)=>{e.update(e=>({...e,clarity:t>=0?[0,-1*t,0,-1*t,1+4*t,-1*t,0,-1*t,0]:[-1*t,-2*t,-1*t,-2*t,1+-3*t,-2*t,-1*t,-2*t,-1*t]}))}},vignette:{base:0,min:-1,max:1,getStore:({imageVignette:e})=>e}},finetuneOptions:$D},xV={filterFunctions:{chrome:()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],fade:()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],pastel:()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],cold:()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],warm:()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],monoDefault:()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],monoWash:()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],monoNoir:()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],monoStark:()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],sepiaDefault:()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],sepiaRust:()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],sepiaBlues:()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],sepiaColor:()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0]},filterOptions:$O},xj={frameStyles:{solidSharp:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},solidRound:{shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},lineSingle:$W,lineMultiple:$N,edgeSeparate:$V,edgeCross:$j,edgeOverlap:$U,hook:$H,polaroid:{shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'}},frameOptions:$G},xU={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:"{features} not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoom:"Zoom",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:y0,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:y0,statusImageLoadNone:"Waiting for image",statusImageLoadMinSize:"Minimum image size is {minWidth} &times; {minHeight}",statusImageLoadPrepare:"Preparing image&hellip;",statusImageLoadBusy:"Loading image&hellip;",statusImageLoadError:"Error loading image",statusImageProcessBusy:"Processing image&hellip;",statusImageProcessError:"Error processing image",statusImageUploadBusy:"Uploading image&hellip;",statusImageUploadError:"Error uploading image"},xH={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},xG={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},xX={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:'<defs><mask id="mask1" x="-2" y="-2" width="24" height="24"><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g mask="url(#mask1)"><path transform="translate(0 {activeFraction})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>'},xZ={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},xY={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},xq={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},xK={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},xJ=(e={},t)=>{let{sub:r,pub:n}=rk(),o={},a=xn(e,t),l=()=>{a.hide&&a.hide()},s=()=>{a.show&&a.show()},d=y7(a.root);y6(d,o),o.handleEvent=x,d.handleEvent=(e,t)=>{if("init"===e)return o.handleEvent(e,o);o.handleEvent(e,t)},d.on("close",async()=>{let{willClose:t}=e;if(!t)return l();await t()&&l()});let c=(e,t)=>/show|hide/.test(e)?r(e,t):d.on(e,t),u=["show","hide"].map(e=>c(e,t=>o.handleEvent(e,t))),h=()=>{u.forEach(e=>e()),l(),a.$destroy(),d.destroy()};return lu(o,{on:c,destroy:h,hide:l,show:s}),Object.defineProperty(o,"modal",{get:()=>a.root,set:()=>void 0}),a.$on("close",d.close),a.$on("show",()=>n("show")),a.$on("hide",()=>{n("hide"),!1!==e.enableAutoDestroy&&h()}),!1!==e.enableAutoHide&&d.on("process",l),d.on("loadstart",s),!1!==e.enableButtonClose&&(e.enableButtonClose=!0),delete e.class,Object.assign(o,e),o},xQ=(e=[])=>xC([...xk(),...e]),x0=(e={})=>{let t,r,n;return Array.isArray(e.imageReader)||(r=e.imageReader,delete e.imageReader),Array.isArray(e.imageWriter)?t=sE():(t=U(e.imageWriter)?e.imageWriter:sE(e.imageWriter),delete e.imageWriter),U(e.imageScrambler)||(n=e.imageScrambler,delete e.imageScrambler),{imageReader:sM(r),imageWriter:t,imageOrienter:xT(),imageScrambler:xM(n)}},x1=(e={})=>{$M(xI,xA,xL,xF,xz,xB,xO,xD,x_,xW);let t=x0(e),r={...xU,...y2,...y4,...y5,...xH,...xG,...y3,...xK,...xX,...xZ,...xY,...xq,...e.locale};delete e.locale;let n="function"==typeof e.shapePreprocessor?e.shapePreprocessor:xQ(e.shapePreprocessor);return delete e.shapePreprocessor,e.markupEditorShapeStyleControls&&Object.entries(e.markupEditorShapeStyleControls).every(([e,t])=>/Options$/.test(e)||!Array.isArray(t))&&(e.markupEditorShapeStyleControls=mF({...e.markupEditorShapeStyleControls})),le([{...t,shapePreprocessor:n,utils:["trim","crop","filter","finetune","retouch","annotate","decorate","sticker","fill","frame","redact","resize"],...xN,...xV,...xj,...xR,stickerStickToImage:!0,locale:r},e])},x2=(e,t)=>xJ(x1(e),t)}}]);
//# sourceMappingURL=6666.858fd2b4.js.map