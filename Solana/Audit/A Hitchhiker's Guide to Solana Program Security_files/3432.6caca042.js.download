(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3432"],{8400:function(e,t,n){var r=n(14259),o=n(16612),l=n(40554),i=Math.ceil,s=Math.max;e.exports=function(e,t,n){t=(n?o(e,t,n):void 0===t)?1:s(l(t),0);var c=null==e?0:e.length;if(!c||t<1)return[];for(var u=0,a=0,d=Array(i(c/t));u<c;)d[a++]=r(e,u,u+=t);return d}},28518:function(e,t,n){"use strict";n.d(t,{NI:()=>H,YF:()=>L,Y_:()=>W,bQ:()=>Y,ll:()=>O});var r=n(98661),o=n(17268),l=n(33771),i=n(31720),s=n(88388),c=n(78493);let u={...r},a=u.useInsertionEffect||(e=>e());function d(e){let t=r.useRef(()=>{});return a(()=>{t.current=e}),r.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}var f="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;let p=!1,m=0,h=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+m++,v=u.useId||function(){let[e,t]=r.useState(()=>p?h():void 0);return f(()=>{null==e&&t(h())},[]),r.useEffect(()=>{p=!0},[]),e},y=r.createContext(null),g=r.createContext(null),b=()=>{var e;return(null==(e=r.useContext(y))?void 0:e.id)||null},w=()=>r.useContext(g);function x(e){return"data-floating-ui-"+e}function C(e){let t=(0,r.useRef)(e);return f(()=>{t.current=e}),t}function k(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let E=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function R(e,t){let n=(0,s.ht)(e,E());"prev"===t&&n.reverse();let r=n.indexOf((0,o.AW)((0,o.Me)(e)));return n.slice(r+1)[0]}function M(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!(0,o.r3)(n,r)}function S(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}let I={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},A=r.forwardRef(function(e,t){let[n,i]=r.useState();f(()=>{(0,o.G6)()&&i("button")},[]);let s={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[x("focus-guard")]:"",style:I};return(0,l.tZ)("span",{...e,...s})}),P=r.createContext(null),D=x("portal");function O(e){let{children:t,id:n,root:o,preserveTabOrder:c=!0}=e,u=function(e){void 0===e&&(e={});let{id:t,root:n}=e,o=v(),l=V(),[s,c]=r.useState(null),u=r.useRef(null);return f(()=>()=>{null==s||s.remove(),queueMicrotask(()=>{u.current=null})},[s]),f(()=>{if(!o||u.current)return;let e=t?document.getElementById(t):null;if(!e)return;let n=document.createElement("div");n.id=o,n.setAttribute(D,""),e.appendChild(n),u.current=n,c(n)},[t,o]),f(()=>{if(null===n||!o||u.current)return;let e=n||(null==l?void 0:l.portalNode);e&&!(0,i.kK)(e)&&(e=e.current),e=e||document.body;let r=null;t&&((r=document.createElement("div")).id=t,e.appendChild(r));let s=document.createElement("div");s.id=o,s.setAttribute(D,""),(e=r||e).appendChild(s),u.current=s,c(s)},[t,n,o,l]),s}({id:n,root:o}),[a,d]=r.useState(null),p=r.useRef(null),m=r.useRef(null),h=r.useRef(null),y=r.useRef(null),g=null==a?void 0:a.modal,b=null==a?void 0:a.open,w=!!a&&!a.modal&&a.open&&c&&!!(o||u);return r.useEffect(()=>{if(u&&c&&!g)return u.addEventListener("focusin",e,!0),u.addEventListener("focusout",e,!0),()=>{u.removeEventListener("focusin",e,!0),u.removeEventListener("focusout",e,!0)};function e(e){u&&M(e)&&("focusin"===e.type?S:function(e){(0,s.ht)(e,E()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})})(u)}},[u,c,g]),r.useEffect(()=>{u&&(b||S(u))},[b,u]),(0,l.BX)(P.Provider,{value:r.useMemo(()=>({preserveTabOrder:c,beforeOutsideRef:p,afterOutsideRef:m,beforeInsideRef:h,afterInsideRef:y,portalNode:u,setFocusManagerState:d}),[c,u]),children:[w&&u&&(0,l.tZ)(A,{"data-type":"outside",ref:p,onFocus:e=>{if(M(e,u)){var t;null==(t=h.current)||t.focus()}else{let e=R(document.body,"prev")||(null==a?void 0:a.domReference);null==e||e.focus()}}}),w&&u&&(0,l.tZ)("span",{"aria-owns":u.id,style:I}),u&&r.createPortal(t,u),w&&u&&(0,l.tZ)(A,{"data-type":"outside",ref:m,onFocus:e=>{if(M(e,u)){var t;null==(t=y.current)||t.focus()}else{let t=R(document.body,"next")||(null==a?void 0:a.domReference);null==t||t.focus(),(null==a?void 0:a.closeOnFocusOut)&&(null==a||a.onOpenChange(!1,e.nativeEvent,"focus-out"))}}})]})}let V=()=>r.useContext(P),z={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},T={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},B=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function Y(e,t){void 0===t&&(t={});let{open:n,onOpenChange:l,elements:s,dataRef:c}=e,{enabled:u=!0,escapeKey:a=!0,outsidePress:f=!0,outsidePressEvent:p="pointerdown",referencePress:m=!1,referencePressEvent:h="pointerdown",ancestorScroll:v=!1,bubbles:y,capture:g}=t,b=w(),C=d("function"==typeof f?f:()=>!1),E="function"==typeof f?C:f,R=r.useRef(!1),M=r.useRef(!1),{escapeKey:S,outsidePress:I}=B(y),{escapeKey:A,outsidePress:P}=B(g),D=r.useRef(!1),O=d(e=>{var t;if(!n||!u||!a||"Escape"!==e.key||D.current)return;let r=null==(t=c.current.floatingContext)?void 0:t.nodeId,i=b?k(b.nodesRef.current,r):[];if(!S&&(e.stopPropagation(),i.length>0)){let e=!0;if(i.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__escapeKeyBubbles){e=!1;return}}),!e)return}l(!1,(0,o.MM)(e)?e.nativeEvent:e,"escape-key")}),V=d(e=>{var t;let n=()=>{var t;O(e),null==(t=(0,o.U9)(e))||t.removeEventListener("keydown",n)};null==(t=(0,o.U9)(e))||t.addEventListener("keydown",n)}),Y=d(e=>{var t;let n=R.current;R.current=!1;let r=M.current;if(M.current=!1,"click"===p&&r||n||"function"==typeof E&&!E(e))return;let u=(0,o.U9)(e),a="["+x("inert")+"]",d=(0,o.Me)(s.floating).querySelectorAll(a),f=(0,i.kK)(u)?u:null;for(;f&&!(0,i.Py)(f);){let e=(0,i.Ow)(f);if((0,i.Py)(e)||!(0,i.kK)(e))break;f=e}if(d.length&&(0,i.kK)(u)&&!(0,o.ex)(u)&&!(0,o.r3)(u,s.floating)&&Array.from(d).every(e=>!(0,o.r3)(f,e)))return;if((0,i.Re)(u)&&F){let t=(0,i.Py)(u),n=(0,i.Dx)(u),r=/auto|scroll/,o=t||r.test(n.overflowX),l=t||r.test(n.overflowY),s=o&&u.clientWidth>0&&u.scrollWidth>u.clientWidth,c=l&&u.clientHeight>0&&u.scrollHeight>u.clientHeight,a="rtl"===n.direction,d=c&&(a?e.offsetX<=u.offsetWidth-u.clientWidth:e.offsetX>u.clientWidth),f=s&&e.offsetY>u.clientHeight;if(d||f)return}let m=null==(t=c.current.floatingContext)?void 0:t.nodeId,h=b&&k(b.nodesRef.current,m).some(t=>{var n;return(0,o.Pe)(e,null==(n=t.context)?void 0:n.elements.floating)});if((0,o.Pe)(e,s.floating)||(0,o.Pe)(e,s.domReference)||h)return;let v=b?k(b.nodesRef.current,m):[];if(v.length>0){let e=!0;if(v.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__outsidePressBubbles){e=!1;return}}),!e)return}l(!1,e,"outside-press")}),L=d(e=>{var t;let n=()=>{var t;Y(e),null==(t=(0,o.U9)(e))||t.removeEventListener(p,n)};null==(t=(0,o.U9)(e))||t.addEventListener(p,n)});r.useEffect(()=>{if(!n||!u)return;c.current.__escapeKeyBubbles=S,c.current.__outsidePressBubbles=I;let e=-1;function t(e){l(!1,e,"ancestor-scroll")}function r(){window.clearTimeout(e),D.current=!0}function d(){e=window.setTimeout(()=>{D.current=!1},5*!!(0,i.Pf)())}let f=(0,o.Me)(s.floating);a&&(f.addEventListener("keydown",A?V:O,A),f.addEventListener("compositionstart",r),f.addEventListener("compositionend",d)),E&&f.addEventListener(p,P?L:Y,P);let m=[];return v&&((0,i.kK)(s.domReference)&&(m=(0,i.Kx)(s.domReference)),(0,i.kK)(s.floating)&&(m=m.concat((0,i.Kx)(s.floating))),!(0,i.kK)(s.reference)&&s.reference&&s.reference.contextElement&&(m=m.concat((0,i.Kx)(s.reference.contextElement)))),(m=m.filter(e=>{var t;return e!==(null==(t=f.defaultView)?void 0:t.visualViewport)})).forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{a&&(f.removeEventListener("keydown",A?V:O,A),f.removeEventListener("compositionstart",r),f.removeEventListener("compositionend",d)),E&&f.removeEventListener(p,P?L:Y,P),m.forEach(e=>{e.removeEventListener("scroll",t)}),window.clearTimeout(e)}},[c,s,a,E,p,n,l,v,u,S,I,O,A,V,Y,P,L]),r.useEffect(()=>{R.current=!1},[E,p]);let N=r.useMemo(()=>({onKeyDown:O,...m&&{[z[h]]:e=>{l(!1,e.nativeEvent,"reference-press")},..."click"!==h&&{onClick(e){l(!1,e.nativeEvent,"reference-press")}}}}),[O,l,m,h]),F=r.useMemo(()=>({onKeyDown:O,onMouseDown(){M.current=!0},onMouseUp(){M.current=!0},[T[p]]:()=>{R.current=!0}}),[O,p]);return r.useMemo(()=>u?{reference:N,floating:F}:{},[u,N,F])}function L(e){void 0===e&&(e={});let{nodeId:t}=e,n=function(e){let{open:t=!1,onOpenChange:n,elements:o}=e,l=v(),i=r.useRef({}),[s]=r.useState(()=>(function(){let e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}})()),c=null!=b(),[u,a]=r.useState(o.reference),f=d((e,t,r)=>{i.current.openEvent=e?t:void 0,s.emit("openchange",{open:e,event:t,reason:r,nested:c}),null==n||n(e,t,r)}),p=r.useMemo(()=>({setPositionReference:a}),[]),m=r.useMemo(()=>({reference:u||o.reference||null,floating:o.floating||null,domReference:o.reference}),[u,o.reference,o.floating]);return r.useMemo(()=>({dataRef:i,open:t,onOpenChange:f,elements:m,events:s,floatingId:l,refs:p}),[t,f,m,s,l,p])}({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||n,l=o.elements,[s,u]=r.useState(null),[a,p]=r.useState(null),m=(null==l?void 0:l.domReference)||s,h=r.useRef(null),y=w();f(()=>{m&&(h.current=m)},[m]);let g=(0,c.YF)({...e,elements:{...l,...a&&{reference:a}}}),x=r.useCallback(e=>{let t=(0,i.kK)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;p(t),g.refs.setReference(t)},[g.refs]),C=r.useCallback(e=>{((0,i.kK)(e)||null===e)&&(h.current=e,u(e)),((0,i.kK)(g.refs.reference.current)||null===g.refs.reference.current||null!==e&&!(0,i.kK)(e))&&g.refs.setReference(e)},[g.refs]),k=r.useMemo(()=>({...g.refs,setReference:C,setPositionReference:x,domReference:h}),[g.refs,C,x]),E=r.useMemo(()=>({...g.elements,domReference:m}),[g.elements,m]),R=r.useMemo(()=>({...g,...o,refs:k,elements:E,nodeId:t}),[g,k,E,t,o]);return f(()=>{o.dataRef.current.floatingContext=R;let e=null==y?void 0:y.nodesRef.current.find(e=>e.id===t);e&&(e.context=R)}),r.useMemo(()=>({...g,context:R,refs:k,elements:E}),[g,k,E,R])}let N="active",F="selected";function K(e,t,n){let r=new Map,o="item"===n,l=e;if(o&&e){let{[N]:t,[F]:n,...r}=e;l=r}return{..."floating"===n&&{tabIndex:-1,"data-floating-ui-focusable":""},...l,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,l]=t;if(!(o&&[N,F].includes(n))){if(0===n.indexOf("on")){if(r.has(n)||r.set(n,[]),"function"==typeof l){var i;null==(i=r.get(n))||i.push(l),e[n]=function(){for(var e,t=arguments.length,o=Array(t),l=0;l<t;l++)o[l]=arguments[l];return null==(e=r.get(n))?void 0:e.map(e=>e(...o)).find(e=>void 0!==e)}}}else e[n]=l}}),e),{})}}function H(e){void 0===e&&(e=[]);let t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),o=e.map(e=>null==e?void 0:e.item),l=r.useCallback(t=>K(t,e,"reference"),t),i=r.useCallback(t=>K(t,e,"floating"),n),s=r.useCallback(t=>K(t,e,"item"),o);return r.useMemo(()=>({getReferenceProps:l,getFloatingProps:i,getItemProps:s}),[l,i,s])}let q=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,t)=>(t?"-":"")+e.toLowerCase());function U(e,t){return"function"==typeof e?e(t):e}function W(e,t){void 0===t&&(t={});let{initial:n={opacity:0},open:o,close:l,common:i,duration:s=250}=t,c=e.placement,u=c.split("-")[0],a=r.useMemo(()=>({side:u,placement:c}),[u,c]),d="number"==typeof s,p=(d?s:s.open)||0,m=(d?s:s.close)||0,[h,v]=r.useState(()=>({...U(i,a),...U(n,a)})),{isMounted:y,status:g}=function(e,t){void 0===t&&(t={});let{open:n,elements:{floating:o}}=e,{duration:l=250}=t,i=("number"==typeof l?l:l.close)||0,[s,c]=r.useState("unmounted"),u=function(e,t){let[n,o]=r.useState(e);return e&&!n&&o(!0),r.useEffect(()=>{if(!e&&n){let e=setTimeout(()=>o(!1),t);return()=>clearTimeout(e)}},[e,n,t]),n}(n,i);return u||"close"!==s||c("unmounted"),f(()=>{if(o){if(n){c("initial");let e=requestAnimationFrame(()=>{c("open")});return()=>{cancelAnimationFrame(e)}}c("close")}},[n,o]),{isMounted:u,status:s}}(e,{duration:s}),b=C(n),w=C(o),x=C(l),k=C(i);return f(()=>{let e=U(b.current,a),t=U(x.current,a),n=U(k.current,a),r=U(w.current,a)||Object.keys(e).reduce((e,t)=>(e[t]="",e),{});if("initial"===g&&v(t=>({transitionProperty:t.transitionProperty,...n,...e})),"open"===g&&v({transitionProperty:Object.keys(r).map(q).join(","),transitionDuration:p+"ms",...n,...r}),"close"===g){let r=t||e;v({transitionProperty:Object.keys(r).map(q).join(","),transitionDuration:m+"ms",...n,...r})}},[m,x,b,w,k,p,g,a]),{isMounted:y,styles:h}}},17268:function(e,t,n){"use strict";n.d(t,{AW:()=>o,G6:()=>i,MM:()=>s,Me:()=>u,Pe:()=>a,U9:()=>d,ex:()=>c,r3:()=>l});var r=n(31720);function o(e){let t=e.activeElement;for(;(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function l(e,t){if(!e||!t)return!1;let n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&(0,r.Zq)(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function i(){return/apple/i.test(navigator.vendor)}function s(e){return"nativeEvent"in e}function c(e){return e.matches("html,body")}function u(e){return(null==e?void 0:e.ownerDocument)||document}function a(e,t){return null!=t&&("composedPath"in e?e.composedPath().includes(t):null!=e.target&&t.contains(e.target))}function d(e){return"composedPath"in e?e.composedPath()[0]:e.target}},55679:function(e,t,n){"use strict";n.d(t,{M_:()=>g,NM:()=>p,T5:()=>y,fW:()=>w,jE:()=>a,kg:()=>c,ms:()=>v});var r=n(36779),o=n(98661),l=n(88897);let i=({renderers:e})=>o.default.createElement(o.default.Fragment,null,Object.entries(e).map(([e,t])=>o.default.createPortal(t.reactElement,t.element,e)));class s extends o.default.Component{constructor(e){super(e),this.editorContentRef=o.default.createRef(),this.initialized=!1,this.state={renderers:{}}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let{editor:e}=this.props;if(e&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=this,e.createNodeViews(),this.initialized=!0}}maybeFlushSync(e){this.initialized?(0,o.flushSync)(e):e()}setRenderer(e,t){this.maybeFlushSync(()=>{this.setState(({renderers:n})=>({renderers:{...n,[e]:t}}))})}removeRenderer(e){this.maybeFlushSync(()=>{this.setState(({renderers:t})=>{let n={...t};return delete n[e],{renderers:n}})})}componentWillUnmount(){let{editor:e}=this.props;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,...t}=this.props;return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{ref:this.editorContentRef,...t}),o.default.createElement(i,{renderers:this.state.renderers}))}}let c=o.default.memo(e=>{let t=o.default.useMemo(()=>Math.floor(0xffffffff*Math.random()).toString(),[e.editor]);return o.default.createElement(s,{key:t,...e})});class u extends l.ML{constructor(){super(...arguments),this.contentComponent=null}}let a=(e={},t=[])=>{let[n,r]=(0,o.useState)(null),l=function(){let[,e]=(0,o.useState)(0);return()=>e(e=>e+1)}(),{onBeforeCreate:i,onBlur:s,onCreate:c,onDestroy:a,onFocus:d,onSelectionUpdate:f,onTransaction:p,onUpdate:m}=e,h=(0,o.useRef)(i),v=(0,o.useRef)(s),y=(0,o.useRef)(c),g=(0,o.useRef)(a),b=(0,o.useRef)(d),w=(0,o.useRef)(f),x=(0,o.useRef)(p),C=(0,o.useRef)(m);return(0,o.useEffect)(()=>{n&&(i&&(n.off("beforeCreate",h.current),n.on("beforeCreate",i),h.current=i),s&&(n.off("blur",v.current),n.on("blur",s),v.current=s),c&&(n.off("create",y.current),n.on("create",c),y.current=c),a&&(n.off("destroy",g.current),n.on("destroy",a),g.current=a),d&&(n.off("focus",b.current),n.on("focus",d),b.current=d),f&&(n.off("selectionUpdate",w.current),n.on("selectionUpdate",f),w.current=f),p&&(n.off("transaction",x.current),n.on("transaction",p),x.current=p),m&&(n.off("update",C.current),n.on("update",m),C.current=m))},[i,s,c,a,d,f,p,m,n]),(0,o.useEffect)(()=>{let t=!0,n=new u(e);return r(n),n.on("transaction",()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t&&l()})})}),()=>{t=!1}},t),(0,o.useEffect)(()=>()=>{null==n||n.destroy()},[n]),n},d=(0,o.createContext)({editor:null});d.Consumer;let f=()=>(0,o.useContext)(d),p=e=>{let[t,n]=(0,o.useState)(null),{editor:l}=f();return(0,o.useEffect)(()=>{var n;if(!t||(null===(n=e.editor)||void 0===n?void 0:n.isDestroyed)||(null==l?void 0:l.isDestroyed))return;let{pluginKey:o="bubbleMenu",editor:i,tippyOptions:s={},updateDelay:c,shouldShow:u=null}=e,a=i||l;if(!a){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}let d=(0,r.q3)({updateDelay:c,editor:a,element:t,pluginKey:o,shouldShow:u,tippyOptions:s});return a.registerPlugin(d),()=>a.unregisterPlugin(o)},[e.editor,l,t]),o.default.createElement("div",{ref:n,className:e.className,style:{visibility:"hidden"}},e.children)},m=(0,o.createContext)({onDragStart:void 0}),h=()=>(0,o.useContext)(m),v=e=>{let t=e.as||"div",{nodeViewContentRef:n}=h();return o.default.createElement(t,{...e,ref:n,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...e.style}})},y=o.default.forwardRef((e,t)=>{let{onDragStart:n}=h(),r=e.as||"div";return o.default.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});class g{constructor(e,{editor:t,props:n={},as:r="div",className:o="",attrs:l}){this.ref=null,this.id=Math.floor(0xffffffff*Math.random()).toString(),this.component=e,this.editor=t,this.props=n,this.element=document.createElement(r),this.element.classList.add("react-renderer"),o&&this.element.classList.add(...o.split(" ")),l&&Object.keys(l).forEach(e=>{this.element.setAttribute(e,l[e])}),this.render()}render(){var e,t,n;let r=this.component,l=this.props;("function"==typeof r&&r.prototype&&r.prototype.isReactComponent||"object"==typeof r&&(null===(n=r.$$typeof)||void 0===n?void 0:n.toString())==="Symbol(react.forward_ref)")&&(l.ref=e=>{this.ref=e}),this.reactElement=o.default.createElement(r,{...l}),null===(t=null===(e=this.editor)||void 0===e?void 0:e.contentComponent)||void 0===t||t.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e,t;null===(t=null===(e=this.editor)||void 0===e?void 0:e.contentComponent)||void 0===t||t.removeRenderer(this.id)}}class b extends l.DK{mount(){let e={editor:this.editor,node:this.node,decorations:this.decorations,selected:!1,extension:this.extension,getPos:()=>this.getPos(),updateAttributes:(e={})=>this.updateAttributes(e),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){let e;this.component.displayName=(e=this.extension.name).charAt(0).toUpperCase()+e.substring(1)}let t=e=>{let t=this.component,n=this.onDragStart.bind(this);return o.default.createElement(o.default.Fragment,null,o.default.createElement(m.Provider,{value:{onDragStart:n,nodeViewContentRef:e=>{e&&this.contentDOMElement&&e.firstChild!==this.contentDOMElement&&e.appendChild(this.contentDOMElement)}}},o.default.createElement(t,{...e})))};t.displayName="ReactNodeView",this.contentDOMElement=this.node.isLeaf?null:document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.style.whiteSpace="inherit");let n=this.node.isInline?"span":"div";this.options.as&&(n=this.options.as);let{className:r=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new g(t,{editor:this.editor,props:e,as:n,className:`node-${this.node.type.name} ${r}`.trim(),attrs:this.options.attrs})}get dom(){var e;if(this.renderer.element.firstElementChild&&!(null===(e=this.renderer.element.firstElementChild)||void 0===e?void 0:e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){let{from:e,to:t}=this.editor.state.selection;e<=this.getPos()&&t>=this.getPos()+this.node.nodeSize?this.selectNode():this.deselectNode()}update(e,t){let n=e=>{this.renderer.updateProps(e)};if(e.type!==this.node.type)return!1;if("function"==typeof this.options.update){let r=this.node,o=this.decorations;return this.node=e,this.decorations=t,this.options.update({oldNode:r,oldDecorations:o,newNode:e,newDecorations:t,updateProps:()=>n({node:e,decorations:t})})}return e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,n({node:e,decorations:t}),!0)}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}}function w(e,t){return n=>n.editor.contentComponent?new b(e,n,t):{}}},21834:function(e,t,n){"use strict";n.d(t,{Ig:()=>h,MI:()=>m,N0:()=>C,NE:()=>i,QK:()=>y,U9:()=>R,X0:()=>x,Y_:()=>d,_M:()=>u,al:()=>s,mD:()=>w,nw:()=>M,o:()=>f,uJ:()=>I,uo:()=>b,xb:()=>v,ym:()=>S});var r=n(83311),o=n(76405),l=n(92007);let i=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0),s=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}(e,n);if(!i)return!1;let s=a(i);if(!s){let n=i.blockRange(),o=n&&(0,r.k9)(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let u=s.nodeBefore;if(!u.type.spec.isolating&&k(e,s,t))return!0;if(0==i.parent.content.size&&(c(u,"end")||l.qv.isSelectable(u))){let n=(0,r.dR)(e.doc,i.before(),i.after(),o.p2.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(c(u,"end")?l.Y1.findFrom(r.doc.resolve(r.mapping.map(s.pos,-1)),-1):l.qv.create(r.doc,s.pos-u.nodeSize)),t(r.scrollIntoView())}return!0}}return!!u.isAtom&&s.depth==i.depth-1&&(t&&t(e.tr.delete(s.pos-u.nodeSize,s.pos).scrollIntoView()),!0)};function c(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)break}return!1}let u=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=a(r)}let s=i&&i.nodeBefore;return!!(s&&l.qv.isSelectable(s))&&(t&&t(e.tr.setSelection(l.qv.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function a(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}let d=(e,t,n)=>{let i=function(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}(e,n);if(!i)return!1;let s=p(i);if(!s)return!1;let u=s.nodeAfter;if(k(e,s,t))return!0;if(0==i.parent.content.size&&(c(u,"start")||l.qv.isSelectable(u))){let n=(0,r.dR)(e.doc,i.before(),i.after(),o.p2.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(c(u,"start")?l.Y1.findFrom(r.doc.resolve(r.mapping.map(s.pos)),1):l.qv.create(r.doc,r.mapping.map(s.pos))),t(r.scrollIntoView())}return!0}}return!!u.isAtom&&s.depth==i.depth-1&&(t&&t(e.tr.delete(s.pos,s.pos+u.nodeSize).scrollIntoView()),!0)},f=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=p(r)}let s=i&&i.nodeAfter;return!!(s&&l.qv.isSelectable(s))&&(t&&t(e.tr.setSelection(l.qv.create(e.doc,i.pos)).scrollIntoView()),!0)};function p(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}let m=(e,t)=>{let n=e.selection,o=n instanceof l.qv,i;if(o){if(n.node.isTextblock||!(0,r.Mn)(e.doc,n.from))return!1;i=n.from}else if(null==(i=(0,r.GJ)(e.doc,n.from,-1)))return!1;if(t){let n=e.tr.join(i);o&&n.setSelection(l.qv.create(n.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(n.scrollIntoView())}return!0},h=(e,t)=>{let n=e.selection,o;if(n instanceof l.qv){if(n.node.isTextblock||!(0,r.Mn)(e.doc,n.to))return!1;o=n.to}else if(null==(o=(0,r.GJ)(e.doc,n.to,1)))return!1;return t&&t(e.tr.join(o).scrollIntoView()),!0},v=(e,t)=>{let{$from:n,$to:o}=e.selection,l=n.blockRange(o),i=l&&(0,r.k9)(l);return null!=i&&(t&&t(e.tr.lift(l,i).scrollIntoView()),!0)},y=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!!(n.parent.type.spec.code&&n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function g(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}let b=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=g(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(t){let r=n.after(),o=e.tr.replaceWith(r,r,s.createAndFill());o.setSelection(l.Y1.near(o.doc.resolve(r),1)),t(o.scrollIntoView())}return!0},w=(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof l.C1||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=g(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(n,i.createAndFill());s.setSelection(l.Bs.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},x=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if((0,r.Ax)(e.doc,o))return t&&t(e.tr.split(o).scrollIntoView()),!0}let o=n.blockRange(),l=o&&(0,r.k9)(o);return null!=l&&(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)},C=(e,t)=>{let{$from:n,to:r}=e.selection,o,i=n.sharedDepth(r);return 0!=i&&(o=n.before(i),t&&t(e.tr.setSelection(l.qv.create(e.doc,o))),!0)};function k(e,t,n){let i,s,u,a=t.nodeBefore,d=t.nodeAfter,f,p;if(a.type.spec.isolating||d.type.spec.isolating)return!1;if(i=t.nodeBefore,s=t.nodeAfter,u=t.index(),i&&s&&i.type.compatibleContent(s.type)&&(!i.content.size&&t.parent.canReplace(u-1,u)?(n&&n(e.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),!0):!!(t.parent.canReplace(u,u+1)&&(s.isTextblock||(0,r.Mn)(e.doc,t.pos)))&&(n&&n(e.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),!0)))return!0;let m=t.parent.canReplace(t.index(),t.index()+1);if(m&&(f=(p=a.contentMatchAt(a.childCount)).findWrapping(d.type))&&p.matchType(f[0]||d.type).validEnd){if(n){let l=t.pos+d.nodeSize,i=o.HY.empty;for(let e=f.length-1;e>=0;e--)i=o.HY.from(f[e].create(null,i));i=o.HY.from(a.copy(i));let s=e.tr.step(new r.FC(t.pos-1,l,t.pos,l,new o.p2(i,1,0),f.length,!0)),c=l+2*f.length;(0,r.Mn)(s.doc,c)&&s.join(c),n(s.scrollIntoView())}return!0}let h=l.Y1.findFrom(t,1),v=h&&h.$from.blockRange(h.$to),y=v&&(0,r.k9)(v);if(null!=y&&y>=t.depth)return n&&n(e.tr.lift(v,y).scrollIntoView()),!0;if(m&&c(d,"start",!0)&&c(a,"end")){let l=a,i=[];for(;i.push(l),!l.isTextblock;)l=l.lastChild;let s=d,c=1;for(;!s.isTextblock;s=s.firstChild)c++;if(l.canReplace(l.childCount,l.childCount,s.content)){if(n){let l=o.HY.empty;for(let e=i.length-1;e>=0;e--)l=o.HY.from(i[e].copy(l));n(e.tr.step(new r.FC(t.pos-i.length,t.pos+d.nodeSize,t.pos+c,t.pos+d.nodeSize-c,new o.p2(l,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function E(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(t.tr.setSelection(l.Bs.create(t.doc,e<0?o.start(i):o.end(i)))),!0)}}let R=E(-1),M=E(1);function S(e,t=null){return function(n,o){let{$from:l,$to:i}=n.selection,s=l.blockRange(i),c=s&&(0,r.nd)(s,e,t);return!!c&&(o&&o(n.tr.wrap(s,c).scrollIntoView()),!0)}}function I(e,t=null){return function(n,r){let o=!1;for(let r=0;r<n.selection.ranges.length&&!o;r++){let{$from:{pos:l},$to:{pos:i}}=n.selection.ranges[r];n.doc.nodesBetween(l,i,(r,l)=>{if(o)return!1;if(!(!r.isTextblock||r.hasMarkup(e,t))){if(r.type==e)o=!0;else{let t=n.doc.resolve(l),r=t.index();o=t.parent.canReplaceWith(r,r+1,e)}}})}if(!o)return!1;if(r){let o=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:l},$to:{pos:i}}=n.selection.ranges[r];o.setBlockType(l,i,e,t)}r(o.scrollIntoView())}return!0}}function A(...e){return function(t,n,r){for(let o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}let P=A(i,s,u),D=A(i,d,f),O={Enter:A(y,w,x,(e,t)=>{let{$from:n,$to:o}=e.selection;if(e.selection instanceof l.qv&&e.selection.node.isBlock)return!!(n.parentOffset&&(0,r.Ax)(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.parent.isBlock)return!1;if(t){let i=o.parentOffset==o.parent.content.size,s=e.tr;(e.selection instanceof l.Bs||e.selection instanceof l.C1)&&s.deleteSelection();let c=0==n.depth?null:g(n.node(-1).contentMatchAt(n.indexAfter(-1))),u,a=u?[u]:i&&c?[{type:c}]:void 0,d=(0,r.Ax)(s.doc,s.mapping.map(n.pos),1,a);if(!a&&!d&&(0,r.Ax)(s.doc,s.mapping.map(n.pos),1,c?[{type:c}]:void 0)&&(c&&(a=[{type:c}]),d=!0),d&&(s.split(s.mapping.map(n.pos),1,a),!i&&!n.parentOffset&&n.parent.type!=c)){let e=s.mapping.map(n.before()),t=s.doc.resolve(e);c&&n.node(-1).canReplaceWith(t.index(),t.index()+1,c)&&s.setNodeMarkup(s.mapping.map(n.before()),c)}t(s.scrollIntoView())}return!0}),"Mod-Enter":b,Backspace:P,"Mod-Backspace":P,"Shift-Backspace":P,Delete:D,"Mod-Delete":D,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new l.C1(e.doc))),!0)},V={"Ctrl-h":O.Backspace,"Alt-Backspace":O["Mod-Backspace"],"Ctrl-d":O.Delete,"Ctrl-Alt-Backspace":O["Mod-Delete"],"Alt-Delete":O["Mod-Delete"],"Alt-d":O["Mod-Delete"],"Ctrl-a":R,"Ctrl-e":M};for(let e in O)V[e]=O[e];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform()},18923:function(e,t,n){"use strict";n.d(t,{IB:()=>i,KI:()=>l,bw:()=>s});var r=n(83311),o=n(76405);function l(e,t=null){return function(n,l){let{$from:i,$to:s}=n.selection,c=i.blockRange(s),u=!1,a=c;if(!c)return!1;if(c.depth>=2&&i.node(c.depth-1).type.compatibleContent(e)&&0==c.startIndex){if(0==i.index(c.depth-1))return!1;let e=n.doc.resolve(c.start-2);a=new o.Ts(e,e,c.depth),c.endIndex<c.parent.childCount&&(c=new o.Ts(i,n.doc.resolve(s.end(c.depth)),c.depth)),u=!0}let d=(0,r.nd)(a,e,t,c);return!!d&&(l&&l((function(e,t,n,l,i){let s=o.HY.empty;for(let e=n.length-1;e>=0;e--)s=o.HY.from(n[e].type.create(n[e].attrs,s));e.step(new r.FC(t.start-2*!!l,t.end,t.start,t.end,new o.p2(s,0,0),n.length,!0));let c=0;for(let e=0;e<n.length;e++)n[e].type==i&&(c=e+1);let u=n.length-c,a=t.start+n.length-2*!!l,d=t.parent;for(let n=t.startIndex,o=t.endIndex,l=!0;n<o;n++,l=!1)!l&&(0,r.Ax)(e.doc,a,u)&&(e.split(a,u),a+=2*u),a+=d.child(n).nodeSize;return e})(n.tr,c,d,u,e).scrollIntoView()),!0)}}function i(e){return function(t,n){let{$from:l,$to:i}=t.selection,s=l.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);return!!s&&(!n||(l.node(s.depth-1).type==e?function(e,t,n,l){let i=e.tr,s=l.end,c=l.$to.end(l.depth);s<c&&(i.step(new r.FC(s-1,c,s,c,new o.p2(o.HY.from(n.create(null,l.parent.copy())),1,0),1,!0)),l=new o.Ts(i.doc.resolve(l.$from.pos),i.doc.resolve(c),l.depth));let u=(0,r.k9)(l);if(null==u)return!1;i.lift(l,u);let a=i.mapping.map(s,-1)-1;return(0,r.Mn)(i.doc,a)&&i.join(a),t(i.scrollIntoView()),!0}(t,n,e,s):function(e,t,n){let l=e.tr,i=n.parent;for(let e=n.end,t=n.endIndex-1,r=n.startIndex;t>r;t--)e-=i.child(t).nodeSize,l.delete(e-1,e+1);let s=l.doc.resolve(n.start),c=s.nodeAfter;if(l.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let u=0==n.startIndex,a=n.endIndex==i.childCount,d=s.node(-1),f=s.index(-1);if(!d.canReplace(f+ +!u,f+1,c.content.append(a?o.HY.empty:o.HY.from(i))))return!1;let p=s.pos,m=p+c.nodeSize;return l.step(new r.FC(p-+!!u,m+ +!!a,p+1,m-1,new o.p2((u?o.HY.empty:o.HY.from(i.copy(o.HY.empty))).append(a?o.HY.empty:o.HY.from(i.copy(o.HY.empty))),+!u,+!a),+!u)),t(l.scrollIntoView()),!0}(t,n,s)))}}function s(e){return function(t,n){let{$from:l,$to:i}=t.selection,s=l.blockRange(i,t=>t.childCount>0&&t.firstChild.type==e);if(!s)return!1;let c=s.startIndex;if(0==c)return!1;let u=s.parent,a=u.child(c-1);if(a.type!=e)return!1;if(n){let l=a.lastChild&&a.lastChild.type==u.type,i=o.HY.from(l?e.create():null),c=new o.p2(o.HY.from(e.create(null,o.HY.from(u.type.create(null,i)))),l?3:1,0),d=s.start,f=s.end;n(t.tr.step(new r.FC(d-(l?3:1),f,d,f,c,1,!0)).scrollIntoView())}return!0}}}}]);