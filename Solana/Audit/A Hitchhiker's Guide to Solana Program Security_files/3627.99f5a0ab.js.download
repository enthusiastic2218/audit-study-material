"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3627"],{58474:function(e,t,o){o.d(t,{Qe:()=>A,iL:()=>C,k2:()=>x,zw:()=>Z});var r=o(7409),l=o(16584),n=o(30396),a=o(57061),i=o(36781),s=o(33804),c=o(63049),d=o(53687),u=o(44404),p=o(95441),_=o(68833),h=o(98914),g=o(15771),m=o(19081),v=o(6490),b=o(63474),w=o(96302),T=o(58175),f=o(35500),k=o(60308),E=o(15181);let y=(e,t)=>{var o;let{postCoverImageUrl:r,pubCoverImageUrl:l,pub:n,themeVariables:a}=t,i=[],s=[],c=!1,d=a||n.theme,u=null!==(o=(null==d?void 0:d.web_bg_color)||(null==d?void 0:d.cover_bg_color))&&void 0!==o?o:"";switch(e){case"post_asset":r&&i.push("image"),((null==d?void 0:d.background_pop_color)||(null==d?void 0:d.background_pop))&&i.push("accent"),i.push("primary"),"#ffffff"!==u.toLowerCase()&&i.push("black&white"),c=!0;break;case"pub_shareable_image":l&&i.push("image"),i.push("primary"),s.push({type:"logo",label:"Logo"}),n.has_posts&&s.push({type:"posts",label:"Top posts"}),n.hero_text&&s.push({type:"description",label:"Description"});break;case"paid_subscription":case"pledged_subscription":((null==d?void 0:d.background_pop_color)||(null==d?void 0:d.background_pop))&&i.push("accent"),i.push("primary")}return{assetThemes:i,assetTypes:s,includePreviewTextToggle:c}};function C(e){var t;let o,b,w,T,C,I,{pub:O,item:P,isOpen:B,setOpen:M,themeVariables:N,width:R}=e,{iString:L}=(0,p.M1)(),{type:j,target_user:W,target_user_id:G,target_pledge_note:X,target_subscription_note:F,post:z}=P,U=O.logo_url||O.cover_photo_url||O.author_photo_url||(null===(t=O.author)||void 0===t?void 0:t.photo_url),q=null==z?void 0:z.cover_image,H="post_asset"===j,{assetThemes:J,assetTypes:K,includePreviewTextToggle:Q}=y(j,{postCoverImageUrl:q,pubCoverImageUrl:U,pub:O,themeVariables:N}),V=N||O.theme,[$,Y]=(0,n.eJ)(H?"instagram":"stories"),[ee,et]=(0,n.eJ)(J.find(e=>"image"===e)&&U?"image":J.find(e=>"accent"===e)&&((null==V?void 0:V.background_pop_color)||(null==V?void 0:V.background_pop))?"accent":"primary"),[eo,er]=(0,n.eJ)("logo");(0,n.d4)(()=>{B&&(0,_.j)(_.FP.SHARE_CENTER_CUSTOMIZE_ASSETS_MODAL_OPENED)},[B]);let[el,en]=(0,n.eJ)(!0),ea=()=>{switch(ee){case"image":return(0,r._)({aspectRatio:$,bgImage:!0},K.length&&{type:eo},Q&&el&&{hidePreviewText:!0});case"accent":return(0,r._)({aspectRatio:$,bgColor:(null==V?void 0:V.background_pop_color)||(null==V?void 0:V.background_pop),textColor:null==V?void 0:V.print_on_pop},K.length&&{type:eo},Q&&el&&{hidePreviewText:!0});case"primary":return(0,r._)({aspectRatio:$,bgColor:(null==V?void 0:V.web_bg_color)||(null==V?void 0:V.cover_bg_color),textColor:(null==V?void 0:V.print_on_web_bg_color)||(null==V?void 0:V.cover_print_primary)},K.length&&{type:eo},Q&&el&&{hidePreviewText:!0});default:return(0,r._)({aspectRatio:$,bgColor:"#ffffff",textColor:"#404040"},K.length&&{type:eo},Q&&el&&{hidePreviewText:!0})}},ei=(0,h.K1)(),es=()=>{M(!1)};switch(j){case"arr_10k_milestone":w=f.dD.ARR10K,b=(0,l.tZ)(a.d,{pub:O,milestone:w,style:{aspectRatio:$}}),T=(0,k.iNT)(O,w,{aspectRatio:$},"".concat(w," - ").concat("stories"===$?"vertical":$));break;case"arr_1k_milestone":w=f.dD.ARR1K,b=(0,l.tZ)(a.d,{pub:O,milestone:w,style:{aspectRatio:$}}),T=(0,k.iNT)(O,w,{aspectRatio:$},"".concat(w," - ").concat("stories"===$?"vertical":$));break;case"list_100_milestone":w=f.bq.List100,b=(0,l.tZ)(a.d,{pub:O,milestone:w,style:{aspectRatio:$}}),T=(0,k.iNT)(O,w,{aspectRatio:$},"".concat(w," - ").concat("stories"===$?"vertical":$));break;case"list_1k_milestone":w=f.bq.List1K,b=(0,l.tZ)(a.d,{pub:O,milestone:w,style:{aspectRatio:$}}),T=(0,k.iNT)(O,w,{aspectRatio:$},"".concat(w," - ").concat("stories"===$?"vertical":$));break;case"paid_subscription":b=(0,l.tZ)(u.uP,{pub:O,note:F,user:W||{id:G||0},style:ea()}),T=(0,k.gGz)(O,W||{id:G||0},ea(),{fileToDownload:"Message - ".concat("stories"===$?"vertical":$)}),I=()=>{(0,_.j)(_.FP.SUBSCRIPTION_NOTE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{note_from_user_id:(null==W?void 0:W.id)||G,aspectRatio:$,source:"download-button"})};break;case"pledged_subscription":b=(0,l.tZ)(u.hi,{pub:O,note:X,user:W||{id:G||0},style:ea()}),T=(0,k.uQO)(O,W||{id:G||0},ea(),{fileToDownload:"Message - ".concat("stories"===$?"vertical":$)}),I=()=>{(0,_.j)(_.FP.PLEDGE_NOTE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{note_from_user_id:(null==W?void 0:W.id)||G,aspectRatio:$,source:"download-button"})};break;case"pub_shareable_image":o=L("Create shareable image"),b=(0,l.tZ)(c.H,{pub:O,style:ea()}),C="".concat(O.name," - ").concat("stories"===$?"vertical":$),T=(0,k.p5u)(O,null,ea(),{fileToDownload:C}),I=()=>{(0,_.j)(_.FP.PUBLICATION_MEDIA_ASSETS_IMAGE_DOWNLOADED,{aspectRatio:$,source:"download-button"})};break;case"post_asset":{let e=ea(),{text:t,translatedText:r}="image"===ee?{text:"Image".concat(el?" - no preview":""),translatedText:L(el?"Image - no preview":"Image")}:"accent"===ee?{text:"Accent Color".concat(el?" - no preview":""),translatedText:L(el?"Accent Color - no preview":"Accent Color")}:"primary"===ee?{text:"Background Color".concat(el?" - no preview":""),translatedText:L(el?"Background Color - no preview":"Background Color")}:{text:"Black and White".concat(el?" - no preview":""),translatedText:L(el?"Black and White - no preview":"Black and White")};o=L("Create shareable image"),b=z&&(0,l.tZ)(i.Z,{pub:O,post:z,style:e,translatedText:r,size:420,hoverOverlay:!1}),C="".concat(r," - ").concat("stories"===$?"vertical":$),T=z&&(0,k.ChS)(O,z,e,C),I=()=>{(0,_.j)(_.FP.WRITER_MEDIA_ASSETS_IMAGE_DOWNLOADED,{post_id:null==z?void 0:z.id,type:t,aspectRatio:e.aspectRatio,share_center:!0,inline:!1,source:"download-button"})}}}["arr_10k_milestone","arr_1k_milestone","list_100_milestone","list_1k_milestone"].includes(j)?(o=L("Share milestone"),C="".concat(w," - ").concat("stories"===$?"vertical":$),I=()=>{(0,_.j)(_.FP.MILESTONE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{milestone:w,aspectRatio:$,source:"download-button"})}):["paid_subscription","pledged_subscription"].includes(j)&&(o=L("Share message"),C="Message - ".concat("stories"===$?"vertical":$));let ec=async()=>{null==I||I();let e=document.createElement("a");e.href=T,e.download=C,e.target="_blank",e.rel="noopener noreferrer",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},ed=J.length>1,eu=K.length>1,ep=d.sl.length>1;return(0,l.tZ)(v.u_,{isOpen:B,onClose:es,width:R||640,overflow:"hidden",renderOverReactLaagPortal:!0,fullscreenMobile:!0,children:(0,l.BX)(s.w,{children:[(0,l.tZ)(v.xB,{onClose:es,title:o,showClose:!0,showDivider:!0}),(0,l.tZ)(v.fe,{children:(0,l.BX)(m.tu,{gap:20,children:[(0,l.tZ)(m.hs,{className:E.Z.imageContainer,alignItems:"center",justifyContent:"center",children:b}),(0,l.BX)(x,{children:[ed&&(0,l.tZ)(A,{assetThemes:J,assetTheme:ee,setAssetTheme:et,theme:V,pubCoverImageUrl:U}),eu&&(0,l.tZ)(S,{assetTypes:K,assetType:eo,setAssetType:er}),ep&&(0,l.tZ)(Z,{aspectRatio:$,setAspectRatio:Y,includeInstagram:H}),Q&&(0,l.tZ)(D,{hidePreviewText:el,setHidePreviewText:en})]})]})}),!ei&&(0,l.tZ)(v.mz,{showDivider:!0,direction:"column",primaryButton:(0,l.tZ)(g.zx,{priority:"primary",onClick:ec,children:L("Download image")})})]})})}function A(e){let{assetThemes:t,assetTheme:o,setAssetTheme:r,theme:n,pubCoverImageUrl:a}=e;return(0,l.BX)(m.tu,{gap:8,children:[(0,l.tZ)(T.xv.B4,{weight:"medium",translated:!0,children:"Background"}),(0,l.tZ)(m.gq,{gap:8,children:t.map(e=>(0,l.tZ)(d.rn,{value:e,isSelected:e===o,onClick:()=>r(e),themeVariables:n,coverImageUrl:a}))})]})}function S(e){let{assetTypes:t,assetType:o,setAssetType:r}=e;return(0,l.BX)(m.tu,{gap:8,children:[(0,l.tZ)(T.xv.B4,{weight:"medium",translated:!0,children:"Type"}),(0,l.tZ)(m.gq,{gap:8,children:t.map(e=>{let{type:t,label:n}=e;return(0,l.tZ)(d.$I,{label:n,isSelected:t===o,onClick:()=>r(t)})})})]})}function Z(e){let{aspectRatio:t,setAspectRatio:o,includeInstagram:r}=e,n=r?d.sl:d.sl.filter(e=>"instagram"!==e);return(0,l.BX)(m.tu,{gap:8,children:[(0,l.tZ)(T.xv.B4,{weight:"medium",translated:!0,children:"Aspect Ratio"}),(0,l.tZ)(m.gq,{gap:8,children:n.map(e=>(0,l.tZ)(d.ar,{value:e,isSelected:e===t,onClick:()=>o(e)}))})]})}function D(e){let{hidePreviewText:t,setHidePreviewText:o}=e;return(0,l.BX)(m.tu,{gap:8,children:[(0,l.tZ)(T.xv.B4,{weight:"medium",translated:!0,children:"Preview Text"}),(0,l.tZ)(m.hs,{flex:"grow",alignItems:"center",children:(0,l.tZ)(w.rs,{checked:!t,onChange:e=>{o(!e),(0,_.j)(_.FP.SHARE_CENTER_CUSTOMIZE_ASSETS_PREVIEW_TEXT_TOGGLED,{includePreviewText:e})}})})]})}let x=(0,b.zo)({display:"flex",gap:20,overflowX:"auto",flex:"auto",justifyContent:"space-between"})},42347:function(e,t,o){o.d(t,{At:()=>s});var r=o(16584),l=o(98661);let n={name:null,version:null,major:null},a={chrome:130,firefox:130,safari:16,edge:130},i=(0,l.createContext)({browser:n,isSupported:!0});function s(e){let{browser:t=n,children:o}=e,s=(0,l.useMemo)(()=>{let{name:e,version:o,major:r}=t,l=!0,n=a[null==e?void 0:e.toLowerCase()];return e&&n&&(l=!!(o&&r&&Number(r)>=n)),{browser:t,isSupported:l}},[t]);return(0,r.tZ)(i.Provider,{value:s,children:o})}}}]);