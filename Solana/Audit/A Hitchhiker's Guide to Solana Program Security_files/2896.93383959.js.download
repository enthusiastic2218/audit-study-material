"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["2896"],{44854:function(t,e,n){n.d(e,{Z:()=>o});let o={root:"root-MjHNqP",isOnInbox:"isOnInbox-pP0vQF",paywallStack:"paywallStack-RdkSad",pubChatColumn:"pubChatColumn-Zck7MX",pubChatFull:"pubChatFull-tEPJ4X",submit:"submit-T76OjY",inactive:"inactive-RF_jH9",chatPublicationContainer:"chatPublicationContainer-y1FRFU",invitesRow:"invitesRow-QZEeej",show:"show-vL_rsU",unfurl:"unfurl-n5q4dW",sticky:"sticky-ykmBOy",unreadDot:"unreadDot-fNgNDl",unreadTabDot:"unreadTabDot-aqz7wG",selected:"selected-oDAfJA",currentVisibilityBox:"currentVisibilityBox-VAGH9Q",headerPubLink:"headerPubLink-uygNA1",sidebarRowTitle:"sidebarRowTitle-wepYF4",headerPubAvatar:"headerPubAvatar-jFmd9c",inputBox:"inputBox-UuLYvf",modalContext:"modalContext-nC14Y0",textInputInset:"textInputInset-jnSii9",invisible:"invisible-AW4ANv",textInput:"textInput-zlmYim",dropzone:"dropzone-W750JH",submitButton:"submitButton-_zJ5fy",newThreadButton:"newThreadButton-POT_Ph",roundedFooterPlaceholder:"roundedFooterPlaceholder-k7TSWJ",chatContainer:"chatContainer-fnFgIy",fade:"fade-HKCqnN",composerLinkPreview:"composerLinkPreview-cBU00h",composer:"composer-rYAaNa",imageBox:"imageBox-NAFgde",image:"image-PfNhry",deleteFile:"deleteFile-gv_fWj",modalColumn:"modalColumn-fVvKpE",visibilityDropdown:"visibilityDropdown-mnqCEz",visibilityDropdownText:"visibilityDropdownText-uW5qxU",messageSquareIcon:"messageSquareIcon-_NUoeX",paywall:"paywall-hfm67h",modalChatEditor:"modalChatEditor-bbcasD",newText:"newText-IkD33N",newBorder:"newBorder-fycRk_",jumpButton:"jumpButton-yc047J",jumpBadge:"jumpBadge-IO2hJP"}},4473:function(t,e,n){n.d(e,{Z:()=>c});var o=n(7409),r=n(99282),i=n(98848),a=n(16584),l=n(64515);let c=t=>{var{size:e=24,fill:n="var(--color-fg-primary)",className:c}=t,s=(0,i._)(t,["size","fill","className"]);return(0,a.BX)(l.l,(0,r._)((0,o._)({},s),{name:"SubstackIcon",svgParams:{viewBox:"0 0 20 20"},width:e,height:e,fill:n,stroke:"none",className:c,children:[(0,a.tZ)("path",{d:"M1.96484 0.624512H18.0354V2.70052H1.96484V0.624512Z",stroke:"none"}),(0,a.tZ)("path",{d:"M1.96484 4.77655H18.0354V6.85254H1.96484V4.77655Z",stroke:"none"}),(0,a.tZ)("path",{d:"M1.96484 8.92857V19.9505L10.0001 14.6347L18.0354 19.9505V8.92857H1.96484Z",stroke:"none"})]}))}},3258:function(t,e,n){n.d(e,{ZP:()=>f,wg:()=>g});var o=n(7409),r=n(99282),i=n(16584),a=n(94184),l=n.n(a),c=n(80569),s=n.n(c),u=n(85685),d=n(85095),m=n(33017),h=n(63651),p=n(51885);let f=t=>{let{id:e,type:n,name:o,url:r,photo_url:a,uuid:c,mentionText:s,isStatic:f=!1,isEditorContext:v=!1}=t;return f?(0,i.tZ)("span",{className:l()(p.Z.mention,p.Z.mentionStatic),"data-component-name":"MentionStatic",children:(0,i.tZ)("a",{href:(0,h.gpq)(n,e,o,r),children:o||"Substack user"})}):"user"===n?(0,i.tZ)(d.am,{children:(0,i.tZ)(u.ProfileHoverCard,{subject:{id:e,name:o||"Substack user",photo_url:a},utmSource:"mention",children:(0,i.tZ)("a",{className:p.Z.mention,href:v?void 0:(0,h.gpq)(n,e,o,r),target:"_blank",rel:"noopener","data-attrs":JSON.stringify({name:o,id:e,type:n,url:r,photo_url:a,uuid:c}),onClick:t=>t.stopPropagation(),"data-component-name":"MentionUser",children:null!=s?s:o})})}):"pub"===n?(0,i.tZ)(m.Sm,{publication_id:e,utmSource:"mention",children:(0,i.tZ)("a",{className:p.Z.mention,href:r,target:"_blank",rel:"noopener","data-attrs":JSON.stringify({name:o,id:e,type:n,url:v?void 0:(0,h.gpq)(n,e,o,r),uuid:c}),onClick:t=>t.stopPropagation(),"data-component-name":"MentionPub",children:null!=s?s:o})}):(0,i.tZ)("a",{className:p.Z.mention,target:"_blank",rel:"noopener",href:(0,h.gpq)(n,e,o,r),"data-attrs":JSON.stringify({name:o,id:e,type:n,url:r,photo_url:a,uuid:c}),"data-component-name":"Mention",children:null!=s?s:o})},v={},g=async function(t){let{pathname:e="/api/v1/posts/mention"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(v[t])return v[t];let{profiles:n,publications:i}=(await s().get(e).query({query:t,include_unmentionables:!0})).body,a=new Map;return n&&n.length&&a.set("Writers",n.map(t=>(0,r._)((0,o._)({},t),{type:"user",disabledReason:t.is_mentionable?void 0:"unmentionable"}))),i&&i.length&&a.set("Publications",null==i?void 0:i.map(t=>(0,r._)((0,o._)({},t),{type:"pub",url:(0,h.HQ5)({subdomain:t.subdomain}),photo_url:t.logo_url}))),v[t]=a,a}},77906:function(t,e,n){n.d(e,{UK:()=>P});var o=n(7409),r=n(99282),i=n(58865),a=n(16584),l=n(20160),c=n(95441),s=n(92291),u=n(77338),d=n(5952),m=n(79251),h=n(25991),p=n(53678),f=n(76721),v=n(93252),g=n(94874),y=n(19081),b=n(58175),_=n(87989),Z=n(2009),w=n(50312),k=n(63651),S=n(47929),B=n(5749);function C(){let t=(0,i._)(["This content is only visible to paid subscribers of ",""]);return C=function(){return t},t}function P(t){let{parent:e,comment:n,publication:o,readOnly:r,onAttachmentClick:i,utm_content:c,isDm:s,isPermalink:u}=t,d=(0,w.F)({onClick:()=>null==i?void 0:i({commentId:String(n.id)}),href:r?void 0:(0,k.Sgq)(n,{noBase:Z.L}),state:{showBack:!0}});return(0,a.tZ)(l.W,{children:(0,a.tZ)(x,{readOnly:r,linkProps:d,isEmbed:v.P,children:(0,a.tZ)(T,{parent:e,comment:n,publication:o,readOnly:r,onAttachmentClick:i,utm_content:c,isDm:s,isPermalink:u})})})}function x(t){let{children:e,readOnly:n,linkProps:i,isEmbed:l}=t;return(0,a.tZ)(y.tu,(0,r._)((0,o._)({as:n?"div":"a",bg:"primary",border:"detail",radius:"md",padding:12,gap:8,target:l()?"_blank":void 0,draggable:!1},i),{showFocus:!0,animate:!0,className:B.Z.commentContainer,children:e}))}function T(t){var e,n,o;let{parent:r,comment:i,publication:l,readOnly:c,onAttachmentClick:s,utm_content:u,isDm:d,isPermalink:m}=t,{truncatedBodyJson:h}=(0,f.Z)(i,{truncationProfile:"small"}),p=null!==(o=i.user)&&void 0!==o?o:i.user_id?{id:i.user_id,name:null!==(e=i.name)&&void 0!==e?e:"",photo_url:i.photo_url,bestseller_tier:null!==(n=i.user_bestseller_tier)&&void 0!==n?n:void 0}:null;return(0,a.BX)(a.HY,{children:[p&&(0,a.tZ)(I,{commentUser:p,comment:i,readOnly:c,utm_content:u}),(0,a.tZ)(F,{parent:r,comment:i,publication:l,truncatedBodyJson:h,isDm:d,onAttachmentClick:s,utm_content:u,readOnly:c,isPermalink:m})]})}function I(t){let{commentUser:e,comment:n,readOnly:o,utm_content:r}=t;return e?(0,a.BX)(y.hs,{gap:6,alignItems:"center",justifyContent:"start",children:[(0,a.tZ)(w.r,{href:(0,k.NNq)(e,{noBase:Z.L,utm_content:S.fZ.substackFeedItem,utm_source:null!=r?r:void 0}),target:(0,v.P)()?"_blank":void 0,showBack:!0,radius:"full",showFocus:!0,animate:!0,children:(0,a.tZ)(g.qE,{size:20,user:e})}),(0,a.tZ)(b.xv.B4,{weight:"medium",color:"primary",children:o?e.name:(0,a.BX)(y.hs,{gap:8,direction:"row",justifyContent:"space-between",children:[(0,a.tZ)(p.xG,{user:e,utm_source:S.b3.substackFeedItem,utm_content:r,children:e.name}),(null==e?void 0:e.bestseller_tier)!=null&&(0,a.tZ)(_.UserBadge,{tier:e.bestseller_tier,userId:e.id,tooltipOnHover:!0,size:"sm"})]})}),(0,a.tZ)(b.xv.B4,{as:"span",color:"secondary",children:(0,a.tZ)(h.mn,{timestamp:n.date,comment:n})})]}):null}function F(t){var e,n,o,r,i;let{parent:l,comment:s,publication:u,truncatedBodyJson:d,isDm:m,isPermalink:h,readOnly:p,onAttachmentClick:f,utm_content:v}=t,{iString:g,iTemplate:y}=(0,c.M1)(),b=null!==(i=null==u?void 0:u.name)&&void 0!==i?i:g("this publication"),_=y(C(),b),Z=null==l?void 0:null===(e=l.attachments)||void 0===e?void 0:e.some(t=>"image"===t.type||"video"===t.type),w=null===(n=s.attachments)||void 0===n?void 0:n.some(t=>"image"===t.type||"video"===t.type),k=null===(o=s.attachments)||void 0===o?void 0:o.some(t=>"image"!==t.type&&"video"!==t.type&&"live_stream"!==t.type),S=null===(r=s.attachments)||void 0===r?void 0:r.some(t=>"post"===t.type&&t.postSelection),B=!1;return Z||w&&k||k&&!S?(0,a.tZ)(N,{comment:s,truncatedBodyJson:d,hiddenText:_,onAttachmentClick:f,utm_content:v}):(0,a.tZ)(D,{comment:s,truncatedBodyJson:d,hiddenText:_,onAttachmentClick:f,utm_content:v,readOnly:p,isDm:m,isPermalink:h})}function N(t){var e,n;let{comment:o,truncatedBodyJson:r,hiddenText:i,onAttachmentClick:l,utm_content:c}=t;return(0,a.tZ)(a.HY,{children:(0,a.BX)(y.hs,{gap:8,direction:"row",flex:"grow",justifyContent:"space-between",children:[(0,a.BX)(y.tu,{gap:4,children:[(0,a.tZ)(u.h,{content:r,isHidden:o.hidden,hiddenText:i,attachedLinks:(0,d.Bk)(o)}),(0,a.tZ)(m.Mi,{attachments:null!==(e=o.attachments)&&void 0!==e?e:[],onAttachmentClick:l,utm_content:c})]}),(0,a.tZ)(s.Gn,{attachments:null!==(n=o.attachments)&&void 0!==n?n:[]})]})})}function D(t){var e;let{comment:n,truncatedBodyJson:o,hiddenText:r,onAttachmentClick:i,utm_content:l,readOnly:c,isDm:m,isPermalink:h}=t;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(u.h,{content:o,isHidden:n.hidden,hiddenText:r,attachedLinks:(0,d.Bk)(n)}),(0,a.tZ)(s.yd,{attachments:null!==(e=n.attachments)&&void 0!==e?e:[],onAttachmentClick:i,utm_content:l,isRestack:!0,readOnly:c,isDm:m,isPermalink:h})]})}},1669:function(t,e,n){n.d(e,{o:()=>a});var o=n(16584),r=n(98914),i=n(58175);let a=t=>{let{error:e}=t,n=(0,r.HM)(e);return(null==n?void 0:n.html)?(0,o.tZ)(i.xv.B4,{weight:"medium",color:"error",dangerouslySetInnerHTML:{__html:n.html}}):(0,o.tZ)(i.xv.B4,{weight:"medium",color:"error",children:(null==n?void 0:n.msg)||"Something went wrong"})}},76566:function(t,e,n){n.d(e,{S:()=>d});var o=n(27412),r=n(16584),i=n(20042),a=n(98661),l=n(20888),c=n(9682),s=n(19081),u=n(58175);class d extends a.Component{static getDerivedStateFromError(t){return{error:t}}componentDidMount(){Promise.all([n.e("7152"),n.e("6993")]).then(n.bind(n,91985)).then(t=>{this.Sentry=t.Sentry})}componentDidCatch(t){console.error(t),this.Sentry&&this.Sentry.captureException(t)}render(){let{error:t}=this.state;return(0,r.tZ)(m,{onReset:()=>this.setState({error:null}),error:t,children:t?(0,r.tZ)(h,{}):this.props.children})}constructor(t){super(t),(0,o._)(this,"Sentry",null),this.state={error:null}}}function m(t){let{onReset:e,error:n,children:o}=t,l=(0,a.useRef)((0,i.getCurrentUrl)());return(0,c.js)(t=>{n&&l.current!==t&&e(),l.current=t},[]),n?(0,r.tZ)(h,{}):o}function h(){return(0,r.BX)(s.tu,{flex:"grow",justifyContent:"center",alignItems:"center",gap:32,padding:20,children:[(0,r.tZ)(l.e,{src:"/img/reader/toad.png",maxWidth:200}),(0,r.BX)(s.tu,{gap:8,children:[(0,r.tZ)(u.xv.H3,{weight:"semibold",align:"center",children:"Oh noâ€”this page croaked."}),(0,r.tZ)(u.xv.B3,{color:"secondary",align:"center",children:"Try again, or hop to another page."})]})]})}},50312:function(t,e,n){n.d(e,{F:()=>h,r:()=>m});var o=n(7409),r=n(99282),i=n(98848),a=n(16584),l=n(98661),c=n(20042),s=n(21811),u=n(93252),d=n(71068);let m=(0,l.forwardRef)((t,e)=>{var{href:n,onClick:l,campaign:c,replace:s,state:u,showBack:m}=t,p=(0,i._)(t,["href","onClick","campaign","replace","state","showBack"]);let f=h({href:n,onClick:l,campaign:c,replace:s,state:u=m?(0,r._)((0,o._)({},u),{showBack:!0}):u});return(0,a.tZ)(d.xu,(0,o._)((0,r._)((0,o._)({as:"a"},p),{ref:e}),f))});function h(t){let{onClick:e,href:n,campaign:r,replace:i,state:a}=t;if(n&&!(0,u.P)()){let t;try{t=new URL(n)}catch(e){try{t=new URL("".concat(document.location.origin).concat(n))}catch(t){}}if(t){if(t.origin!==document.location.origin||r){if(t.origin!==document.location.origin&&r){for(let[e,n]of Object.entries(r)){let o="name"===e?"campaign":e;t.searchParams.set("utm_".concat(o),n)}n=t.toString()}}else{let e=new URLSearchParams,o={};for(let[n,r]of t.searchParams)n.startsWith("utm_")?"utm_campaign"===n?o.name=r:o[n.replace(/^utm_/,"")]=r:e.append(n,r);r=o,n="".concat(t.pathname,"?").concat(e)}}}return{href:n,onClick:t=>{if(null==e||e(t),!t.ctrlKey&&!t.shiftKey&&!t.metaKey&&n&&!(0,u.P)()){if(t.defaultPrevented){t.stopPropagation();return}(0,s.j)((0,o._)({},r)),t.preventDefault(),t.stopPropagation(),(0,c.route)(n,i),a&&history.replaceState(a,"")}}}}},41233:function(t,e,n){n.d(e,{LZ:()=>b,et:()=>_,fA:()=>g});var o=n(7409),r=n(99282),i=n(16584),a=n(95441),l=n(17625),c=n(80026),s=n(6490),u=n(65523),d=n(4354),m=n(65942),h=n(23276),p=n(9003),f=n(24142),v=n(91400);function g(t){let{onCancel:e,onSuccess:n,onSignup:o,onUserCreated:r,noCloseButton:a,noExit:c,isOpen:u,redirectOverride:m,overrideTitle:h}=t,p=(0,v.XA)();return(0,i.tZ)(s.u_,{onClose:e,isOpen:u,children:(0,i.BX)(d.t,{children:[(0,i.tZ)(y,{onCancel:e,onSuccess:n,onSignup:o,onUserCreated:r,noCloseButton:a,noExit:c,redirectOverride:m,overrideTitle:h}),p&&(0,i.tZ)(l.o$,{})]})})}function y(t){let{onCancel:e,onSuccess:n,onSignup:a,onUserCreated:l,noCloseButton:c,noExit:s,redirectOverride:u,overrideTitle:v}=t,{mode:g}=(0,d.I)(),y={overrideTitle:v,noCloseButton:c||s,onCancel:e,onSignup:a};return(0,i.BX)(i.HY,{children:["magic-link"===g&&(0,i.tZ)(m.v,(0,r._)((0,o._)({},y),{onSuccess:n})),"email"===g&&(0,i.tZ)(h.j,(0,r._)((0,o._)({},y),{onUserCreated:l,redirectOverride:u})),"password"===g&&(0,i.tZ)(f.L,(0,r._)((0,o._)({},y),{onSuccess:n})),"mfa"===g&&(0,i.tZ)(p.n,{onSuccess:n})]})}let b=t=>{let{overrideTitle:e,noCloseButton:n,onCancel:o,onSignup:r}=t,{iString:l}=(0,a.M1)();return(0,i.tZ)(u.xB,{title:e||l("Sign in to Substack"),description:r?(0,i.BX)(i.HY,{children:[l("First time here? "),(0,i.tZ)(c.hh,{color:"substack",decoration:"hover-underline",onClick:r,cursor:"pointer",children:l("Create account")})]}):void 0,showClose:!n,onClose:o,icon:(0,i.tZ)(u.ZN,{}),alignItems:"center"})},_=t=>{let{children:e}=t;return(0,i.tZ)(c.sg,{padding:16,borderTop:"detail",children:(0,i.tZ)(c.xv.B4,{as:"span",color:"secondary",align:"center",children:e})})}},16913:function(t,e,n){n.d(e,{E:()=>d});var o=n(16584),r=n(95441),i=n(80026),a=n(98012);let l=new Intl.DateTimeFormat(void 0,{timeStyle:"short"}),c=new Intl.DateTimeFormat(void 0,{weekday:"long"}),s=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),u=new Intl.DateTimeFormat(void 0,{dateStyle:"long"});function d(t){let{timestamp:e,conjunction:n=!1}=t,{iString:d,language:m}=(0,r.M1)(),h=new Date(e),p=(0,a.Z)(),f=m.startsWith("en"),v=p.isSame(h,"day")?d("Today"):p.subtract(1,"day").isSame(h,"day")?d("Yesterday"):p.isSame(h,"week")?c.format(h):p.isSame(h,"year")?s.format(h):u.format(h);return(0,o.tZ)(i.X2,{alignItems:"center",justifyContent:"center",children:(0,o.BX)(i.xv.B4,{color:"secondary",children:[v,n&&f?" at ":" ",l.format(h)]})})}},69304:function(t,e,n){n(16584),n(19081),n(58175),n(44854)},32223:function(t,e,n){n.d(e,{c:()=>s});var o=n(7409),r=n(98848),i=n(16584),a=n(77747),l=n(80026),c=n(23710);function s(t){var{children:e,setReactions:n=!0,alignSelf:l}=t,c=(0,r._)(t,["children","setReactions","alignSelf"]);return n?(0,i.BX)(u,{position:"relative",alignSelf:l,children:[e,(0,i.tZ)(a.Jg,(0,o._)({},c))]}):(0,i.tZ)(i.HY,{children:e})}let u=(0,l.E7)({display:"flex",className:c.Z.reactionsHoverZone})},93502:function(t,e,n){n(48980)},11308:function(t,e,n){n.d(e,{o:()=>c});var o=n(7409),r=n(99282),i=n(79094),a=n(48980),l=n(97842);function c(t){let{entityType:e,publication:n}=t,a=(0,i.T)(),c=(0,l.I0)();return(t,i)=>{a({onSubmit:n=>c("communityPost"===e?s((0,r._)((0,o._)({},n),{id:t})):u((0,r._)((0,o._)({},n),{id:t}))),canReportToAdmins:!!(n&&i&&n.moderation_enabled),pub:null!=n?n:void 0})}}let s=t=>{let{id:e,details:n,reportCategory:o,reportedToSubstack:r}=t;return async t=>{t({type:"posts-flag_post",payload:{id:e}});let i=await d({id:e,details:n,reportCategory:o,reportedToSubstack:r});i instanceof Error&&console.warn("error flagging post",i)}},u=t=>{let{id:e,details:n,reportCategory:o,reportedToSubstack:r}=t;return async t=>{t({type:"comments-flag_comment",payload:{id:e}});let i=await m({id:e,details:n,reportCategory:o,reportedToSubstack:r});i instanceof Error&&console.warn("error flagging comment",i)}};async function d(t){let{id:e,details:n,reportCategory:o,reportedToSubstack:r}=t;try{return await (0,a.rd)("/api/v1/community/posts/".concat(e,"/reports"),{method:"POST",json:{postId:e,details:n,reportCategory:o,reportedToSubstack:r}})}catch(t){return t}}async function m(t){let{id:e,details:n,reportCategory:o,reportedToSubstack:r}=t;try{return await (0,a.rd)("/api/v1/community/comments/".concat(e,"/reports"),{method:"POST",json:{commentId:e,details:n,reportCategory:o,reportedToSubstack:r}})}catch(t){return t}}},65958:function(t,e,n){n.d(e,{s:()=>p});var o=n(7409),r=n(99282),i=n(16584),a=n(48980),l=n(80878),c=n(7882),s=n(70379),u=n(97842),d=n(95551),m=n(62515),h=n(36186);function p(t){let{source:e}=t,n=function(t){let{source:e}=t,n=(0,u.I0)(),i=(0,c.ib)({pathname:"/api/v1/messages/dm/start",method:"POST"}),a=async t=>{let o=await i.refetch({json:{user_ids:t,source:e}});return o instanceof Error||n({type:"conversation-load_more",payload:{edge:"before",cursor:null,page:o}}),o};return(0,r._)((0,o._)({},i),{handleStart:a})}({source:e}),p=(0,d.d)(),f=(0,s.pm)(),v=async t=>{var e;let c=await n.handleStart(t);return c instanceof Error?(c instanceof a.kp&&(null===(e=c.body)||void 0===e?void 0:e.type)==="profile_not_set_up"?f.popToast(t=>(0,i.tZ)(s.FN,(0,r._)((0,o._)({},t),{text:"Please set up your profile before sending a message.",cta:"Set up profile",href:(0,h.Nh)({utm_source:"substack",utm_campaign:"chat_dm_button",redirect:window.location}),localNavigation:!1}))):p(c,"Could not start conversation."),!1):((0,l._)((0,m.Rm)(c.thread.id)),!0)};return(0,r._)((0,o._)({},n),{handleStart:v})}},32189:function(t,e,n){n.d(e,{x:()=>l});var o=n(30396),r=n(60807),i=n(68833),a=n(81043);function l(t){let{surface:e,zIndex:n=null}=t,l=(0,r.aF)(),{onboardingModalRef:c}=(0,a.SJ)();return(0,o.d4)(()=>{c.current&&null!==n&&(c.current.props.zIndex=n)},[c,n]),(t,n)=>o=>{if(!t){console.warn("No publication provided to usePubOnboardingHandler handler");return}if(!l){var r,a;if(!c.current)return;o.preventDefault(),n?null===(r=c.current)||void 0===r||r.openForPub(t,n):null===(a=c.current)||void 0===a||a.openToPubSignup(t);return}(0,i.x6)(t,e)}}}}]);