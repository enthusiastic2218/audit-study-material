"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["61"],{35047:function(e,t,n){n.d(t,{Eh:()=>j,ZP:()=>V,sv:()=>U});var r=n(7409),i=n(99282),l=n(58865),a=n(16584),o=n(98661),s=n(30396),c=n(94184),d=n.n(c),u=n(36808),p=n(2564),m=n(71375),h=n(91925),g=n(12620),b=n(64343),v=n(21312),_=n(20888),f=n(75744),Z=n(57391),y=n(95441),x=n(56629),N=n(40647),w=n(35702),S=n(68833),C=n(98914),k=n(71068),B=n(15771),E=n(19081),P=n(38841),L=n(58175),I=n(64528),F=n(55722),A=n(74312),H=n(34590),T=n(31377),X=n(60308),O=n(26111),M=n(6911),W=n(70408),R=n(84864),q=n(47929),J=n(31190);function z(){let e=(0,l._)(["By ",""]);return z=function(){return e},e}let D="intro_popup_last_hidden_at";function U(e){let{includePrice:t=!0,includeRankingDetail:r=!0,includeByline:i=!0,includeBadge:l=!1,rankingDetailOverrideText:o=null,language:s="en"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=s||e.language,{iTemplate:d}=I18N.i(s||e.language),u=(0,R.getByLine)(e),p=null;return r&&(p=o||(e.rankingDetailByLanguage&&"en"!==c&&e.rankingDetailByLanguage[c]?e.rankingDetailByLanguage[c].rankingDetail:e.rankingDetail)),(0,a.BX)(I.N,{separator:" \xb7 ",children:[i&&u?(0,a.BX)(E.hs,{inline:!0,gap:4,children:[d(z(),u),l&&(0,a.tZ)(A.cr,{module:"../pencraft/unstable/UserBadge",resolve:e=>e.UserBadge,onRequest:()=>Promise.all([n.e("565"),n.e("6384")]).then(n.bind(n,87989)),size:"sm",tier:e.author_bestseller_tier,userId:e.author_id,whileLoading:e.author_bestseller_tier?(0,a.tZ)(E.hs,{alignItems:"center",children:(0,a.tZ)(F.o,{size:"sm",tier:e.author_bestseller_tier})}):(0,a.tZ)(a.HY,{})})]}):null,p,t&&function(e,t){let{language:n}=t,r=!e.disable_monthly_subscriptions&&e.plans&&e.plans.filter(e=>"month"===e.interval).sort((e,t)=>e.amount-t.amount)[0],i=!e.disable_annual_subscriptions&&e.plans&&e.plans.filter(e=>"year"===e.interval).sort((e,t)=>e.amount-t.amount)[0],l=r||i;if(l)return(0,H.bP)(l,{language:n})}(e,{language:s})]})}let V=(0,o.memo)(e=>{var t,n,l;let{publication:o,user:c,post:d,onHide:p,freeSignup:m,hidden:g,alwaysShow:b,showOnMount:v,freeSignupEmail:_,email:f,referralCode:y,blurbs:k,launchWelcomePage:B,topThreePosts:E,topThreeSubscribers:P}=e,{getConfigFor:L}=(0,N.xR)(),I=L("welcome_page_query_params"),[F,A]=(0,s.eJ)(!1),[H,M]=(0,s.eJ)(!!(B||b)),W=(e,t)=>{var n;return I&&null!==(n=(0,O.x)(e))&&void 0!==n?n:t},[J]=(0,s.eJ)(W("no_skip",void 0)),[z]=(0,s.eJ)(W("no_blurbs",!1)),[U]=(0,s.eJ)(()=>{let e=W("hero_text",void 0);return e?decodeURIComponent(e):void 0}),{getExperimentVariant:V,exposeExperiment:j}=(0,Z.jc)(),{getSettingFor:Q}=(0,x.So)(),$=null!==(t=(0,O.x)("force"))&&void 0!==t?t:void 0;(0,s.d4)(()=>{let e=e=>{"Escape"===e.key&&er(!0)};if(H)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[H]),(0,s.d4)(()=>{if(B&&!ei()||et()){if("undefined"!=typeof window&&(0,C.cn)(document.documentElement,"has-intro-popup"),(0,O.x)("r")){let e=(0,O.x)("r");c&&(0,R.userReferralKey)(c)===e||(0,S.j)(S.FP.COVER_PAGE_REFERRAL_VISIT,{referral_key:e,referring_user:(0,R.userFromReferralKey)(e)})}ee()}else p&&p(),(0,w.a)({hide_intro_popup:!0}),"undefined"!=typeof window&&(0,C.IV)(document.documentElement,"has-intro-popup"),!b&&"undefined"!=typeof window&&(0,C.pv)(document.documentElement,"show-intro-popup")&&(0,C.IV)(document.documentElement,"show-intro-popup");return["no_skip","no_blurbs","hero_text","hide_intro_popup"].forEach(e=>(0,C.iO)(e)),()=>{"undefined"!=typeof window&&(0,C.IV)(document.documentElement,"has-intro-popup"),er(!0)}},[]);let ee=()=>{"undefined"==typeof window||((0,C.cn)(document.documentElement,"show-intro-popup"),(0,S.j)(S.FP.COVER_PAGE_SHOWN,{has_cover_photo:!!o.cover_photo_url,has_free_signup_email:!!_,has_free_signup:!!m,functional_version:!0,launch_welcome_page:B,always_show:b,hidden:g,screen_height:"undefined"!=typeof window?window.innerHeight:null,screen_width:"undefined"!=typeof window?window.innerWidth:null,test_experiment_variant_v5:V("test_experiment_v5")}),j("test_experiment_v5"),b||(0,S.XY)("pageview",{dl:"".concat(document.location.origin,"/welcome").concat(document.location.search)})),M(!0)},et=(0,s.I4)(()=>!!b||!g&&(!!v||!!F||!ei()&&!!(null==d||d&&!(0,T.isPaidAudience)(d.audience))&&!m&&(!c||!c.is_free_subscribed&&!c.is_subscribed)),[b,m,g,d,v,F,c]),en=Q("display_welcome_page_details")&&o.freeSubscriberCount&&!(0,C.K1)()&&!$&&!o.invite_only&&!y&&!o.custom_domain&&(null==E?void 0:E.length)&&(null==P?void 0:P.length)&&!J&&!U;(0,s.d4)(()=>{H&&et()&&en&&j("welcome_page_update_desktop_visuals_limited")},[j,Q,en,et,H]);let er=e=>{e||(el(),setTimeout(()=>{(0,w.a)({hide_intro_popup:!0})},500)),p&&p(),!b&&"undefined"!=typeof window&&(0,C.pv)(document.documentElement,"show-intro-popup")&&(0,C.IV)(document.documentElement,"show-intro-popup")},ei=()=>{let e=u.get(D);return!!(e&&new Date(e)>new Date(Date.now()-864e5))},el=()=>{u.set(D,new Date().toJSON(),{expires:3650})},ea=async e=>{(0,S.j)(S.FP.COVER_PAGE_EMAIL_SUBMITTED,{is_paying_sub:!!e.body.prompt_to_login,has_plans:!!o.plans,functional_version:!0,homepage_type:o.homepage_type}),el(),A(!0),(0,w.a)({freeSignup:!0,freeSignupEmail:e.body.email});let t=b?"/":document.location.href;e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,X.n1t)("/account/login",{redirect:t,email:e.body.email})},30):document.location.href=(0,X.n1t)("/subscribe",(0,i._)((0,r._)({next:t,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":"",utm_source:q.b3.coverPage,email:e.body.email,skip_redirect_check:!0}))},eo=()=>{(0,S.j)(S.FP.COVER_PAGE_MAYBE_LATER_CLICKED,{functional_version:!0}),er()};if(!H||!et())return null;let es=(0,a.tZ)(K,{source:"cover_page",email:f,pub:o,user:null!=c?c:null,freeSignup:m,freeSignupEmail:_,referralCode:y,forceSignup:null!==(l=null!==(n=(0,O.x)("force"))&&void 0!==n?n:J)&&void 0!==l?l:void 0,onMaybeLater:J?void 0:eo,onFreeSignup:ea,blurbs:k,hideBlurbs:z,overrideSubtitle:U});if(en)switch(V("welcome_page_update_desktop_visuals_limited")){case"treatment_social_proof":es=(0,a.tZ)(Y,{email:f,pub:o,user:null!=c?c:null,freeSignup:m,freeSignupEmail:_,onMaybeLater:eo,onFreeSignup:ea,blurbs:k,topThreeSubscribers:P});break;case"treatment_large_fonts":es=(0,a.tZ)(G,{email:f,pub:o,user:null!=c?c:null,freeSignup:m,freeSignupEmail:_,onMaybeLater:eo,onFreeSignup:ea,blurbs:k})}return(0,a.tZ)(h.s,{children:(0,a.tZ)("div",{className:"intro-popup",children:(0,a.tZ)("div",{className:"intro-popup-page",children:es})})})}),j=e=>(0,a.tZ)("div",{className:"intro-inline",children:(0,a.tZ)(K,(0,r._)({},e))}),Y=e=>{var t,i,l,o,c;let{pub:u,user:p,email:m,freeSignup:h,freeSignupEmail:Z,onMaybeLater:N,onFreeSignup:w,blurbs:C,topThreeSubscribers:B}=e,I="cover_page",F=(0,s.qp)(x.vz),{iString:H,language:T}=(0,y.M1)(),{title:O,subtitle:M,logoUrl:R,coverPhotoUrl:q,hideTitle:z,hideSubtitle:D}=Q(u),V=q&&(0,X.zJH)(q),j=V&&V.width/V.height,Y=!!(j&&j<2),G=!z||q&&Y,K=!D||q&&Y;(0,s.d4)(()=>{(0,S.j)(S.FP.FULL_EMAIL_FORM_SHOWN,{source:I,functional_version:!0,version:"social-proof"})},[I]);let $=C?C.filter(e=>""!=e.description):[],et=U(u,{includePrice:!1,includeBadge:!0,includeRankingDetail:!1,language:T});return(0,a.BX)("div",{className:"full-email-form",children:[(0,a.BX)("div",{className:"vertically-centered",children:[(0,a.tZ)(ee,{onClick:N}),q?Y?null:(0,a.tZ)(k.xu,{paddingBottom:48,children:(0,a.tZ)(_.e,{className:J.Z.publicationCoverPhotoCenter,src:q,imageProps:{quality:"auto:best"},maxWidth:840,loading:"eager",style:(0,r._)({},V&&V.width&&{height:"min(168px, ".concat(840*V.height/V.width,"px)")}),imageIsFixedWidth:!0})}):R&&(0,a.tZ)(k.xu,{paddingBottom:32,children:(0,a.tZ)(P.wk,{logoUrl:R,size:88})}),(0,a.BX)(E.hs,{gap:48,children:[(0,a.BX)(E.tu,{className:Y?J.Z.column:J.Z.centeredColumn,gap:32,children:[(0,a.BX)(E.tu,{gap:16,children:[G?(0,a.tZ)(L.xv.H1,{textAlign:Y?"left":"center",font:"pub-headings",className:J.Z.coverPrimary,textWrap:"balance",children:O}):null,K?(0,a.tZ)(L.xv.B3,{textAlign:Y?"left":"center",font:"display",size:15,lineHeight:20,className:J.Z.coverSecondary,textWrap:"balance",children:M}):null,et&&(null===(o=et.props)||void 0===o?void 0:null===(l=o.children)||void 0===l?void 0:null===(i=l.filter)||void 0===i?void 0:null===(t=i.call(l,Boolean))||void 0===t?void 0:t.length)?(0,a.tZ)(L.xv.B2,{textAlign:Y?"left":"center",weight:"semibold",font:"display",size:17,lineHeight:24,className:J.Z.coverSecondary,children:et}):null]}),(0,a.BX)(E.tu,{gap:16,children:[(0,a.BX)(E.hs,{alignItems:"center",alignSelf:Y?"start":"center",gap:8,children:[(0,a.tZ)(E.hs,{alignItems:"center",className:d()(J.Z.faces),children:B.map((e,t)=>{let{id:r,photo_url:i}=e,l=(0,a.tZ)(_.e,{className:d()(J.Z.face,0===t&&J.Z.first,t===B.length-1&&J.Z.last),style:{zIndex:B.length-t},maxWidth:80,src:(0,X.zF4)(i||(0,W.I4)(r),64),imageIsFixedWidth:!0});return(0,a.tZ)(A.cr,{module:"@/frontend/components/ProfileHoverCard",resolve:e=>e.ProfileHoverCard,onRequest:()=>Promise.all([n.e("8173"),n.e("135"),n.e("6566"),n.e("9293"),n.e("565"),n.e("7493"),n.e("5924"),n.e("7337"),n.e("640"),n.e("1262"),n.e("8523"),n.e("9918")]).then(n.bind(n,85685)),whileLoading:l,subject:e,dontStopPropagation:!1,disabled:!1,placement:"top-start",children:l})})}),u.freeSubscriberCount?(0,a.BX)(L.xv.H3,{font:"display",weight:"semibold",size:20,lineHeight:24,className:J.Z.coverPrimary,translated:!0,children:["Join over ",I18N.p(u.freeSubscriberCount)," subscribers"]}):null]}),(0,a.tZ)(g.Z,{email:m,isWelcomePageColor:!0,freeSignup:h,freeSignupEmail:Z,pub:u,source:I,user:p,onConfirmationRequired:"enabled"===u.payments_state?()=>null:void 0,onSuccess:w||(()=>document.location.href="/"),autoFocus:!0,className:J.Z.containerClassName,promptClassName:J.Z.promptClassName,inputClassName:J.Z.inputClassName,subscribeButtonClassName:J.Z.subscribeButtonClassName}),(0,a.BX)(E.hs,{gap:4,cursor:"pointer",alignItems:"center",alignSelf:Y?"start":"center",inline:!0,onClick:N,children:[(0,a.tZ)(L.xv.B3,{style:{color:"var(--cover_print_secondary)"},children:"No thanks"===F.getSettingFor("welcome_page_opt_out_text")?H("No thanks"):null!==(c=F.getSettingFor("welcome_page_opt_out_text"))&&void 0!==c?c:H("No thanks")}),(0,a.tZ)(b.Z,{height:18,stroke:"var(--cover_print_secondary)",strokeWidth:2})]})]})]}),q&&Y?(0,a.tZ)(E.tu,{className:d()(J.Z.column,J.Z.hideColumnSmallScreens),gap:32,children:(0,a.tZ)(_.e,{className:J.Z.publicationCoverPhotoRight,src:q,imageProps:{quality:"auto:best"},maxWidth:476,loading:"eager",imageIsFixedWidth:!0})}):null]}),!!(null==$?void 0:$.length)&&(0,a.tZ)("div",{className:"blurb-buffer"}),!!(null==$?void 0:$.length)&&(0,a.tZ)(E.gq,{className:"blurbs",gap:20,children:$.map(e=>(0,a.BX)(E.tu,{gap:8,className:"blurb",children:[(0,a.tZ)(L.xv.B4,{className:"blurb-text",children:(0,a.tZ)(v.Z,{maxLines:4,ellipsesText:"...”",text:"“".concat(e.description,"”")})}),(0,a.BX)(L.xv.B4,{weight:"semibold",className:"blurb-text",children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.tZ)("a",{href:(0,X.SVA)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]}),(0,a.tZ)(f.fJ,{publication:u})]})},G=e=>{var t;let{pub:n,user:i,email:l,freeSignup:o,freeSignupEmail:c,onMaybeLater:u,onFreeSignup:p,blurbs:m}=e,h="cover_page",Z=(0,s.qp)(x.vz),{getSettingFor:N}=(0,x.So)(),{iString:w,language:C}=(0,y.M1)(),{title:B,subtitle:I,logoUrl:F,coverPhotoUrl:A,hideTitle:H,hideSubtitle:T}=Q(n),O=A&&(0,X.zJH)(A),M=O&&O.width/O.height,W=!!(M&&M<2),R=!H||A&&W,q=!T||A&&W;(0,s.d4)(()=>{(0,S.j)(S.FP.FULL_EMAIL_FORM_SHOWN,{source:h,functional_version:!0,version:"large-fonts"})},[h]);let z=m?m.filter(e=>""!=e.description):[],D=N("display_welcome_page_details");return(0,a.BX)("div",{className:"full-email-form",children:[(0,a.BX)("div",{className:"vertically-centered",children:[(0,a.tZ)(ee,{onClick:u}),A?W?null:(0,a.tZ)(k.xu,{paddingBottom:48,children:(0,a.tZ)(_.e,{className:J.Z.publicationCoverPhotoCenter,src:A,imageProps:{quality:"auto:best"},maxWidth:840,loading:"eager",style:(0,r._)({},O&&O.width&&{height:"min(168px, ".concat(840*O.height/O.width,"px)")}),imageIsFixedWidth:!0})}):F&&(0,a.tZ)(k.xu,{paddingBottom:32,children:(0,a.tZ)(P.wk,{logoUrl:F,size:88})}),(0,a.BX)(E.hs,{gap:48,children:[(0,a.BX)(E.tu,{className:W?J.Z.largeColumn:J.Z.largeCenteredColumn,gap:32,children:[(0,a.BX)(E.tu,{gap:16,children:[R?(0,a.tZ)(L.xv.H1,{textAlign:W?"left":"center",font:"pub-headings",className:d()(J.Z.coverPrimary,J.Z.largeHeading),textWrap:"balance",children:B}):null,q?(0,a.tZ)(L.xv.B3,{textAlign:W?"left":"center",font:"display",size:15,lineHeight:20,className:d()(J.Z.coverSecondary,J.Z.largeSubHeading),textWrap:"balance",children:I}):null,(0,a.tZ)(L.xv.B2,{textAlign:"left",weight:"semibold",font:"display",size:17,lineHeight:24,className:J.Z.coverSecondary,alignSelf:W?"start":"center",children:U(n,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:n.rankingDetailFreeSubscriberCount,includeRankingDetail:!!D,language:C})})]}),(0,a.BX)(E.tu,{gap:16,children:[(0,a.tZ)(g.Z,{email:l,isWelcomePageColor:!0,freeSignup:o,freeSignupEmail:c,pub:n,source:h,user:i,onConfirmationRequired:"enabled"===n.payments_state?()=>null:void 0,onSuccess:p||(()=>document.location.href="/"),autoFocus:!0,className:J.Z.containerClassName,promptClassName:J.Z.largePromptClassName,inputClassName:J.Z.largeInputClassName,inputWrapperClassName:J.Z.largeInputWrapperClassName,subscribeButtonClassName:J.Z.largeSubscribeButtonClassName}),(0,a.BX)(E.hs,{gap:4,cursor:"pointer",alignItems:"center",alignSelf:"center",inline:!0,onClick:u,children:[(0,a.tZ)(L.xv.B1,{size:20,lineHeight:30,weight:"semibold",style:{color:"var(--cover_print_secondary)"},children:"No thanks"===Z.getSettingFor("welcome_page_opt_out_text")?w("No thanks"):null!==(t=Z.getSettingFor("welcome_page_opt_out_text"))&&void 0!==t?t:w("No thanks")}),(0,a.tZ)(b.Z,{height:18,stroke:"var(--cover_print_secondary)",strokeWidth:2})]})]})]}),A&&W?(0,a.tZ)(E.tu,{className:d()(J.Z.largeColumn,J.Z.hideLargeColumnSmallScreens),gap:32,children:(0,a.tZ)(_.e,{className:J.Z.largePublicationCoverPhotoRight,src:A,imageProps:{quality:"auto:best"},maxWidth:568,loading:"eager",imageIsFixedWidth:!0})}):null]}),!!(null==z?void 0:z.length)&&(0,a.tZ)("div",{className:"blurb-buffer"}),!!(null==z?void 0:z.length)&&(0,a.tZ)(E.gq,{className:"blurbs",gap:20,children:z.map(e=>(0,a.BX)(E.tu,{gap:8,className:"blurb",children:[(0,a.tZ)(L.xv.B4,{className:"blurb-text",children:(0,a.tZ)(v.Z,{maxLines:4,ellipsesText:"...”",text:"“".concat(e.description,"”")})}),(0,a.BX)(L.xv.B4,{weight:"semibold",className:"blurb-text",children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.tZ)("a",{href:(0,X.SVA)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]}),(0,a.tZ)(f.fJ,{publication:n})]})},K=e=>{var t;let{autoFocus:i=!0,pub:l,user:o,email:c,freeSignup:u,freeSignupEmail:m,referralCode:h,source:b,forceSignup:_,submitButtonText:f,onMaybeLater:Z,onFreeSignup:N,blurbs:w,hideBlurbs:C,overrideSubtitle:k}=e,P=(0,s.qp)(x.vz),{iString:I}=(0,y.M1)(),F=(0,O.x)("referralCode"),H=(0,O.x)("refSource"),T=I("Learn More"),W=(0,X.d6h)(l,{params:(0,r._)({utm_source:q.b3.subscribeEmail,utm_content:q.fZ.learnMore},F&&{referralCode:F},H&&{refSource:H})});(0,s.d4)(()=>{"subscribe_page"===b&&(0,S.j)(S.FP.SUBSCRIBE_EMAIL_FULL_SCREEN_SHOWN,{functional_version:!0}),(0,S.j)(S.FP.FULL_EMAIL_FORM_SHOWN,{source:b,functional_version:!0})},[b]);let R=w&&!C?w.filter(e=>""!=e.description):[];return(0,a.tZ)("div",{className:"full-email-form",children:(0,a.BX)("div",{className:"vertically-centered",children:[Z&&!l.invite_only&&(0,a.tZ)(ee,{onClick:Z}),(0,a.tZ)($,{pub:l,overrideSubtitle:k}),!l.invite_only||o&&o.is_free_subscribed?(0,a.BX)(a.HY,{children:[(0,a.tZ)(E.gq,{justifyContent:"center",style:{width:"100%"},children:(0,a.BX)(E.tu,{gap:4,style:{width:"100%",maxWidth:"380px"},children:[(0,a.tZ)(g.Z,{email:c,isWelcomePageColor:!0,freeSignup:u,freeSignupEmail:m,pub:l,referralCode:h,source:b,submitButtonText:f,user:o,onConfirmationRequired:"enabled"===l.payments_state?()=>null:void 0,onSuccess:N||(()=>document.location.href="/"),autoFocus:i}),(0,a.BX)(L.xv.B4,{paddingX:{mobile:16,desktop:0},paddingTop:16,className:J.Z.tosText,translated:!0,children:["By subscribing, I agree to Substack’s"," ",(0,a.tZ)("a",{className:J.Z.tosLink,href:(0,M._Q)(),target:"_blank",rel:"noopener noreferrer",children:"Terms of Use"})," ","and acknowledge its"," ",(0,a.tZ)("a",{className:J.Z.tosLink,href:(0,M.WF)(),target:"_blank",rel:"noopener noreferrer",children:"Information Collection Notice"})," ","and"," ",(0,a.tZ)("a",{className:J.Z.tosLink,href:(0,M.Zz)(),target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"})]})]})}),!_&&(Z?(0,a.tZ)("a",{onClick:e=>e.preventDefault(),className:"no-styles",children:(0,a.BX)(B.zx,{priority:"quaternary",className:J.Z.maybeLater,onClick:Z,"data-testid":"maybeLater",children:["No thanks"===P.getSettingFor("welcome_page_opt_out_text")?I("No thanks"):null!==(t=P.getSettingFor("welcome_page_opt_out_text"))&&void 0!==t?t:I("No thanks"),(0,a.tZ)(p.Z,{size:20})]})}):(0,a.BX)(B.zx,{priority:"quaternary",className:J.Z.maybeLater,href:W,localNavigation:!1,children:[T,(0,a.tZ)(p.Z,{size:20})]}))]}):(0,a.tZ)(A.cr,{onRequest:()=>n.e("2457").then(n.bind(n,51323)),resolve:e=>e.InviteActions,module:"./InviteActions",pub:l,user:o,freeSignupEmail:m}),!!(null==R?void 0:R.length)&&(0,a.tZ)("div",{className:"blurb-buffer"}),!!(null==R?void 0:R.length)&&(0,a.tZ)(E.gq,{className:"blurbs",gap:20,children:R.map(e=>(0,a.BX)(E.tu,{gap:8,className:"blurb",children:[(0,a.tZ)(L.xv.B4,{className:d()("blurb-text",J.Z.blurbText),children:(0,a.tZ)(v.Z,{maxLines:4,ellipsesText:"...”",text:"“".concat(e.description,"”")})}),(0,a.BX)(L.xv.B4,{weight:"semibold",className:d()("blurb-text",J.Z.blurbText),children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.tZ)("a",{href:(0,X.SVA)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]})})},Q=(e,t)=>{let n,r,i,l,a,o;let{getConfigFor:s}=(0,N.xR)();if(s("section_specific_welcome_pages")&&e.section){var c;n=e.section.name,r=e.section.description,i=null!==(c=e.section.logo_url)&&void 0!==c?c:e.logo_url,a=!!((l=e.section.cover_photo_url)&&e.section.hide_intro_title),o=!!(l&&e.section.hide_intro_subtitle)}else n=e.name,r=e.hero_text,i=e.logo_url,a=!!((l=e.cover_photo_url)&&e.hide_intro_title),o=!!(l&&e.hide_intro_subtitle);return t&&(r=t),{title:n,subtitle:r,logoUrl:i,coverPhotoUrl:l,hideTitle:a,hideSubtitle:o}},$=e=>{let{pub:t,overrideSubtitle:n}=e,{getSettingFor:i}=(0,x.So)(),{language:l}=(0,y.M1)(),{title:o,subtitle:s,logoUrl:c,coverPhotoUrl:u,hideTitle:p,hideSubtitle:m}=Q(t,n),h=i("display_welcome_page_details"),g=u&&(0,X.zJH)(u);return(0,a.BX)(a.HY,{children:[u?(0,a.tZ)(_.e,{className:"publication-cover-photo",src:u,imageProps:{quality:"auto:best"},maxWidth:1360,loading:"eager",style:(0,r._)({},g&&g.width&&{height:"min(35vh, ".concat(680*g.height/g.width,"px)")})}):c&&(0,a.tZ)(k.xu,{paddingBottom:32,children:(0,a.tZ)(P.wk,{logoUrl:c,size:88})}),!p&&(0,a.tZ)("h1",{className:d()("publication-name",{"no-logo":!c,"with-cover":u},J.Z.balancedText),children:o}),!m&&s&&(0,a.tZ)("p",{className:d()("publication-tagline with-cover",{verbose:!0,"with-cover":u},J.Z.balancedText),children:s}),(0,a.tZ)("div",{className:"publication-meta",children:U(t,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:t.rankingDetailFreeSubscriberCount,includeRankingDetail:!!h,language:l})})]})},ee=e=>{let{onClick:t}=e;return(0,a.tZ)(B.hU,{onClick:t,"aria-label":"Close","data-testid":"close-welcome-modal",priority:"tertiary",className:J.Z.closeWelcomeModal,children:(0,a.tZ)(m.Z,{size:20})})}},72392:function(e,t,n){n.d(t,{o:()=>Z});var r=n(16584),i=n(30396),l=n(94184),a=n.n(l),o=n(95441),s=n(98914),c=n(15771),d=n(19081),u=n(84747),p=n(63474),m=n(58175),h=n(81821),g=n(98550);let b=e=>{let[t,n]=(0,i.eJ)(null);return(0,i.d4)(()=>{let t=[];return e.forEach(e=>{let r=(0,s.VA)(e.text.toLowerCase(),!0),i=document.getElementById("\xa7".concat(r));if(i){let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.intersectionRatio>=.8&&n(r)})},{threshold:.5,rootMargin:"0px 0px -90% 0px"});e.observe(i),t.push(e)}}),()=>t.forEach(e=>e.disconnect())},[e]),t},v=e=>e?/^H[1-5]$/i.test(e.tagName)?e:v(e.parentElement):null,_=e=>{let{toc:t,minLevel:n,activeItem:i}=e;return(0,r.tZ)(d.tu,{gap:12,paddingY:12,paddingX:8,alignItems:"end",children:t.map((e,t)=>{let l=e.level-n,o="indent-".concat(Math.min(l,3)),c=(0,s.VA)(e.text.toLowerCase(),!0);return(0,r.tZ)("div",{className:a()(g.Z.line,g.Z[o],i===c&&g.Z.active)},t)})})},f=e=>{let{toc:t,minLevel:n,activeItem:i,onItemClick:l}=e,{iString:c}=(0,o.M1)();return(0,r.BX)(d.tu,{gap:4,flex:"grow",children:[(0,r.tZ)(m.xv.Meta,{padding:4,color:"primary",children:c("Contents")}),t.map((e,t)=>{let o=(0,s.VA)(e.text.toLowerCase(),!0),c=e.level-n,u="indent-".concat(Math.min(c,3));return(0,r.tZ)(p.A0,{href:"#\xa7".concat(o),onClick:e=>{e.preventDefault(),l(o)},children:(0,r.tZ)(d.gq,{padding:4,className:a()(g.Z.row),children:(0,r.tZ)(m.xv.B3,{className:a()(g.Z.label,g.Z[u],i===o&&g.Z.active),ellipsis:!0,children:e.text})})},t)})]})},Z=e=>{let{toc:t,position:n="fixed"}=e,{iString:l}=(0,o.M1)(),s=Math.min(...t.map(e=>e.level)),[d,p]=(0,i.eJ)(null),m=b(t);return t.length<2||(0,h.tq)()?null:(0,r.tZ)(u.M,{trigger:e=>{let{ref:i,onClick:o}=e;return(0,r.tZ)(c.kG,{ref:i,onClick:o,className:a()(g.Z.trigger,g.Z[n]),"aria-label":l("Table of Contents"),position:n,children:(0,r.tZ)(_,{toc:t,minLevel:s,activeItem:m})})},customShowClass:g.Z.show,customHideClass:g.Z.hide,layerClassName:g.Z.menu,layerOptions:{placement:"right-center",triggerOffset:8},children:(0,r.tZ)(f,{toc:t,minLevel:s,activeItem:m,onItemClick:e=>{let t=document.getElementById("\xa7".concat(e));if(t){let n=v(t);if(n){if(d){let e=document.getElementById("\xa7".concat(d)),t=e?v(e):null;null==t||t.classList.remove("highlight")}n.classList.add("highlight"),p(e),t.scrollIntoView({behavior:"smooth",block:"start"})}}}})})}},59708:function(e,t,n){let r;n.d(t,{Kd:()=>j,N1:()=>Y});var i,l=n(7409),a=n(99282),o=n(16584),s=n(6400),c=n(70109),d=n(94184),u=n.n(d),p=n(60826),m=n(4373),h=n(62049),g=n(16564),b=n(17117),v=n(36441),_=n(78435),f=n(80836),Z=n(3258),y=n(33665),x=n(95441),N=n(57796),w=n(26989),S=n(98914),C=n(55706),k=n(19081),B=n(32700),E=n(93903),P=n(60308),L=n(26111),I=n(81821),F=n(64314);let A=(e,t)=>{var n,r,i,a;return(0,o.tZ)("div",{className:"subscription-widget-wrap",children:(0,o.BX)("div",{className:"subscription-widget show-subscribe",children:[(0,o.tZ)("div",{className:"preamble",children:(0,o.tZ)("p",{dangerouslySetInnerHTML:{__html:null!==(a=null===(i=e.children[0])||void 0===i?void 0:null===(r=i.children[0])||void 0===r?void 0:null===(n=r.children[0])||void 0===n?void 0:n.innerHTML)&&void 0!==a?a:""}})}),(0,o.tZ)(y.Z,(0,l._)({pub:t.pub,subscribeButtonAttrs:null,source:"subscribe-widget-preamble"},t.props))]})})},H=(e,t)=>{try{let n=JSON.parse((0,E.Z)(e.getAttribute("data-attrs")));if(["".concat(t.pub.base_url,"/subscribe?"),"".concat(t.pub.base_url,"/subscribe?plan=founding"),p.W.CHECKOUT_URL,p.W.FOUNDING_CHECKOUT_URL].includes(n.url)){let n=JSON.parse((0,E.Z)(e.getAttribute("data-attrs")));return(0,o.tZ)(y.Z,(0,l._)({pub:t.pub,subscribeButtonAttrs:n},t.props))}}catch(e){console.error("Failed to parse button:",e)}return null},T=(e,t)=>{let{pub:n,props:{isStatic:r,post:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,E.Z)(t));return r?(0,o.tZ)(g.nO,{label:e.label,pub:n,post:i,duration:e.duration}):(0,o.tZ)(g.cM,{label:e.label,pub:n,post:i,src:"/api/v1/audio/upload/".concat(e.mediaUploadId,"/src"),duration:e.duration,autoPlay:!1,mediaUpload:{id:e.mediaUploadId}})}}catch(e){console.error("Failed to parse audio:",e)}return null},X=(e,t)=>{let{pub:n,props:{isStatic:r,post:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,E.Z)(t));return r?(0,o.tZ)(g.nO,{label:e.label,pub:n,post:i,duration:e.duration}):(0,o.tZ)(g.cM,{label:e.label,pub:n,post:i,src:e.url,duration:e.duration,autoPlay:!1})}}catch(e){console.error("Failed to parse audio:",e)}return null},O=(e,t)=>{let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs");if(t){let{name:e,avatarUrl:r,url:i}=JSON.parse((0,E.Z)(t));return n?(0,o.tZ)(C.W,{name:e,avatarUrl:r,url:i}):(0,o.tZ)(C.R,{name:e,avatarUrl:r,url:i})}}catch(e){console.error("Failed to parse audio:",e)}return null},M=e=>{try{let t=JSON.parse(e.dataset.attrs).symbol;if(t)return(0,o.tZ)(b.Z,{symbol:t,prependSymbol:JSON.parse(e.dataset.attrs).prependSymbol,isStatic:JSON.parse(e.dataset.attrs).isStatic});return(0,o.tZ)(o.HY,{})}catch(e){return console.error("failed to parse cashtag"),(0,o.tZ)(o.HY,{})}},W=(e,t)=>{let{pub:n,props:{isStatic:r}}=t,{iString:i}=I18N.i({pub:n});try{if(r){let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,E.Z)(t)),n=null==e?void 0:e.persistentExpression;return n?(0,o.tZ)("img",{src:(0,P.iJV)(n),style:{transform:"scale(0.5)"},"data-component-name":"LatexImg"}):(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — no expression found in email")})}return(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — data attributes not found")})}let t=e.getAttribute("data-attrs"),n=JSON.parse((0,E.Z)(t)),l=null==n?void 0:n.persistentExpression;return l?(0,o.tZ)(k.gq,{className:"latex-rendered",justifyContent:"center",flex:"grow",paddingBottom:"4px",paddingTop:"4px","data-component-name":"Latex",children:(0,o.tZ)(k.tu,{justifyContent:"center",children:(0,o.tZ)(c.Z,{inline:!1,children:"\\(".concat(l,"\\)")})})}):(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — no expression found")})}catch(e){return console.error("failed to render mathjax",e),(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — error")})}},R=e=>{try{let{name:t,id:n,type:r,url:i,photo_url:l,uuid:a,isStatic:s}=JSON.parse(e.dataset.attrs);if(t)return(0,o.tZ)(Z.ZP,{name:t,id:n,type:r,url:i,photo_url:l,uuid:a,isStatic:s});return(0,o.tZ)(o.HY,{})}catch(e){return(0,o.tZ)(o.HY,{})}},q=(e,t)=>{try{let i=JSON.parse((0,E.Z)(e.getAttribute("data-attrs")));if(null==i?void 0:i.isEmail){var n,r;return(0,o.tZ)("table",{className:"poll-embed poll-email",cellSpacing:"16px",width:"100%",children:(0,o.tZ)("tbody",{children:(0,o.tZ)("tr",{children:(0,o.tZ)("td",{align:"center",children:(0,o.tZ)(_.kq,{id:i.id,embeddedPolls:null!==(r=null===(n=t.props.dataForEmailRender)||void 0===n?void 0:n.embeddedPolls)&&void 0!==r?r:[],pub:t.pub})})})})})}return(0,o.tZ)("div",{className:"poll-embed",dataAttrs:e.getAttribute("data-attrs"),children:(0,o.tZ)(_.n_,{id:i.id,isEditor:!1,post:t.props.post,isVersionView:!!t.props.isVersionView})})}catch(e){return console.error("Failed to parse poll:",e),(0,o.tZ)(o.HY,{})}},J=(e,t,n)=>{var r;let[i,,l]=e.id.split("-"),a=null===(r=n.wrapper.querySelector("#".concat(i,"-").concat(l)))||void 0===r?void 0:r.nextElementSibling;return a?((0,I.tq)()&&(e.href="#_"),(0,o.tZ)(B.z,{content:(0,o.tZ)("div",{className:"markup",children:V(a,t,n)}),className:"footnote-hovercard-target",dontStopPropagation:!0,layerClassName:"typography footnote-hovercard",as:"span",children:V(e,t,n)})):V(e,t,n)},z=(e,t)=>(0,o.tZ)(x._7,{language:t,children:e}),D=function(e,t){var n,r,i;let{shallow:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("A"!==e.nodeName||e.getAttribute("rel")||e.setAttribute("rel","pub"in t&&(null===(i=t.pub)||void 0===i?void 0:i.no_follow)?"nofollow ugc noopener":""),(0,S.pv)(e,"image2")&&(null===(n=t.props)||void 0===n?void 0:n.canRestackImage)&&e.classList.add("can-restack"),"pub"in t&&t.pub&&"P"===e.nodeName&&(0,S.pv)(e,"button-wrapper")){let n=H(e,t);if(n)return n;let r=(0,v.TW)(e,t);if(r)return r}let c="pub"in t&&(null===(r=t.pub)||void 0===r?void 0:r.language)||"en";return(0,S.pv)(e,"subscription-widget-wrap-editor")||(0,S.pv)(e,"subscription-widget-wrap")?z(A(e,t),c):(0,S.pv)(e,"cashtag-wrap")?z(M(e),c):(0,S.pv)(e,"mention-wrap")?z(R(e),c):"pub"in t&&t.pub&&(0,S.pv)(e,"native-audio-url-embed")?z(X(e,t),c):"pub"in t&&t.pub&&(0,S.pv)(e,"native-audio-embed")?z(T(e,t),c):"pub"in t&&t.pub&&(0,S.pv)(e,"native-video-embed")?z((0,v.tj)(e,t),c):"pub"in t&&t.pub&&(0,S.pv)(e,"meeting-embed")?z(O(e,t),c):(0,S.pv)(e,"poll-embed")?z(q(e,t),c):(0,S.pv)(e,"recipe-embed")?z((0,v.G3)(e,t),c):(0,S.pv)(e,"pinterest-embed")?z((0,v.EK)(e),c):(0,S.pv)(e,"sponsorship-campaign-embed")?z((0,v.b3)(e,t),c):(0,S.pv)(e,"image-gallery-embed")?z((0,v.W5)(e,t),c):(0,S.pv)(e,"image3")?z((0,v.L0)(e,t),c):(0,S.pv)(e,"directMessage")?z((0,v.Gz)(e,t),c):(0,S.pv)(e,"latex-rendered")?z(W(e,t),c):(0,S.pv)(e,"community-chat")?z(function(e,t){let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs"),r=JSON.parse((0,E.Z)(t));if(!r.pub||!r.subdomain)return console.error("could not deepPrepare communityChat, subdomain or pub missing from node"),(0,o.tZ)(s.Fragment,{});return(0,o.tZ)("div",{className:"community-chat",dataAttrs:t,children:n?(0,o.tZ)(m.C,(0,l._)({},r)):(0,o.tZ)(m.a,{pub:r.pub,subdomain:r.subdomain})})}catch(e){return console.error("Failed to parse chat embed:",e),(0,o.tZ)(s.Fragment,{})}}(e,t),c):(0,S.pv)(e,"community-post")?z(function(e,t){let{props:{isStatic:n,is_freemail:r}}=t;try{let t=e.getAttribute("data-attrs"),i=JSON.parse((0,E.Z)(t));return n?(0,o.tZ)(h.s,(0,l._)({is_freemail:r},i)):(0,o.tZ)(h.V,(0,l._)({},i))}catch(e){return console.error("Failed to parse chat post embed:",e),(0,o.tZ)(s.Fragment,{})}}(e,t),c):(0,S.pv)(e,"digest-post-embed")?z((0,v.Do)(e,t),c):(0,S.pv)(e,"comment")&&!(0,S.pv)(e,"template-comment")?z(function(e,t){let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs"),r=JSON.parse((0,E.Z)(t));return n?(0,o.tZ)(w.Eo,(0,l._)({},r)):(0,o.tZ)(N.d,(0,l._)({},r))}catch(e){return console.error("Failed to parse chat post embed:",e),(0,o.tZ)(s.Fragment,{})}}(e,t),c):(0,S.pv)(e,"referrals-tier-card")?z((0,v.mx)(e,t),c):("undefined"!=typeof window&&(0,S.pv)(e,"file-embed-button")&&"href"in e&&e.href&&!(0,L.x)(e.href,"token")&&(e.href=(0,P.n1t)(e.href,{token:(0,L.x)(window._preloads.original_url,"token")})),"props"in t&&t.props&&"post"in t.props&&t.props.post&&"object"==typeof t.props.post&&"id"in t.props.post&&t.props.post.id&&(0,S.pv)(e,"footnote")&&(e.id&&(e.id+="-".concat(t.props.post.id)),"href"in e&&e.href&&(e.href+="-".concat(t.props.post.id))),(0,S.pv)(e,"footnote-anchor"))?z(J(e,D,t),c):a?null:V(e,D,t)},U=function(e){let t={};for(let{name:n,value:r}of Array.prototype.slice.call(e))t[n]=r;return t},V=(i=(e,t,n,r)=>{var i;if(!e)throw Error("Empty node, cannot preactify!");let c=3===e.nodeType?"span":8===e.nodeType?"x_preact_compatible_html_comment_x":e.tagName.toLowerCase(),d=1!==e.nodeType?{}:U(e.attributes),p=e.children&&e.children.length>0?null:e.textContent;if(r||"script"===c&&e.innerHTML===F.N)return(0,s.h)(c,(0,a._)((0,l._)({},d),{dangerouslySetInnerHTML:{__html:e.innerHTML}}));let m=!!(null===(i=e.parentElement)||void 0===i?void 0:i.getAttribute("data-prose-mirror-wrapper"));if(n&&"pub"in n&&m&&["h1","h2","h3","h4"].includes(c)&&!e.className)return function(e,t,n,r){var i,c,d,p;let m=u()("header-anchor-post",t.className),h=n.children.length?Array.prototype.map.call(n.childNodes,e=>D(e,r)):[n.textContent];return(0,s.h)(e,(0,a._)((0,l._)({},t),{className:m}),...h,(0,o.tZ)(f.Z,{text:null!==(d=n.textContent)&&void 0!==d?d:"",pub:null==r?void 0:r.pub,post:null==r?void 0:null===(i=r.props)||void 0===i?void 0:i.post,offsetTop:!0,isAboutPage:null!==(p=null==r?void 0:null===(c=r.props)||void 0===c?void 0:c.isAboutPage)&&void 0!==p&&p}))}(c,d,e,n);if(p)return(0,s.h)(c,d,p);let h=t(e,n,{shallow:!0});return h||(0,s.h)(c,d,...Array.prototype.map.call(e.childNodes,e=>t(e,n)))},r=0,function(){let e=[].slice.call(arguments,0),t=++r>2500;if(t){var n,l,a;console.error("Too many post nodes to recurse",{postId:null===(a=e[2])||void 0===a?void 0:null===(l=a.props)||void 0===l?void 0:null===(n=l.post)||void 0===n?void 0:n.id,depth:r})}let o=i.apply(null,[...e,...t?[!0]:[]]);return r--,o});function j(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement("div");return r.setAttribute("data-prose-mirror-wrapper","1"),r.innerHTML=e,Array.prototype.map.call(r.childNodes,e=>V(e,D,{wrapper:r,pub:t,props:n}))}function Y(e,t){if("undefined"==typeof window)return[];let n=document.createElement("div");n.innerHTML=e;let r=[];for(let e of n.querySelectorAll(null!=t?t:"h1, h2, h3, h4")){var i,l;let t=e.tagName[1],n=t?parseInt(t):NaN;r.push({level:null!=n?n:0,text:null!==(i=e.textContent)&&void 0!==i?i:"",id:null!==(l=e.id)&&void 0!==l?l:""})}return r}},2748:function(e,t,n){n.d(t,{F:()=>l});var r=n(1835),i=n(84864);function l(e,t){var n,l,a,o;let s,c;let d=null===(n=e.name)||void 0===n?void 0:n.trim(),u=d;(0,i.endsWithPunctuation)(d)&&(u='"'.concat(d,'"'));let p=(0,r.Im)(e.contributors);return e.invite_only?(s=null,c=null):(s=(null===(a=e.rankingDetailFreeIncluded)||void 0===a?void 0:a.toLowerCase().includes("subscribers"))?e.rankingDetailFreeIncluded.toLowerCase():null,c=e.rankingDetailFreeIncluded||e.rankingDetail),(0,r.ab)(null!==(o=null!=t?t:null===(l=e.hero_text)||void 0===l?void 0:l.trim())&&void 0!==o?o:"",p,s,u,c)}}}]);