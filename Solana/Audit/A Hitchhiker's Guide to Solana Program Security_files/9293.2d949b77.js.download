"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["9293"],{28518:function(e,t,n){n.d(t,{KK:()=>F,NI:()=>N,YF:()=>_,Y_:()=>V,bQ:()=>B,ll:()=>D});var r=n(98661);if(!/^(1588|1691|2536|4457)$/.test(n.j))var o=n(17268);var u=n(33771);if(!/^(1588|1691|2536|4457)$/.test(n.j))var l=n(31720);if(!/^(1588|1691|2536|4457)$/.test(n.j))var i=n(88388);if(!/^(1588|1691|2536|4457)$/.test(n.j))var c=n(78493);let s={...r},a=s.useInsertionEffect,f=/^(1588|1691|2536|4457)$/.test(n.j)?null:a||(e=>e());function d(e){let t=r.useRef(()=>{});return f(()=>{t.current=e}),r.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}var v=/^(1588|1691|2536|4457)$/.test(n.j)?null:"undefined"!=typeof document?r.useLayoutEffect:r.useEffect;let m=!1,p=0,g=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+p++,h=s.useId,y=/^(1588|1691|2536|4457)$/.test(n.j)?null:h||function(){let[e,t]=r.useState(()=>m?g():void 0);return v(()=>{null==e&&t(g())},[]),r.useEffect(()=>{m=!0},[]),e},b=/^(1588|1691|2536|4457)$/.test(n.j)?null:r.createContext(null),E=/^(1588|1691|2536|4457)$/.test(n.j)?null:r.createContext(null),R=()=>{var e;return(null==(e=r.useContext(b))?void 0:e.id)||null},w=()=>r.useContext(E);function k(e){return"data-floating-ui-"+e}function x(e){let t=(0,r.useRef)(e);return v(()=>{t.current=e}),t}function C(e,t){let n=e.filter(e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}),r=n;for(;r.length;)r=e.filter(e=>{var t;return null==(t=r)?void 0:t.some(t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)})}),n=n.concat(r);return n}let M=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function P(e,t){let n=(0,i.ht)(e,M());"prev"===t&&n.reverse();let r=n.indexOf((0,o.AW)((0,o.Me)(e)));return n.slice(r+1)[0]}function j(e,t){let n=t||e.currentTarget,r=e.relatedTarget;return!r||!(0,o.r3)(n,r)}function A(e){e.querySelectorAll("[data-tabindex]").forEach(e=>{let t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}let K=/^(1588|1691|2536|4457)$/.test(n.j)?null:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},L=/^(1588|1691|2536|4457)$/.test(n.j)?null:r.forwardRef(function(e,t){let[n,l]=r.useState();v(()=>{(0,o.G6)()&&l("button")},[]);let i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[k("focus-guard")]:"",style:K};return(0,u.tZ)("span",{...e,...i})}),S=/^(1588|1691|2536|4457)$/.test(n.j)?null:r.createContext(null),$=/^(1588|1691|2536|4457)$/.test(n.j)?null:k("portal");function D(e){let{children:t,id:n,root:o,preserveTabOrder:c=!0}=e,s=function(e){void 0===e&&(e={});let{id:t,root:n}=e,o=y(),u=O(),[i,c]=r.useState(null),s=r.useRef(null);return v(()=>()=>{null==i||i.remove(),queueMicrotask(()=>{s.current=null})},[i]),v(()=>{if(!o||s.current)return;let e=t?document.getElementById(t):null;if(!e)return;let n=document.createElement("div");n.id=o,n.setAttribute($,""),e.appendChild(n),s.current=n,c(n)},[t,o]),v(()=>{if(null===n||!o||s.current)return;let e=n||(null==u?void 0:u.portalNode);e&&!(0,l.kK)(e)&&(e=e.current),e=e||document.body;let r=null;t&&((r=document.createElement("div")).id=t,e.appendChild(r));let i=document.createElement("div");i.id=o,i.setAttribute($,""),(e=r||e).appendChild(i),s.current=i,c(i)},[t,n,o,u]),i}({id:n,root:o}),[a,f]=r.useState(null),d=r.useRef(null),m=r.useRef(null),p=r.useRef(null),g=r.useRef(null),h=null==a?void 0:a.modal,b=null==a?void 0:a.open,E=!!a&&!a.modal&&a.open&&c&&!!(o||s);return r.useEffect(()=>{if(s&&c&&!h)return s.addEventListener("focusin",e,!0),s.addEventListener("focusout",e,!0),()=>{s.removeEventListener("focusin",e,!0),s.removeEventListener("focusout",e,!0)};function e(e){s&&j(e)&&("focusin"===e.type?A:function(e){(0,i.ht)(e,M()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})})(s)}},[s,c,h]),r.useEffect(()=>{s&&(b||A(s))},[b,s]),(0,u.BX)(S.Provider,{value:r.useMemo(()=>({preserveTabOrder:c,beforeOutsideRef:d,afterOutsideRef:m,beforeInsideRef:p,afterInsideRef:g,portalNode:s,setFocusManagerState:f}),[c,s]),children:[E&&s&&(0,u.tZ)(L,{"data-type":"outside",ref:d,onFocus:e=>{if(j(e,s)){var t;null==(t=p.current)||t.focus()}else{let e=P(document.body,"prev")||(null==a?void 0:a.domReference);null==e||e.focus()}}}),E&&s&&(0,u.tZ)("span",{"aria-owns":s.id,style:K}),s&&r.createPortal(t,s),E&&s&&(0,u.tZ)(L,{"data-type":"outside",ref:m,onFocus:e=>{if(j(e,s)){var t;null==(t=g.current)||t.focus()}else{let t=P(document.body,"next")||(null==a?void 0:a.domReference);null==t||t.focus(),(null==a?void 0:a.closeOnFocusOut)&&(null==a||a.onOpenChange(!1,e.nativeEvent,"focus-out"))}}})]})}let O=()=>r.useContext(S),T=/^(1588|1691|2536|4457)$/.test(n.j)?null:{pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},W=/^(1588|1691|2536|4457)$/.test(n.j)?null:{pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},I=e=>{var t,n;return{escapeKey:"boolean"==typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"==typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function B(e,t){void 0===t&&(t={});let{open:n,onOpenChange:u,elements:i,dataRef:c}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:f=!0,outsidePressEvent:v="pointerdown",referencePress:m=!1,referencePressEvent:p="pointerdown",ancestorScroll:g=!1,bubbles:h,capture:y}=t,b=w(),E=d("function"==typeof f?f:()=>!1),R="function"==typeof f?E:f,x=r.useRef(!1),M=r.useRef(!1),{escapeKey:P,outsidePress:j}=I(h),{escapeKey:A,outsidePress:K}=I(y),L=r.useRef(!1),S=d(e=>{var t;if(!n||!s||!a||"Escape"!==e.key||L.current)return;let r=null==(t=c.current.floatingContext)?void 0:t.nodeId,l=b?C(b.nodesRef.current,r):[];if(!P&&(e.stopPropagation(),l.length>0)){let e=!0;if(l.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__escapeKeyBubbles){e=!1;return}}),!e)return}u(!1,(0,o.MM)(e)?e.nativeEvent:e,"escape-key")}),$=d(e=>{var t;let n=()=>{var t;S(e),null==(t=(0,o.U9)(e))||t.removeEventListener("keydown",n)};null==(t=(0,o.U9)(e))||t.addEventListener("keydown",n)}),D=d(e=>{var t;let n=x.current;x.current=!1;let r=M.current;if(M.current=!1,"click"===v&&r||n||"function"==typeof R&&!R(e))return;let s=(0,o.U9)(e),a="["+k("inert")+"]",f=(0,o.Me)(i.floating).querySelectorAll(a),d=(0,l.kK)(s)?s:null;for(;d&&!(0,l.Py)(d);){let e=(0,l.Ow)(d);if((0,l.Py)(e)||!(0,l.kK)(e))break;d=e}if(f.length&&(0,l.kK)(s)&&!(0,o.ex)(s)&&!(0,o.r3)(s,i.floating)&&Array.from(f).every(e=>!(0,o.r3)(d,e)))return;if((0,l.Re)(s)&&_){let t=(0,l.Py)(s),n=(0,l.Dx)(s),r=/auto|scroll/,o=t||r.test(n.overflowX),u=t||r.test(n.overflowY),i=o&&s.clientWidth>0&&s.scrollWidth>s.clientWidth,c=u&&s.clientHeight>0&&s.scrollHeight>s.clientHeight,a="rtl"===n.direction,f=c&&(a?e.offsetX<=s.offsetWidth-s.clientWidth:e.offsetX>s.clientWidth),d=i&&e.offsetY>s.clientHeight;if(f||d)return}let m=null==(t=c.current.floatingContext)?void 0:t.nodeId,p=b&&C(b.nodesRef.current,m).some(t=>{var n;return(0,o.Pe)(e,null==(n=t.context)?void 0:n.elements.floating)});if((0,o.Pe)(e,i.floating)||(0,o.Pe)(e,i.domReference)||p)return;let g=b?C(b.nodesRef.current,m):[];if(g.length>0){let e=!0;if(g.forEach(t=>{var n;if(null!=(n=t.context)&&n.open&&!t.context.dataRef.current.__outsidePressBubbles){e=!1;return}}),!e)return}u(!1,e,"outside-press")}),O=d(e=>{var t;let n=()=>{var t;D(e),null==(t=(0,o.U9)(e))||t.removeEventListener(v,n)};null==(t=(0,o.U9)(e))||t.addEventListener(v,n)});r.useEffect(()=>{if(!n||!s)return;c.current.__escapeKeyBubbles=P,c.current.__outsidePressBubbles=j;let e=-1;function t(e){u(!1,e,"ancestor-scroll")}function r(){window.clearTimeout(e),L.current=!0}function f(){e=window.setTimeout(()=>{L.current=!1},5*!!(0,l.Pf)())}let d=(0,o.Me)(i.floating);a&&(d.addEventListener("keydown",A?$:S,A),d.addEventListener("compositionstart",r),d.addEventListener("compositionend",f)),R&&d.addEventListener(v,K?O:D,K);let m=[];return g&&((0,l.kK)(i.domReference)&&(m=(0,l.Kx)(i.domReference)),(0,l.kK)(i.floating)&&(m=m.concat((0,l.Kx)(i.floating))),!(0,l.kK)(i.reference)&&i.reference&&i.reference.contextElement&&(m=m.concat((0,l.Kx)(i.reference.contextElement)))),(m=m.filter(e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})).forEach(e=>{e.addEventListener("scroll",t,{passive:!0})}),()=>{a&&(d.removeEventListener("keydown",A?$:S,A),d.removeEventListener("compositionstart",r),d.removeEventListener("compositionend",f)),R&&d.removeEventListener(v,K?O:D,K),m.forEach(e=>{e.removeEventListener("scroll",t)}),window.clearTimeout(e)}},[c,i,a,R,v,n,u,g,s,P,j,S,A,$,D,K,O]),r.useEffect(()=>{x.current=!1},[R,v]);let B=r.useMemo(()=>({onKeyDown:S,...m&&{[T[p]]:e=>{u(!1,e.nativeEvent,"reference-press")},..."click"!==p&&{onClick(e){u(!1,e.nativeEvent,"reference-press")}}}}),[S,u,m,p]),_=r.useMemo(()=>({onKeyDown:S,onMouseDown(){M.current=!0},onMouseUp(){M.current=!0},[W[v]]:()=>{x.current=!0}}),[S,v]);return r.useMemo(()=>s?{reference:B,floating:_}:{},[s,B,_])}function _(e){void 0===e&&(e={});let{nodeId:t}=e,n=function(e){let{open:t=!1,onOpenChange:n,elements:o}=e,u=y(),l=r.useRef({}),[i]=r.useState(()=>(function(){let e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach(e=>e(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter(e=>e!==n))||[])}}})()),c=null!=R(),[s,a]=r.useState(o.reference),f=d((e,t,r)=>{l.current.openEvent=e?t:void 0,i.emit("openchange",{open:e,event:t,reason:r,nested:c}),null==n||n(e,t,r)}),v=r.useMemo(()=>({setPositionReference:a}),[]),m=r.useMemo(()=>({reference:s||o.reference||null,floating:o.floating||null,domReference:o.reference}),[s,o.reference,o.floating]);return r.useMemo(()=>({dataRef:l,open:t,onOpenChange:f,elements:m,events:i,floatingId:u,refs:v}),[t,f,m,i,u,v])}({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||n,u=o.elements,[i,s]=r.useState(null),[a,f]=r.useState(null),m=(null==u?void 0:u.domReference)||i,p=r.useRef(null),g=w();v(()=>{m&&(p.current=m)},[m]);let h=(0,c.YF)({...e,elements:{...u,...a&&{reference:a}}}),b=r.useCallback(e=>{let t=(0,l.kK)(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;f(t),h.refs.setReference(t)},[h.refs]),E=r.useCallback(e=>{((0,l.kK)(e)||null===e)&&(p.current=e,s(e)),((0,l.kK)(h.refs.reference.current)||null===h.refs.reference.current||null!==e&&!(0,l.kK)(e))&&h.refs.setReference(e)},[h.refs]),k=r.useMemo(()=>({...h.refs,setReference:E,setPositionReference:b,domReference:p}),[h.refs,E,b]),x=r.useMemo(()=>({...h.elements,domReference:m}),[h.elements,m]),C=r.useMemo(()=>({...h,...o,refs:k,elements:x,nodeId:t}),[h,k,x,t,o]);return v(()=>{o.dataRef.current.floatingContext=C;let e=null==g?void 0:g.nodesRef.current.find(e=>e.id===t);e&&(e.context=C)}),r.useMemo(()=>({...h,context:C,refs:k,elements:x}),[h,k,x,C])}function F(e,t){void 0===t&&(t={});let{open:n,onOpenChange:u,events:i,dataRef:c,elements:s}=e,{enabled:a=!0,visibleOnly:f=!0}=t,d=r.useRef(!1),v=r.useRef(-1),m=r.useRef(!0);r.useEffect(()=>{if(!a)return;let e=(0,l.Jj)(s.domReference);function t(){!n&&(0,l.Re)(s.domReference)&&s.domReference===(0,o.AW)((0,o.Me)(s.domReference))&&(d.current=!0)}function r(){m.current=!0}return e.addEventListener("blur",t),e.addEventListener("keydown",r,!0),()=>{e.removeEventListener("blur",t),e.removeEventListener("keydown",r,!0)}},[s.domReference,n,a]),r.useEffect(()=>{if(a)return i.on("openchange",e),()=>{i.off("openchange",e)};function e(e){let{reason:t}=e;("reference-press"===t||"escape-key"===t)&&(d.current=!0)}},[i,a]),r.useEffect(()=>()=>{-1!==v.current&&(clearTimeout(v.current),v.current=-1)},[]);let p=r.useMemo(()=>({onPointerDown(e){(0,o.cr)(e.nativeEvent)||(m.current=!1)},onMouseLeave(){d.current=!1},onFocus(e){if(d.current)return;let t=(0,o.U9)(e.nativeEvent);if(f&&(0,l.kK)(t))try{if((0,o.G6)()&&(0,o.V5)())throw Error();if(!t.matches(":focus-visible"))return}catch(e){if(!m.current&&!(0,o.j7)(t))return}u(!0,e.nativeEvent,"focus")},onBlur(e){d.current=!1;let t=e.relatedTarget,n=e.nativeEvent,r=(0,l.kK)(t)&&t.hasAttribute(k("focus-guard"))&&"outside"===t.getAttribute("data-type");v.current=window.setTimeout(()=>{var e;let l=(0,o.AW)(s.domReference?s.domReference.ownerDocument:document);if(t||l!==s.domReference){if((0,o.r3)(null==(e=c.current.floatingContext)?void 0:e.refs.floating.current,l)||(0,o.r3)(s.domReference,l)||r)return;u(!1,n,"focus")}})}}),[c,s.domReference,u,f]);return r.useMemo(()=>a?{reference:p}:{},[a,p])}let U="active",Z="selected";function q(e,t,n){let r=new Map,o="item"===n,u=e;if(o&&e){let{[U]:t,[Z]:n,...r}=e;u=r}return{..."floating"===n&&{tabIndex:-1,"data-floating-ui-focusable":""},...u,...t.map(t=>{let r=t?t[n]:null;return"function"==typeof r?e?r(e):null:r}).concat(e).reduce((e,t)=>(t&&Object.entries(t).forEach(t=>{let[n,u]=t;if(!(o&&[U,Z].includes(n))){if(0===n.indexOf("on")){if(r.has(n)||r.set(n,[]),"function"==typeof u){var l;null==(l=r.get(n))||l.push(u),e[n]=function(){for(var e,t=arguments.length,o=Array(t),u=0;u<t;u++)o[u]=arguments[u];return null==(e=r.get(n))?void 0:e.map(e=>e(...o)).find(e=>void 0!==e)}}}else e[n]=u}}),e),{})}}function N(e){void 0===e&&(e=[]);let t=e.map(e=>null==e?void 0:e.reference),n=e.map(e=>null==e?void 0:e.floating),o=e.map(e=>null==e?void 0:e.item),u=r.useCallback(t=>q(t,e,"reference"),t),l=r.useCallback(t=>q(t,e,"floating"),n),i=r.useCallback(t=>q(t,e,"item"),o);return r.useMemo(()=>({getReferenceProps:u,getFloatingProps:l,getItemProps:i}),[u,l,i])}let Y=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,t)=>(t?"-":"")+e.toLowerCase());function H(e,t){return"function"==typeof e?e(t):e}function V(e,t){void 0===t&&(t={});let{initial:n={opacity:0},open:o,close:u,common:l,duration:i=250}=t,c=e.placement,s=c.split("-")[0],a=r.useMemo(()=>({side:s,placement:c}),[s,c]),f="number"==typeof i,d=(f?i:i.open)||0,m=(f?i:i.close)||0,[p,g]=r.useState(()=>({...H(l,a),...H(n,a)})),{isMounted:h,status:y}=function(e,t){void 0===t&&(t={});let{open:n,elements:{floating:o}}=e,{duration:u=250}=t,l=("number"==typeof u?u:u.close)||0,[i,c]=r.useState("unmounted"),s=function(e,t){let[n,o]=r.useState(e);return e&&!n&&o(!0),r.useEffect(()=>{if(!e&&n){let e=setTimeout(()=>o(!1),t);return()=>clearTimeout(e)}},[e,n,t]),n}(n,l);return s||"close"!==i||c("unmounted"),v(()=>{if(o){if(n){c("initial");let e=requestAnimationFrame(()=>{c("open")});return()=>{cancelAnimationFrame(e)}}c("close")}},[n,o]),{isMounted:s,status:i}}(e,{duration:i}),b=x(n),E=x(o),R=x(u),w=x(l);return v(()=>{let e=H(b.current,a),t=H(R.current,a),n=H(w.current,a),r=H(E.current,a)||Object.keys(e).reduce((e,t)=>(e[t]="",e),{});if("initial"===y&&g(t=>({transitionProperty:t.transitionProperty,...n,...e})),"open"===y&&g({transitionProperty:Object.keys(r).map(Y).join(","),transitionDuration:d+"ms",...n,...r}),"close"===y){let r=t||e;g({transitionProperty:Object.keys(r).map(Y).join(","),transitionDuration:m+"ms",...n,...r})}},[m,R,b,E,w,d,y,a]),{isMounted:h,styles:p}}},17268:function(e,t,n){if(n.d(t,{AW:()=>o,G6:()=>s,MM:()=>d,Me:()=>m,Pe:()=>p,U9:()=>g,V5:()=>f,cr:()=>c,ex:()=>v,j7:()=>y,r3:()=>u}),!/^(1588|1691|2536|4457)$/.test(n.j))var r=n(31720);function o(e){let t=e.activeElement;for(;(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function u(e,t){if(!e||!t)return!1;let n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&(0,r.Zq)(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function l(){let e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function i(){let e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(e=>{let{brand:t,version:n}=e;return t+"/"+n}).join(" "):navigator.userAgent}function c(e){return!i().includes("jsdom/")&&(!a()&&0===e.width&&0===e.height||a()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function s(){return/apple/i.test(navigator.vendor)}function a(){let e=/android/i;return e.test(l())||e.test(i())}function f(){return l().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function d(e){return"nativeEvent"in e}function v(e){return e.matches("html,body")}function m(e){return(null==e?void 0:e.ownerDocument)||document}function p(e,t){return null!=t&&("composedPath"in e?e.composedPath().includes(t):null!=e.target&&t.contains(e.target))}function g(e){return"composedPath"in e?e.composedPath()[0]:e.target}let h=/^(1612|4716|5288)$/.test(n.j)?"input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])":null;function y(e){return(0,r.Re)(e)&&e.matches(h)}}}]);