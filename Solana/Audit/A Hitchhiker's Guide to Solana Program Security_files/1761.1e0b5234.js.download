"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["1761"],{37358:function(e,t,n){n.d(t,{Z:()=>o});var i=n(7409),a=n(99282),r=n(16584),l=n(64515);let o=e=>(0,r.tZ)(l.l,(0,a._)((0,i._)({},e),{name:"InvertedWarningIcon",svgParams:{height:18,width:18},children:(0,r.tZ)("path",{d:"M9.00033 0.666992C4.39783 0.666992 0.666992 4.39783 0.666992 9.00033C0.666992 13.6028 4.39783 17.3337 9.00033 17.3337C13.6028 17.3337 17.3337 13.6028 17.3337 9.00033C17.3337 4.39783 13.6028 0.666992 9.00033 0.666992ZM9.00033 2.33366C12.682 2.33366 15.667 5.31866 15.667 9.00033C15.667 12.682 12.682 15.667 9.00033 15.667C5.31866 15.667 2.33366 12.682 2.33366 9.00033C2.33366 5.31866 5.31866 2.33366 9.00033 2.33366ZM8.16699 4.83366V9.83366H9.83366V4.83366H8.16699ZM8.16699 11.5003V13.167H9.83366V11.5003H8.16699Z"})}))},4564:function(e,t,n){n.d(t,{r:()=>P});var i=n(58865),a=n(16584),r=n(30396),l=n(80569),o=n.n(l),s=n(57391),d=n(95441),c=n(68833),u=n(7882),p=n(15771),h=n(19081),m=n(98248),g=n(58175),b=n(98750),_=n(82402),E=n(38841),v=n(60308),R=n(47929);let N=e=>{let{pubs:t,selected:n,setSelected:i,onRecommendationsFirstVisible:r}=e,l=e=>{let t=!1;n.includes(e)?i(n.filter(t=>t!==e)):(i([...n,e]),t=!0),(0,c.j)(c.FP.READER_ONBOARDING_RECOMMENDED_PUB_TOGGLED,{surface:"reader_onboarding",publication_id:e,added:t})};return(0,a.BX)(h.tu,{padding:8,style:{marginBottom:"20px"},children:[(0,a.tZ)(h.gq,{alignItems:"center",justifyContent:"end",children:(0,a.tZ)(g.xv.Meta,{onClick:()=>{(0,c.j)(c.FP.ALL_ONBOARDING_PUBLICATIONS_TOGGLED,{surface:"reader_onboarding",action:n.length<t.length?"select_all":"unselect_all",pubIds:t.map(e=>{let{id:t}=e;return t})}),n.length<t.length?i(t.map(e=>{let{id:t}=e;return t})):i([])},padding:4,cursor:"pointer",children:n.length<t.length?"Select all":"Unselect all"})}),(0,a.tZ)(h.tu,{divider:"detail",style:{overflow:"auto",height:"50vh",paddingBottom:20,paddingRight:8},children:t.map((e,t)=>(0,a.tZ)(I,{pub:e,index:t,selected:n.includes(e.id),toggleSelected:()=>l(e.id),onRecommendationsFirstVisible:r},e.id))})]})},I=e=>{let{pub:t,selected:n,index:i,toggleSelected:l,onRecommendationsFirstVisible:o}=e,s=(0,r.sO)(null);(0,b.UM)(s,()=>{o&&o(t,i)},{threshold:.5});let d=t.subdomain?"".concat((0,v.SVA)({subdomain:t.subdomain}),"/?utm_source=").concat(R.b3.homepageReaderOnboarding):void 0;return(0,a.BX)(h.gq,{ref:s,alignItems:"start",justifyContent:"space-between",paddingY:12,children:[(0,a.BX)(h.gq,{alignItems:"start",justifyContent:"start",gap:8,children:[(0,a.tZ)(E.jM,{logoUrl:t.imageUrl,publicationName:t.name,pub:t,href:d}),(0,a.BX)(h.tu,{justifyContent:"start",alignItems:"start",gap:4,children:[(0,a.BX)(h.tu,{alignItems:"start",justifyContent:"center",children:[(0,a.tZ)(g.xv.H4,{children:t.name}),(0,a.tZ)(g.xv.B4,{color:"pub-secondary-text",children:t.subtitle})]}),t.description&&(0,a.tZ)(g.xv.B4,{color:"pub-secondary-text",textAlign:"left",children:t.description})]})]}),(0,a.tZ)(_.X,{checked:n,onChange:l,size:"md"})]})};var Z=n(94827),B=n(76560),y=n(54093);let S={contentContainer:"contentContainer-A4QvRn"};function f(){let e=(0,i._)(["Select "," more to continue"]);return f=function(){return e},e}let A=e=>{var t,n,i,a,r;let l=[],o=new Set,s=null==e?void 0:null===(t=e.collections.find(e=>(null==e?void 0:e.title)==="\uD83D\uDC64️ For you"))||void 0===t?void 0:t.publications;if(s&&(l=s.slice(0,y.p)).forEach(e=>o.add(e.id)),l.length<y.p){let t=(null==e?void 0:null===(n=e.collections)||void 0===n?void 0:n.length)||0;if(t>=3){let t=0;for(;l.length<y.p;){let n=!1;for(let a=0;a<3;a++){let r=null==e?void 0:e.collections[a],s=null==r?void 0:null===(i=r.publications)||void 0===i?void 0:i[t];if(s&&!o.has(s.id)&&(l.push(s),n=!0,o.add(s.id),l.length>=y.p))break}if(!n)break;t++}}else{let n=0;for(;l.length<y.p;){let i=Math.floor(n/t),s=null==e?void 0:null===(a=e.collections)||void 0===a?void 0:a[n%t],d=null==s?void 0:null===(r=s.publications)||void 0===r?void 0:r[i];if(!d)break;!o.has(d.id)&&(l.push(d),o.add(d.id),n++)}}}return l},P=e=>{let{onCategoriesFinalized:t=null,setStep:n,handleError:i,pub:l=null,entry:b,user:_,setPreviousStepData:E,canBeSkipped:v=!1}=e,{iString:R,iPlural:I,iTemplate:y}=(0,d.M1)(),{getExperimentVariant:P,exposeExperiment:C}=(0,s.jc)(),O=P("web_reader_onboarding_min_3_categories");C("web_reader_onboarding_min_3_categories");let[T,D]=(0,r.eJ)([]),[U,G]=(0,r.eJ)([]),[k,x]=(0,r.eJ)(!1),[L,X]=(0,r.eJ)([]),[w,F]=(0,r.eJ)(!1),{result:j,isLoading:z}=(0,u.ib)({pathname:"/api/v1/categories/recommended",auto:!0}),{result:W,isLoading:J,refetch:M}=(0,u.ib)({pathname:"/api/v1/onboarding/recommended",auto:!1});(0,r.d4)(()=>{(0,c.j)(c.FP.READER_ONBOARDING_CATEGORIES_SCREEN_SHOWN,{entry:b,hasSelectedCategories:k})},[b,k]),(0,r.d4)(()=>{if(k&&W&&!J){let e=A(W);0===e.length&&(0,c.j)(c.FP.READER_ONBOARDING_CATEGORIES_ERROR,{entry:b,error:"No recommendations found"}),G(e),e.some(e=>737237===e.id)&&X([737237])}},[W,J,k,b]);let H=null==j?void 0:j.categories,V=async()=>{try{let e={categoryIds:JSON.stringify(T)};await M({query:e})}catch(e){i(e,{ignore:!0}),n(B.c.PROFILE);return}for(let e of((0,c.j)(c.FP.READER_ONBOARDING_CATEGORIES_FINALIZED,{entry:b,numberOfCategories:T.length}),T))(0,c.j)(c.FP.READER_ONBOARDING_CATEGORY_REQUESTED,{entry:b,categoryId:e});x(!0),null==t||t()},K=async()=>{let e=_?_.profile_set_up_at?_.has_publication?B.c.APP_UPSELL:B.c.START_WRITING:B.c.PROFILE:B.c.SIGNUP;if(L.length>0)try{F(!0),(0,c.j)(c.FP.READER_ONBOARDING_BULK_SUBSCRIBE_SELECTED_IN_UI,{entry:b,numberOfSubscriptions:L.length,recommendationsFrom:"model"}),_?(await o().post("/api/v1/bulk_signup").send({publications:L,source:"reader2-onboarding-modal"}),(0,c.j)(c.FP.READER_ONBOARDING_BULK_SUBSCRIBED,{entry:b,numberOfSubscriptions:L.length,recommendationsFrom:"model"})):E(B.c.CATEGORIES,{publications:L,selectedCategoryIds:T}),n(e)}catch(e){(0,c.j)(c.FP.READER_ONBOARDING_CATEGORIES_ERROR,{entry:b,error:e}),i(e,{ignore:!1})}else _?(0,c.j)(c.FP.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:b,recommendationsFrom:"model"}):E(B.c.CATEGORIES,{publications:[],selectedCategoryIds:T}),n(e)},q="treatment"===O&&T.length<3;return k||0!==U.length?(0,a.BX)(h.tu,{children:[(0,a.BX)(h.tu,{children:[(0,a.tZ)(g.xv.H2,{translated:!0,children:"Creators you may like"}),(0,a.tZ)(g.xv.B2,{color:"pub-secondary-text",translated:!0,children:"We found some writers based on your interests."})]}),J?(0,a.tZ)(m.$j,{}):(0,a.tZ)(N,{pubs:U,selected:L,setSelected:X,onRecommendationsFirstVisible:(e,t)=>{(0,c.j)(c.FP.READER_ONBOARDING_PUB_RECOMMENDED,{entry:b,publication_id:e.id,suggestion_rank:t,recommendationFrom:"model"})}}),(0,a.BX)(h.tu,{children:[v&&(0,a.tZ)(p.zx,{className:"primary",onClick:()=>{(0,c.j)(c.FP.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:b,recommendationsFrom:"model"}),n(B.c.APP_UPSELL)},disabled:w,children:R("Skip for now")}),(0,a.BX)(p.zx,{className:"primary",onClick:K,disabled:w,children:[L.length>0&&I("Subscribe and continue","Subscribe to %1 and continue",L.length),0===L.length&&R("Continue without subscribing")]})]})]}):(0,a.BX)(h.tu,{className:"categories-step",gap:2,children:[(0,a.BX)(h.tu,{children:[l?(0,a.BX)(h.tu,{children:[(0,a.tZ)(g.xv.H3,{translated:!0,children:"You're subscribed!"}),(0,a.tZ)(g.xv.B2,{color:"pub-secondary-text",translated:!0,children:"Now dive into your interests"})]}):(0,a.tZ)(g.xv.H3,{translated:!0,children:"Dive into your interests"}),(0,a.tZ)(g.xv.B2,{color:"pub-secondary-text",translated:!0,children:"We'll recommend top publications based on the topics you select."})]}),z?(0,a.tZ)(m.$j,{}):H?(0,a.tZ)(h.tu,{className:S.contentContainer,children:(0,a.tZ)(Z.Rj,{hasFeatured:!1,categories:H,categoryIds:T,onCategoryClicked:e=>{let{categoryId:t}=e;if(T.includes(t)){var n;let e=null==H?void 0:null===(n=H.find(e=>(null==e?void 0:e.id)===t))||void 0===n?void 0:n.subcategories;D(T.filter(n=>n!==t&&!(null==e?void 0:e.some(e=>e.id===n))))}else D([...T,t])},ranking:"all",defaultExpanded:!0})}):(0,a.tZ)(h.tu,{className:S.contentContainer,children:(0,a.tZ)(g.xv.B2,{translated:!0,children:"Something went wrong."})}),(0,a.tZ)(p.zx,{className:"primary",onClick:V,disabled:q,children:"treatment"!==O?R("Continue"):T.length<3?y(f(),3-T.length):R("Continue")})]})}},341:function(e,t,n){n.d(t,{Z:()=>h});var i=n(16584),a=n(30396),r=n(83034),l=n(57391),o=n(68833),s=n(15771),d=n(19081),c=n(58175),u=n(81821),p=n(47929);function h(e){let{onComplete:t}=e,{getExperimentVariant:n}=(0,l.jc)();(0,a.d4)(()=>(0,o.j)(o.FP.READER_ONBOARDING_APP_UPSELL_SHOWN),[]);let h=(0,u.tq)()&&"treatment_no_skip"===n("reader_onboarding_app_first");return(0,i.BX)(d.tu,{paddingTop:24,gap:12,children:[(0,i.tZ)(c.xv.H1,{weight:"heavy",children:"Download the Substack app"}),(0,i.tZ)(c.xv.B3,{children:"Get the best reading experience on Android and iOS."}),(0,i.tZ)(r.AppInstallContent,{utm_campaign:p.VX.readerOnboarding,utm_source:p.b3.substack}),!h&&(0,i.tZ)("div",{className:"modal-ctas",children:(0,i.tZ)(s.zx,{priority:"primary",onClick:t,children:"Continue"})})]})}},57601:function(e,t,n){n.d(t,{Z:()=>N});var i=n(16584),a=n(30396),r=n(94184),l=n.n(r),o=n(23279),s=n.n(o),d=n(80569),c=n.n(d),u=n(29493),p=n(37358),h=n(51214),m=n(68833),g=n(15771),b=n(19081),_=n(58175),E=n(76560),v=n(84864);let R={right:"right-XckP6Z",liveUpdatingInput:"liveUpdatingInput-AypZsP",invalid:"invalid-mVGeLg",narrower:"narrower-nMJULR",autoMargins:"autoMargins-UJ_Q1X",mobileAwareWidth:"mobileAwareWidth-lMCXnu",borderedBox:"borderedBox-PucNvX",errorText:"errorText-XpsJyQ",aTag:"aTag-yo_zoZ"},N=e=>{let{user:t,setStep:n,entry:r,setPreviousStepData:o}=e,d=(0,a.sO)(null),N=(0,a.sO)(null),[I,Z]=(0,a.eJ)(""),[B,y]=(0,a.eJ)([]),[S,f]=(0,a.eJ)(!1),[A,P]=(0,a.eJ)(!1),[C,O]=(0,a.eJ)(!1);(0,a.d4)(()=>{let e=async()=>{try{let e=await c().get("/api/v1/publication/suggestion");e.body.subdomain&&(f(!0),Z(e.body.subdomain))}catch(e){console.error("Failed to get subdomain suggestion:",e)}};A||(P(!0),(0,m.j)(m.FP.READER_ONBOARDING_CREATE_PUBLICATION_STEP_STARTED,{entry:r}),e(),P(!1))},[A,P,r]);let T=s()(e=>{D(e)},500),D=async e=>{let t=e.target.value;if(Z(t),0===t.length){y([]);return}try{(await c().get("/api/v1/check_subdomain",{subdomain:t})).body.available?(f(!0),y([])):(f(!1),y([{msg:"This URL is taken. Try another."}]))}catch(t){var n,i;let e=[];null===(i=t.response.body)||void 0===i||null===(n=i.errors)||void 0===n||n.forEach(n=>{(!(t.response.body.errors.length>1)||"Please enter a valid web URL (letters and numbers only)"!==n.msg)&&e.push(n)}),f(!1),y(e)}},U=async()=>{var e,i,a,l,s;try{let a=(await c().post("/api/v1/publication").send({name:"".concat((0,v.guessFirstName)(null!==(i=null==t?void 0:t.name)&&void 0!==i?i:null)||"My"," Publication"),subdomain:I,hero_text:"Welcome to my publication",tos:!0,captcha_response:C&&(null==N?void 0:null===(e=N.current)||void 0===e?void 0:e.getResponse())})).body;o(E.c.CREATE_PUBLICATION,{createdPub:a}),n(E.c.CREATE_PUBLICATION_SUCCESS)}catch(t){if((0,m.j)(m.FP.READER_ONBOARDING_CREATE_PUBLICATION_STEP_ERROR,{entry:r,message:t.toString()}),401===t.response.statusCode){O(!0),f(!1),y([]);return}let e=[];null===(l=t.response.body)||void 0===l||null===(a=l.errors)||void 0===a||a.forEach(n=>{(!(t.response.body.errors.length>1)||"Please enter a valid web URL (letters and numbers only)"!==n.msg)&&e.push(n)}),(null===(s=t.response.body)||void 0===s?void 0:s.error)&&e.push({msg:t.response.body.error}),f(!1),y(e)}};return(0,i.BX)(b.tu,{gap:32,paddingTop:48,className:R.mobileAwareWidth,children:[(0,i.tZ)(_.xv.H1,{children:"Create your publication"}),(0,i.BX)(b.tu,{className:R.borderedBox,gap:56,paddingTop:56,paddingBottom:32,paddingX:{mobile:12,desktop:48},radius:"md",children:[(0,i.BX)(b.tu,{gap:16,children:[(0,i.tZ)(_.xv.B3,{align:"left",weight:"bold",children:"Publication URL"}),(0,i.BX)(b.gq,{gap:12,alignItems:"center",children:[(0,i.tZ)("input",{ref:d,type:"text",name:"subdomain",id:"subdomain",onInput:e=>{T(e)},value:I,className:l()(R.liveUpdatingInput,{["".concat(R.invalid)]:B.length})}),(0,i.tZ)(_.xv.B3,{children:".substack.com"}),(0,i.tZ)(b.hs,{className:R.right,children:S&&!B.length?(0,i.tZ)(h.Z,{isStatic:!0,height:18,fill:"#4c3",stroke:"#4c3"}):(0,i.tZ)(p.Z,{height:16,width:16,fill:"#D72B2B",stroke:"#D72B2B",strokeWidth:0})})]}),C&&(0,i.tZ)(u.Z,{ref:N}),(B.length>0||C)&&(0,i.BX)(b.tu,{gap:8,children:[B.map(e=>(0,i.tZ)(_.xv.B4,{className:R.errorText,align:"left",children:e.msg})),C&&(0,i.tZ)(_.xv.B4,{className:R.errorText,align:"left",children:"Please complete the captcha to continue"})]})]}),(0,i.tZ)(b.tu,{gap:24,children:(0,i.tZ)(g.zx,{size:"lg",onClick:U,disabled:B.length>0,children:"Continue"})})]}),(0,i.tZ)(b.hs,{className:R.autoMargins,alignItems:"center",children:(0,i.BX)(_.xv.B4,{color:"secondary",className:R.narrower,children:["By signing up, you agree to"," ",(0,i.tZ)("a",{className:R.aTag,href:"https://substack.com/pa",target:"_blank",rel:"noopener",children:"our publisher agreement"}),","," ",(0,i.tZ)("a",{className:R.aTag,href:"https://substack.com/ccpa#personal-data-collected",target:"_blank",rel:"noopener",children:"information collection notice"}),", and"," ",(0,i.tZ)("a",{className:R.aTag,href:"https://substack.com/privacy",target:"_blank",rel:"noopener",children:"privacy policy"})]})})]})}},64799:function(e,t,n){n.d(t,{Z:()=>u});var i=n(16584),a=n(30396),r=n(68833),l=n(15771),o=n(19081),s=n(58175),d=n(76560),c=n(60308);let u=e=>{let{setStep:t,entry:n,previousStepData:u}=e;return(0,a.d4)(()=>{(0,r.j)(r.FP.READER_ONBOARDING_CREATE_PUBLICATION_SUCCESS_STEP_STARTED,{entry:n})}),(0,i.BX)(o.tu,{gap:48,paddingBottom:120,alignItems:"center",children:[(0,i.tZ)("img",{className:"image-OdneRK",src:(0,c.zF4)("/img/reader_onboarding/car.png",264)}),(0,i.BX)(o.tu,{gap:4,children:[(0,i.tZ)(s.xv.H1,{children:"Success!"}),(0,i.tZ)(s.xv.B3,{children:"You're all set! Head over to your dashboard and tell the world about your Susbtack"})]}),(0,i.BX)(o.tu,{className:"buttonGroup-HpHxnd",gap:4,children:[(0,i.tZ)(l.zx,{size:"lg",onClick:()=>{window.location.href=(0,c.QK7)(u[d.c.CREATE_PUBLICATION].createdPub,{addBase:!0})},children:"Visit writer dashboard"}),(0,i.tZ)(l.zx,{size:"lg",priority:"secondary",onClick:()=>{(0,r.j)(r.FP.READER_ONBOARDING_CREATE_PUBLICATION_SUCCESS_STEP_SKIPPED,{entry:n}),t(d.c.APP_UPSELL)},children:"Visit later"})]})]})}},14861:function(e,t,n){n.d(t,{Z:()=>l});var i=n(16584),a=n(55438),r=n(15771);let l=e=>{let{close:t}=e;return(0,i.BX)("div",{className:"welcome-step",children:[(0,i.BX)("div",{className:"headings",children:[(0,i.tZ)(a.Z,{className:"substack",width:72,height:72}),(0,i.tZ)("h3",{children:"Something went wrong"}),(0,i.tZ)("p",{children:"We're sorry for the inconvenience."})]}),(0,i.tZ)("div",{className:"spacer"}),(0,i.tZ)("div",{className:"spacer"}),(0,i.tZ)("div",{className:"modal-ctas",children:(0,i.tZ)(r.zx,{priority:"secondary",onClick:t,children:"Close"})})]})}},45930:function(e,t,n){n.d(t,{Z:()=>b});var i=n(7409),a=n(99282),r=n(16584),l=n(30396),o=n(94184),s=n.n(o),d=n(80569),c=n.n(d),u=n(42493),p=n(60807),h=n(68833),m=n(48980),g=n(76560);let b=e=>{let{setStep:t,handleError:n,user:o,entry:d,followUserIds:b,redirectAfterProfile:_=!1,barebones:E=!1}=e,[v,R]=(0,l.eJ)(null),[N,I]=(0,l.eJ)(!1),Z=o?o.id:null,{setUser:B}=(0,p.SE)();(0,l.d4)(()=>{(async()=>{if(null==b?void 0:b.length)try{await (0,m.rd)("/api/v1/feed/bulk-follow",{method:"POST",json:{surface:"post-follow-referrer-prompt",userIds:b}})}catch(e){console.error("could not bulk-follow",e)}})()},[b]),(0,l.d4)(()=>{(0,h.j)(h.FP.READER_ONBOARDING_PROFILE_SETUP_STARTED,{entry:d});let e=async()=>{try{var e;let t=(await c().get("/api/v1/user/".concat(Z,"/profile/edit"))).body;t&&!t.profile_set_up_at&&(null===(e=t.subscriptions)||void 0===e?void 0:e.length)>0&&(t.subscriptions=t.subscriptions.map(e=>(0,a._)((0,i._)({},e),{visibility:"public"}))),R(t)}catch(e){n(e,{ignore:!0}),t(g.c.APP_UPSELL)}};Z&&e()},[n,t,Z,d]);let y=!!(null==v?void 0:v.profile_set_up_at);return(0,r.BX)(r.HY,{children:[(0,r.BX)("div",{className:s()("profile-step",{hidden:!N}),children:[(0,r.tZ)("h3",{children:"Subscriptions displayed on profile"}),(0,r.tZ)("p",{children:"Subscriptions appear on your profile by default, but you can choose to hide some or all of them"}),(0,r.tZ)(u.FQ,{profile:v,onFinalizeVisibility:()=>I(!1),onSetVisibility:e=>{if(!v){console.warn("No profile, cannot set visibility");return}R((0,a._)((0,i._)({},v),{subscriptions:[...v.subscriptions.map(t=>{let n=e[t.publication.id];return n?(0,a._)((0,i._)({},t),{visibility:n}):t})]}))},source:"homepage-reader-onboarding"})]}),(0,r.BX)("div",{className:s()("profile-step",{hidden:N}),children:[(0,r.tZ)("h3",{children:"Tell us about yourself"}),(0,r.tZ)("p",{children:"Add your name, a profile picture, and a bit more about who you are."}),(0,r.tZ)(u._0,{pageTitle:"",user:o,freeSignup:!0,freeSignupEmail:null,needsPhoto:!1,optionalPhoto:!0,isPostInvite:!1,primaryEligiblePublications:[],onSuccess:e=>{let n=null==e?void 0:e.body;n&&B(n),_?t(g.c.EXIT):t(g.c.APP_UPSELL)},onEditReadVisibility:()=>{I(!0),(0,h.j)(h.FP.READER_ONBOARDING_PROFILE_SETUP_SKIPPED,{entry:d})},numVisibleSubscriptions:(null==v?void 0:v.subscriptions.filter(e=>{let{visibility:t}=e;return"public"===t}).length)||0,numSubscriptions:(null==v?void 0:v.subscriptions.length)||0,complete:!0,text:"Continue",profileExists:y,prepareData:e=>(e.reads_visibility=(null==v?void 0:v.subscriptions.map(e=>{let{id:t,visibility:n}=e;return{id:t,visibility:n}}))||[],e),barebones:E})]})]})}},76971:function(e,t,n){n.d(t,{Z:()=>h});var i=n(16584),a=n(20253),r=n(35047),l=n(35702),o=n(68833),s=n(65205),d=n(15771),c=n(38841),u=n(76560),p=n(60308);let h=e=>{let{pub:t,user:n,setStep:h,entry:m}=e;return(0,i.tZ)("div",{className:"pub-landing-step",children:(0,i.BX)(a.ZP,{method:"post",action:"/api/v1/reader/signup/pub",loading:!1,autoLock:!0,onSuccess:e=>{(0,o.j)(o.FP.READER_ONBOARDING_PUB_LANDING_SIGNUP_SUCCEEDED,{entry:m}),n||(0,l.a)({user:e.body.user}),h(u.c.CATEGORIES)},children:[(0,i.BX)("div",{className:"headings",children:[(0,i.tZ)(c.wk,{pub:t,size:84}),(0,i.tZ)("h3",{className:"publication-title",children:t.name}),(0,i.tZ)("p",{className:"publication-description",children:t.editorial_bio||t.hero_text}),(0,i.tZ)("p",{className:"publication-details",children:(0,r.sv)(t)})]}),(0,i.tZ)("input",{type:"hidden",name:"email",value:null==n?void 0:n.email}),(0,i.tZ)("input",{type:"hidden",name:"source",value:"".concat(m,"-reader-onboarding")}),(0,i.tZ)("input",{type:"hidden",name:"publication_id",value:t.id}),(0,i.tZ)("input",{type:"hidden",name:"noWelcomeEmail",value:"true"}),(0,i.tZ)("input",{type:"hidden",name:"first_url",value:s.xY}),(0,i.tZ)("input",{type:"hidden",name:"first_referrer",value:s.ip}),(0,i.tZ)("input",{type:"hidden",name:"first_session_url",value:s.ac}),(0,i.tZ)("input",{type:"hidden",name:"first_session_referrer",value:s.qR}),(0,i.tZ)("input",{type:"hidden",name:"current_url",value:s.UE}),(0,i.tZ)("input",{type:"hidden",name:"current_referrer",value:s.xU}),(0,i.BX)("div",{className:"modal-ctas",children:[(0,i.tZ)("a",{className:"button let-me-read",href:(0,p.n1t)((0,p.SVA)(t),{no_cover:!0,utm_source:"".concat(m,"-reader-onboarding")}),onClick:()=>{(0,o.j)(o.FP.READER_ONBOARDING_PUB_LANDING_LET_ME_READ_CLICKED,{entry:m}),(0,o.x6)(t,m)},children:"Let me read it first"}),(0,i.tZ)(d.zx,{priority:"primary",onClick:e=>{(0,o.j)(o.FP.READER_ONBOARDING_PUB_LANDING_SUBSCRIBE_CLICKED,{entry:m}),n||(e.preventDefault(),h(u.c.PUB_SIGNUP))},type:"submit",children:"Subscribe"})]})]})})}},48146:function(e,t,n){n.d(t,{Z:()=>E});var i=n(16584),a=n(30396),r=n(20253),l=n(35047),o=n(60807),s=n(35702),d=n(68833),c=n(65205),u=n(15771),p=n(19081),h=n(38841),m=n(58175),g=n(57641),b=n(76560),_=n(60308);let E=e=>{let{pub:t,user:n,profile:E,setStep:v,entry:R}=e,{setUser:N}=(0,o.SE)(),[I,Z]=(0,a.eJ)(""),[B,y]=(0,a.eJ)(!1),[S,f]=(0,a.eJ)(!1);return(0,i.BX)("div",{className:"pub-signup-step",children:[(0,i.BX)("div",{className:"headings",children:[(0,i.tZ)(h.wk,{pub:t,size:84,className:"pub-icon"}),(0,i.tZ)("h3",{className:"publication-title",children:E?"Create an account to start reading":"Subscribe to ".concat(t.name)}),(0,i.tZ)("p",{className:"publication-description",children:E?"Create a Substack account to subscribe to ".concat(E.name):t.editorial_bio||t.hero_text}),(0,i.tZ)("p",{className:"publication-details",children:E?"Author of ".concat(t.name):(0,l.sv)(t)})]}),(0,i.BX)(r.ZP,{method:"post",action:"/api/v1/reader/signup/pub",loading:!1,autoLock:!0,onSuccess:e=>{n||((0,s.a)({user:e.body.user}),N(e.body.user)),e.body.requires_confirmation?((0,d.j)(d.FP.READER_ONBOARDING_PUB_SIGNUP_FAILED,{reason:"user_exists",entry:R}),y(!0)):((0,d.j)(d.FP.READER_ONBOARDING_PUB_SIGNUP_SUCCEEDED,{entry:R}),(0,s.a)({user:e.body.user}),v(b.c.CATEGORIES))},children:[(0,i.BX)("p",{children:[(0,i.tZ)("label",{for:"email",children:"Email"}),(0,i.tZ)("input",{type:"email",name:"email","aria-label":"Email",value:I,tabIndex:0,onInput:e=>{Z(e.target.value)},onChange:e=>{Z(e.target.value)}}),(0,i.tZ)("input",{type:"hidden",name:"source",value:"".concat(R,"-reader-onboarding")}),(0,i.tZ)("input",{type:"hidden",name:"publication_id",value:t.id}),(0,i.tZ)("input",{type:"hidden",name:"noWelcomeEmail",value:"true"}),(0,i.tZ)("input",{type:"hidden",name:"first_url",value:c.xY}),(0,i.tZ)("input",{type:"hidden",name:"first_referrer",value:c.ip}),(0,i.tZ)("input",{type:"hidden",name:"first_session_url",value:c.ac}),(0,i.tZ)("input",{type:"hidden",name:"first_session_referrer",value:c.qR}),(0,i.tZ)("input",{type:"hidden",name:"current_url",value:c.UE}),(0,i.tZ)("input",{type:"hidden",name:"current_referrer",value:c.xU}),B&&(0,i.BX)("div",{className:"error",children:["Additional confirmation is required to complete your signup. Please"," ",(0,i.tZ)("a",{href:(0,_.uXE)({for_pub:t.subdomain,email:I}),children:"login"})," ","or click the confirmation link in your email."]})]}),(0,i.tZ)("div",{id:"error-container"}),(0,i.BX)(p.tu,{alignItems:"center",justifyContent:"space-between",paddingTop:64,gap:4,children:[(0,i.tZ)(g.O,{checked:S,onCheckboxChange:e=>{f(e)}}),(0,i.tZ)(u.zx,{type:"submit",priority:"primary",disabled:!S||!I,style:{marginTop:12,marginBottom:4},children:"Subscribe and continue"}),(0,i.BX)(m.xv.B5,{weight:"light",color:"secondary",children:["Already have a Substack account?"," ",(0,i.tZ)(m.xv.B5,{as:"a",weight:"light",color:"secondary",href:(0,_.uXE)({for_pub:t.subdomain}),target:"_blank",style:{textDecoration:"underline"},children:"Sign in"})]})]})]})]})}},48450:function(e,t,n){n.d(t,{Z:()=>N});var i=n(16584),a=n(30396),r=n(94184),l=n.n(r),o=n(80569),s=n.n(o),d=n(20253),c=n(55438),u=n(60807),p=n(35702),h=n(68833),m=n(82402),g=n(19081),b=n(58175),_=n(91021),E=n(76560),v=n(60308),R=n(6911);function N(e){var t,n,r,o,c;let{user:N,setStep:Z,entry:B,previousStepData:y,prefilledEmail:S,skipCategories:f=!1}=e,{setUser:A}=(0,u.SE)(),[P,C]=(0,a.eJ)(null!=S?S:""),[O,T]=(0,a.eJ)(!1),[D,U]=(0,a.eJ)(!1);(0,a.d4)(()=>{N&&!y[E.c.CATEGORIES]&&Z(E.c.CATEGORIES)},[N,Z,y]);let[G,k]=(0,a.eJ)(!1),x=async e=>{if(e.body.userExists){T(!0);return}if(e.body.emailConfirmationRequired){U(!0);return}if((0,h.j)(h.FP.READER_ONBOARDING_SIGNUP_SUCCEEDED,{entry:B}),N||((0,p.a)({user:e.body.user}),A(e.body.user)),y[E.c.CATEGORIES]){var t;e.body.userExists?Z(E.c.APP_UPSELL):Z(E.c.PROFILE);let n=null===(t=y[E.c.CATEGORIES])||void 0===t?void 0:t.publications;(null==n?void 0:n.length)?(await s().post("/api/v1/bulk_signup").send({publications:n,source:"".concat(B,"-reader-onboarding"),email:P}),(0,h.j)(h.FP.READER_ONBOARDING_BULK_SUBSCRIBED,{entry:B,numberOfSubscriptions:n.length,recommendationsFrom:"categories"})):(0,h.j)(h.FP.READER_ONBOARDING_BULK_SUBSCRIBE_SKIPPED,{entry:B,recommendationsFrom:"categories"})}else f?Z(E.c.PROFILE):Z(E.c.CATEGORIES)};if(D)return(0,i.BX)(g.tu,{className:"signup-step",children:[(0,i.tZ)(I,{title:"Verify your email address"}),(0,i.BX)(b.xv.B3,{children:["We just sent an email to ",(0,i.tZ)("strong",{children:P}),". Please check your inbox before continuing."]}),(0,i.tZ)(g.hs,{flex:"grow"}),(0,i.tZ)("div",{className:"modal-ctas",children:(0,i.tZ)(_.A,{onClick:e=>{e.preventDefault(),U(!1)},children:(0,i.tZ)(b.xv,{as:"span",decoration:"hover-underline",children:"Or edit your email address or try again."})})})]});let L=null!==(o=null===(t=y[E.c.CATEGORIES])||void 0===t?void 0:t.publications)&&void 0!==o?o:[],X=null!==(c=null===(n=y[E.c.CATEGORIES])||void 0===n?void 0:n.selectedCategoryIds)&&void 0!==c?c:[];return(0,i.BX)("div",{className:"signup-step",children:[(0,i.tZ)(I,{title:"Sign up to subscribe",subtitle:"Substack is the home for great writing."}),(0,i.BX)(d.ZP,{method:"post",action:"/api/v1/reader/signup/just_email",loading:!1,autoLock:!0,onSuccess:x,children:[(0,i.tZ)("input",{type:"hidden",name:"publicationIds",value:L.join(",")}),(0,i.tZ)("input",{type:"hidden",name:"selectedCategoryIds",value:X.join(",")}),(0,i.BX)("p",{children:[(0,i.tZ)("label",{for:"email",children:"Your email address"}),(0,i.tZ)("input",{type:"email",name:"email","aria-label":"Email",value:P,tabIndex:0,onInput:e=>{C(e.target.value)},onChange:e=>{C(e.target.value)}}),O&&(0,i.BX)("div",{className:"error",children:["This email is already registered with Substack. Please"," ",(0,i.tZ)("a",{native:!0,href:(0,v.Zdb)(),children:"sign in to continue"}),"."]}),D&&(0,i.tZ)("div",{className:"error",children:"We have sent you a confirmation email. Please check your inbox before continuing."})]}),(0,i.tZ)("div",{id:"error-container"}),(0,i.BX)(g.tu,{gap:16,children:[(0,i.BX)(g.gq,{as:"label",gap:8,className:"checkboxLabel-gCoESV",children:[(0,i.tZ)(m.X,{checked:G,onChange:e=>{k(e)},size:"sm"}),(0,i.tZ)(g.tu,{flex:"grow",children:(0,i.BX)(b.xv.B3,{as:"span",textAlign:"left",children:["I agree to Substack’s"," ",(0,i.tZ)("a",{href:(0,R._Q)(),target:"_blank",children:"Terms of Use"})," ","and acknowledge its"," ",(0,i.tZ)("a",{href:(0,R.WF)(),target:"_blank",children:"Information Collection Notice"})," ","and"," ",(0,i.tZ)("a",{href:(0,R.Zz)(),target:"_blank",children:"Privacy Policy"})]})})]}),(0,i.tZ)("button",{className:l()("button primary",{disabled:!G},"noMargin-hNmNqv"),type:"submit",disabled:!G,children:y[E.c.CATEGORIES]&&(null===(r=y[E.c.CATEGORIES])||void 0===r?void 0:r.publications.length)?"Subscribe and join Substack":"Get started"}),(0,i.BX)(b.xv.B3,{children:["Already have a Substack account?"," ",(0,i.tZ)("a",{native:!0,href:(0,v.Zdb)(),children:"Sign in"})]})]})]})]})}function I(e){let{title:t,subtitle:n}=e;return(0,i.BX)("div",{className:"headings",children:[(0,i.tZ)(c.Z,{className:"substack",width:68,height:68}),(0,i.tZ)("h3",{children:t}),n&&(0,i.tZ)("p",{children:n})]})}},7759:function(e,t,n){n.d(t,{Z:()=>u});var i=n(16584),a=n(30396),r=n(68833),l=n(15771),o=n(19081),s=n(58175),d=n(76560),c=n(60308);let u=e=>{let{setStep:t,entry:n}=e;return(0,a.d4)(()=>{(0,r.j)(r.FP.READER_ONBOARDING_START_WRITING_STEP_STARTED,{entry:n})}),(0,i.BX)(o.tu,{alignItems:"center",gap:48,paddingBottom:120,children:[(0,i.tZ)("img",{className:"image-eElYa7",src:(0,c.zF4)("/img/reader_onboarding/jobpage_penholder.png",150)}),(0,i.BX)(o.tu,{gap:4,children:[(0,i.tZ)(s.xv.H1,{children:"Want to start writing on Substack?"}),(0,i.tZ)(s.xv.B3,{color:"secondary",children:"Write posts, grow your audience, and make money on Substack"})]}),(0,i.BX)(o.tu,{className:"buttonGroup-BqeO0U",gap:4,children:[(0,i.tZ)(l.zx,{size:"lg",onClick:()=>t(d.c.CREATE_PUBLICATION),children:"Create my publication"}),(0,i.tZ)(l.zx,{size:"lg",priority:"secondary",onClick:()=>{(0,r.j)(r.FP.READER_ONBOARDING_START_WRITING_STEP_SKIPPED,{entry:n}),t(d.c.APP_UPSELL)},children:"Skip for now"})]})]})}},29191:function(e,t,n){n.d(t,{Z:()=>s});var i=n(16584),a=n(55438),r=n(68833),l=n(15771),o=n(76560);let s=e=>{let{pub:t=null,profile:n,entry:s,setStep:d}=e;return(0,i.BX)("div",{className:"welcome-step",children:[(0,i.BX)("div",{className:"headings",children:[(0,i.tZ)(a.Z,{className:"substack",width:68,height:68}),(0,i.tZ)("h3",{children:"You're all set up"}),(0,i.BX)("p",{children:["You will now start receiving new posts from"," ",n?(0,i.BX)(i.HY,{children:[(0,i.tZ)("b",{children:n.name})," and the other writers"]}):t?(0,i.BX)(i.HY,{children:[(0,i.tZ)("b",{children:t.name})," and the other publications"]}):"the publications"," ","you subscribed to. Happy reading!"]})]}),(0,i.tZ)("div",{className:"spacer"}),(0,i.tZ)("div",{className:"spacer"}),(0,i.tZ)("div",{className:"modal-ctas",children:(0,i.BX)(l.zx,{priority:"primary",onClick:()=>{(0,r.j)(r.FP.READER_ONBOARDING_START_READING_CLICKED,{entry:s}),d(o.c.EXIT)},children:["Start reading",n?" ".concat(n.name):t?" ".concat(t.name):""]})})]})}},76560:function(e,t,n){n.d(t,{c:()=>i});let i={SIGNUP:"SIGNUP",PUB_LANDING:"PUB_LANDING",PUB_SIGNUP:"PUB_SIGNUP",CATEGORIES:"CATEGORIES",CATEGORIES_SUGGESTIONS:"CATEGORIES_SUGGESTIONS",PROFILE:"PROFILE",START_WRITING:"START_WRITING",CREATE_PUBLICATION:"CREATE_PUBLICATION",CREATE_PUBLICATION_SUCCESS:"CREATE_PUBLICATION_SUCCESS",WELCOME:"WELCOME",ERROR:"ERROR",EXIT:"EXIT",APP_UPSELL:"APP_UPSELL"}},54093:function(e,t,n){n.d(t,{p:()=>i});let i=7}}]);