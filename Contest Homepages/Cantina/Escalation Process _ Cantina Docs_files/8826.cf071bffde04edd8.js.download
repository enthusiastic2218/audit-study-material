try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="dc49bfb2-01f9-43f2-8ffc-4b5f4813deed",e._sentryDebugIdIdentifier="sentry-dbid-dc49bfb2-01f9-43f2-8ffc-4b5f4813deed")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8826],{38826:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M,useStepOverlayUpdate:()=>P});var r=l(6029),a=l(80411),o=l(49864),n=l(86747),i=l(69702),s=l(67549),d=l(71024),u=l.n(d),c=l(51066),g=l(55729),p=l(15522),h=l(13448),m=l(41322),b=l(10471),x=l(42063),v=l(6625),f=l(15631),y=l(82092),w=l(4782),C=l(96233),j=l(2631),O=l(29911),T=l(8393),N=l(16527);function k(e){let{display:t=!0,fadeIn:l=!1,fadeOut:o=!1,duration:i=300,blur:s,className:d,children:u,...c}=e,[p,h]=(0,g.useState)(!t),[m,b]=(0,g.useState)(!l);return(0,g.useEffect)(()=>{if(b(t),o&&!t){let e=setTimeout(()=>{h(!0)},i);return()=>clearTimeout(e)}h(!t)},[t,o,i]),(0,r.jsx)("div",{className:(0,a.cn)("transition-all backdrop-blur-fix transform-gpu",{["duration-".concat(i)]:l||o,"invisible opacity-0":p,"backdrop-blur-sm":s===n.OverlayBlur.Small,"backdrop-blur-md":s===n.OverlayBlur.Medium},m?"opacity-100 visible":"opacity-0 invisible",d),...c,children:u})}var A=l(36779),S=l(32550);let I=u()(()=>Promise.resolve().then(l.bind(l,10885)),{loadableGenerated:{webpack:()=>[10885]}}),D=u()(()=>Promise.all([l.e(2944),l.e(2349),l.e(6148)]).then(l.bind(l,83767)),{loadableGenerated:{webpack:()=>[83767]}}),P=e=>{var t,l;let{step:r,updateStep:o}=e,n=(0,b.qM)(),i=(0,j.A)(),d=(0,a.isOverlayStepWithPaths)(r),u=(0,a.isOverlayStepWithoutPaths)(r),[c]=(0,s.fp)(C.F.editorViewType),p=(0,g.useCallback)(e=>((e.title!==r.title||e.subtitle!==r.subtitle)&&i.report("Overlay Text Modified",{stepId:e.id,flowId:n.id,hasUsedAI:n.hasUsedAI,view:c}),null==o?void 0:o(e)),[n.hasUsedAI,n.id,r.subtitle,r.title,i,o,c]),h=(0,w.L)(null!=(t=r.title)?t:"",(0,g.useCallback)(e=>p({...r,title:e}),[p,r]));return{title:h,subtitle:(0,w.L)(null!=(l=r.subtitle)?l:"",(0,g.useCallback)(e=>p({...r,subtitle:e}),[p,r])),buttonText:(0,w.L)(d?"":u?r.buttonText:"",(0,g.useCallback)(e=>null==o?void 0:o({...r,buttonText:e}),[o,r]))}};function M(e){var t,l;let{step:d,className:u,style:w,inEditMode:j,isActive:M,isSmallScreenOrTile:B,isOnLastStep:E,exportMode:L,previewContext:U,updateStep:W,onButtonClick:_,onOverlayUrlClick:F,navigationElementWithSound:z,enterNavigationElement:R,leaveNavigationElement:V,unifiedState:Y,readOnlyMode:G}=e,q=(0,h.A)(),K=q.getPaywallConfig(["Growth"]),{title:[X,H,J],subtitle:[Q,Z,$],buttonText:[ee,et,el]}=P({step:d,updateStep:W}),er=(0,b.qM)(),ea=(0,x._8)(),eo=(0,s.md)(C.F.stageDimensions).layout,{fontFamily:en,customValues:ei}=(0,g.useContext)(f.c),{customVariables:es}=er,ed=(0,a.isOverlayStepWithPaths)(d),eu=(0,a.isOverlayStepWithoutPaths)(d),{theme:ec,blur:eg=n.OverlayBlur.Medium}=d,ep=ed?void 0:eu?d.buttonType:void 0,eh=ed?void 0:eu?d.buttonColor:void 0,em=ed?void 0:eu?d.buttonTextColor:void 0,eb=(0,s.md)(Y.timeAtom),ex=!!eb,ev=Y.duration>0?eb/Y.duration:0,ef=ed?void 0:eu?d.actionUrl:void 0;(0,g.useEffect)(()=>{if(q.flows.mayUseChooseYourOwnAdventure&&j&&ep&&!ed&&(null==ea?void 0:ea.id)===d.id&&(null==ea?void 0:ea.type)===n.StepType.Overlay){let e=[{id:(0,O.A)(),pathType:"next_step"===ep?"step":"url",...ef?{url:ef}:{},...ee?{buttonText:ee}:{},...eh?{buttonColor:eh}:{},...em?{buttonTextColor:em}:{}}];null==W||W({...d,paths:e})}},[q.flows.mayUseChooseYourOwnAdventure,ep,ef,j,ed,ee,eh,em,W,d,null==ea?void 0:ea.id,null==ea?void 0:ea.type]);let ey=(0,v.T)(),ew=ey&&(null!=(t=er.mobileLayout)?t:"wide")==="fit",eC=q.metering.isActive,ej=ec===n.OverlayTheme.Dark,eO=eh||q.hotspotDefaults.backgroundColor||o.defaultUserPrefs.bgColor,eT=em||q.hotspotDefaults.textColor||(0,y.hB)(eO),eN=ed?j?(0,r.jsx)(D,{step:d,inEditMode:j,isSmallScreenOrTile:B,updateStep:W,readOnlyMode:G}):(0,r.jsx)(S.default,{step:d,isSmallScreenOrTile:B,onButtonClick:_,onOverlayUrlClick:F,navigationElementWithSound:z,enterNavigationElement:R,leaveNavigationElement:V,previewContext:U,isActive:M,mediaIsPlaying:ex,percentComplete:ev}):void 0,ek=j&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(A.default,{placement:"top",offset:[0,4],appendTo:()=>document.body,tippyClassName:"overflow-visible rounded-xl",wrapperClassName:"flex",render:()=>{var e;return(0,r.jsxs)("div",{className:"flex relative items-center justify-start p-1 gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center px-3 h-9 gap-1 text-xs font-medium text-gray-400 tnum select-none",children:[(0,r.jsx)("span",{className:"text-gray-500",children:null!=(e=null==ee?void 0:ee.length)?e:0}),(0,r.jsx)("span",{children:"/"}),(0,r.jsx)("span",{children:T.Ol})]}),(0,r.jsx)("div",{className:"w-px h-9 bg-gray-200"}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(N.A,{disabled:G,value:null!=eO?eO:"",label:"Button color",pickerClassName:"absolute top-[38px] left-1/2 -translate-x-1/2",onChange:e=>{null==W||W({...d,buttonColor:e,buttonTextColor:""})},containerClassName:"relative",renderLabel:e=>{let{labelRef:t,onClick:l,isPickerVisible:o}=e;return(0,r.jsx)("div",{ref:t,onClick:l,className:(0,a.cn)("flex items-center justify-center h-9 w-9 rounded-lg gap-1 bg-white hover:bg-gray-100 transition-colors cursor-pointer",{"bg-gray-100":o}),children:(0,r.jsx)("div",{className:"w-4 h-4 rounded-full border border-gray-900/[.12]",style:{backgroundColor:eO}})})}}),(0,r.jsx)("div",{className:"w-px h-6 bg-gray-100"}),(0,r.jsx)(N.A,{value:null!=eT?eT:"",label:"Text color",pickerClassName:"absolute top-[38px] left-1/2 -translate-x-1/2",onChange:e=>{null==W||W({...d,buttonTextColor:e})},containerClassName:"relative",renderLabel:e=>{let{labelRef:t,onClick:l,isPickerVisible:o}=e;return(0,r.jsx)("div",{ref:t,onClick:l,className:(0,a.cn)("flex items-center justify-center h-9 w-9 rounded-lg gap-1 bg-white hover:bg-gray-100 transition-colors cursor-pointer",{"bg-gray-100":o}),children:(0,r.jsx)("div",{className:"w-4 h-4 rounded-full border border-gray-900/[.12]",style:{backgroundColor:eT}})})}})]})]})},children:e=>{let{toggle:t}=e;return(0,r.jsx)(p.A,{className:(0,a.cn)("font-semibold outline-none bg-transparent border-0 border-transparent ring-0 p-0 resize-none select-text focus:ring-0 text-center flex [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none]",{"placeholder-[rgba(255,255,255,.3)]":eO&&eT.toLowerCase().startsWith("#fff"),"placeholder-[rgba(0,0,0,.3)]":eO&&eT.startsWith("#000"),"text-[0.875em] leading-[1.125em] py-[0.5em]":B,"text-[1em] leading-[1.125em] py-[0.75em]":!B}),style:{fontFamily:en},placeholder:"Button",value:ee,onFocus:e=>{e.target.select()},onKeyDown:e=>{"Enter"===e.code&&(e.preventDefault(),e.stopPropagation())},onChange:e=>{e.stopPropagation(),e.preventDefault();let t=e.target.value;(t.length<=T.Ol||t.length<ee.length)&&et(e)},onClick:e=>{e.stopPropagation(),t()},onBlur:()=>el(ee),maxRows:3,cols:Math.min(Math.max(5,Math.ceil(.85*((null==ee?void 0:ee.length)||4))),23)})}})}),eA=eC||!j||q.flows.mayUseChooseYourOwnAdventure?void 0:(0,r.jsx)(I,{enabled:!0,trigger:"click",media:"/images/paywall-branching.png",link:"https://app.arcade.software/share/bXyCxvVjOzOYDKg247S9",title:K.title,buttonText:K.CTA,buttonUrl:K.path,content:"With Advanced Branching you can better personalize your audiences' experience.",source:"Overlay",placement:"top",children:(0,r.jsx)("button",{className:(0,a.cn)("flex-1 font-semibold relative flex items-center justify-center rounded-lg transition-all opacity-100","bg-transparent text-sm px-[2em]",{"bg-white/0 text-white/60 border border-white/60 border-dashed hover:border-white/90 hover:bg-white/10 hover:text-white":ec===n.OverlayTheme.Dark,"bg-gray-900/0 text-gray-900/60 border border-gray-900/30 border-dashed hover:border-gray-900/60 hover:bg-gray-900/[.04] hover:text-gray-900":ec===n.OverlayTheme.Light,"bg-white/70 text-gray-900/90 border-none shadow-menu hover:bg-gray-50 hover:text-gray-900":ec===n.OverlayTheme.Custom,grow:"center"===d.textAlign||ew||d.variant===n.OverlayVariant.Form},B?"h-[2em] text-[0.875em] leading-[1.125em] px-[0.75em] py-[0.5em]":"h-[3em] text-[1em] leading-[1.125em] px-[1.25em] py-[0.75em]"),children:(0,r.jsx)("div",{className:"flex items-center justify-center gap-[0.25em]",children:(0,r.jsx)(c.A,{className:"w-[1em] h-[1em]"})})})}),eS=(0,g.useRef)(null),eI=(0,g.useRef)(null),eD=(0,a.isOverlayStep)(d)&&d.theme===n.OverlayTheme.Custom?d.customTheme:void 0,eP=()=>ec===n.OverlayTheme.Custom&&(null==eD?void 0:eD.textColor)?{"--custom-text-color":eD.textColor,"--custom-placeholder-color":"".concat(eD.textColor,"80"),"--custom-bg-color":"".concat(eD.textColor,"1a")}:{},eM=(0,a.cn)({"text-white placeholder:text-white/50 hover:bg-white/[0.06]":ec===n.OverlayTheme.Dark,"text-gray-900 placeholder:text-gray-900/50 hover:bg-gray-900/[0.06]":ec===n.OverlayTheme.Light,"text-[color:var(--custom-text-color)] placeholder:text-[color:var(--custom-placeholder-color)] hover:bg-[color:var(--custom-bg-color)]":ec===n.OverlayTheme.Custom}),eB={opening:"origin-bottom",className:"absolute right-1.5 top-1/2 -translate-y-1/2 rounded-md opacity-0 invisible group-hover/field:opacity-100 group-hover/field:visible"};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(k,{className:"absolute inset-0",style:w,display:M,fadeOut:!j,fadeIn:!j,blur:eg,children:(0,r.jsx)(i.Overlay,{chooseYourOwnAdventureOverride:eN,isDark:ej,blur:eg,textAlign:d.textAlign,inEditMode:j,exportMode:L,className:u,title:X,isActive:M,isSmallScreenOrTile:B,fontFamily:en,subtitle:Q,buttonType:ep,actionUrl:ef,buttonBg:eO,textColor:eT,onButtonClick:_,onOverlayUrlClick:F,buttonText:ee,buttonContentOverride:ek,customVariables:es,flow:er,customValues:ei,addButtonPaywalled:eA,navigationElementWithSound:z,enterNavigationElement:R,leaveNavigationElement:V,isOnLastStep:E,titlesOnly:eo===n.ViewerLayout.MobileExpanded,customTheme:eD,mediaIsPlaying:ex,percentComplete:ev,activeStepId:d.id,showPreviewImage:d.showPreviewImage,previewImage:d.previewImage,showLogo:d.showLogo,logo:d.logo,previewImageStep:d,isMobileRecording:ey,layout:eo,editTitleInput:(0,r.jsxs)("div",{className:"flex w-full relative items-center justify-center group/field",style:eP(),children:[(0,r.jsx)(m.A,{...eB,readOnlyMode:G,onChange:J,inputRef:eS}),(0,r.jsx)(p.A,{disabled:G,ref:eS,itemType:"text",autoComplete:"off",className:(0,a.cn)("text-[1em] leading-[1.375em] select-text font-bold outline-none bg-transparent border-0 ring-0 p-0 resize-none focus:ring-0 w-full flex text-center rounded-lg transition-all",{"text-left px-2":"left"===d.textAlign,"text-right px-2":"right"===d.textAlign},eM),style:{fontFamily:en,textWrap:"balance"},placeholder:"Title",value:null!=X?X:"",onFocus:e=>e.target.select(),onChange:H,onBlur:()=>J(null!=X?X:"")})]}),editSubTitleInput:(0,r.jsxs)("div",{className:"flex w-full relative items-center justify-center group/field",style:eP(),children:[(0,r.jsx)(m.A,{...eB,readOnlyMode:G,onChange:$,inputRef:eI}),(0,r.jsx)(p.A,{disabled:G,ref:eI,itemType:"text",autoComplete:"off",className:(0,a.cn)("text-[1em] leading-[1.5em] select-text outline-none bg-transparent border-0 ring-0 placeholder-gray-200 p-0 resize-none focus:ring-0 w-full text-center rounded-lg transition-all",{"text-left px-2":"left"===d.textAlign,"text-right px-2":"right"===d.textAlign},eM),style:{fontFamily:en,textWrap:"balance"},placeholder:"Subtitle",value:Q||"",onFocus:e=>e.target.select(),onChange:Z,onBlur:()=>$(null!=Q?Q:"")})]}),variant:null!=(l=d.variant)?l:n.OverlayVariant.Buttons,embedCode:(0,a.isOverlayStepWithEmbeds)(d)?d.embedCode:""})})})}}}]);