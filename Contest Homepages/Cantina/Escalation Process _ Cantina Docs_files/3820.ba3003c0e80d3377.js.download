try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},l=(new e.Error).stack;l&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[l]="eac62922-97c5-4a0c-a9b0-67a1fa6c714d",e._sentryDebugIdIdentifier="sentry-dbid-eac62922-97c5-4a0c-a9b0-67a1fa6c714d")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3820],{51926:(e,l,n)=>{n.d(l,{A:()=>a});var o,t=n(55729);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}let a=function(e){return t.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),o||(o=t.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10.222v3.556m4.5-7.111v10.666M12 4v16m4.5-13.333v10.666m4.5-7.11v3.555",vectorEffect:"non-scaling-stroke"})))}},56300:(e,l,n)=>{n.d(l,{B:()=>o});function o(e){var l,n,o,t;let r=(null==(n=e.menu)||null==(l=n.entries)?void 0:l.filter(l=>e.steps.some(e=>e.id===l.targetId)))||[],a=(null==(t=e.menu)||null==(o=t.entries)?void 0:o.some(l=>!e.steps.some(e=>e.id===l.targetId)))||!1;return{viewerMenuEnabled:r.length>0,hasInvalidEntries:a,validEntries:r}}},63820:(e,l,n)=>{n.r(l),n.d(l,{default:()=>O});var o=n(6029),t=n(27104),r=n.n(t),a=n(80411),i=n(86747),u=n(7892),d=n(67549),s=n(51926),c=n(89361),v=n(55729),m=n(10471),f=n(72614),p=n(82092),h=n(56300),b=n(96233),g=n(27680),y=n(12271),w=n(8393),x=n(55409),j=n(12028),k=n(64601);function O(e){var l,n;let{inEditMode:t,isActive:O,isFirstStep:N,syntheticVoice:A,cameraRecording:_,cameraRecordingRef:E,countdown:C,unifiedState:I,unifiedControls:M,registerSource:W,previewContext:L}=e,B=(0,v.useRef)(null),P=(0,v.useRef)(null),R=(0,v.useRef)(null),D=(0,v.useRef)(!1),F=(0,f.lM)(),V=(0,f.JE)(),z=(0,d.md)(b.F.stageDimensions).layout!==i.ViewerLayout.Default,S=(0,d.md)(b.F.showFlowNavIndicator),U=(0,d.md)(I.sourcesAtom),q=(null==A?void 0:A.enabled)||void 0===(null==A?void 0:A.enabled)&&(null==A?void 0:A.url),T=(null==_?void 0:_.enabled)&&!q,J=!!(T&&(null==_?void 0:_.url)&&(L===g.oJ.Upload||!(null==_?void 0:_.processing))&&((null==_?void 0:_.thumbnailUrl)||(null==_?void 0:_.audioOnly))),H=T&&(null==_?void 0:_.processing),Y=U.get(q?g.W_.ActiveVoiceover:g.W_.ActiveCameraRecording),G=(0,v.useMemo)(()=>J&&!_.audioOnly?(0,a.getPlaybackId)(_.url):void 0,[J,null==_?void 0:_.url,null==_?void 0:_.audioOnly]),K=!!O&&D.current&&!!(null==Y?void 0:Y.active)&&!(null==Y?void 0:Y.inBuffer),Q=!t&&!!Y&&!K&&N&&!U.get(g.W_.ActiveVideo)&&!I.everPlayed&&!!G,X=(0,v.useCallback)(e=>{if((null==_?void 0:_.url)&&L!==g.oJ.Upload&&u.Ay.isSupported()&&!((0,p.YO)()&&(0,p.nr)())){B.current=new u.Ay({enableWorker:!(0,p.nr)(),lowLatencyMode:!0,backBufferLength:10,startLevel:4,maxBufferLength:10,maxMaxBufferLength:10,maxBufferHole:w.bU,stretchShortVideoTrack:!0});let l=B.current;return l&&(l.on(u.Ay.Events.MANIFEST_PARSED,()=>{l.startLoad(0)}),l.attachMedia(e),l.loadSource(_.url)),()=>{if(B.current){var e;null==(e=B.current)||e.destroy()}}}},[null==_?void 0:_.url,L]);(0,v.useEffect)(()=>{if((null==_?void 0:_.url)&&P.current)return X(P.current)},[null==_?void 0:_.url,P,X]);let Z=(0,v.useCallback)(e=>{P.current=e,O&&J&&(W(g.W_.ActiveCameraRecording,e),D.current=!!e)},[O,J,W]),$=(0,v.useCallback)(e=>{O&&q&&A.url&&W(g.W_.ActiveVoiceover,e)},[O,null==A?void 0:A.url,q,W]),ee=(0,m.qM)(),{viewerMenuEnabled:el}=(0,h.B)(ee);if(!T&&!q)return null;let en=q||T&&(null==_?void 0:_.size)==="small"?"h-[6em] w-[6em]":T&&(null==_?void 0:_.size)==="large"?"h-[12em] w-[12em]":"h-[10em] w-[10em]",eo=O?t?K||"voiceover"===F.type?"opacity-100":"opacity-70":!(K||Q)||(null==_?void 0:_.audioOnly)||q||z?"opacity-0":"opacity-100":"opacity-0",et=e=>(0,a.cn)("absolute top-0 w-full h-full object-cover group !border-2 !border-white !border-solid transition-all duration-300 ease-jelly -scale-x-100",{invisible:null==_?void 0:_.audioOnly,"rounded-full":(null==_?void 0:_.shape)==="circle","rounded-[36%]":(null==_?void 0:_.shape)==="rounded","rounded-[20%]":(null==_?void 0:_.shape)==="square"},e),er=t&&C&&C>0,ea=t&&0===C;return(0,o.jsxs)("div",{ref:R,style:(0,y.O_)(y.Py.VoiceoverButton),className:(0,a.cn)("absolute flex items-center justify-center group bg-white cursor-pointer select-none ring-0 overflow-hidden shadow-camera z-max base-font-size",en,eo,{"rounded-full":(null==_?void 0:_.shape)==="circle"||q||(null==_?void 0:_.audioOnly),"rounded-[36%]":(null==_?void 0:_.shape)==="rounded"&&T&&!(null==_?void 0:_.audioOnly),"rounded-[20%]":(null==_?void 0:_.shape)==="square"&&T&&!(null==_?void 0:_.audioOnly),"top-[1em] left-[1em] right-auto bottom-auto":(null==_?void 0:_.placement)==="top-left"&&(null==_?void 0:_.enabled)&&!(null==A?void 0:A.enabled),"top-[1em] left-auto right-[1em] bottom-auto":(null==_?void 0:_.placement)==="top-right"&&!(null==A?void 0:A.enabled),"top-auto left-[1em] bottom-[1em] right-auto":((null==_?void 0:_.placement)==="bottom-left"||!(null==_?void 0:_.placement))&&(null==_?void 0:_.enabled)||(null==A?void 0:A.enabled)||void 0===(null==A?void 0:A.enabled)&&(null==A?void 0:A.url),"bottom-14":(((null==_?void 0:_.placement)==="bottom-left"||!(null==_?void 0:_.placement))&&(null==_?void 0:_.enabled)||(null==A?void 0:A.enabled)||void 0===(null==A?void 0:A.enabled)&&(null==A?void 0:A.url))&&el,"top-auto left-auto bottom-[1em] right-[1em]":(null==_?void 0:_.placement)==="bottom-right"&&!(null==A?void 0:A.enabled),"ring-2 ring-primary-action":t&&"voiceover"===F.type&&F.isOpen,"pointer-events-none":!t&&!Q||!O,"cursor-pointer":t&&O,"!bottom-14":S,"transition-all duration-300 ease-jelly":O}),onClick:e=>{t&&O&&(e.stopPropagation(),"voiceover"!==F.type&&(V({type:"voiceover",voiceover:{syntheticVoice:A,cameraRecording:_,countdown:null},isOpen:!0}),M.pause(),M.seek({source:g.W_.ActiveCameraRecording,frac:0})))},children:[t&&q&&(0,o.jsx)(s.A,{className:"h-[2.5em] w-[2.5em]"}),t&&T&&"voiceover"===F.type&&(0,o.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:[(0,o.jsx)("video",{ref:E,className:(0,a.cn)("absolute top-0 w-full h-full object-cover group border-2 border-white transition-all duration-300 ease-jelly -scale-x-100",{hidden:_.audioOnly,"rounded-full":(null==_?void 0:_.shape)==="circle","rounded-[36%]":(null==_?void 0:_.shape)==="rounded","rounded-[20%]":(null==_?void 0:_.shape)==="square"}),muted:!0}),_.audioOnly?(0,o.jsxs)("div",{className:(0,a.cn)("absolute"),children:[(0,o.jsx)(c.A,{className:" w-[2em] h-[2em] text-gray-600"}),ea?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"absolute animate-ping bg-red-600 rounded-full w-2.5 h-2.5 -top-2 -right-2"}),(0,o.jsx)("div",{className:"absolute bg-red-600 rounded-full w-2.5 h-2.5 -top-2 -right-2"})]}):null]}):null,H&&(0,o.jsx)(k.A,{type:x.M.Oval,color:r().white,secondaryColor:r().gray[50],strokeWidth:2,size:(null==(l=R.current)?void 0:l.clientWidth)?(null==(n=R.current)?void 0:n.clientWidth)-20:50,className:"opacity-75 w-full h-full bg-gray-900/30 z-max"})]}),T&&J&&!ea&&!er&&(0,o.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:[(0,o.jsx)("video",{ref:Z,src:_.url,preload:"metadata",controls:!1,playsInline:!0,poster:_.thumbnailUrl,className:et()}),t&&_.audioOnly?(0,o.jsx)(c.A,{className:(0,a.cn)("w-[2em] h-[2em] text-gray-600",{})}):null,Q?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(j.A,{src:"https://image.mux.com/".concat(G,"/animated.webp?fps=10&start=0&end=2"),alt:"Play voiceover",layout:"fill",objectFit:"cover",className:et("cursor-pointer")})}):null]}),q?(0,o.jsx)("video",{ref:$,src:A.url,className:"hidden",playsInline:!0,controls:!1,preload:"metadata"}):null,er?(0,o.jsx)("div",{className:(0,a.cn)("absolute inset-0 flex items-center justify-center w-full h-full bg-gray-900/30"),children:(0,o.jsx)("div",{className:"text-[2.25em] leading-[2.5em] font-semibold text-white ",children:C})}):null]})}},89361:(e,l,n)=>{n.d(l,{A:()=>a});var o,t=n(55729);function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}let a=function(e){return t.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e),o||(o=t.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12v1a8 8 0 1 1-16 0v-1m8 5a4 4 0 0 1-4-4V7a4 4 0 1 1 8 0v6a4 4 0 0 1-4 4",vectorEffect:"non-scaling-stroke"})))}}}]);